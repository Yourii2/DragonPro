var OD=Object.defineProperty;var MD=(e,t,a)=>t in e?OD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Ab=(e,t,a)=>MD(e,typeof t!="symbol"?t+"":t,a);function ID(e,t){for(var a=0;a<t.length;a++){const n=t[a];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();function ms(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ob={exports:{}},Pd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function PD(){if(T_)return Pd;T_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(n,i,o){var d=null;if(o!==void 0&&(d=""+o),i.key!==void 0&&(d=""+i.key),"key"in i){o={};for(var h in i)h!=="key"&&(o[h]=i[h])}else o=i;return i=o.ref,{$$typeof:e,type:n,key:d,ref:i!==void 0?i:null,props:o}}return Pd.Fragment=t,Pd.jsx=a,Pd.jsxs=a,Pd}var C_;function DD(){return C_||(C_=1,Ob.exports=PD()),Ob.exports}var r=DD(),Mb={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function LD(){if(A_)return Pt;A_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,_={};function k(D,U,re){this.props=D,this.context=U,this.refs=_,this.updater=re||N}k.prototype.isReactComponent={},k.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=k.prototype;function C(D,U,re){this.props=D,this.context=U,this.refs=_,this.updater=re||N}var S=C.prototype=new E;S.constructor=C,j(S,k.prototype),S.isPureReactComponent=!0;var O=Array.isArray;function I(){}var L={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function H(D,U,re){var he=re.ref;return{$$typeof:e,type:D,key:U,ref:he!==void 0?he:null,props:re}}function B(D,U){return H(D.type,U,D.props)}function X(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function V(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(re){return U[re]})}var le=/\/+/g;function J(D,U){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):U.toString(36)}function Z(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(I,I):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function M(D,U,re,he,Ne){var Y=typeof D;(Y==="undefined"||Y==="boolean")&&(D=null);var me=!1;if(D===null)me=!0;else switch(Y){case"bigint":case"string":case"number":me=!0;break;case"object":switch(D.$$typeof){case e:case t:me=!0;break;case f:return me=D._init,M(me(D._payload),U,re,he,Ne)}}if(me)return Ne=Ne(D),me=he===""?"."+J(D,0):he,O(Ne)?(re="",me!=null&&(re=me.replace(le,"$&/")+"/"),M(Ne,U,re,"",function(ye){return ye})):Ne!=null&&(X(Ne)&&(Ne=B(Ne,re+(Ne.key==null||D&&D.key===Ne.key?"":(""+Ne.key).replace(le,"$&/")+"/")+me)),U.push(Ne)),1;me=0;var z=he===""?".":he+":";if(O(D))for(var F=0;F<D.length;F++)he=D[F],Y=z+J(he,F),me+=M(he,U,re,Y,Ne);else if(F=v(D),typeof F=="function")for(D=F.call(D),F=0;!(he=D.next()).done;)he=he.value,Y=z+J(he,F++),me+=M(he,U,re,Y,Ne);else if(Y==="object"){if(typeof D.then=="function")return M(Z(D),U,re,he,Ne);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return me}function P(D,U,re){if(D==null)return D;var he=[],Ne=0;return M(D,he,"","",function(Y){return U.call(re,Y,Ne++)}),he}function W(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(re){(D._status===0||D._status===-1)&&(D._status=1,D._result=re)},function(re){(D._status===0||D._status===-1)&&(D._status=2,D._result=re)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ue={map:P,forEach:function(D,U,re){P(D,function(){U.apply(this,arguments)},re)},count:function(D){var U=0;return P(D,function(){U++}),U},toArray:function(D){return P(D,function(U){return U})||[]},only:function(D){if(!X(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Pt.Activity=x,Pt.Children=ue,Pt.Component=k,Pt.Fragment=a,Pt.Profiler=i,Pt.PureComponent=C,Pt.StrictMode=n,Pt.Suspense=m,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return L.H.useMemoCache(D)}},Pt.cache=function(D){return function(){return D.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(D,U,re){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var he=j({},D.props),Ne=D.key;if(U!=null)for(Y in U.key!==void 0&&(Ne=""+U.key),U)!te.call(U,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&U.ref===void 0||(he[Y]=U[Y]);var Y=arguments.length-2;if(Y===1)he.children=re;else if(1<Y){for(var me=Array(Y),z=0;z<Y;z++)me[z]=arguments[z+2];he.children=me}return H(D.type,Ne,he)},Pt.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Pt.createElement=function(D,U,re){var he,Ne={},Y=null;if(U!=null)for(he in U.key!==void 0&&(Y=""+U.key),U)te.call(U,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ne[he]=U[he]);var me=arguments.length-2;if(me===1)Ne.children=re;else if(1<me){for(var z=Array(me),F=0;F<me;F++)z[F]=arguments[F+2];Ne.children=z}if(D&&D.defaultProps)for(he in me=D.defaultProps,me)Ne[he]===void 0&&(Ne[he]=me[he]);return H(D,Y,Ne)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(D){return{$$typeof:h,render:D}},Pt.isValidElement=X,Pt.lazy=function(D){return{$$typeof:f,_payload:{_status:-1,_result:D},_init:W}},Pt.memo=function(D,U){return{$$typeof:u,type:D,compare:U===void 0?null:U}},Pt.startTransition=function(D){var U=L.T,re={};L.T=re;try{var he=D(),Ne=L.S;Ne!==null&&Ne(re,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(I,se)}catch(Y){se(Y)}finally{U!==null&&re.types!==null&&(U.types=re.types),L.T=U}},Pt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Pt.use=function(D){return L.H.use(D)},Pt.useActionState=function(D,U,re){return L.H.useActionState(D,U,re)},Pt.useCallback=function(D,U){return L.H.useCallback(D,U)},Pt.useContext=function(D){return L.H.useContext(D)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(D,U){return L.H.useDeferredValue(D,U)},Pt.useEffect=function(D,U){return L.H.useEffect(D,U)},Pt.useEffectEvent=function(D){return L.H.useEffectEvent(D)},Pt.useId=function(){return L.H.useId()},Pt.useImperativeHandle=function(D,U,re){return L.H.useImperativeHandle(D,U,re)},Pt.useInsertionEffect=function(D,U){return L.H.useInsertionEffect(D,U)},Pt.useLayoutEffect=function(D,U){return L.H.useLayoutEffect(D,U)},Pt.useMemo=function(D,U){return L.H.useMemo(D,U)},Pt.useOptimistic=function(D,U){return L.H.useOptimistic(D,U)},Pt.useReducer=function(D,U,re){return L.H.useReducer(D,U,re)},Pt.useRef=function(D){return L.H.useRef(D)},Pt.useState=function(D){return L.H.useState(D)},Pt.useSyncExternalStore=function(D,U,re){return L.H.useSyncExternalStore(D,U,re)},Pt.useTransition=function(){return L.H.useTransition()},Pt.version="19.2.4",Pt}var O_;function Dc(){return O_||(O_=1,Mb.exports=LD()),Mb.exports}var g=Dc();const _c=ms(g),RD=ID({__proto__:null,default:_c},[g]);var Ib={exports:{}},Dd={},Pb={exports:{}},Db={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function $D(){return M_||(M_=1,(function(e){function t(M,P){var W=M.length;M.push(P);e:for(;0<W;){var se=W-1>>>1,ue=M[se];if(0<i(ue,P))M[se]=P,M[W]=ue,W=se;else break e}}function a(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var P=M[0],W=M.pop();if(W!==P){M[0]=W;e:for(var se=0,ue=M.length,D=ue>>>1;se<D;){var U=2*(se+1)-1,re=M[U],he=U+1,Ne=M[he];if(0>i(re,W))he<ue&&0>i(Ne,re)?(M[se]=Ne,M[he]=W,se=he):(M[se]=re,M[U]=W,se=U);else if(he<ue&&0>i(Ne,W))M[se]=Ne,M[he]=W,se=he;else break e}}return P}function i(M,P){var W=M.sortIndex-P.sortIndex;return W!==0?W:M.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var m=[],u=[],f=1,x=null,b=3,v=!1,N=!1,j=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function S(M){for(var P=a(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=M)n(u),P.sortIndex=P.expirationTime,t(m,P);else break;P=a(u)}}function O(M){if(j=!1,S(M),!N)if(a(m)!==null)N=!0,I||(I=!0,V());else{var P=a(u);P!==null&&Z(O,P.startTime-M)}}var I=!1,L=-1,te=5,H=-1;function B(){return _?!0:!(e.unstable_now()-H<te)}function X(){if(_=!1,I){var M=e.unstable_now();H=M;var P=!0;try{e:{N=!1,j&&(j=!1,E(L),L=-1),v=!0;var W=b;try{t:{for(S(M),x=a(m);x!==null&&!(x.expirationTime>M&&B());){var se=x.callback;if(typeof se=="function"){x.callback=null,b=x.priorityLevel;var ue=se(x.expirationTime<=M);if(M=e.unstable_now(),typeof ue=="function"){x.callback=ue,S(M),P=!0;break t}x===a(m)&&n(m),S(M)}else n(m);x=a(m)}if(x!==null)P=!0;else{var D=a(u);D!==null&&Z(O,D.startTime-M),P=!1}}break e}finally{x=null,b=W,v=!1}P=void 0}}finally{P?V():I=!1}}}var V;if(typeof C=="function")V=function(){C(X)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,J=le.port2;le.port1.onmessage=X,V=function(){J.postMessage(null)}}else V=function(){k(X,0)};function Z(M,P){L=k(function(){M(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(M){switch(b){case 1:case 2:case 3:var P=3;break;default:P=b}var W=b;b=P;try{return M()}finally{b=W}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(M,P){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=b;b=M;try{return P()}finally{b=W}},e.unstable_scheduleCallback=function(M,P,W){var se=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?se+W:se):W=se,M){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=W+ue,M={id:f++,callback:P,priorityLevel:M,startTime:W,expirationTime:ue,sortIndex:-1},W>se?(M.sortIndex=W,t(u,M),a(m)===null&&M===a(u)&&(j?(E(L),L=-1):j=!0,Z(O,W-se))):(M.sortIndex=ue,t(m,M),N||v||(N=!0,I||(I=!0,V()))),M},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(M){var P=b;return function(){var W=b;b=P;try{return M.apply(this,arguments)}finally{b=W}}}})(Db)),Db}var I_;function zD(){return I_||(I_=1,Pb.exports=$D()),Pb.exports}var Lb={exports:{}},za={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function BD(){if(P_)return za;P_=1;var e=Dc();function t(m){var u="https://react.dev/errors/"+m;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+m+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var n={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(m,u,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:x==null?null:""+x,children:m,containerInfo:u,implementation:f}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,u){if(m==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return za.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,za.createPortal=function(m,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(m,u,null,f)},za.flushSync=function(m){var u=d.T,f=n.p;try{if(d.T=null,n.p=2,m)return m()}finally{d.T=u,n.p=f,n.d.f()}},za.preconnect=function(m,u){typeof m=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(m,u))},za.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},za.preinit=function(m,u){if(typeof m=="string"&&u&&typeof u.as=="string"){var f=u.as,x=h(f,u.crossOrigin),b=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?n.d.S(m,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:v}):f==="script"&&n.d.X(m,{crossOrigin:x,integrity:b,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},za.preinitModule=function(m,u){if(typeof m=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=h(u.as,u.crossOrigin);n.d.M(m,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(m)},za.preload=function(m,u){if(typeof m=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,x=h(f,u.crossOrigin);n.d.L(m,f,{crossOrigin:x,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},za.preloadModule=function(m,u){if(typeof m=="string")if(u){var f=h(u.as,u.crossOrigin);n.d.m(m,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(m)},za.requestFormReset=function(m){n.d.r(m)},za.unstable_batchedUpdates=function(m,u){return m(u)},za.useFormState=function(m,u,f){return d.H.useFormState(m,u,f)},za.useFormStatus=function(){return d.H.useHostTransitionStatus()},za.version="19.2.4",za}var D_;function fO(){if(D_)return Lb.exports;D_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lb.exports=BD(),Lb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function UD(){if(L_)return Dd;L_=1;var e=zD(),t=Dc(),a=fO();function n(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,c=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(c=l.return),s=l.return;while(s)}return l.tag===3?c:null}function d(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function m(s){if(o(s)!==s)throw Error(n(188))}function u(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(n(188));return l!==s?null:s}for(var c=s,p=l;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return m(y),s;if(w===p)return m(y),l;w=w.sibling}throw Error(n(188))}if(c.return!==p.return)c=y,p=w;else{for(var A=!1,K=y.child;K;){if(K===c){A=!0,c=y,p=w;break}if(K===p){A=!0,p=y,c=w;break}K=K.sibling}if(!A){for(K=w.child;K;){if(K===c){A=!0,c=w,p=y;break}if(K===p){A=!0,p=w,c=y;break}K=K.sibling}if(!A)throw Error(n(189))}}if(c.alternate!==p)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:l}function f(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=f(s),l!==null)return l;s=s.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var le=Symbol.for("react.client.reference");function J(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===le?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case k:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case C:return s.displayName||"Context";case E:return(s._context.displayName||"Context")+".Consumer";case S:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return l=s.displayName||null,l!==null?l:J(s.type)||"Memo";case te:l=s._payload,s=s._init;try{return J(s(l))}catch{}}return null}var Z=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},se=[],ue=-1;function D(s){return{current:s}}function U(s){0>ue||(s.current=se[ue],se[ue]=null,ue--)}function re(s,l){ue++,se[ue]=s.current,s.current=l}var he=D(null),Ne=D(null),Y=D(null),me=D(null);function z(s,l){switch(re(Y,l),re(Ne,s),re(he,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?J2(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=J2(l),s=Z2(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}U(he),re(he,s)}function F(){U(he),U(Ne),U(Y)}function ye(s){s.memoizedState!==null&&re(me,s);var l=he.current,c=Z2(l,s.type);l!==c&&(re(Ne,s),re(he,c))}function Ae(s){Ne.current===s&&(U(he),U(Ne)),me.current===s&&(U(me),Ad._currentValue=W)}var be,Me;function Oe(s){if(be===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);be=l&&l[1]||"",Me=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+s+Me}var ve=!1;function $(s,l){if(!s||ve)return"";ve=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Fe){var ze=Fe}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Fe){ze=Fe}s.call(Qe.prototype)}}else{try{throw Error()}catch(Fe){ze=Fe}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Fe){if(Fe&&ze&&typeof Fe.stack=="string")return[Fe.stack,ze.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=p.DetermineComponentFrameRoot(),A=w[0],K=w[1];if(A&&K){var ge=A.split(`
`),Le=K.split(`
`);for(y=p=0;p<ge.length&&!ge[p].includes("DetermineComponentFrameRoot");)p++;for(;y<Le.length&&!Le[y].includes("DetermineComponentFrameRoot");)y++;if(p===ge.length||y===Le.length)for(p=ge.length-1,y=Le.length-1;1<=p&&0<=y&&ge[p]!==Le[y];)y--;for(;1<=p&&0<=y;p--,y--)if(ge[p]!==Le[y]){if(p!==1||y!==1)do if(p--,y--,0>y||ge[p]!==Le[y]){var Ve=`
`+ge[p].replace(" at new "," at ");return s.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",s.displayName)),Ve}while(1<=p&&0<=y);break}}}finally{ve=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Oe(c):""}function ce(s,l){switch(s.tag){case 26:case 27:case 5:return Oe(s.type);case 16:return Oe("Lazy");case 13:return s.child!==l&&l!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return $(s.type,!1);case 11:return $(s.type.render,!1);case 1:return $(s.type,!0);case 31:return Oe("Activity");default:return""}}function ie(s){try{var l="",c=null;do l+=ce(s,c),c=s,s=s.return;while(s);return l}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var oe=Object.prototype.hasOwnProperty,$e=e.unstable_scheduleCallback,Xe=e.unstable_cancelCallback,et=e.unstable_shouldYield,nt=e.unstable_requestPaint,je=e.unstable_now,lt=e.unstable_getCurrentPriorityLevel,pt=e.unstable_ImmediatePriority,ae=e.unstable_UserBlockingPriority,tt=e.unstable_NormalPriority,ne=e.unstable_LowPriority,Ee=e.unstable_IdlePriority,rt=e.log,Je=e.unstable_setDisableYieldValue,st=null,Ze=null;function ct(s){if(typeof rt=="function"&&Je(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(st,s)}catch{}}var ht=Math.clz32?Math.clz32:de,Re=Math.log,xe=Math.LN2;function de(s){return s>>>=0,s===0?32:31-(Re(s)/xe|0)|0}var it=256,ft=262144,jt=4194304;function mt(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function we(s,l,c){var p=s.pendingLanes;if(p===0)return 0;var y=0,w=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var K=p&134217727;return K!==0?(p=K&~w,p!==0?y=mt(p):(A&=K,A!==0?y=mt(A):c||(c=K&~s,c!==0&&(y=mt(c))))):(K=p&~w,K!==0?y=mt(K):A!==0?y=mt(A):c||(c=p&~s,c!==0&&(y=mt(c)))),y===0?0:l!==0&&l!==y&&(l&w)===0&&(w=y&-y,c=l&-l,w>=c||w===32&&(c&4194048)!==0)?l:y}function Be(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function gt(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var s=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),s}function xt(s){for(var l=[],c=0;31>c;c++)l.push(s);return l}function St(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function $t(s,l,c,p,y,w){var A=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var K=s.entanglements,ge=s.expirationTimes,Le=s.hiddenUpdates;for(c=A&~c;0<c;){var Ve=31-ht(c),Qe=1<<Ve;K[Ve]=0,ge[Ve]=-1;var ze=Le[Ve];if(ze!==null)for(Le[Ve]=null,Ve=0;Ve<ze.length;Ve++){var Fe=ze[Ve];Fe!==null&&(Fe.lane&=-536870913)}c&=~Qe}p!==0&&Rr(s,p,0),w!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=w&~(A&~l))}function Rr(s,l,c){s.pendingLanes|=l,s.suspendedLanes&=~l;var p=31-ht(l);s.entangledLanes|=l,s.entanglements[p]=s.entanglements[p]|1073741824|c&261930}function kr(s,l){var c=s.entangledLanes|=l;for(s=s.entanglements;c;){var p=31-ht(c),y=1<<p;y&l|s[p]&l&&(s[p]|=l),c&=~y}}function pe(s,l){var c=l&-l;return c=(c&42)!==0?1:ut(c),(c&(s.suspendedLanes|l))!==0?0:c}function ut(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ee(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ke(){var s=P.p;return s!==0?s:(s=window.event,s===void 0?32:j_(s.type))}function Ce(s,l){var c=P.p;try{return P.p=s,l()}finally{P.p=c}}var He=Math.random().toString(36).slice(2),Ge="__reactFiber$"+He,ot="__reactProps$"+He,at="__reactContainer$"+He,Mt="__reactEvents$"+He,qt="__reactListeners$"+He,ta="__reactHandles$"+He,sr="__reactResources$"+He,jr="__reactMarker$"+He;function xr(s){delete s[Ge],delete s[ot],delete s[Mt],delete s[qt],delete s[ta]}function Ft(s){var l=s[Ge];if(l)return l;for(var c=s.parentNode;c;){if(l=c[at]||c[Ge]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(s=s_(s);s!==null;){if(c=s[Ge])return c;s=s_(s)}return l}s=c,c=s.parentNode}return null}function cr(s){if(s=s[Ge]||s[at]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function br(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(n(33))}function Ta(s){var l=s[sr];return l||(l=s[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Sr(s){s[jr]=!0}var Xt=new Set,zn={};function xn(s,l){bn(s,l),bn(s+"Capture",l)}function bn(s,l){for(zn[s]=l,s=0;s<l.length;s++)Xt.add(l[s])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),To={},Co={};function tn(s){return oe.call(Co,s)?!0:oe.call(To,s)?!1:Eo.test(s)?Co[s]=!0:(To[s]=!0,!1)}function Bs(s,l,c){if(tn(l))if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var p=l.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+c)}}function Us(s,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+c)}}function gn(s,l,c,p){if(p===null)s.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(l,c,""+p)}}function Ra(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ao(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function qs(s,l,c){var p=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,w=p.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(A){c=""+A,w.call(this,A)}}),Object.defineProperty(s,l,{enumerable:p.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function yi(s){if(!s._valueTracker){var l=Ao(s)?"checked":"value";s._valueTracker=qs(s,l,""+s[l])}}function Oo(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var c=l.getValue(),p="";return s&&(p=Ao(s)?s.checked?"true":"false":s.value),s=p,s!==c?(l.setValue(s),!0):!1}function vn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Fs=/[\n"\\]/g;function $a(s){return s.replace(Fs,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Hs(s,l,c,p,y,w,A,K){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),l!=null?A==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Ra(l)):s.value!==""+Ra(l)&&(s.value=""+Ra(l)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),l!=null?ji(s,A,Ra(l)):c!=null?ji(s,A,Ra(c)):p!=null&&s.removeAttribute("value"),y==null&&w!=null&&(s.defaultChecked=!!w),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?s.name=""+Ra(K):s.removeAttribute("name")}function Mo(s,l,c,p,y,w,A,K){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.type=w),l!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){yi(s);return}c=c!=null?""+Ra(c):"",l=l!=null?""+Ra(l):c,K||l===s.value||(s.value=l),s.defaultValue=l}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=K?s.checked:!!p,s.defaultChecked=!!p,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),yi(s)}function ji(s,l,c){l==="number"&&vn(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ka(s,l,c,p){if(s=s.options,l){l={};for(var y=0;y<c.length;y++)l["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=l.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&p&&(s[c].defaultSelected=!0)}else{for(c=""+Ra(c),l=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,p&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Ni(s,l,c){if(l!=null&&(l=""+Ra(l),l!==s.value&&(s.value=l),c==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=c!=null?""+Ra(c):""}function wi(s,l,c,p){if(l==null){if(p!=null){if(c!=null)throw Error(n(92));if(Z(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),l=c}c=Ra(l),s.defaultValue=c,p=s.textContent,p===c&&p!==""&&p!==null&&(s.value=p),yi(s)}function xs(s,l){if(l){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=l;return}}s.textContent=l}var Io=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _i(s,l,c){var p=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?p?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":p?s.setProperty(l,c):typeof c!="number"||c===0||Io.has(l)?l==="float"?s.cssFloat=c:s[l]=(""+c).trim():s[l]=c+"px"}function R(s,l,c){if(l!=null&&typeof l!="object")throw Error(n(62));if(s=s.style,c!=null){for(var p in c)!c.hasOwnProperty(p)||l!=null&&l.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var y in l)p=l[y],l.hasOwnProperty(y)&&c[y]!==p&&_i(s,y,p)}else for(var w in l)l.hasOwnProperty(w)&&_i(s,w,l[w])}function fe(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ue=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),q=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Q(s){return q.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Se(){}var De=null;function qe(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ke=null,bt=null;function $r(s){var l=cr(s);if(l&&(s=l.stateNode)){var c=s[ot]||null;e:switch(s=l.stateNode,l.type){case"input":if(Hs(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+$a(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var p=c[l];if(p!==s&&p.form===s.form){var y=p[ot]||null;if(!y)throw Error(n(90));Hs(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<c.length;l++)p=c[l],p.form===s.form&&Oo(p)}break e;case"textarea":Ni(s,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Ka(s,!!c.multiple,l,!1)}}}var Dt=!1;function Ct(s,l,c){if(Dt)return s(l,c);Dt=!0;try{var p=s(l);return p}finally{if(Dt=!1,(Ke!==null||bt!==null)&&(Df(),Ke&&(l=Ke,s=bt,bt=Ke=null,$r(l),s)))for(l=0;l<s.length;l++)$r(s[l])}}function Wt(s,l){var c=s.stateNode;if(c===null)return null;var p=c[ot]||null;if(p===null)return null;c=p[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,l,typeof c));return c}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kt=!1;if(dr)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Kt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{Kt=!1}var Ot=null,zr=null,Er=null;function Wr(){if(Er)return Er;var s,l=zr,c=l.length,p,y="value"in Ot?Ot.value:Ot.textContent,w=y.length;for(s=0;s<c&&l[s]===y[s];s++);var A=c-s;for(p=1;p<=A&&l[c-p]===y[w-p];p++);return Er=y.slice(s,1<p?1-p:void 0)}function Ca(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Aa(){return!0}function rs(){return!1}function Nr(s){function l(c,p,y,w,A){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=A,this.currentTarget=null;for(var K in s)s.hasOwnProperty(K)&&(c=s[K],this[K]=c?c(w):w[K]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Aa:rs,this.isPropagationStopped=rs,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),l}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=Nr(ra),as=x({},ra,{view:0,detail:0}),Ml=Nr(as),ki,Ix,Wc,Zu=x({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dx,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Wc&&(Wc&&s.type==="mousemove"?(ki=s.screenX-Wc.screenX,Ix=s.screenY-Wc.screenY):Ix=ki=0,Wc=s),ki)},movementY:function(s){return"movementY"in s?s.movementY:Ix}}),ew=Nr(Zu),AI=x({},Zu,{dataTransfer:0}),OI=Nr(AI),MI=x({},as,{relatedTarget:0}),Px=Nr(MI),II=x({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),PI=Nr(II),DI=x({},ra,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),LI=Nr(DI),RI=x({},ra,{data:0}),tw=Nr(RI),$I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UI(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=BI[s])?!!l[s]:!1}function Dx(){return UI}var qI=x({},as,{key:function(s){if(s.key){var l=$I[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?zI[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dx,charCode:function(s){return s.type==="keypress"?Ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),FI=Nr(qI),HI=x({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rw=Nr(HI),YI=x({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dx}),KI=Nr(YI),VI=x({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),GI=Nr(VI),XI=x({},Zu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=Nr(XI),JI=x({},ra,{newState:0,oldState:0}),ZI=Nr(JI),QI=[9,13,27,32],Lx=dr&&"CompositionEvent"in window,Jc=null;dr&&"documentMode"in document&&(Jc=document.documentMode);var eP=dr&&"TextEvent"in window&&!Jc,aw=dr&&(!Lx||Jc&&8<Jc&&11>=Jc),nw=" ",sw=!1;function lw(s,l){switch(s){case"keyup":return QI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Po=!1;function tP(s,l){switch(s){case"compositionend":return iw(l);case"keypress":return l.which!==32?null:(sw=!0,nw);case"textInput":return s=l.data,s===nw&&sw?null:s;default:return null}}function rP(s,l){if(Po)return s==="compositionend"||!Lx&&lw(s,l)?(s=Wr(),Er=zr=Ot=null,Po=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return aw&&l.locale!=="ko"?null:l.data;default:return null}}var aP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ow(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!aP[s.type]:l==="textarea"}function cw(s,l,c,p){Ke?bt?bt.push(p):bt=[p]:Ke=p,l=qf(l,"onChange"),0<l.length&&(c=new rn("onChange","change",null,c,p),s.push({event:c,listeners:l}))}var Zc=null,Qc=null;function nP(s){Y2(s,0)}function Qu(s){var l=br(s);if(Oo(l))return s}function dw(s,l){if(s==="change")return l}var uw=!1;if(dr){var Rx;if(dr){var $x="oninput"in document;if(!$x){var fw=document.createElement("div");fw.setAttribute("oninput","return;"),$x=typeof fw.oninput=="function"}Rx=$x}else Rx=!1;uw=Rx&&(!document.documentMode||9<document.documentMode)}function hw(){Zc&&(Zc.detachEvent("onpropertychange",mw),Qc=Zc=null)}function mw(s){if(s.propertyName==="value"&&Qu(Qc)){var l=[];cw(l,Qc,s,qe(s)),Ct(nP,l)}}function sP(s,l,c){s==="focusin"?(hw(),Zc=l,Qc=c,Zc.attachEvent("onpropertychange",mw)):s==="focusout"&&hw()}function lP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qu(Qc)}function iP(s,l){if(s==="click")return Qu(l)}function oP(s,l){if(s==="input"||s==="change")return Qu(l)}function cP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var yn=typeof Object.is=="function"?Object.is:cP;function ed(s,l){if(yn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var c=Object.keys(s),p=Object.keys(l);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!oe.call(l,y)||!yn(s[y],l[y]))return!1}return!0}function pw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function xw(s,l){var c=pw(s);s=0;for(var p;c;){if(c.nodeType===3){if(p=s+c.textContent.length,s<=l&&p>=l)return{node:c,offset:l-s};s=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pw(c)}}function bw(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?bw(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function gw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=vn(s.document);l instanceof s.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)s=l.contentWindow;else break;l=vn(s.document)}return l}function zx(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var dP=dr&&"documentMode"in document&&11>=document.documentMode,Do=null,Bx=null,td=null,Ux=!1;function vw(s,l,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ux||Do==null||Do!==vn(p)||(p=Do,"selectionStart"in p&&zx(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),td&&ed(td,p)||(td=p,p=qf(Bx,"onSelect"),0<p.length&&(l=new rn("onSelect","select",null,l,c),s.push({event:l,listeners:p}),l.target=Do)))}function Si(s,l){var c={};return c[s.toLowerCase()]=l.toLowerCase(),c["Webkit"+s]="webkit"+l,c["Moz"+s]="moz"+l,c}var Lo={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},qx={},yw={};dr&&(yw=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Ei(s){if(qx[s])return qx[s];if(!Lo[s])return s;var l=Lo[s],c;for(c in l)if(l.hasOwnProperty(c)&&c in yw)return qx[s]=l[c];return s}var jw=Ei("animationend"),Nw=Ei("animationiteration"),ww=Ei("animationstart"),uP=Ei("transitionrun"),fP=Ei("transitionstart"),hP=Ei("transitioncancel"),_w=Ei("transitionend"),kw=new Map,Fx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fx.push("scrollEnd");function ns(s,l){kw.set(s,l),xn(l,[s])}var ef=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Bn=[],Ro=0,Hx=0;function tf(){for(var s=Ro,l=Hx=Ro=0;l<s;){var c=Bn[l];Bn[l++]=null;var p=Bn[l];Bn[l++]=null;var y=Bn[l];Bn[l++]=null;var w=Bn[l];if(Bn[l++]=null,p!==null&&y!==null){var A=p.pending;A===null?y.next=y:(y.next=A.next,A.next=y),p.pending=y}w!==0&&Sw(c,y,w)}}function rf(s,l,c,p){Bn[Ro++]=s,Bn[Ro++]=l,Bn[Ro++]=c,Bn[Ro++]=p,Hx|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function Yx(s,l,c,p){return rf(s,l,c,p),af(s)}function Ti(s,l){return rf(s,null,null,l),af(s)}function Sw(s,l,c){s.lanes|=c;var p=s.alternate;p!==null&&(p.lanes|=c);for(var y=!1,w=s.return;w!==null;)w.childLanes|=c,p=w.alternate,p!==null&&(p.childLanes|=c),w.tag===22&&(s=w.stateNode,s===null||s._visibility&1||(y=!0)),s=w,w=w.return;return s.tag===3?(w=s.stateNode,y&&l!==null&&(y=31-ht(c),s=w.hiddenUpdates,p=s[y],p===null?s[y]=[l]:p.push(l),l.lane=c|536870912),w):null}function af(s){if(50<wd)throw wd=0,eb=null,Error(n(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var $o={};function mP(s,l,c,p){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(s,l,c,p){return new mP(s,l,c,p)}function Kx(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ys(s,l){var c=s.alternate;return c===null?(c=jn(s.tag,l,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=l,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,l=s.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Ew(s,l){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,l=c.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function nf(s,l,c,p,y,w){var A=0;if(p=s,typeof s=="function")Kx(s)&&(A=1);else if(typeof s=="string")A=vD(s,c,he.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=jn(31,c,l,y),s.elementType=H,s.lanes=w,s;case j:return Ci(c.children,y,w,l);case _:A=8,y|=24;break;case k:return s=jn(12,c,l,y|2),s.elementType=k,s.lanes=w,s;case O:return s=jn(13,c,l,y),s.elementType=O,s.lanes=w,s;case I:return s=jn(19,c,l,y),s.elementType=I,s.lanes=w,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:A=10;break e;case E:A=9;break e;case S:A=11;break e;case L:A=14;break e;case te:A=16,p=null;break e}A=29,c=Error(n(130,s===null?"null":typeof s,"")),p=null}return l=jn(A,c,l,y),l.elementType=s,l.type=p,l.lanes=w,l}function Ci(s,l,c,p){return s=jn(7,s,p,l),s.lanes=c,s}function Vx(s,l,c){return s=jn(6,s,null,l),s.lanes=c,s}function Tw(s){var l=jn(18,null,null,0);return l.stateNode=s,l}function Gx(s,l,c){return l=jn(4,s.children!==null?s.children:[],s.key,l),l.lanes=c,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Cw=new WeakMap;function Un(s,l){if(typeof s=="object"&&s!==null){var c=Cw.get(s);return c!==void 0?c:(l={value:s,source:l,stack:ie(l)},Cw.set(s,l),l)}return{value:s,source:l,stack:ie(l)}}var zo=[],Bo=0,sf=null,rd=0,qn=[],Fn=0,Il=null,bs=1,gs="";function Ks(s,l){zo[Bo++]=rd,zo[Bo++]=sf,sf=s,rd=l}function Aw(s,l,c){qn[Fn++]=bs,qn[Fn++]=gs,qn[Fn++]=Il,Il=s;var p=bs;s=gs;var y=32-ht(p)-1;p&=~(1<<y),c+=1;var w=32-ht(l)+y;if(30<w){var A=y-y%5;w=(p&(1<<A)-1).toString(32),p>>=A,y-=A,bs=1<<32-ht(l)+y|c<<y|p,gs=w+s}else bs=1<<w|c<<y|p,gs=s}function Xx(s){s.return!==null&&(Ks(s,1),Aw(s,1,0))}function Wx(s){for(;s===sf;)sf=zo[--Bo],zo[Bo]=null,rd=zo[--Bo],zo[Bo]=null;for(;s===Il;)Il=qn[--Fn],qn[Fn]=null,gs=qn[--Fn],qn[Fn]=null,bs=qn[--Fn],qn[Fn]=null}function Ow(s,l){qn[Fn++]=bs,qn[Fn++]=gs,qn[Fn++]=Il,bs=l.id,gs=l.overflow,Il=s}var Oa=null,Tr=null,Vt=!1,Pl=null,Hn=!1,Jx=Error(n(519));function Dl(s){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ad(Un(l,s)),Jx}function Mw(s){var l=s.stateNode,c=s.type,p=s.memoizedProps;switch(l[Ge]=s,l[ot]=p,c){case"dialog":Ut("cancel",l),Ut("close",l);break;case"iframe":case"object":case"embed":Ut("load",l);break;case"video":case"audio":for(c=0;c<kd.length;c++)Ut(kd[c],l);break;case"source":Ut("error",l);break;case"img":case"image":case"link":Ut("error",l),Ut("load",l);break;case"details":Ut("toggle",l);break;case"input":Ut("invalid",l),Mo(l,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Ut("invalid",l);break;case"textarea":Ut("invalid",l),wi(l,p.value,p.defaultValue,p.children)}c=p.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||p.suppressHydrationWarning===!0||X2(l.textContent,c)?(p.popover!=null&&(Ut("beforetoggle",l),Ut("toggle",l)),p.onScroll!=null&&Ut("scroll",l),p.onScrollEnd!=null&&Ut("scrollend",l),p.onClick!=null&&(l.onclick=Se),l=!0):l=!1,l||Dl(s,!0)}function Iw(s){for(Oa=s.return;Oa;)switch(Oa.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Oa=Oa.return}}function Uo(s){if(s!==Oa)return!1;if(!Vt)return Iw(s),Vt=!0,!1;var l=s.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||pb(s.type,s.memoizedProps)),c=!c),c&&Tr&&Dl(s),Iw(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Tr=n_(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Tr=n_(s)}else l===27?(l=Tr,Xl(s.type)?(s=yb,yb=null,Tr=s):Tr=l):Tr=Oa?Kn(s.stateNode.nextSibling):null;return!0}function Ai(){Tr=Oa=null,Vt=!1}function Zx(){var s=Pl;return s!==null&&(ln===null?ln=s:ln.push.apply(ln,s),Pl=null),s}function ad(s){Pl===null?Pl=[s]:Pl.push(s)}var Qx=D(null),Oi=null,Vs=null;function Ll(s,l,c){re(Qx,l._currentValue),l._currentValue=c}function Gs(s){s._currentValue=Qx.current,U(Qx)}function e0(s,l,c){for(;s!==null;){var p=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,p!==null&&(p.childLanes|=l)):p!==null&&(p.childLanes&l)!==l&&(p.childLanes|=l),s===c)break;s=s.return}}function t0(s,l,c,p){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var w=y.dependencies;if(w!==null){var A=y.child;w=w.firstContext;e:for(;w!==null;){var K=w;w=y;for(var ge=0;ge<l.length;ge++)if(K.context===l[ge]){w.lanes|=c,K=w.alternate,K!==null&&(K.lanes|=c),e0(w.return,c,s),p||(A=null);break e}w=K.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(n(341));A.lanes|=c,w=A.alternate,w!==null&&(w.lanes|=c),e0(A,c,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function qo(s,l,c,p){s=null;for(var y=l,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var K=y.type;yn(y.pendingProps.value,A.value)||(s!==null?s.push(K):s=[K])}}else if(y===me.current){if(A=y.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Ad):s=[Ad])}y=y.return}s!==null&&t0(l,s,c,p),l.flags|=262144}function lf(s){for(s=s.firstContext;s!==null;){if(!yn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Mi(s){Oi=s,Vs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ma(s){return Pw(Oi,s)}function of(s,l){return Oi===null&&Mi(s),Pw(s,l)}function Pw(s,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Vs===null){if(s===null)throw Error(n(308));Vs=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Vs=Vs.next=l;return c}var pP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(c,p){s.push(p)}};this.abort=function(){l.aborted=!0,s.forEach(function(c){return c()})}},xP=e.unstable_scheduleCallback,bP=e.unstable_NormalPriority,aa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r0(){return{controller:new pP,data:new Map,refCount:0}}function nd(s){s.refCount--,s.refCount===0&&xP(bP,function(){s.controller.abort()})}var sd=null,a0=0,Fo=0,Ho=null;function gP(s,l){if(sd===null){var c=sd=[];a0=0,Fo=lb(),Ho={status:"pending",value:void 0,then:function(p){c.push(p)}}}return a0++,l.then(Dw,Dw),l}function Dw(){if(--a0===0&&sd!==null){Ho!==null&&(Ho.status="fulfilled");var s=sd;sd=null,Fo=0,Ho=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function vP(s,l){var c=[],p={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return s.then(function(){p.status="fulfilled",p.value=l;for(var y=0;y<c.length;y++)(0,c[y])(l)},function(y){for(p.status="rejected",p.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),p}var Lw=M.S;M.S=function(s,l){v2=je(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&gP(s,l),Lw!==null&&Lw(s,l)};var Ii=D(null);function n0(){var s=Ii.current;return s!==null?s:gr.pooledCache}function cf(s,l){l===null?re(Ii,Ii.current):re(Ii,l.pool)}function Rw(){var s=n0();return s===null?null:{parent:aa._currentValue,pool:s}}var Yo=Error(n(460)),s0=Error(n(474)),df=Error(n(542)),uf={then:function(){}};function $w(s){return s=s.status,s==="fulfilled"||s==="rejected"}function zw(s,l,c){switch(c=s[c],c===void 0?s.push(l):c!==l&&(l.then(Se,Se),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Uw(s),s;default:if(typeof l.status=="string")l.then(Se,Se);else{if(s=gr,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=l,s.status="pending",s.then(function(p){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=p}},function(p){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=p}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Uw(s),s}throw Di=l,Yo}}function Pi(s){try{var l=s._init;return l(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Di=c,Yo):c}}var Di=null;function Bw(){if(Di===null)throw Error(n(459));var s=Di;return Di=null,s}function Uw(s){if(s===Yo||s===df)throw Error(n(483))}var Ko=null,ld=0;function ff(s){var l=ld;return ld+=1,Ko===null&&(Ko=[]),zw(Ko,s,l)}function id(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function hf(s,l){throw l.$$typeof===b?Error(n(525)):(s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function qw(s){function l(Te,_e){if(s){var Pe=Te.deletions;Pe===null?(Te.deletions=[_e],Te.flags|=16):Pe.push(_e)}}function c(Te,_e){if(!s)return null;for(;_e!==null;)l(Te,_e),_e=_e.sibling;return null}function p(Te){for(var _e=new Map;Te!==null;)Te.key!==null?_e.set(Te.key,Te):_e.set(Te.index,Te),Te=Te.sibling;return _e}function y(Te,_e){return Te=Ys(Te,_e),Te.index=0,Te.sibling=null,Te}function w(Te,_e,Pe){return Te.index=Pe,s?(Pe=Te.alternate,Pe!==null?(Pe=Pe.index,Pe<_e?(Te.flags|=67108866,_e):Pe):(Te.flags|=67108866,_e)):(Te.flags|=1048576,_e)}function A(Te){return s&&Te.alternate===null&&(Te.flags|=67108866),Te}function K(Te,_e,Pe,We){return _e===null||_e.tag!==6?(_e=Vx(Pe,Te.mode,We),_e.return=Te,_e):(_e=y(_e,Pe),_e.return=Te,_e)}function ge(Te,_e,Pe,We){var Tt=Pe.type;return Tt===j?Ve(Te,_e,Pe.props.children,We,Pe.key):_e!==null&&(_e.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===te&&Pi(Tt)===_e.type)?(_e=y(_e,Pe.props),id(_e,Pe),_e.return=Te,_e):(_e=nf(Pe.type,Pe.key,Pe.props,null,Te.mode,We),id(_e,Pe),_e.return=Te,_e)}function Le(Te,_e,Pe,We){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Pe.containerInfo||_e.stateNode.implementation!==Pe.implementation?(_e=Gx(Pe,Te.mode,We),_e.return=Te,_e):(_e=y(_e,Pe.children||[]),_e.return=Te,_e)}function Ve(Te,_e,Pe,We,Tt){return _e===null||_e.tag!==7?(_e=Ci(Pe,Te.mode,We,Tt),_e.return=Te,_e):(_e=y(_e,Pe),_e.return=Te,_e)}function Qe(Te,_e,Pe){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=Vx(""+_e,Te.mode,Pe),_e.return=Te,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case v:return Pe=nf(_e.type,_e.key,_e.props,null,Te.mode,Pe),id(Pe,_e),Pe.return=Te,Pe;case N:return _e=Gx(_e,Te.mode,Pe),_e.return=Te,_e;case te:return _e=Pi(_e),Qe(Te,_e,Pe)}if(Z(_e)||V(_e))return _e=Ci(_e,Te.mode,Pe,null),_e.return=Te,_e;if(typeof _e.then=="function")return Qe(Te,ff(_e),Pe);if(_e.$$typeof===C)return Qe(Te,of(Te,_e),Pe);hf(Te,_e)}return null}function ze(Te,_e,Pe,We){var Tt=_e!==null?_e.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Tt!==null?null:K(Te,_e,""+Pe,We);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case v:return Pe.key===Tt?ge(Te,_e,Pe,We):null;case N:return Pe.key===Tt?Le(Te,_e,Pe,We):null;case te:return Pe=Pi(Pe),ze(Te,_e,Pe,We)}if(Z(Pe)||V(Pe))return Tt!==null?null:Ve(Te,_e,Pe,We,null);if(typeof Pe.then=="function")return ze(Te,_e,ff(Pe),We);if(Pe.$$typeof===C)return ze(Te,_e,of(Te,Pe),We);hf(Te,Pe)}return null}function Fe(Te,_e,Pe,We,Tt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Te=Te.get(Pe)||null,K(_e,Te,""+We,Tt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case v:return Te=Te.get(We.key===null?Pe:We.key)||null,ge(_e,Te,We,Tt);case N:return Te=Te.get(We.key===null?Pe:We.key)||null,Le(_e,Te,We,Tt);case te:return We=Pi(We),Fe(Te,_e,Pe,We,Tt)}if(Z(We)||V(We))return Te=Te.get(Pe)||null,Ve(_e,Te,We,Tt,null);if(typeof We.then=="function")return Fe(Te,_e,Pe,ff(We),Tt);if(We.$$typeof===C)return Fe(Te,_e,Pe,of(_e,We),Tt);hf(_e,We)}return null}function Nt(Te,_e,Pe,We){for(var Tt=null,Jt=null,kt=_e,Rt=_e=0,Yt=null;kt!==null&&Rt<Pe.length;Rt++){kt.index>Rt?(Yt=kt,kt=null):Yt=kt.sibling;var Zt=ze(Te,kt,Pe[Rt],We);if(Zt===null){kt===null&&(kt=Yt);break}s&&kt&&Zt.alternate===null&&l(Te,kt),_e=w(Zt,_e,Rt),Jt===null?Tt=Zt:Jt.sibling=Zt,Jt=Zt,kt=Yt}if(Rt===Pe.length)return c(Te,kt),Vt&&Ks(Te,Rt),Tt;if(kt===null){for(;Rt<Pe.length;Rt++)kt=Qe(Te,Pe[Rt],We),kt!==null&&(_e=w(kt,_e,Rt),Jt===null?Tt=kt:Jt.sibling=kt,Jt=kt);return Vt&&Ks(Te,Rt),Tt}for(kt=p(kt);Rt<Pe.length;Rt++)Yt=Fe(kt,Te,Rt,Pe[Rt],We),Yt!==null&&(s&&Yt.alternate!==null&&kt.delete(Yt.key===null?Rt:Yt.key),_e=w(Yt,_e,Rt),Jt===null?Tt=Yt:Jt.sibling=Yt,Jt=Yt);return s&&kt.forEach(function(ei){return l(Te,ei)}),Vt&&Ks(Te,Rt),Tt}function At(Te,_e,Pe,We){if(Pe==null)throw Error(n(151));for(var Tt=null,Jt=null,kt=_e,Rt=_e=0,Yt=null,Zt=Pe.next();kt!==null&&!Zt.done;Rt++,Zt=Pe.next()){kt.index>Rt?(Yt=kt,kt=null):Yt=kt.sibling;var ei=ze(Te,kt,Zt.value,We);if(ei===null){kt===null&&(kt=Yt);break}s&&kt&&ei.alternate===null&&l(Te,kt),_e=w(ei,_e,Rt),Jt===null?Tt=ei:Jt.sibling=ei,Jt=ei,kt=Yt}if(Zt.done)return c(Te,kt),Vt&&Ks(Te,Rt),Tt;if(kt===null){for(;!Zt.done;Rt++,Zt=Pe.next())Zt=Qe(Te,Zt.value,We),Zt!==null&&(_e=w(Zt,_e,Rt),Jt===null?Tt=Zt:Jt.sibling=Zt,Jt=Zt);return Vt&&Ks(Te,Rt),Tt}for(kt=p(kt);!Zt.done;Rt++,Zt=Pe.next())Zt=Fe(kt,Te,Rt,Zt.value,We),Zt!==null&&(s&&Zt.alternate!==null&&kt.delete(Zt.key===null?Rt:Zt.key),_e=w(Zt,_e,Rt),Jt===null?Tt=Zt:Jt.sibling=Zt,Jt=Zt);return s&&kt.forEach(function(AD){return l(Te,AD)}),Vt&&Ks(Te,Rt),Tt}function hr(Te,_e,Pe,We){if(typeof Pe=="object"&&Pe!==null&&Pe.type===j&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case v:e:{for(var Tt=Pe.key;_e!==null;){if(_e.key===Tt){if(Tt=Pe.type,Tt===j){if(_e.tag===7){c(Te,_e.sibling),We=y(_e,Pe.props.children),We.return=Te,Te=We;break e}}else if(_e.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===te&&Pi(Tt)===_e.type){c(Te,_e.sibling),We=y(_e,Pe.props),id(We,Pe),We.return=Te,Te=We;break e}c(Te,_e);break}else l(Te,_e);_e=_e.sibling}Pe.type===j?(We=Ci(Pe.props.children,Te.mode,We,Pe.key),We.return=Te,Te=We):(We=nf(Pe.type,Pe.key,Pe.props,null,Te.mode,We),id(We,Pe),We.return=Te,Te=We)}return A(Te);case N:e:{for(Tt=Pe.key;_e!==null;){if(_e.key===Tt)if(_e.tag===4&&_e.stateNode.containerInfo===Pe.containerInfo&&_e.stateNode.implementation===Pe.implementation){c(Te,_e.sibling),We=y(_e,Pe.children||[]),We.return=Te,Te=We;break e}else{c(Te,_e);break}else l(Te,_e);_e=_e.sibling}We=Gx(Pe,Te.mode,We),We.return=Te,Te=We}return A(Te);case te:return Pe=Pi(Pe),hr(Te,_e,Pe,We)}if(Z(Pe))return Nt(Te,_e,Pe,We);if(V(Pe)){if(Tt=V(Pe),typeof Tt!="function")throw Error(n(150));return Pe=Tt.call(Pe),At(Te,_e,Pe,We)}if(typeof Pe.then=="function")return hr(Te,_e,ff(Pe),We);if(Pe.$$typeof===C)return hr(Te,_e,of(Te,Pe),We);hf(Te,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,_e!==null&&_e.tag===6?(c(Te,_e.sibling),We=y(_e,Pe),We.return=Te,Te=We):(c(Te,_e),We=Vx(Pe,Te.mode,We),We.return=Te,Te=We),A(Te)):c(Te,_e)}return function(Te,_e,Pe,We){try{ld=0;var Tt=hr(Te,_e,Pe,We);return Ko=null,Tt}catch(kt){if(kt===Yo||kt===df)throw kt;var Jt=jn(29,kt,null,Te.mode);return Jt.lanes=We,Jt.return=Te,Jt}finally{}}}var Li=qw(!0),Fw=qw(!1),Rl=!1;function l0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function i0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $l(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zl(s,l,c){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(tr&2)!==0){var y=p.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),p.pending=l,l=af(s),Sw(s,null,c),l}return rf(s,p,l,c),af(s)}function od(s,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var p=l.lanes;p&=s.pendingLanes,c|=p,l.lanes=c,kr(s,c)}}function o0(s,l){var c=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?y=w=A:w=w.next=A,c=c.next}while(c!==null);w===null?y=w=l:w=w.next=l}else y=w=l;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,callbacks:p.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=l}var c0=!1;function cd(){if(c0){var s=Ho;if(s!==null)throw s}}function dd(s,l,c,p){c0=!1;var y=s.updateQueue;Rl=!1;var w=y.firstBaseUpdate,A=y.lastBaseUpdate,K=y.shared.pending;if(K!==null){y.shared.pending=null;var ge=K,Le=ge.next;ge.next=null,A===null?w=Le:A.next=Le,A=ge;var Ve=s.alternate;Ve!==null&&(Ve=Ve.updateQueue,K=Ve.lastBaseUpdate,K!==A&&(K===null?Ve.firstBaseUpdate=Le:K.next=Le,Ve.lastBaseUpdate=ge))}if(w!==null){var Qe=y.baseState;A=0,Ve=Le=ge=null,K=w;do{var ze=K.lane&-536870913,Fe=ze!==K.lane;if(Fe?(Ht&ze)===ze:(p&ze)===ze){ze!==0&&ze===Fo&&(c0=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Nt=s,At=K;ze=l;var hr=c;switch(At.tag){case 1:if(Nt=At.payload,typeof Nt=="function"){Qe=Nt.call(hr,Qe,ze);break e}Qe=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=At.payload,ze=typeof Nt=="function"?Nt.call(hr,Qe,ze):Nt,ze==null)break e;Qe=x({},Qe,ze);break e;case 2:Rl=!0}}ze=K.callback,ze!==null&&(s.flags|=64,Fe&&(s.flags|=8192),Fe=y.callbacks,Fe===null?y.callbacks=[ze]:Fe.push(ze))}else Fe={lane:ze,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ve===null?(Le=Ve=Fe,ge=Qe):Ve=Ve.next=Fe,A|=ze;if(K=K.next,K===null){if(K=y.shared.pending,K===null)break;Fe=K,K=Fe.next,Fe.next=null,y.lastBaseUpdate=Fe,y.shared.pending=null}}while(!0);Ve===null&&(ge=Qe),y.baseState=ge,y.firstBaseUpdate=Le,y.lastBaseUpdate=Ve,w===null&&(y.shared.lanes=0),Hl|=A,s.lanes=A,s.memoizedState=Qe}}function Hw(s,l){if(typeof s!="function")throw Error(n(191,s));s.call(l)}function Yw(s,l){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Hw(c[s],l)}var Vo=D(null),mf=D(0);function Kw(s,l){s=al,re(mf,s),re(Vo,l),al=s|l.baseLanes}function d0(){re(mf,al),re(Vo,Vo.current)}function u0(){al=mf.current,U(Vo),U(mf)}var Nn=D(null),Yn=null;function Bl(s){var l=s.alternate;re(Jr,Jr.current&1),re(Nn,s),Yn===null&&(l===null||Vo.current!==null||l.memoizedState!==null)&&(Yn=s)}function f0(s){re(Jr,Jr.current),re(Nn,s),Yn===null&&(Yn=s)}function Vw(s){s.tag===22?(re(Jr,Jr.current),re(Nn,s),Yn===null&&(Yn=s)):Ul()}function Ul(){re(Jr,Jr.current),re(Nn,Nn.current)}function wn(s){U(Nn),Yn===s&&(Yn=null),U(Jr)}var Jr=D(0);function pf(s){for(var l=s;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gb(c)||vb(c)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Xs=0,Lt=null,ur=null,na=null,xf=!1,Go=!1,Ri=!1,bf=0,ud=0,Xo=null,yP=0;function qr(){throw Error(n(321))}function h0(s,l){if(l===null)return!1;for(var c=0;c<l.length&&c<s.length;c++)if(!yn(s[c],l[c]))return!1;return!0}function m0(s,l,c,p,y,w){return Xs=w,Lt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,M.H=s===null||s.memoizedState===null?A1:C0,Ri=!1,w=c(p,y),Ri=!1,Go&&(w=Xw(l,c,p,y)),Gw(s),w}function Gw(s){M.H=md;var l=ur!==null&&ur.next!==null;if(Xs=0,na=ur=Lt=null,xf=!1,ud=0,Xo=null,l)throw Error(n(300));s===null||sa||(s=s.dependencies,s!==null&&lf(s)&&(sa=!0))}function Xw(s,l,c,p){Lt=s;var y=0;do{if(Go&&(Xo=null),ud=0,Go=!1,25<=y)throw Error(n(301));if(y+=1,na=ur=null,s.updateQueue!=null){var w=s.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}M.H=O1,w=l(c,p)}while(Go);return w}function jP(){var s=M.H,l=s.useState()[0];return l=typeof l.then=="function"?fd(l):l,s=s.useState()[0],(ur!==null?ur.memoizedState:null)!==s&&(Lt.flags|=1024),l}function p0(){var s=bf!==0;return bf=0,s}function x0(s,l,c){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~c}function b0(s){if(xf){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}xf=!1}Xs=0,na=ur=Lt=null,Go=!1,ud=bf=0,Xo=null}function Va(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return na===null?Lt.memoizedState=na=s:na=na.next=s,na}function Zr(){if(ur===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=ur.next;var l=na===null?Lt.memoizedState:na.next;if(l!==null)na=l,ur=s;else{if(s===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));ur=s,s={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},na===null?Lt.memoizedState=na=s:na=na.next=s}return na}function gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fd(s){var l=ud;return ud+=1,Xo===null&&(Xo=[]),s=zw(Xo,s,l),l=Lt,(na===null?l.memoizedState:na.next)===null&&(l=l.alternate,M.H=l===null||l.memoizedState===null?A1:C0),s}function vf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fd(s);if(s.$$typeof===C)return Ma(s)}throw Error(n(438,String(s)))}function g0(s){var l=null,c=Lt.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var p=Lt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(l={data:p.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=gf(),Lt.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(s),p=0;p<s;p++)c[p]=B;return l.index++,c}function Ws(s,l){return typeof l=="function"?l(s):l}function yf(s){var l=Zr();return v0(l,ur,s)}function v0(s,l,c){var p=s.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=c;var y=s.baseQueue,w=p.pending;if(w!==null){if(y!==null){var A=y.next;y.next=w.next,w.next=A}l.baseQueue=y=w,p.pending=null}if(w=s.baseState,y===null)s.memoizedState=w;else{l=y.next;var K=A=null,ge=null,Le=l,Ve=!1;do{var Qe=Le.lane&-536870913;if(Qe!==Le.lane?(Ht&Qe)===Qe:(Xs&Qe)===Qe){var ze=Le.revertLane;if(ze===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),Qe===Fo&&(Ve=!0);else if((Xs&ze)===ze){Le=Le.next,ze===Fo&&(Ve=!0);continue}else Qe={lane:0,revertLane:Le.revertLane,gesture:null,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ge===null?(K=ge=Qe,A=w):ge=ge.next=Qe,Lt.lanes|=ze,Hl|=ze;Qe=Le.action,Ri&&c(w,Qe),w=Le.hasEagerState?Le.eagerState:c(w,Qe)}else ze={lane:Qe,revertLane:Le.revertLane,gesture:Le.gesture,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ge===null?(K=ge=ze,A=w):ge=ge.next=ze,Lt.lanes|=Qe,Hl|=Qe;Le=Le.next}while(Le!==null&&Le!==l);if(ge===null?A=w:ge.next=K,!yn(w,s.memoizedState)&&(sa=!0,Ve&&(c=Ho,c!==null)))throw c;s.memoizedState=w,s.baseState=A,s.baseQueue=ge,p.lastRenderedState=w}return y===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function y0(s){var l=Zr(),c=l.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var p=c.dispatch,y=c.pending,w=l.memoizedState;if(y!==null){c.pending=null;var A=y=y.next;do w=s(w,A.action),A=A.next;while(A!==y);yn(w,l.memoizedState)||(sa=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),c.lastRenderedState=w}return[w,p]}function Ww(s,l,c){var p=Lt,y=Zr(),w=Vt;if(w){if(c===void 0)throw Error(n(407));c=c()}else c=l();var A=!yn((ur||y).memoizedState,c);if(A&&(y.memoizedState=c,sa=!0),y=y.queue,w0(Qw.bind(null,p,y,s),[s]),y.getSnapshot!==l||A||na!==null&&na.memoizedState.tag&1){if(p.flags|=2048,Wo(9,{destroy:void 0},Zw.bind(null,p,y,c,l),null),gr===null)throw Error(n(349));w||(Xs&127)!==0||Jw(p,l,c)}return c}function Jw(s,l,c){s.flags|=16384,s={getSnapshot:l,value:c},l=Lt.updateQueue,l===null?(l=gf(),Lt.updateQueue=l,l.stores=[s]):(c=l.stores,c===null?l.stores=[s]:c.push(s))}function Zw(s,l,c,p){l.value=c,l.getSnapshot=p,e1(l)&&t1(s)}function Qw(s,l,c){return c(function(){e1(l)&&t1(s)})}function e1(s){var l=s.getSnapshot;s=s.value;try{var c=l();return!yn(s,c)}catch{return!0}}function t1(s){var l=Ti(s,2);l!==null&&on(l,s,2)}function j0(s){var l=Va();if(typeof s=="function"){var c=s;if(s=c(),Ri){ct(!0);try{c()}finally{ct(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:s},l}function r1(s,l,c,p){return s.baseState=c,v0(s,ur,typeof p=="function"?p:Ws)}function NP(s,l,c,p,y){if(wf(s))throw Error(n(485));if(s=l.action,s!==null){var w={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){w.listeners.push(A)}};M.T!==null?c(!0):w.isTransition=!1,p(w),c=l.pending,c===null?(w.next=l.pending=w,a1(l,w)):(w.next=c.next,l.pending=c.next=w)}}function a1(s,l){var c=l.action,p=l.payload,y=s.state;if(l.isTransition){var w=M.T,A={};M.T=A;try{var K=c(y,p),ge=M.S;ge!==null&&ge(A,K),n1(s,l,K)}catch(Le){N0(s,l,Le)}finally{w!==null&&A.types!==null&&(w.types=A.types),M.T=w}}else try{w=c(y,p),n1(s,l,w)}catch(Le){N0(s,l,Le)}}function n1(s,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(p){s1(s,l,p)},function(p){return N0(s,l,p)}):s1(s,l,c)}function s1(s,l,c){l.status="fulfilled",l.value=c,l1(l),s.state=c,l=s.pending,l!==null&&(c=l.next,c===l?s.pending=null:(c=c.next,l.next=c,a1(s,c)))}function N0(s,l,c){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do l.status="rejected",l.reason=c,l1(l),l=l.next;while(l!==p)}s.action=null}function l1(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function i1(s,l){return l}function o1(s,l){if(Vt){var c=gr.formState;if(c!==null){e:{var p=Lt;if(Vt){if(Tr){t:{for(var y=Tr,w=Hn;y.nodeType!==8;){if(!w){y=null;break t}if(y=Kn(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Tr=Kn(y.nextSibling),p=y.data==="F!";break e}}Dl(p)}p=!1}p&&(l=c[0])}}return c=Va(),c.memoizedState=c.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i1,lastRenderedState:l},c.queue=p,c=E1.bind(null,Lt,p),p.dispatch=c,p=j0(!1),w=T0.bind(null,Lt,!1,p.queue),p=Va(),y={state:l,dispatch:null,action:s,pending:null},p.queue=y,c=NP.bind(null,Lt,y,w,c),y.dispatch=c,p.memoizedState=s,[l,c,!1]}function c1(s){var l=Zr();return d1(l,ur,s)}function d1(s,l,c){if(l=v0(s,l,i1)[0],s=yf(Ws)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var p=fd(l)}catch(A){throw A===Yo?df:A}else p=l;l=Zr();var y=l.queue,w=y.dispatch;return c!==l.memoizedState&&(Lt.flags|=2048,Wo(9,{destroy:void 0},wP.bind(null,y,c),null)),[p,w,s]}function wP(s,l){s.action=l}function u1(s){var l=Zr(),c=ur;if(c!==null)return d1(l,c,s);Zr(),l=l.memoizedState,c=Zr();var p=c.queue.dispatch;return c.memoizedState=s,[l,p,!1]}function Wo(s,l,c,p){return s={tag:s,create:c,deps:p,inst:l,next:null},l=Lt.updateQueue,l===null&&(l=gf(),Lt.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=s.next=s:(p=c.next,c.next=s,s.next=p,l.lastEffect=s),s}function f1(){return Zr().memoizedState}function jf(s,l,c,p){var y=Va();Lt.flags|=s,y.memoizedState=Wo(1|l,{destroy:void 0},c,p===void 0?null:p)}function Nf(s,l,c,p){var y=Zr();p=p===void 0?null:p;var w=y.memoizedState.inst;ur!==null&&p!==null&&h0(p,ur.memoizedState.deps)?y.memoizedState=Wo(l,w,c,p):(Lt.flags|=s,y.memoizedState=Wo(1|l,w,c,p))}function h1(s,l){jf(8390656,8,s,l)}function w0(s,l){Nf(2048,8,s,l)}function _P(s){Lt.flags|=4;var l=Lt.updateQueue;if(l===null)l=gf(),Lt.updateQueue=l,l.events=[s];else{var c=l.events;c===null?l.events=[s]:c.push(s)}}function m1(s){var l=Zr().memoizedState;return _P({ref:l,nextImpl:s}),function(){if((tr&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function p1(s,l){return Nf(4,2,s,l)}function x1(s,l){return Nf(4,4,s,l)}function b1(s,l){if(typeof l=="function"){s=s();var c=l(s);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function g1(s,l,c){c=c!=null?c.concat([s]):null,Nf(4,4,b1.bind(null,l,s),c)}function _0(){}function v1(s,l){var c=Zr();l=l===void 0?null:l;var p=c.memoizedState;return l!==null&&h0(l,p[1])?p[0]:(c.memoizedState=[s,l],s)}function y1(s,l){var c=Zr();l=l===void 0?null:l;var p=c.memoizedState;if(l!==null&&h0(l,p[1]))return p[0];if(p=s(),Ri){ct(!0);try{s()}finally{ct(!1)}}return c.memoizedState=[p,l],p}function k0(s,l,c){return c===void 0||(Xs&1073741824)!==0&&(Ht&261930)===0?s.memoizedState=l:(s.memoizedState=c,s=j2(),Lt.lanes|=s,Hl|=s,c)}function j1(s,l,c,p){return yn(c,l)?c:Vo.current!==null?(s=k0(s,c,p),yn(s,l)||(sa=!0),s):(Xs&42)===0||(Xs&1073741824)!==0&&(Ht&261930)===0?(sa=!0,s.memoizedState=c):(s=j2(),Lt.lanes|=s,Hl|=s,l)}function N1(s,l,c,p,y){var w=P.p;P.p=w!==0&&8>w?w:8;var A=M.T,K={};M.T=K,T0(s,!1,l,c);try{var ge=y(),Le=M.S;if(Le!==null&&Le(K,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ve=vP(ge,p);hd(s,l,Ve,Sn(s))}else hd(s,l,p,Sn(s))}catch(Qe){hd(s,l,{then:function(){},status:"rejected",reason:Qe},Sn())}finally{P.p=w,A!==null&&K.types!==null&&(A.types=K.types),M.T=A}}function kP(){}function S0(s,l,c,p){if(s.tag!==5)throw Error(n(476));var y=w1(s).queue;N1(s,y,l,W,c===null?kP:function(){return _1(s),c(p)})}function w1(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:W},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:c},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function _1(s){var l=w1(s);l.next===null&&(l=s.alternate.memoizedState),hd(s,l.next.queue,{},Sn())}function E0(){return Ma(Ad)}function k1(){return Zr().memoizedState}function S1(){return Zr().memoizedState}function SP(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var c=Sn();s=$l(c);var p=zl(l,s,c);p!==null&&(on(p,l,c),od(p,l,c)),l={cache:r0()},s.payload=l;return}l=l.return}}function EP(s,l,c){var p=Sn();c={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wf(s)?T1(l,c):(c=Yx(s,l,c,p),c!==null&&(on(c,s,p),C1(c,l,p)))}function E1(s,l,c){var p=Sn();hd(s,l,c,p)}function hd(s,l,c,p){var y={lane:p,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(wf(s))T1(l,y);else{var w=s.alternate;if(s.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var A=l.lastRenderedState,K=w(A,c);if(y.hasEagerState=!0,y.eagerState=K,yn(K,A))return rf(s,l,y,0),gr===null&&tf(),!1}catch{}finally{}if(c=Yx(s,l,y,p),c!==null)return on(c,s,p),C1(c,l,p),!0}return!1}function T0(s,l,c,p){if(p={lane:2,revertLane:lb(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},wf(s)){if(l)throw Error(n(479))}else l=Yx(s,c,p,2),l!==null&&on(l,s,2)}function wf(s){var l=s.alternate;return s===Lt||l!==null&&l===Lt}function T1(s,l){Go=xf=!0;var c=s.pending;c===null?l.next=l:(l.next=c.next,c.next=l),s.pending=l}function C1(s,l,c){if((c&4194048)!==0){var p=l.lanes;p&=s.pendingLanes,c|=p,l.lanes=c,kr(s,c)}}var md={readContext:Ma,use:vf,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useInsertionEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useSyncExternalStore:qr,useId:qr,useHostTransitionStatus:qr,useFormState:qr,useActionState:qr,useOptimistic:qr,useMemoCache:qr,useCacheRefresh:qr};md.useEffectEvent=qr;var A1={readContext:Ma,use:vf,useCallback:function(s,l){return Va().memoizedState=[s,l===void 0?null:l],s},useContext:Ma,useEffect:h1,useImperativeHandle:function(s,l,c){c=c!=null?c.concat([s]):null,jf(4194308,4,b1.bind(null,l,s),c)},useLayoutEffect:function(s,l){return jf(4194308,4,s,l)},useInsertionEffect:function(s,l){jf(4,2,s,l)},useMemo:function(s,l){var c=Va();l=l===void 0?null:l;var p=s();if(Ri){ct(!0);try{s()}finally{ct(!1)}}return c.memoizedState=[p,l],p},useReducer:function(s,l,c){var p=Va();if(c!==void 0){var y=c(l);if(Ri){ct(!0);try{c(l)}finally{ct(!1)}}}else y=l;return p.memoizedState=p.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},p.queue=s,s=s.dispatch=EP.bind(null,Lt,s),[p.memoizedState,s]},useRef:function(s){var l=Va();return s={current:s},l.memoizedState=s},useState:function(s){s=j0(s);var l=s.queue,c=E1.bind(null,Lt,l);return l.dispatch=c,[s.memoizedState,c]},useDebugValue:_0,useDeferredValue:function(s,l){var c=Va();return k0(c,s,l)},useTransition:function(){var s=j0(!1);return s=N1.bind(null,Lt,s.queue,!0,!1),Va().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,c){var p=Lt,y=Va();if(Vt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=l(),gr===null)throw Error(n(349));(Ht&127)!==0||Jw(p,l,c)}y.memoizedState=c;var w={value:c,getSnapshot:l};return y.queue=w,h1(Qw.bind(null,p,w,s),[s]),p.flags|=2048,Wo(9,{destroy:void 0},Zw.bind(null,p,w,c,l),null),c},useId:function(){var s=Va(),l=gr.identifierPrefix;if(Vt){var c=gs,p=bs;c=(p&~(1<<32-ht(p)-1)).toString(32)+c,l="_"+l+"R_"+c,c=bf++,0<c&&(l+="H"+c.toString(32)),l+="_"}else c=yP++,l="_"+l+"r_"+c.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:E0,useFormState:o1,useActionState:o1,useOptimistic:function(s){var l=Va();l.memoizedState=l.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=T0.bind(null,Lt,!0,c),c.dispatch=l,[s,l]},useMemoCache:g0,useCacheRefresh:function(){return Va().memoizedState=SP.bind(null,Lt)},useEffectEvent:function(s){var l=Va(),c={impl:s};return l.memoizedState=c,function(){if((tr&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},C0={readContext:Ma,use:vf,useCallback:v1,useContext:Ma,useEffect:w0,useImperativeHandle:g1,useInsertionEffect:p1,useLayoutEffect:x1,useMemo:y1,useReducer:yf,useRef:f1,useState:function(){return yf(Ws)},useDebugValue:_0,useDeferredValue:function(s,l){var c=Zr();return j1(c,ur.memoizedState,s,l)},useTransition:function(){var s=yf(Ws)[0],l=Zr().memoizedState;return[typeof s=="boolean"?s:fd(s),l]},useSyncExternalStore:Ww,useId:k1,useHostTransitionStatus:E0,useFormState:c1,useActionState:c1,useOptimistic:function(s,l){var c=Zr();return r1(c,ur,s,l)},useMemoCache:g0,useCacheRefresh:S1};C0.useEffectEvent=m1;var O1={readContext:Ma,use:vf,useCallback:v1,useContext:Ma,useEffect:w0,useImperativeHandle:g1,useInsertionEffect:p1,useLayoutEffect:x1,useMemo:y1,useReducer:y0,useRef:f1,useState:function(){return y0(Ws)},useDebugValue:_0,useDeferredValue:function(s,l){var c=Zr();return ur===null?k0(c,s,l):j1(c,ur.memoizedState,s,l)},useTransition:function(){var s=y0(Ws)[0],l=Zr().memoizedState;return[typeof s=="boolean"?s:fd(s),l]},useSyncExternalStore:Ww,useId:k1,useHostTransitionStatus:E0,useFormState:u1,useActionState:u1,useOptimistic:function(s,l){var c=Zr();return ur!==null?r1(c,ur,s,l):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:g0,useCacheRefresh:S1};O1.useEffectEvent=m1;function A0(s,l,c,p){l=s.memoizedState,c=c(p,l),c=c==null?l:x({},l,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var O0={enqueueSetState:function(s,l,c){s=s._reactInternals;var p=Sn(),y=$l(p);y.payload=l,c!=null&&(y.callback=c),l=zl(s,y,p),l!==null&&(on(l,s,p),od(l,s,p))},enqueueReplaceState:function(s,l,c){s=s._reactInternals;var p=Sn(),y=$l(p);y.tag=1,y.payload=l,c!=null&&(y.callback=c),l=zl(s,y,p),l!==null&&(on(l,s,p),od(l,s,p))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var c=Sn(),p=$l(c);p.tag=2,l!=null&&(p.callback=l),l=zl(s,p,c),l!==null&&(on(l,s,c),od(l,s,c))}};function M1(s,l,c,p,y,w,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,w,A):l.prototype&&l.prototype.isPureReactComponent?!ed(c,p)||!ed(y,w):!0}function I1(s,l,c,p){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,p),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,p),l.state!==s&&O0.enqueueReplaceState(l,l.state,null)}function $i(s,l){var c=l;if("ref"in l){c={};for(var p in l)p!=="ref"&&(c[p]=l[p])}if(s=s.defaultProps){c===l&&(c=x({},c));for(var y in s)c[y]===void 0&&(c[y]=s[y])}return c}function P1(s){ef(s)}function D1(s){console.error(s)}function L1(s){ef(s)}function _f(s,l){try{var c=s.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function R1(s,l,c){try{var p=s.onCaughtError;p(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function M0(s,l,c){return c=$l(c),c.tag=3,c.payload={element:null},c.callback=function(){_f(s,l)},c}function $1(s){return s=$l(s),s.tag=3,s}function z1(s,l,c,p){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=p.value;s.payload=function(){return y(w)},s.callback=function(){R1(l,c,p)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){R1(l,c,p),typeof y!="function"&&(Yl===null?Yl=new Set([this]):Yl.add(this));var K=p.stack;this.componentDidCatch(p.value,{componentStack:K!==null?K:""})})}function TP(s,l,c,p,y){if(c.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(l=c.alternate,l!==null&&qo(l,c,y,!0),c=Nn.current,c!==null){switch(c.tag){case 31:case 13:return Yn===null?Lf():c.alternate===null&&Fr===0&&(Fr=3),c.flags&=-257,c.flags|=65536,c.lanes=y,p===uf?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([p]):l.add(p),ab(s,p,y)),!1;case 22:return c.flags|=65536,p===uf?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([p]):c.add(p)),ab(s,p,y)),!1}throw Error(n(435,c.tag))}return ab(s,p,y),Lf(),!1}if(Vt)return l=Nn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,p!==Jx&&(s=Error(n(422),{cause:p}),ad(Un(s,c)))):(p!==Jx&&(l=Error(n(423),{cause:p}),ad(Un(l,c))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,p=Un(p,c),y=M0(s.stateNode,p,y),o0(s,y),Fr!==4&&(Fr=2)),!1;var w=Error(n(520),{cause:p});if(w=Un(w,c),Nd===null?Nd=[w]:Nd.push(w),Fr!==4&&(Fr=2),l===null)return!0;p=Un(p,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,s=y&-y,c.lanes|=s,s=M0(c.stateNode,p,s),o0(c,s),!1;case 1:if(l=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Yl===null||!Yl.has(w))))return c.flags|=65536,y&=-y,c.lanes|=y,y=$1(y),z1(y,s,c,p),o0(c,y),!1}c=c.return}while(c!==null);return!1}var I0=Error(n(461)),sa=!1;function Ia(s,l,c,p){l.child=s===null?Fw(l,null,c,p):Li(l,s.child,c,p)}function B1(s,l,c,p,y){c=c.render;var w=l.ref;if("ref"in p){var A={};for(var K in p)K!=="ref"&&(A[K]=p[K])}else A=p;return Mi(l),p=m0(s,l,c,A,w,y),K=p0(),s!==null&&!sa?(x0(s,l,y),Js(s,l,y)):(Vt&&K&&Xx(l),l.flags|=1,Ia(s,l,p,y),l.child)}function U1(s,l,c,p,y){if(s===null){var w=c.type;return typeof w=="function"&&!Kx(w)&&w.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=w,q1(s,l,w,p,y)):(s=nf(c.type,null,p,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(w=s.child,!U0(s,y)){var A=w.memoizedProps;if(c=c.compare,c=c!==null?c:ed,c(A,p)&&s.ref===l.ref)return Js(s,l,y)}return l.flags|=1,s=Ys(w,p),s.ref=l.ref,s.return=l,l.child=s}function q1(s,l,c,p,y){if(s!==null){var w=s.memoizedProps;if(ed(w,p)&&s.ref===l.ref)if(sa=!1,l.pendingProps=p=w,U0(s,y))(s.flags&131072)!==0&&(sa=!0);else return l.lanes=s.lanes,Js(s,l,y)}return P0(s,l,c,p,y)}function F1(s,l,c,p){var y=p.children,w=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,s!==null){for(p=l.child=s.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~w}else p=0,l.child=null;return H1(s,l,w,c,p)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&cf(l,w!==null?w.cachePool:null),w!==null?Kw(l,w):d0(),Vw(l);else return p=l.lanes=536870912,H1(s,l,w!==null?w.baseLanes|c:c,c,p)}else w!==null?(cf(l,w.cachePool),Kw(l,w),Ul(),l.memoizedState=null):(s!==null&&cf(l,null),d0(),Ul());return Ia(s,l,y,c),l.child}function pd(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function H1(s,l,c,p,y){var w=n0();return w=w===null?null:{parent:aa._currentValue,pool:w},l.memoizedState={baseLanes:c,cachePool:w},s!==null&&cf(l,null),d0(),Vw(l),s!==null&&qo(s,l,p,!0),l.childLanes=y,null}function kf(s,l){return l=Ef({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function Y1(s,l,c){return Li(l,s.child,null,c),s=kf(l,l.pendingProps),s.flags|=2,wn(l),l.memoizedState=null,s}function CP(s,l,c){var p=l.pendingProps,y=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(Vt){if(p.mode==="hidden")return s=kf(l,p),l.lanes=536870912,pd(null,s);if(f0(l),(s=Tr)?(s=a_(s,Hn),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Il!==null?{id:bs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},c=Tw(s),c.return=l,l.child=c,Oa=l,Tr=null)):s=null,s===null)throw Dl(l);return l.lanes=536870912,null}return kf(l,p)}var w=s.memoizedState;if(w!==null){var A=w.dehydrated;if(f0(l),y)if(l.flags&256)l.flags&=-257,l=Y1(s,l,c);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(n(558));else if(sa||qo(s,l,c,!1),y=(c&s.childLanes)!==0,sa||y){if(p=gr,p!==null&&(A=pe(p,c),A!==0&&A!==w.retryLane))throw w.retryLane=A,Ti(s,A),on(p,s,A),I0;Lf(),l=Y1(s,l,c)}else s=w.treeContext,Tr=Kn(A.nextSibling),Oa=l,Vt=!0,Pl=null,Hn=!1,s!==null&&Ow(l,s),l=kf(l,p),l.flags|=4096;return l}return s=Ys(s.child,{mode:p.mode,children:p.children}),s.ref=l.ref,l.child=s,s.return=l,s}function Sf(s,l){var c=l.ref;if(c===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(l.flags|=4194816)}}function P0(s,l,c,p,y){return Mi(l),c=m0(s,l,c,p,void 0,y),p=p0(),s!==null&&!sa?(x0(s,l,y),Js(s,l,y)):(Vt&&p&&Xx(l),l.flags|=1,Ia(s,l,c,y),l.child)}function K1(s,l,c,p,y,w){return Mi(l),l.updateQueue=null,c=Xw(l,p,c,y),Gw(s),p=p0(),s!==null&&!sa?(x0(s,l,w),Js(s,l,w)):(Vt&&p&&Xx(l),l.flags|=1,Ia(s,l,c,w),l.child)}function V1(s,l,c,p,y){if(Mi(l),l.stateNode===null){var w=$o,A=c.contextType;typeof A=="object"&&A!==null&&(w=Ma(A)),w=new c(p,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=O0,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=p,w.state=l.memoizedState,w.refs={},l0(l),A=c.contextType,w.context=typeof A=="object"&&A!==null?Ma(A):$o,w.state=l.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(A0(l,c,A,p),w.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(A=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),A!==w.state&&O0.enqueueReplaceState(w,w.state,null),dd(l,p,w,y),cd(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!0}else if(s===null){w=l.stateNode;var K=l.memoizedProps,ge=$i(c,K);w.props=ge;var Le=w.context,Ve=c.contextType;A=$o,typeof Ve=="object"&&Ve!==null&&(A=Ma(Ve));var Qe=c.getDerivedStateFromProps;Ve=typeof Qe=="function"||typeof w.getSnapshotBeforeUpdate=="function",K=l.pendingProps!==K,Ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(K||Le!==A)&&I1(l,w,p,A),Rl=!1;var ze=l.memoizedState;w.state=ze,dd(l,p,w,y),cd(),Le=l.memoizedState,K||ze!==Le||Rl?(typeof Qe=="function"&&(A0(l,c,Qe,p),Le=l.memoizedState),(ge=Rl||M1(l,c,ge,p,ze,Le,A))?(Ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=Le),w.props=p,w.state=Le,w.context=A,p=ge):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),p=!1)}else{w=l.stateNode,i0(s,l),A=l.memoizedProps,Ve=$i(c,A),w.props=Ve,Qe=l.pendingProps,ze=w.context,Le=c.contextType,ge=$o,typeof Le=="object"&&Le!==null&&(ge=Ma(Le)),K=c.getDerivedStateFromProps,(Le=typeof K=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==Qe||ze!==ge)&&I1(l,w,p,ge),Rl=!1,ze=l.memoizedState,w.state=ze,dd(l,p,w,y),cd();var Fe=l.memoizedState;A!==Qe||ze!==Fe||Rl||s!==null&&s.dependencies!==null&&lf(s.dependencies)?(typeof K=="function"&&(A0(l,c,K,p),Fe=l.memoizedState),(Ve=Rl||M1(l,c,Ve,p,ze,Fe,ge)||s!==null&&s.dependencies!==null&&lf(s.dependencies))?(Le||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,Fe,ge),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,Fe,ge)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&ze===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ze===s.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=Fe),w.props=p,w.state=Fe,w.context=ge,p=Ve):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&ze===s.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ze===s.memoizedState||(l.flags|=1024),p=!1)}return w=p,Sf(s,l),p=(l.flags&128)!==0,w||p?(w=l.stateNode,c=p&&typeof c.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,s!==null&&p?(l.child=Li(l,s.child,null,y),l.child=Li(l,null,c,y)):Ia(s,l,c,y),l.memoizedState=w.state,s=l.child):s=Js(s,l,y),s}function G1(s,l,c,p){return Ai(),l.flags|=256,Ia(s,l,c,p),l.child}var D0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function L0(s){return{baseLanes:s,cachePool:Rw()}}function R0(s,l,c){return s=s!==null?s.childLanes&~c:0,l&&(s|=kn),s}function X1(s,l,c){var p=l.pendingProps,y=!1,w=(l.flags&128)!==0,A;if((A=w)||(A=s!==null&&s.memoizedState===null?!1:(Jr.current&2)!==0),A&&(y=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,s===null){if(Vt){if(y?Bl(l):Ul(),(s=Tr)?(s=a_(s,Hn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Il!==null?{id:bs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},c=Tw(s),c.return=l,l.child=c,Oa=l,Tr=null)):s=null,s===null)throw Dl(l);return vb(s)?l.lanes=32:l.lanes=536870912,null}var K=p.children;return p=p.fallback,y?(Ul(),y=l.mode,K=Ef({mode:"hidden",children:K},y),p=Ci(p,y,c,null),K.return=l,p.return=l,K.sibling=p,l.child=K,p=l.child,p.memoizedState=L0(c),p.childLanes=R0(s,A,c),l.memoizedState=D0,pd(null,p)):(Bl(l),$0(l,K))}var ge=s.memoizedState;if(ge!==null&&(K=ge.dehydrated,K!==null)){if(w)l.flags&256?(Bl(l),l.flags&=-257,l=z0(s,l,c)):l.memoizedState!==null?(Ul(),l.child=s.child,l.flags|=128,l=null):(Ul(),K=p.fallback,y=l.mode,p=Ef({mode:"visible",children:p.children},y),K=Ci(K,y,c,null),K.flags|=2,p.return=l,K.return=l,p.sibling=K,l.child=p,Li(l,s.child,null,c),p=l.child,p.memoizedState=L0(c),p.childLanes=R0(s,A,c),l.memoizedState=D0,l=pd(null,p));else if(Bl(l),vb(K)){if(A=K.nextSibling&&K.nextSibling.dataset,A)var Le=A.dgst;A=Le,p=Error(n(419)),p.stack="",p.digest=A,ad({value:p,source:null,stack:null}),l=z0(s,l,c)}else if(sa||qo(s,l,c,!1),A=(c&s.childLanes)!==0,sa||A){if(A=gr,A!==null&&(p=pe(A,c),p!==0&&p!==ge.retryLane))throw ge.retryLane=p,Ti(s,p),on(A,s,p),I0;gb(K)||Lf(),l=z0(s,l,c)}else gb(K)?(l.flags|=192,l.child=s.child,l=null):(s=ge.treeContext,Tr=Kn(K.nextSibling),Oa=l,Vt=!0,Pl=null,Hn=!1,s!==null&&Ow(l,s),l=$0(l,p.children),l.flags|=4096);return l}return y?(Ul(),K=p.fallback,y=l.mode,ge=s.child,Le=ge.sibling,p=Ys(ge,{mode:"hidden",children:p.children}),p.subtreeFlags=ge.subtreeFlags&65011712,Le!==null?K=Ys(Le,K):(K=Ci(K,y,c,null),K.flags|=2),K.return=l,p.return=l,p.sibling=K,l.child=p,pd(null,p),p=l.child,K=s.child.memoizedState,K===null?K=L0(c):(y=K.cachePool,y!==null?(ge=aa._currentValue,y=y.parent!==ge?{parent:ge,pool:ge}:y):y=Rw(),K={baseLanes:K.baseLanes|c,cachePool:y}),p.memoizedState=K,p.childLanes=R0(s,A,c),l.memoizedState=D0,pd(s.child,p)):(Bl(l),c=s.child,s=c.sibling,c=Ys(c,{mode:"visible",children:p.children}),c.return=l,c.sibling=null,s!==null&&(A=l.deletions,A===null?(l.deletions=[s],l.flags|=16):A.push(s)),l.child=c,l.memoizedState=null,c)}function $0(s,l){return l=Ef({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Ef(s,l){return s=jn(22,s,null,l),s.lanes=0,s}function z0(s,l,c){return Li(l,s.child,null,c),s=$0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function W1(s,l,c){s.lanes|=l;var p=s.alternate;p!==null&&(p.lanes|=l),e0(s.return,l,c)}function B0(s,l,c,p,y,w){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y,treeForkCount:w}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=c,A.tailMode=y,A.treeForkCount=w)}function J1(s,l,c){var p=l.pendingProps,y=p.revealOrder,w=p.tail;p=p.children;var A=Jr.current,K=(A&2)!==0;if(K?(A=A&1|2,l.flags|=128):A&=1,re(Jr,A),Ia(s,l,p,c),p=Vt?rd:0,!K&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&W1(s,c,l);else if(s.tag===19)W1(s,c,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(c=l.child,y=null;c!==null;)s=c.alternate,s!==null&&pf(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=l.child,l.child=null):(y=c.sibling,c.sibling=null),B0(l,!1,y,c,w,p);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&pf(s)===null){l.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}B0(l,!0,c,null,w,p);break;case"together":B0(l,!1,null,null,void 0,p);break;default:l.memoizedState=null}return l.child}function Js(s,l,c){if(s!==null&&(l.dependencies=s.dependencies),Hl|=l.lanes,(c&l.childLanes)===0)if(s!==null){if(qo(s,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,c=Ys(s,s.pendingProps),l.child=c,c.return=l;s.sibling!==null;)s=s.sibling,c=c.sibling=Ys(s,s.pendingProps),c.return=l;c.sibling=null}return l.child}function U0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&lf(s)))}function AP(s,l,c){switch(l.tag){case 3:z(l,l.stateNode.containerInfo),Ll(l,aa,s.memoizedState.cache),Ai();break;case 27:case 5:ye(l);break;case 4:z(l,l.stateNode.containerInfo);break;case 10:Ll(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,f0(l),null;break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Bl(l),l.flags|=128,null):(c&l.child.childLanes)!==0?X1(s,l,c):(Bl(l),s=Js(s,l,c),s!==null?s.sibling:null);Bl(l);break;case 19:var y=(s.flags&128)!==0;if(p=(c&l.childLanes)!==0,p||(qo(s,l,c,!1),p=(c&l.childLanes)!==0),y){if(p)return J1(s,l,c);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),re(Jr,Jr.current),p)break;return null;case 22:return l.lanes=0,F1(s,l,c,l.pendingProps);case 24:Ll(l,aa,s.memoizedState.cache)}return Js(s,l,c)}function Z1(s,l,c){if(s!==null)if(s.memoizedProps!==l.pendingProps)sa=!0;else{if(!U0(s,c)&&(l.flags&128)===0)return sa=!1,AP(s,l,c);sa=(s.flags&131072)!==0}else sa=!1,Vt&&(l.flags&1048576)!==0&&Aw(l,rd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var p=l.pendingProps;if(s=Pi(l.elementType),l.type=s,typeof s=="function")Kx(s)?(p=$i(s,p),l.tag=1,l=V1(null,l,s,p,c)):(l.tag=0,l=P0(null,l,s,p,c));else{if(s!=null){var y=s.$$typeof;if(y===S){l.tag=11,l=B1(null,l,s,p,c);break e}else if(y===L){l.tag=14,l=U1(null,l,s,p,c);break e}}throw l=J(s)||s,Error(n(306,l,""))}}return l;case 0:return P0(s,l,l.type,l.pendingProps,c);case 1:return p=l.type,y=$i(p,l.pendingProps),V1(s,l,p,y,c);case 3:e:{if(z(l,l.stateNode.containerInfo),s===null)throw Error(n(387));p=l.pendingProps;var w=l.memoizedState;y=w.element,i0(s,l),dd(l,p,null,c);var A=l.memoizedState;if(p=A.cache,Ll(l,aa,p),p!==w.cache&&t0(l,[aa],c,!0),cd(),p=A.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=G1(s,l,p,c);break e}else if(p!==y){y=Un(Error(n(424)),l),ad(y),l=G1(s,l,p,c);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Tr=Kn(s.firstChild),Oa=l,Vt=!0,Pl=null,Hn=!0,c=Fw(l,null,p,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ai(),p===y){l=Js(s,l,c);break e}Ia(s,l,p,c)}l=l.child}return l;case 26:return Sf(s,l),s===null?(c=c_(l.type,null,l.pendingProps,null))?l.memoizedState=c:Vt||(c=l.type,s=l.pendingProps,p=Ff(Y.current).createElement(c),p[Ge]=l,p[ot]=s,Pa(p,c,s),Sr(p),l.stateNode=p):l.memoizedState=c_(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return ye(l),s===null&&Vt&&(p=l.stateNode=l_(l.type,l.pendingProps,Y.current),Oa=l,Hn=!0,y=Tr,Xl(l.type)?(yb=y,Tr=Kn(p.firstChild)):Tr=y),Ia(s,l,l.pendingProps.children,c),Sf(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Vt&&((y=p=Tr)&&(p=lD(p,l.type,l.pendingProps,Hn),p!==null?(l.stateNode=p,Oa=l,Tr=Kn(p.firstChild),Hn=!1,y=!0):y=!1),y||Dl(l)),ye(l),y=l.type,w=l.pendingProps,A=s!==null?s.memoizedProps:null,p=w.children,pb(y,w)?p=null:A!==null&&pb(y,A)&&(l.flags|=32),l.memoizedState!==null&&(y=m0(s,l,jP,null,null,c),Ad._currentValue=y),Sf(s,l),Ia(s,l,p,c),l.child;case 6:return s===null&&Vt&&((s=c=Tr)&&(c=iD(c,l.pendingProps,Hn),c!==null?(l.stateNode=c,Oa=l,Tr=null,s=!0):s=!1),s||Dl(l)),null;case 13:return X1(s,l,c);case 4:return z(l,l.stateNode.containerInfo),p=l.pendingProps,s===null?l.child=Li(l,null,p,c):Ia(s,l,p,c),l.child;case 11:return B1(s,l,l.type,l.pendingProps,c);case 7:return Ia(s,l,l.pendingProps,c),l.child;case 8:return Ia(s,l,l.pendingProps.children,c),l.child;case 12:return Ia(s,l,l.pendingProps.children,c),l.child;case 10:return p=l.pendingProps,Ll(l,l.type,p.value),Ia(s,l,p.children,c),l.child;case 9:return y=l.type._context,p=l.pendingProps.children,Mi(l),y=Ma(y),p=p(y),l.flags|=1,Ia(s,l,p,c),l.child;case 14:return U1(s,l,l.type,l.pendingProps,c);case 15:return q1(s,l,l.type,l.pendingProps,c);case 19:return J1(s,l,c);case 31:return CP(s,l,c);case 22:return F1(s,l,c,l.pendingProps);case 24:return Mi(l),p=Ma(aa),s===null?(y=n0(),y===null&&(y=gr,w=r0(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=c),y=w),l.memoizedState={parent:p,cache:y},l0(l),Ll(l,aa,y)):((s.lanes&c)!==0&&(i0(s,l),dd(l,null,null,c),cd()),y=s.memoizedState,w=l.memoizedState,y.parent!==p?(y={parent:p,cache:p},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Ll(l,aa,p)):(p=w.cache,Ll(l,aa,p),p!==y.cache&&t0(l,[aa],c,!0))),Ia(s,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Zs(s){s.flags|=4}function q0(s,l,c,p,y){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(k2())s.flags|=8192;else throw Di=uf,s0}else s.flags&=-16777217}function Q1(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!m_(l))if(k2())s.flags|=8192;else throw Di=uf,s0}function Tf(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?wt():536870912,s.lanes|=l,ec|=l)}function xd(s,l){if(!Vt)switch(s.tailMode){case"hidden":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Cr(s){var l=s.alternate!==null&&s.alternate.child===s.child,c=0,p=0;if(l)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=p,s.childLanes=c,l}function OP(s,l,c){var p=l.pendingProps;switch(Wx(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(l),null;case 1:return Cr(l),null;case 3:return c=l.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),l.memoizedState.cache!==p&&(l.flags|=2048),Gs(aa),F(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Uo(l)?Zs(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Zx())),Cr(l),null;case 26:var y=l.type,w=l.memoizedState;return s===null?(Zs(l),w!==null?(Cr(l),Q1(l,w)):(Cr(l),q0(l,y,null,p,c))):w?w!==s.memoizedState?(Zs(l),Cr(l),Q1(l,w)):(Cr(l),l.flags&=-16777217):(s=s.memoizedProps,s!==p&&Zs(l),Cr(l),q0(l,y,s,p,c)),null;case 27:if(Ae(l),c=Y.current,y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&Zs(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return Cr(l),null}s=he.current,Uo(l)?Mw(l):(s=l_(y,p,c),l.stateNode=s,Zs(l))}return Cr(l),null;case 5:if(Ae(l),y=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==p&&Zs(l);else{if(!p){if(l.stateNode===null)throw Error(n(166));return Cr(l),null}if(w=he.current,Uo(l))Mw(l);else{var A=Ff(Y.current);switch(w){case 1:w=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=A.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof p.is=="string"?A.createElement("select",{is:p.is}):A.createElement("select"),p.multiple?w.multiple=!0:p.size&&(w.size=p.size);break;default:w=typeof p.is=="string"?A.createElement(y,{is:p.is}):A.createElement(y)}}w[Ge]=l,w[ot]=p;e:for(A=l.child;A!==null;){if(A.tag===5||A.tag===6)w.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===l)break e;for(;A.sibling===null;){if(A.return===null||A.return===l)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}l.stateNode=w;e:switch(Pa(w,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Zs(l)}}return Cr(l),q0(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,c),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==p&&Zs(l);else{if(typeof p!="string"&&l.stateNode===null)throw Error(n(166));if(s=Y.current,Uo(l)){if(s=l.stateNode,c=l.memoizedProps,p=null,y=Oa,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}s[Ge]=l,s=!!(s.nodeValue===c||p!==null&&p.suppressHydrationWarning===!0||X2(s.nodeValue,c)),s||Dl(l,!0)}else s=Ff(s).createTextNode(p),s[Ge]=l,l.stateNode=s}return Cr(l),null;case 31:if(c=l.memoizedState,s===null||s.memoizedState!==null){if(p=Uo(l),c!==null){if(s===null){if(!p)throw Error(n(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Ge]=l}else Ai(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Cr(l),s=!1}else c=Zx(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return l.flags&256?(wn(l),l):(wn(l),null);if((l.flags&128)!==0)throw Error(n(558))}return Cr(l),null;case 13:if(p=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Uo(l),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Ge]=l}else Ai(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Cr(l),y=!1}else y=Zx(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(wn(l),l):(wn(l),null)}return wn(l),(l.flags&128)!==0?(l.lanes=c,l):(c=p!==null,s=s!==null&&s.memoizedState!==null,c&&(p=l.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==y&&(p.flags|=2048)),c!==s&&c&&(l.child.flags|=8192),Tf(l,l.updateQueue),Cr(l),null);case 4:return F(),s===null&&db(l.stateNode.containerInfo),Cr(l),null;case 10:return Gs(l.type),Cr(l),null;case 19:if(U(Jr),p=l.memoizedState,p===null)return Cr(l),null;if(y=(l.flags&128)!==0,w=p.rendering,w===null)if(y)xd(p,!1);else{if(Fr!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(w=pf(s),w!==null){for(l.flags|=128,xd(p,!1),s=w.updateQueue,l.updateQueue=s,Tf(l,s),l.subtreeFlags=0,s=c,c=l.child;c!==null;)Ew(c,s),c=c.sibling;return re(Jr,Jr.current&1|2),Vt&&Ks(l,p.treeForkCount),l.child}s=s.sibling}p.tail!==null&&je()>If&&(l.flags|=128,y=!0,xd(p,!1),l.lanes=4194304)}else{if(!y)if(s=pf(w),s!==null){if(l.flags|=128,y=!0,s=s.updateQueue,l.updateQueue=s,Tf(l,s),xd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Vt)return Cr(l),null}else 2*je()-p.renderingStartTime>If&&c!==536870912&&(l.flags|=128,y=!0,xd(p,!1),l.lanes=4194304);p.isBackwards?(w.sibling=l.child,l.child=w):(s=p.last,s!==null?s.sibling=w:l.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=je(),s.sibling=null,c=Jr.current,re(Jr,y?c&1|2:c&1),Vt&&Ks(l,p.treeForkCount),s):(Cr(l),null);case 22:case 23:return wn(l),u0(),p=l.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(l.flags|=8192):p&&(l.flags|=8192),p?(c&536870912)!==0&&(l.flags&128)===0&&(Cr(l),l.subtreeFlags&6&&(l.flags|=8192)):Cr(l),c=l.updateQueue,c!==null&&Tf(l,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==c&&(l.flags|=2048),s!==null&&U(Ii),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Gs(aa),Cr(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function MP(s,l){switch(Wx(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Gs(aa),F(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ae(l),null;case 31:if(l.memoizedState!==null){if(wn(l),l.alternate===null)throw Error(n(340));Ai()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(wn(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Ai()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return U(Jr),null;case 4:return F(),null;case 10:return Gs(l.type),null;case 22:case 23:return wn(l),u0(),s!==null&&U(Ii),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Gs(aa),null;case 25:return null;default:return null}}function e2(s,l){switch(Wx(l),l.tag){case 3:Gs(aa),F();break;case 26:case 27:case 5:Ae(l);break;case 4:F();break;case 31:l.memoizedState!==null&&wn(l);break;case 13:wn(l);break;case 19:U(Jr);break;case 10:Gs(l.type);break;case 22:case 23:wn(l),u0(),s!==null&&U(Ii);break;case 24:Gs(aa)}}function bd(s,l){try{var c=l.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&s)===s){p=void 0;var w=c.create,A=c.inst;p=w(),A.destroy=p}c=c.next}while(c!==y)}}catch(K){ir(l,l.return,K)}}function ql(s,l,c){try{var p=l.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var w=y.next;p=w;do{if((p.tag&s)===s){var A=p.inst,K=A.destroy;if(K!==void 0){A.destroy=void 0,y=l;var ge=c,Le=K;try{Le()}catch(Ve){ir(y,ge,Ve)}}}p=p.next}while(p!==w)}}catch(Ve){ir(l,l.return,Ve)}}function t2(s){var l=s.updateQueue;if(l!==null){var c=s.stateNode;try{Yw(l,c)}catch(p){ir(s,s.return,p)}}}function r2(s,l,c){c.props=$i(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(p){ir(s,l,p)}}function gd(s,l){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof c=="function"?s.refCleanup=c(p):c.current=p}}catch(y){ir(s,l,y)}}function vs(s,l){var c=s.ref,p=s.refCleanup;if(c!==null)if(typeof p=="function")try{p()}catch(y){ir(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){ir(s,l,y)}else c.current=null}function a2(s){var l=s.type,c=s.memoizedProps,p=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&p.focus();break e;case"img":c.src?p.src=c.src:c.srcSet&&(p.srcset=c.srcSet)}}catch(y){ir(s,s.return,y)}}function F0(s,l,c){try{var p=s.stateNode;eD(p,s.type,c,l),p[ot]=l}catch(y){ir(s,s.return,y)}}function n2(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Xl(s.type)||s.tag===4}function H0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||n2(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Xl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Y0(s,l,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(s),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=Se));else if(p!==4&&(p===27&&Xl(s.type)&&(c=s.stateNode,l=null),s=s.child,s!==null))for(Y0(s,l,c),s=s.sibling;s!==null;)Y0(s,l,c),s=s.sibling}function Cf(s,l,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,l?c.insertBefore(s,l):c.appendChild(s);else if(p!==4&&(p===27&&Xl(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Cf(s,l,c),s=s.sibling;s!==null;)Cf(s,l,c),s=s.sibling}function s2(s){var l=s.stateNode,c=s.memoizedProps;try{for(var p=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Pa(l,p,c),l[Ge]=s,l[ot]=c}catch(w){ir(s,s.return,w)}}var Qs=!1,la=!1,K0=!1,l2=typeof WeakSet=="function"?WeakSet:Set,ga=null;function IP(s,l){if(s=s.containerInfo,hb=Wf,s=gw(s),zx(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var A=0,K=-1,ge=-1,Le=0,Ve=0,Qe=s,ze=null;t:for(;;){for(var Fe;Qe!==c||y!==0&&Qe.nodeType!==3||(K=A+y),Qe!==w||p!==0&&Qe.nodeType!==3||(ge=A+p),Qe.nodeType===3&&(A+=Qe.nodeValue.length),(Fe=Qe.firstChild)!==null;)ze=Qe,Qe=Fe;for(;;){if(Qe===s)break t;if(ze===c&&++Le===y&&(K=A),ze===w&&++Ve===p&&(ge=A),(Fe=Qe.nextSibling)!==null)break;Qe=ze,ze=Qe.parentNode}Qe=Fe}c=K===-1||ge===-1?null:{start:K,end:ge}}else c=null}c=c||{start:0,end:0}}else c=null;for(mb={focusedElem:s,selectionRange:c},Wf=!1,ga=l;ga!==null;)if(l=ga,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,ga=s;else for(;ga!==null;){switch(l=ga,w=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)y=s[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&w!==null){s=void 0,c=l,y=w.memoizedProps,w=w.memoizedState,p=c.stateNode;try{var Nt=$i(c.type,y);s=p.getSnapshotBeforeUpdate(Nt,w),p.__reactInternalSnapshotBeforeUpdate=s}catch(At){ir(c,c.return,At)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,c=s.nodeType,c===9)bb(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":bb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=l.sibling,s!==null){s.return=l.return,ga=s;break}ga=l.return}}function i2(s,l,c){var p=c.flags;switch(c.tag){case 0:case 11:case 15:tl(s,c),p&4&&bd(5,c);break;case 1:if(tl(s,c),p&4)if(s=c.stateNode,l===null)try{s.componentDidMount()}catch(A){ir(c,c.return,A)}else{var y=$i(c.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(A){ir(c,c.return,A)}}p&64&&t2(c),p&512&&gd(c,c.return);break;case 3:if(tl(s,c),p&64&&(s=c.updateQueue,s!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{Yw(s,l)}catch(A){ir(c,c.return,A)}}break;case 27:l===null&&p&4&&s2(c);case 26:case 5:tl(s,c),l===null&&p&4&&a2(c),p&512&&gd(c,c.return);break;case 12:tl(s,c);break;case 31:tl(s,c),p&4&&d2(s,c);break;case 13:tl(s,c),p&4&&u2(s,c),p&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=qP.bind(null,c),oD(s,c))));break;case 22:if(p=c.memoizedState!==null||Qs,!p){l=l!==null&&l.memoizedState!==null||la,y=Qs;var w=la;Qs=p,(la=l)&&!w?rl(s,c,(c.subtreeFlags&8772)!==0):tl(s,c),Qs=y,la=w}break;case 30:break;default:tl(s,c)}}function o2(s){var l=s.alternate;l!==null&&(s.alternate=null,o2(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&xr(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Mr=null,an=!1;function el(s,l,c){for(c=c.child;c!==null;)c2(s,l,c),c=c.sibling}function c2(s,l,c){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(st,c)}catch{}switch(c.tag){case 26:la||vs(c,l),el(s,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:la||vs(c,l);var p=Mr,y=an;Xl(c.type)&&(Mr=c.stateNode,an=!1),el(s,l,c),Ed(c.stateNode),Mr=p,an=y;break;case 5:la||vs(c,l);case 6:if(p=Mr,y=an,Mr=null,el(s,l,c),Mr=p,an=y,Mr!==null)if(an)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(c.stateNode)}catch(w){ir(c,l,w)}else try{Mr.removeChild(c.stateNode)}catch(w){ir(c,l,w)}break;case 18:Mr!==null&&(an?(s=Mr,t_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),oc(s)):t_(Mr,c.stateNode));break;case 4:p=Mr,y=an,Mr=c.stateNode.containerInfo,an=!0,el(s,l,c),Mr=p,an=y;break;case 0:case 11:case 14:case 15:ql(2,c,l),la||ql(4,c,l),el(s,l,c);break;case 1:la||(vs(c,l),p=c.stateNode,typeof p.componentWillUnmount=="function"&&r2(c,l,p)),el(s,l,c);break;case 21:el(s,l,c);break;case 22:la=(p=la)||c.memoizedState!==null,el(s,l,c),la=p;break;default:el(s,l,c)}}function d2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{oc(s)}catch(c){ir(l,l.return,c)}}}function u2(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{oc(s)}catch(c){ir(l,l.return,c)}}function PP(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new l2),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new l2),l;default:throw Error(n(435,s.tag))}}function Af(s,l){var c=PP(s);l.forEach(function(p){if(!c.has(p)){c.add(p);var y=FP.bind(null,s,p);p.then(y,y)}})}function nn(s,l){var c=l.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p],w=s,A=l,K=A;e:for(;K!==null;){switch(K.tag){case 27:if(Xl(K.type)){Mr=K.stateNode,an=!1;break e}break;case 5:Mr=K.stateNode,an=!1;break e;case 3:case 4:Mr=K.stateNode.containerInfo,an=!0;break e}K=K.return}if(Mr===null)throw Error(n(160));c2(w,A,y),Mr=null,an=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)f2(l,s),l=l.sibling}var ss=null;function f2(s,l){var c=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:nn(l,s),sn(s),p&4&&(ql(3,s,s.return),bd(3,s),ql(5,s,s.return));break;case 1:nn(l,s),sn(s),p&512&&(la||c===null||vs(c,c.return)),p&64&&Qs&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?p:c.concat(p))));break;case 26:var y=ss;if(nn(l,s),sn(s),p&512&&(la||c===null||vs(c,c.return)),p&4){var w=c!==null?c.memoizedState:null;if(p=s.memoizedState,c===null)if(p===null)if(s.stateNode===null){e:{p=s.type,c=s.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":w=y.getElementsByTagName("title")[0],(!w||w[jr]||w[Ge]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(p),y.head.insertBefore(w,y.querySelector("head > title"))),Pa(w,p,c),w[Ge]=s,Sr(w),p=w;break e;case"link":var A=f_("link","href",y).get(p+(c.href||""));if(A){for(var K=0;K<A.length;K++)if(w=A[K],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(K,1);break t}}w=y.createElement(p),Pa(w,p,c),y.head.appendChild(w);break;case"meta":if(A=f_("meta","content",y).get(p+(c.content||""))){for(K=0;K<A.length;K++)if(w=A[K],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(K,1);break t}}w=y.createElement(p),Pa(w,p,c),y.head.appendChild(w);break;default:throw Error(n(468,p))}w[Ge]=s,Sr(w),p=w}s.stateNode=p}else h_(y,s.type,s.stateNode);else s.stateNode=u_(y,p,s.memoizedProps);else w!==p?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,p===null?h_(y,s.type,s.stateNode):u_(y,p,s.memoizedProps)):p===null&&s.stateNode!==null&&F0(s,s.memoizedProps,c.memoizedProps)}break;case 27:nn(l,s),sn(s),p&512&&(la||c===null||vs(c,c.return)),c!==null&&p&4&&F0(s,s.memoizedProps,c.memoizedProps);break;case 5:if(nn(l,s),sn(s),p&512&&(la||c===null||vs(c,c.return)),s.flags&32){y=s.stateNode;try{xs(y,"")}catch(Nt){ir(s,s.return,Nt)}}p&4&&s.stateNode!=null&&(y=s.memoizedProps,F0(s,y,c!==null?c.memoizedProps:y)),p&1024&&(K0=!0);break;case 6:if(nn(l,s),sn(s),p&4){if(s.stateNode===null)throw Error(n(162));p=s.memoizedProps,c=s.stateNode;try{c.nodeValue=p}catch(Nt){ir(s,s.return,Nt)}}break;case 3:if(Kf=null,y=ss,ss=Hf(l.containerInfo),nn(l,s),ss=y,sn(s),p&4&&c!==null&&c.memoizedState.isDehydrated)try{oc(l.containerInfo)}catch(Nt){ir(s,s.return,Nt)}K0&&(K0=!1,h2(s));break;case 4:p=ss,ss=Hf(s.stateNode.containerInfo),nn(l,s),sn(s),ss=p;break;case 12:nn(l,s),sn(s);break;case 31:nn(l,s),sn(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Af(s,p)));break;case 13:nn(l,s),sn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Mf=je()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Af(s,p)));break;case 22:y=s.memoizedState!==null;var ge=c!==null&&c.memoizedState!==null,Le=Qs,Ve=la;if(Qs=Le||y,la=Ve||ge,nn(l,s),la=Ve,Qs=Le,sn(s),p&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(c===null||ge||Qs||la||zi(s)),c=null,l=s;;){if(l.tag===5||l.tag===26){if(c===null){ge=c=l;try{if(w=ge.stateNode,y)A=w.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{K=ge.stateNode;var Qe=ge.memoizedProps.style,ze=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;K.style.display=ze==null||typeof ze=="boolean"?"":(""+ze).trim()}}catch(Nt){ir(ge,ge.return,Nt)}}}else if(l.tag===6){if(c===null){ge=l;try{ge.stateNode.nodeValue=y?"":ge.memoizedProps}catch(Nt){ir(ge,ge.return,Nt)}}}else if(l.tag===18){if(c===null){ge=l;try{var Fe=ge.stateNode;y?r_(Fe,!0):r_(ge.stateNode,!1)}catch(Nt){ir(ge,ge.return,Nt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}p&4&&(p=s.updateQueue,p!==null&&(c=p.retryQueue,c!==null&&(p.retryQueue=null,Af(s,c))));break;case 19:nn(l,s),sn(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,Af(s,p)));break;case 30:break;case 21:break;default:nn(l,s),sn(s)}}function sn(s){var l=s.flags;if(l&2){try{for(var c,p=s.return;p!==null;){if(n2(p)){c=p;break}p=p.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var y=c.stateNode,w=H0(s);Cf(s,w,y);break;case 5:var A=c.stateNode;c.flags&32&&(xs(A,""),c.flags&=-33);var K=H0(s);Cf(s,K,A);break;case 3:case 4:var ge=c.stateNode.containerInfo,Le=H0(s);Y0(s,Le,ge);break;default:throw Error(n(161))}}catch(Ve){ir(s,s.return,Ve)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function h2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;h2(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function tl(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)i2(s,l.alternate,l),l=l.sibling}function zi(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ql(4,l,l.return),zi(l);break;case 1:vs(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&r2(l,l.return,c),zi(l);break;case 27:Ed(l.stateNode);case 26:case 5:vs(l,l.return),zi(l);break;case 22:l.memoizedState===null&&zi(l);break;case 30:zi(l);break;default:zi(l)}s=s.sibling}}function rl(s,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var p=l.alternate,y=s,w=l,A=w.flags;switch(w.tag){case 0:case 11:case 15:rl(y,w,c),bd(4,w);break;case 1:if(rl(y,w,c),p=w,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Le){ir(p,p.return,Le)}if(p=w,y=p.updateQueue,y!==null){var K=p.stateNode;try{var ge=y.shared.hiddenCallbacks;if(ge!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ge.length;y++)Hw(ge[y],K)}catch(Le){ir(p,p.return,Le)}}c&&A&64&&t2(w),gd(w,w.return);break;case 27:s2(w);case 26:case 5:rl(y,w,c),c&&p===null&&A&4&&a2(w),gd(w,w.return);break;case 12:rl(y,w,c);break;case 31:rl(y,w,c),c&&A&4&&d2(y,w);break;case 13:rl(y,w,c),c&&A&4&&u2(y,w);break;case 22:w.memoizedState===null&&rl(y,w,c),gd(w,w.return);break;case 30:break;default:rl(y,w,c)}l=l.sibling}}function V0(s,l){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&nd(c))}function G0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&nd(s))}function ls(s,l,c,p){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)m2(s,l,c,p),l=l.sibling}function m2(s,l,c,p){var y=l.flags;switch(l.tag){case 0:case 11:case 15:ls(s,l,c,p),y&2048&&bd(9,l);break;case 1:ls(s,l,c,p);break;case 3:ls(s,l,c,p),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&nd(s)));break;case 12:if(y&2048){ls(s,l,c,p),s=l.stateNode;try{var w=l.memoizedProps,A=w.id,K=w.onPostCommit;typeof K=="function"&&K(A,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ge){ir(l,l.return,ge)}}else ls(s,l,c,p);break;case 31:ls(s,l,c,p);break;case 13:ls(s,l,c,p);break;case 23:break;case 22:w=l.stateNode,A=l.alternate,l.memoizedState!==null?w._visibility&2?ls(s,l,c,p):vd(s,l):w._visibility&2?ls(s,l,c,p):(w._visibility|=2,Jo(s,l,c,p,(l.subtreeFlags&10256)!==0||!1)),y&2048&&V0(A,l);break;case 24:ls(s,l,c,p),y&2048&&G0(l.alternate,l);break;default:ls(s,l,c,p)}}function Jo(s,l,c,p,y){for(y=y&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=s,A=l,K=c,ge=p,Le=A.flags;switch(A.tag){case 0:case 11:case 15:Jo(w,A,K,ge,y),bd(8,A);break;case 23:break;case 22:var Ve=A.stateNode;A.memoizedState!==null?Ve._visibility&2?Jo(w,A,K,ge,y):vd(w,A):(Ve._visibility|=2,Jo(w,A,K,ge,y)),y&&Le&2048&&V0(A.alternate,A);break;case 24:Jo(w,A,K,ge,y),y&&Le&2048&&G0(A.alternate,A);break;default:Jo(w,A,K,ge,y)}l=l.sibling}}function vd(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=s,p=l,y=p.flags;switch(p.tag){case 22:vd(c,p),y&2048&&V0(p.alternate,p);break;case 24:vd(c,p),y&2048&&G0(p.alternate,p);break;default:vd(c,p)}l=l.sibling}}var yd=8192;function Zo(s,l,c){if(s.subtreeFlags&yd)for(s=s.child;s!==null;)p2(s,l,c),s=s.sibling}function p2(s,l,c){switch(s.tag){case 26:Zo(s,l,c),s.flags&yd&&s.memoizedState!==null&&yD(c,ss,s.memoizedState,s.memoizedProps);break;case 5:Zo(s,l,c);break;case 3:case 4:var p=ss;ss=Hf(s.stateNode.containerInfo),Zo(s,l,c),ss=p;break;case 22:s.memoizedState===null&&(p=s.alternate,p!==null&&p.memoizedState!==null?(p=yd,yd=16777216,Zo(s,l,c),yd=p):Zo(s,l,c));break;default:Zo(s,l,c)}}function x2(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function jd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var p=l[c];ga=p,g2(p,s)}x2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)b2(s),s=s.sibling}function b2(s){switch(s.tag){case 0:case 11:case 15:jd(s),s.flags&2048&&ql(9,s,s.return);break;case 3:jd(s);break;case 12:jd(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Of(s)):jd(s);break;default:jd(s)}}function Of(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var p=l[c];ga=p,g2(p,s)}x2(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ql(8,l,l.return),Of(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,Of(l));break;default:Of(l)}s=s.sibling}}function g2(s,l){for(;ga!==null;){var c=ga;switch(c.tag){case 0:case 11:case 15:ql(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var p=c.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:nd(c.memoizedState.cache)}if(p=c.child,p!==null)p.return=c,ga=p;else e:for(c=s;ga!==null;){p=ga;var y=p.sibling,w=p.return;if(o2(p),p===c){ga=null;break e}if(y!==null){y.return=w,ga=y;break e}ga=w}}}var DP={getCacheForType:function(s){var l=Ma(aa),c=l.data.get(s);return c===void 0&&(c=s(),l.data.set(s,c)),c},cacheSignal:function(){return Ma(aa).controller.signal}},LP=typeof WeakMap=="function"?WeakMap:Map,tr=0,gr=null,Bt=null,Ht=0,lr=0,_n=null,Fl=!1,Qo=!1,X0=!1,al=0,Fr=0,Hl=0,Bi=0,W0=0,kn=0,ec=0,Nd=null,ln=null,J0=!1,Mf=0,v2=0,If=1/0,Pf=null,Yl=null,ua=0,Kl=null,tc=null,nl=0,Z0=0,Q0=null,y2=null,wd=0,eb=null;function Sn(){return(tr&2)!==0&&Ht!==0?Ht&-Ht:M.T!==null?lb():ke()}function j2(){if(kn===0)if((Ht&536870912)===0||Vt){var s=ft;ft<<=1,(ft&3932160)===0&&(ft=262144),kn=s}else kn=536870912;return s=Nn.current,s!==null&&(s.flags|=32),kn}function on(s,l,c){(s===gr&&(lr===2||lr===9)||s.cancelPendingCommit!==null)&&(rc(s,0),Vl(s,Ht,kn,!1)),St(s,c),((tr&2)===0||s!==gr)&&(s===gr&&((tr&2)===0&&(Bi|=c),Fr===4&&Vl(s,Ht,kn,!1)),ys(s))}function N2(s,l,c){if((tr&6)!==0)throw Error(n(327));var p=!c&&(l&127)===0&&(l&s.expiredLanes)===0||Be(s,l),y=p?zP(s,l):rb(s,l,!0),w=p;do{if(y===0){Qo&&!p&&Vl(s,l,0,!1);break}else{if(c=s.current.alternate,w&&!RP(c)){y=rb(s,l,!1),w=!1;continue}if(y===2){if(w=l,s.errorRecoveryDisabledLanes&w)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var K=s;y=Nd;var ge=K.current.memoizedState.isDehydrated;if(ge&&(rc(K,A).flags|=256),A=rb(K,A,!1),A!==2){if(X0&&!ge){K.errorRecoveryDisabledLanes|=w,Bi|=w,y=4;break e}w=ln,ln=y,w!==null&&(ln===null?ln=w:ln.push.apply(ln,w))}y=A}if(w=!1,y!==2)continue}}if(y===1){rc(s,0),Vl(s,l,0,!0);break}e:{switch(p=s,w=y,w){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Vl(p,l,kn,!Fl);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(y=Mf+300-je(),10<y)){if(Vl(p,l,kn,!Fl),we(p,0,!0)!==0)break e;nl=l,p.timeoutHandle=Q2(w2.bind(null,p,c,ln,Pf,J0,l,kn,Bi,ec,Fl,w,"Throttled",-0,0),y);break e}w2(p,c,ln,Pf,J0,l,kn,Bi,ec,Fl,w,null,-0,0)}}break}while(!0);ys(s)}function w2(s,l,c,p,y,w,A,K,ge,Le,Ve,Qe,ze,Fe){if(s.timeoutHandle=-1,Qe=l.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Se},p2(l,w,Qe);var Nt=(w&62914560)===w?Mf-je():(w&4194048)===w?v2-je():0;if(Nt=jD(Qe,Nt),Nt!==null){nl=w,s.cancelPendingCommit=Nt(O2.bind(null,s,l,w,c,p,y,A,K,ge,Ve,Qe,null,ze,Fe)),Vl(s,w,A,!Le);return}}O2(s,l,w,c,p,y,A,K,ge)}function RP(s){for(var l=s;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var p=0;p<c.length;p++){var y=c[p],w=y.getSnapshot;y=y.value;try{if(!yn(w(),y))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vl(s,l,c,p){l&=~W0,l&=~Bi,s.suspendedLanes|=l,s.pingedLanes&=~l,p&&(s.warmLanes|=l),p=s.expirationTimes;for(var y=l;0<y;){var w=31-ht(y),A=1<<w;p[w]=-1,y&=~A}c!==0&&Rr(s,c,l)}function Df(){return(tr&6)===0?(_d(0),!1):!0}function tb(){if(Bt!==null){if(lr===0)var s=Bt.return;else s=Bt,Vs=Oi=null,b0(s),Ko=null,ld=0,s=Bt;for(;s!==null;)e2(s.alternate,s),s=s.return;Bt=null}}function rc(s,l){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,aD(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),nl=0,tb(),gr=s,Bt=c=Ys(s.current,null),Ht=l,lr=0,_n=null,Fl=!1,Qo=Be(s,l),X0=!1,ec=kn=W0=Bi=Hl=Fr=0,ln=Nd=null,J0=!1,(l&8)!==0&&(l|=l&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=l;0<p;){var y=31-ht(p),w=1<<y;l|=s[y],p&=~w}return al=l,tf(),c}function _2(s,l){Lt=null,M.H=md,l===Yo||l===df?(l=Bw(),lr=3):l===s0?(l=Bw(),lr=4):lr=l===I0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,_n=l,Bt===null&&(Fr=1,_f(s,Un(l,s.current)))}function k2(){var s=Nn.current;return s===null?!0:(Ht&4194048)===Ht?Yn===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?s===Yn:!1}function S2(){var s=M.H;return M.H=md,s===null?md:s}function E2(){var s=M.A;return M.A=DP,s}function Lf(){Fr=4,Fl||(Ht&4194048)!==Ht&&Nn.current!==null||(Qo=!0),(Hl&134217727)===0&&(Bi&134217727)===0||gr===null||Vl(gr,Ht,kn,!1)}function rb(s,l,c){var p=tr;tr|=2;var y=S2(),w=E2();(gr!==s||Ht!==l)&&(Pf=null,rc(s,l)),l=!1;var A=Fr;e:do try{if(lr!==0&&Bt!==null){var K=Bt,ge=_n;switch(lr){case 8:tb(),A=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(l=!0);var Le=lr;if(lr=0,_n=null,ac(s,K,ge,Le),c&&Qo){A=0;break e}break;default:Le=lr,lr=0,_n=null,ac(s,K,ge,Le)}}$P(),A=Fr;break}catch(Ve){_2(s,Ve)}while(!0);return l&&s.shellSuspendCounter++,Vs=Oi=null,tr=p,M.H=y,M.A=w,Bt===null&&(gr=null,Ht=0,tf()),A}function $P(){for(;Bt!==null;)T2(Bt)}function zP(s,l){var c=tr;tr|=2;var p=S2(),y=E2();gr!==s||Ht!==l?(Pf=null,If=je()+500,rc(s,l)):Qo=Be(s,l);e:do try{if(lr!==0&&Bt!==null){l=Bt;var w=_n;t:switch(lr){case 1:lr=0,_n=null,ac(s,l,w,1);break;case 2:case 9:if($w(w)){lr=0,_n=null,C2(l);break}l=function(){lr!==2&&lr!==9||gr!==s||(lr=7),ys(s)},w.then(l,l);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:$w(w)?(lr=0,_n=null,C2(l)):(lr=0,_n=null,ac(s,l,w,7));break;case 5:var A=null;switch(Bt.tag){case 26:A=Bt.memoizedState;case 5:case 27:var K=Bt;if(A?m_(A):K.stateNode.complete){lr=0,_n=null;var ge=K.sibling;if(ge!==null)Bt=ge;else{var Le=K.return;Le!==null?(Bt=Le,Rf(Le)):Bt=null}break t}}lr=0,_n=null,ac(s,l,w,5);break;case 6:lr=0,_n=null,ac(s,l,w,6);break;case 8:tb(),Fr=6;break e;default:throw Error(n(462))}}BP();break}catch(Ve){_2(s,Ve)}while(!0);return Vs=Oi=null,M.H=p,M.A=y,tr=c,Bt!==null?0:(gr=null,Ht=0,tf(),Fr)}function BP(){for(;Bt!==null&&!et();)T2(Bt)}function T2(s){var l=Z1(s.alternate,s,al);s.memoizedProps=s.pendingProps,l===null?Rf(s):Bt=l}function C2(s){var l=s,c=l.alternate;switch(l.tag){case 15:case 0:l=K1(c,l,l.pendingProps,l.type,void 0,Ht);break;case 11:l=K1(c,l,l.pendingProps,l.type.render,l.ref,Ht);break;case 5:b0(l);default:e2(c,l),l=Bt=Ew(l,al),l=Z1(c,l,al)}s.memoizedProps=s.pendingProps,l===null?Rf(s):Bt=l}function ac(s,l,c,p){Vs=Oi=null,b0(l),Ko=null,ld=0;var y=l.return;try{if(TP(s,y,l,c,Ht)){Fr=1,_f(s,Un(c,s.current)),Bt=null;return}}catch(w){if(y!==null)throw Bt=y,w;Fr=1,_f(s,Un(c,s.current)),Bt=null;return}l.flags&32768?(Vt||p===1?s=!0:Qo||(Ht&536870912)!==0?s=!1:(Fl=s=!0,(p===2||p===9||p===3||p===6)&&(p=Nn.current,p!==null&&p.tag===13&&(p.flags|=16384))),A2(l,s)):Rf(l)}function Rf(s){var l=s;do{if((l.flags&32768)!==0){A2(l,Fl);return}s=l.return;var c=OP(l.alternate,l,al);if(c!==null){Bt=c;return}if(l=l.sibling,l!==null){Bt=l;return}Bt=l=s}while(l!==null);Fr===0&&(Fr=5)}function A2(s,l){do{var c=MP(s.alternate,s);if(c!==null){c.flags&=32767,Bt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(s=s.sibling,s!==null)){Bt=s;return}Bt=s=c}while(s!==null);Fr=6,Bt=null}function O2(s,l,c,p,y,w,A,K,ge){s.cancelPendingCommit=null;do $f();while(ua!==0);if((tr&6)!==0)throw Error(n(327));if(l!==null){if(l===s.current)throw Error(n(177));if(w=l.lanes|l.childLanes,w|=Hx,$t(s,c,w,A,K,ge),s===gr&&(Bt=gr=null,Ht=0),tc=l,Kl=s,nl=c,Z0=w,Q0=y,y2=p,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,HP(tt,function(){return L2(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||p){p=M.T,M.T=null,y=P.p,P.p=2,A=tr,tr|=4;try{IP(s,l,c)}finally{tr=A,P.p=y,M.T=p}}ua=1,M2(),I2(),P2()}}function M2(){if(ua===1){ua=0;var s=Kl,l=tc,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=M.T,M.T=null;var p=P.p;P.p=2;var y=tr;tr|=4;try{f2(l,s);var w=mb,A=gw(s.containerInfo),K=w.focusedElem,ge=w.selectionRange;if(A!==K&&K&&K.ownerDocument&&bw(K.ownerDocument.documentElement,K)){if(ge!==null&&zx(K)){var Le=ge.start,Ve=ge.end;if(Ve===void 0&&(Ve=Le),"selectionStart"in K)K.selectionStart=Le,K.selectionEnd=Math.min(Ve,K.value.length);else{var Qe=K.ownerDocument||document,ze=Qe&&Qe.defaultView||window;if(ze.getSelection){var Fe=ze.getSelection(),Nt=K.textContent.length,At=Math.min(ge.start,Nt),hr=ge.end===void 0?At:Math.min(ge.end,Nt);!Fe.extend&&At>hr&&(A=hr,hr=At,At=A);var Te=xw(K,At),_e=xw(K,hr);if(Te&&_e&&(Fe.rangeCount!==1||Fe.anchorNode!==Te.node||Fe.anchorOffset!==Te.offset||Fe.focusNode!==_e.node||Fe.focusOffset!==_e.offset)){var Pe=Qe.createRange();Pe.setStart(Te.node,Te.offset),Fe.removeAllRanges(),At>hr?(Fe.addRange(Pe),Fe.extend(_e.node,_e.offset)):(Pe.setEnd(_e.node,_e.offset),Fe.addRange(Pe))}}}}for(Qe=[],Fe=K;Fe=Fe.parentNode;)Fe.nodeType===1&&Qe.push({element:Fe,left:Fe.scrollLeft,top:Fe.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<Qe.length;K++){var We=Qe[K];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}Wf=!!hb,mb=hb=null}finally{tr=y,P.p=p,M.T=c}}s.current=l,ua=2}}function I2(){if(ua===2){ua=0;var s=Kl,l=tc,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=M.T,M.T=null;var p=P.p;P.p=2;var y=tr;tr|=4;try{i2(s,l.alternate,l)}finally{tr=y,P.p=p,M.T=c}}ua=3}}function P2(){if(ua===4||ua===3){ua=0,nt();var s=Kl,l=tc,c=nl,p=y2;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?ua=5:(ua=0,tc=Kl=null,D2(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Yl=null),ee(c),l=l.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(st,l,void 0,(l.current.flags&128)===128)}catch{}if(p!==null){l=M.T,y=P.p,P.p=2,M.T=null;try{for(var w=s.onRecoverableError,A=0;A<p.length;A++){var K=p[A];w(K.value,{componentStack:K.stack})}}finally{M.T=l,P.p=y}}(nl&3)!==0&&$f(),ys(s),y=s.pendingLanes,(c&261930)!==0&&(y&42)!==0?s===eb?wd++:(wd=0,eb=s):wd=0,_d(0)}}function D2(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,nd(l)))}function $f(){return M2(),I2(),P2(),L2()}function L2(){if(ua!==5)return!1;var s=Kl,l=Z0;Z0=0;var c=ee(nl),p=M.T,y=P.p;try{P.p=32>c?32:c,M.T=null,c=Q0,Q0=null;var w=Kl,A=nl;if(ua=0,tc=Kl=null,nl=0,(tr&6)!==0)throw Error(n(331));var K=tr;if(tr|=4,b2(w.current),m2(w,w.current,A,c),tr=K,_d(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(st,w)}catch{}return!0}finally{P.p=y,M.T=p,D2(s,l)}}function R2(s,l,c){l=Un(c,l),l=M0(s.stateNode,l,2),s=zl(s,l,2),s!==null&&(St(s,2),ys(s))}function ir(s,l,c){if(s.tag===3)R2(s,s,c);else for(;l!==null;){if(l.tag===3){R2(l,s,c);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Yl===null||!Yl.has(p))){s=Un(c,s),c=$1(2),p=zl(l,c,2),p!==null&&(z1(c,p,l,s),St(p,2),ys(p));break}}l=l.return}}function ab(s,l,c){var p=s.pingCache;if(p===null){p=s.pingCache=new LP;var y=new Set;p.set(l,y)}else y=p.get(l),y===void 0&&(y=new Set,p.set(l,y));y.has(c)||(X0=!0,y.add(c),s=UP.bind(null,s,l,c),l.then(s,s))}function UP(s,l,c){var p=s.pingCache;p!==null&&p.delete(l),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,gr===s&&(Ht&c)===c&&(Fr===4||Fr===3&&(Ht&62914560)===Ht&&300>je()-Mf?(tr&2)===0&&rc(s,0):W0|=c,ec===Ht&&(ec=0)),ys(s)}function $2(s,l){l===0&&(l=wt()),s=Ti(s,l),s!==null&&(St(s,l),ys(s))}function qP(s){var l=s.memoizedState,c=0;l!==null&&(c=l.retryLane),$2(s,c)}function FP(s,l){var c=0;switch(s.tag){case 31:case 13:var p=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(l),$2(s,c)}function HP(s,l){return $e(s,l)}var zf=null,nc=null,nb=!1,Bf=!1,sb=!1,Gl=0;function ys(s){s!==nc&&s.next===null&&(nc===null?zf=nc=s:nc=nc.next=s),Bf=!0,nb||(nb=!0,KP())}function _d(s,l){if(!sb&&Bf){sb=!0;do for(var c=!1,p=zf;p!==null;){if(s!==0){var y=p.pendingLanes;if(y===0)var w=0;else{var A=p.suspendedLanes,K=p.pingedLanes;w=(1<<31-ht(42|s)+1)-1,w&=y&~(A&~K),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,q2(p,w))}else w=Ht,w=we(p,p===gr?w:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(w&3)===0||Be(p,w)||(c=!0,q2(p,w));p=p.next}while(c);sb=!1}}function YP(){z2()}function z2(){Bf=nb=!1;var s=0;Gl!==0&&rD()&&(s=Gl);for(var l=je(),c=null,p=zf;p!==null;){var y=p.next,w=B2(p,l);w===0?(p.next=null,c===null?zf=y:c.next=y,y===null&&(nc=c)):(c=p,(s!==0||(w&3)!==0)&&(Bf=!0)),p=y}ua!==0&&ua!==5||_d(s),Gl!==0&&(Gl=0)}function B2(s,l){for(var c=s.suspendedLanes,p=s.pingedLanes,y=s.expirationTimes,w=s.pendingLanes&-62914561;0<w;){var A=31-ht(w),K=1<<A,ge=y[A];ge===-1?((K&c)===0||(K&p)!==0)&&(y[A]=gt(K,l)):ge<=l&&(s.expiredLanes|=K),w&=~K}if(l=gr,c=Ht,c=we(s,s===l?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,c===0||s===l&&(lr===2||lr===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Xe(p),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Be(s,c)){if(l=c&-c,l===s.callbackPriority)return l;switch(p!==null&&Xe(p),ee(c)){case 2:case 8:c=ae;break;case 32:c=tt;break;case 268435456:c=Ee;break;default:c=tt}return p=U2.bind(null,s),c=$e(c,p),s.callbackPriority=l,s.callbackNode=c,l}return p!==null&&p!==null&&Xe(p),s.callbackPriority=2,s.callbackNode=null,2}function U2(s,l){if(ua!==0&&ua!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if($f()&&s.callbackNode!==c)return null;var p=Ht;return p=we(s,s===gr?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(N2(s,p,l),B2(s,je()),s.callbackNode!=null&&s.callbackNode===c?U2.bind(null,s):null)}function q2(s,l){if($f())return null;N2(s,l,!0)}function KP(){nD(function(){(tr&6)!==0?$e(pt,YP):z2()})}function lb(){if(Gl===0){var s=Fo;s===0&&(s=it,it<<=1,(it&261888)===0&&(it=256)),Gl=s}return Gl}function F2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Q(""+s)}function H2(s,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,s.id&&c.setAttribute("form",s.id),l.parentNode.insertBefore(c,l),s=new FormData(s),c.parentNode.removeChild(c),s}function VP(s,l,c,p,y){if(l==="submit"&&c&&c.stateNode===y){var w=F2((y[ot]||null).action),A=p.submitter;A&&(l=(l=A[ot]||null)?F2(l.formAction):A.getAttribute("formAction"),l!==null&&(w=l,A=null));var K=new rn("action","action",null,p,y);s.push({event:K,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Gl!==0){var ge=A?H2(y,A):new FormData(y);S0(c,{pending:!0,data:ge,method:y.method,action:w},null,ge)}}else typeof w=="function"&&(K.preventDefault(),ge=A?H2(y,A):new FormData(y),S0(c,{pending:!0,data:ge,method:y.method,action:w},w,ge))},currentTarget:y}]})}}for(var ib=0;ib<Fx.length;ib++){var ob=Fx[ib],GP=ob.toLowerCase(),XP=ob[0].toUpperCase()+ob.slice(1);ns(GP,"on"+XP)}ns(jw,"onAnimationEnd"),ns(Nw,"onAnimationIteration"),ns(ww,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(uP,"onTransitionRun"),ns(fP,"onTransitionStart"),ns(hP,"onTransitionCancel"),ns(_w,"onTransitionEnd"),bn("onMouseEnter",["mouseout","mouseover"]),bn("onMouseLeave",["mouseout","mouseover"]),bn("onPointerEnter",["pointerout","pointerover"]),bn("onPointerLeave",["pointerout","pointerover"]),xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kd));function Y2(s,l){l=(l&4)!==0;for(var c=0;c<s.length;c++){var p=s[c],y=p.event;p=p.listeners;e:{var w=void 0;if(l)for(var A=p.length-1;0<=A;A--){var K=p[A],ge=K.instance,Le=K.currentTarget;if(K=K.listener,ge!==w&&y.isPropagationStopped())break e;w=K,y.currentTarget=Le;try{w(y)}catch(Ve){ef(Ve)}y.currentTarget=null,w=ge}else for(A=0;A<p.length;A++){if(K=p[A],ge=K.instance,Le=K.currentTarget,K=K.listener,ge!==w&&y.isPropagationStopped())break e;w=K,y.currentTarget=Le;try{w(y)}catch(Ve){ef(Ve)}y.currentTarget=null,w=ge}}}}function Ut(s,l){var c=l[Mt];c===void 0&&(c=l[Mt]=new Set);var p=s+"__bubble";c.has(p)||(K2(l,s,2,!1),c.add(p))}function cb(s,l,c){var p=0;l&&(p|=4),K2(c,s,p,l)}var Uf="_reactListening"+Math.random().toString(36).slice(2);function db(s){if(!s[Uf]){s[Uf]=!0,Xt.forEach(function(c){c!=="selectionchange"&&(WP.has(c)||cb(c,!1,s),cb(c,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Uf]||(l[Uf]=!0,cb("selectionchange",!1,l))}}function K2(s,l,c,p){switch(j_(l)){case 2:var y=_D;break;case 8:y=kD;break;default:y=kb}c=y.bind(null,l,c,s),y=void 0,!Kt||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),p?y!==void 0?s.addEventListener(l,c,{capture:!0,passive:y}):s.addEventListener(l,c,!0):y!==void 0?s.addEventListener(l,c,{passive:y}):s.addEventListener(l,c,!1)}function ub(s,l,c,p,y){var w=p;if((l&1)===0&&(l&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var K=p.stateNode.containerInfo;if(K===y)break;if(A===4)for(A=p.return;A!==null;){var ge=A.tag;if((ge===3||ge===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;K!==null;){if(A=Ft(K),A===null)return;if(ge=A.tag,ge===5||ge===6||ge===26||ge===27){p=w=A;continue e}K=K.parentNode}}p=p.return}Ct(function(){var Le=w,Ve=qe(c),Qe=[];e:{var ze=kw.get(s);if(ze!==void 0){var Fe=rn,Nt=s;switch(s){case"keypress":if(Ca(c)===0)break e;case"keydown":case"keyup":Fe=FI;break;case"focusin":Nt="focus",Fe=Px;break;case"focusout":Nt="blur",Fe=Px;break;case"beforeblur":case"afterblur":Fe=Px;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=OI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=KI;break;case jw:case Nw:case ww:Fe=PI;break;case _w:Fe=GI;break;case"scroll":case"scrollend":Fe=Ml;break;case"wheel":Fe=WI;break;case"copy":case"cut":case"paste":Fe=LI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=rw;break;case"toggle":case"beforetoggle":Fe=ZI}var At=(l&4)!==0,hr=!At&&(s==="scroll"||s==="scrollend"),Te=At?ze!==null?ze+"Capture":null:ze;At=[];for(var _e=Le,Pe;_e!==null;){var We=_e;if(Pe=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||Pe===null||Te===null||(We=Wt(_e,Te),We!=null&&At.push(Sd(_e,We,Pe))),hr)break;_e=_e.return}0<At.length&&(ze=new Fe(ze,Nt,null,c,Ve),Qe.push({event:ze,listeners:At}))}}if((l&7)===0){e:{if(ze=s==="mouseover"||s==="pointerover",Fe=s==="mouseout"||s==="pointerout",ze&&c!==De&&(Nt=c.relatedTarget||c.fromElement)&&(Ft(Nt)||Nt[at]))break e;if((Fe||ze)&&(ze=Ve.window===Ve?Ve:(ze=Ve.ownerDocument)?ze.defaultView||ze.parentWindow:window,Fe?(Nt=c.relatedTarget||c.toElement,Fe=Le,Nt=Nt?Ft(Nt):null,Nt!==null&&(hr=o(Nt),At=Nt.tag,Nt!==hr||At!==5&&At!==27&&At!==6)&&(Nt=null)):(Fe=null,Nt=Le),Fe!==Nt)){if(At=ew,We="onMouseLeave",Te="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(At=rw,We="onPointerLeave",Te="onPointerEnter",_e="pointer"),hr=Fe==null?ze:br(Fe),Pe=Nt==null?ze:br(Nt),ze=new At(We,_e+"leave",Fe,c,Ve),ze.target=hr,ze.relatedTarget=Pe,We=null,Ft(Ve)===Le&&(At=new At(Te,_e+"enter",Nt,c,Ve),At.target=Pe,At.relatedTarget=hr,We=At),hr=We,Fe&&Nt)t:{for(At=JP,Te=Fe,_e=Nt,Pe=0,We=Te;We;We=At(We))Pe++;We=0;for(var Tt=_e;Tt;Tt=At(Tt))We++;for(;0<Pe-We;)Te=At(Te),Pe--;for(;0<We-Pe;)_e=At(_e),We--;for(;Pe--;){if(Te===_e||_e!==null&&Te===_e.alternate){At=Te;break t}Te=At(Te),_e=At(_e)}At=null}else At=null;Fe!==null&&V2(Qe,ze,Fe,At,!1),Nt!==null&&hr!==null&&V2(Qe,hr,Nt,At,!0)}}e:{if(ze=Le?br(Le):window,Fe=ze.nodeName&&ze.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&ze.type==="file")var Jt=dw;else if(ow(ze))if(uw)Jt=oP;else{Jt=lP;var kt=sP}else Fe=ze.nodeName,!Fe||Fe.toLowerCase()!=="input"||ze.type!=="checkbox"&&ze.type!=="radio"?Le&&fe(Le.elementType)&&(Jt=dw):Jt=iP;if(Jt&&(Jt=Jt(s,Le))){cw(Qe,Jt,c,Ve);break e}kt&&kt(s,ze,Le),s==="focusout"&&Le&&ze.type==="number"&&Le.memoizedProps.value!=null&&ji(ze,"number",ze.value)}switch(kt=Le?br(Le):window,s){case"focusin":(ow(kt)||kt.contentEditable==="true")&&(Do=kt,Bx=Le,td=null);break;case"focusout":td=Bx=Do=null;break;case"mousedown":Ux=!0;break;case"contextmenu":case"mouseup":case"dragend":Ux=!1,vw(Qe,c,Ve);break;case"selectionchange":if(dP)break;case"keydown":case"keyup":vw(Qe,c,Ve)}var Rt;if(Lx)e:{switch(s){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Po?lw(s,c)&&(Yt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Yt="onCompositionStart");Yt&&(aw&&c.locale!=="ko"&&(Po||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Po&&(Rt=Wr()):(Ot=Ve,zr="value"in Ot?Ot.value:Ot.textContent,Po=!0)),kt=qf(Le,Yt),0<kt.length&&(Yt=new tw(Yt,s,null,c,Ve),Qe.push({event:Yt,listeners:kt}),Rt?Yt.data=Rt:(Rt=iw(c),Rt!==null&&(Yt.data=Rt)))),(Rt=eP?tP(s,c):rP(s,c))&&(Yt=qf(Le,"onBeforeInput"),0<Yt.length&&(kt=new tw("onBeforeInput","beforeinput",null,c,Ve),Qe.push({event:kt,listeners:Yt}),kt.data=Rt)),VP(Qe,s,Le,c,Ve)}Y2(Qe,l)})}function Sd(s,l,c){return{instance:s,listener:l,currentTarget:c}}function qf(s,l){for(var c=l+"Capture",p=[];s!==null;){var y=s,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Wt(s,c),y!=null&&p.unshift(Sd(s,y,w)),y=Wt(s,l),y!=null&&p.push(Sd(s,y,w))),s.tag===3)return p;s=s.return}return[]}function JP(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function V2(s,l,c,p,y){for(var w=l._reactName,A=[];c!==null&&c!==p;){var K=c,ge=K.alternate,Le=K.stateNode;if(K=K.tag,ge!==null&&ge===p)break;K!==5&&K!==26&&K!==27||Le===null||(ge=Le,y?(Le=Wt(c,w),Le!=null&&A.unshift(Sd(c,Le,ge))):y||(Le=Wt(c,w),Le!=null&&A.push(Sd(c,Le,ge)))),c=c.return}A.length!==0&&s.push({event:l,listeners:A})}var ZP=/\r\n?/g,QP=/\u0000|\uFFFD/g;function G2(s){return(typeof s=="string"?s:""+s).replace(ZP,`
`).replace(QP,"")}function X2(s,l){return l=G2(l),G2(s)===l}function fr(s,l,c,p,y,w){switch(c){case"children":typeof p=="string"?l==="body"||l==="textarea"&&p===""||xs(s,p):(typeof p=="number"||typeof p=="bigint")&&l!=="body"&&xs(s,""+p);break;case"className":Us(s,"class",p);break;case"tabIndex":Us(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Us(s,c,p);break;case"style":R(s,p,w);break;case"data":if(l!=="object"){Us(s,"data",p);break}case"src":case"href":if(p===""&&(l!=="a"||c!=="href")){s.removeAttribute(c);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(c);break}p=Q(""+p),s.setAttribute(c,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(l!=="input"&&fr(s,l,"name",y.name,y,null),fr(s,l,"formEncType",y.formEncType,y,null),fr(s,l,"formMethod",y.formMethod,y,null),fr(s,l,"formTarget",y.formTarget,y,null)):(fr(s,l,"encType",y.encType,y,null),fr(s,l,"method",y.method,y,null),fr(s,l,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(c);break}p=Q(""+p),s.setAttribute(c,p);break;case"onClick":p!=null&&(s.onclick=Se);break;case"onScroll":p!=null&&Ut("scroll",s);break;case"onScrollEnd":p!=null&&Ut("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}c=Q(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,""+p):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":p===!0?s.setAttribute(c,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(c,p):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(c,p):s.removeAttribute(c);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(c):s.setAttribute(c,p);break;case"popover":Ut("beforetoggle",s),Ut("toggle",s),Bs(s,"popover",p);break;case"xlinkActuate":gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":gn(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":gn(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":gn(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":gn(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Bs(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ue.get(c)||c,Bs(s,c,p))}}function fb(s,l,c,p,y,w){switch(c){case"style":R(s,p,w);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(c=p.__html,c!=null){if(y.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof p=="string"?xs(s,p):(typeof p=="number"||typeof p=="bigint")&&xs(s,""+p);break;case"onScroll":p!=null&&Ut("scroll",s);break;case"onScrollEnd":p!=null&&Ut("scrollend",s);break;case"onClick":p!=null&&(s.onclick=Se);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),l=c.slice(2,y?c.length-7:void 0),w=s[ot]||null,w=w!=null?w[c]:null,typeof w=="function"&&s.removeEventListener(l,w,y),typeof p=="function")){typeof w!="function"&&w!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(l,p,y);break e}c in s?s[c]=p:p===!0?s.setAttribute(c,""):Bs(s,c,p)}}}function Pa(s,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",s),Ut("load",s);var p=!1,y=!1,w;for(w in c)if(c.hasOwnProperty(w)){var A=c[w];if(A!=null)switch(w){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:fr(s,l,w,A,c,null)}}y&&fr(s,l,"srcSet",c.srcSet,c,null),p&&fr(s,l,"src",c.src,c,null);return;case"input":Ut("invalid",s);var K=w=A=y=null,ge=null,Le=null;for(p in c)if(c.hasOwnProperty(p)){var Ve=c[p];if(Ve!=null)switch(p){case"name":y=Ve;break;case"type":A=Ve;break;case"checked":ge=Ve;break;case"defaultChecked":Le=Ve;break;case"value":w=Ve;break;case"defaultValue":K=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(n(137,l));break;default:fr(s,l,p,Ve,c,null)}}Mo(s,w,K,ge,Le,A,y,!1);return;case"select":Ut("invalid",s),p=A=w=null;for(y in c)if(c.hasOwnProperty(y)&&(K=c[y],K!=null))switch(y){case"value":w=K;break;case"defaultValue":A=K;break;case"multiple":p=K;default:fr(s,l,y,K,c,null)}l=w,c=A,s.multiple=!!p,l!=null?Ka(s,!!p,l,!1):c!=null&&Ka(s,!!p,c,!0);return;case"textarea":Ut("invalid",s),w=y=p=null;for(A in c)if(c.hasOwnProperty(A)&&(K=c[A],K!=null))switch(A){case"value":p=K;break;case"defaultValue":y=K;break;case"children":w=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(91));break;default:fr(s,l,A,K,c,null)}wi(s,p,y,w);return;case"option":for(ge in c)if(c.hasOwnProperty(ge)&&(p=c[ge],p!=null))switch(ge){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:fr(s,l,ge,p,c,null)}return;case"dialog":Ut("beforetoggle",s),Ut("toggle",s),Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":Ut("load",s);break;case"video":case"audio":for(p=0;p<kd.length;p++)Ut(kd[p],s);break;case"image":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"embed":case"source":case"link":Ut("error",s),Ut("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in c)if(c.hasOwnProperty(Le)&&(p=c[Le],p!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:fr(s,l,Le,p,c,null)}return;default:if(fe(l)){for(Ve in c)c.hasOwnProperty(Ve)&&(p=c[Ve],p!==void 0&&fb(s,l,Ve,p,c,void 0));return}}for(K in c)c.hasOwnProperty(K)&&(p=c[K],p!=null&&fr(s,l,K,p,c,null))}function eD(s,l,c,p){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,A=null,K=null,ge=null,Le=null,Ve=null;for(Fe in c){var Qe=c[Fe];if(c.hasOwnProperty(Fe)&&Qe!=null)switch(Fe){case"checked":break;case"value":break;case"defaultValue":ge=Qe;default:p.hasOwnProperty(Fe)||fr(s,l,Fe,null,p,Qe)}}for(var ze in p){var Fe=p[ze];if(Qe=c[ze],p.hasOwnProperty(ze)&&(Fe!=null||Qe!=null))switch(ze){case"type":w=Fe;break;case"name":y=Fe;break;case"checked":Le=Fe;break;case"defaultChecked":Ve=Fe;break;case"value":A=Fe;break;case"defaultValue":K=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,l));break;default:Fe!==Qe&&fr(s,l,ze,Fe,p,Qe)}}Hs(s,A,K,ge,Le,Ve,w,y);return;case"select":Fe=A=K=ze=null;for(w in c)if(ge=c[w],c.hasOwnProperty(w)&&ge!=null)switch(w){case"value":break;case"multiple":Fe=ge;default:p.hasOwnProperty(w)||fr(s,l,w,null,p,ge)}for(y in p)if(w=p[y],ge=c[y],p.hasOwnProperty(y)&&(w!=null||ge!=null))switch(y){case"value":ze=w;break;case"defaultValue":K=w;break;case"multiple":A=w;default:w!==ge&&fr(s,l,y,w,p,ge)}l=K,c=A,p=Fe,ze!=null?Ka(s,!!c,ze,!1):!!p!=!!c&&(l!=null?Ka(s,!!c,l,!0):Ka(s,!!c,c?[]:"",!1));return;case"textarea":Fe=ze=null;for(K in c)if(y=c[K],c.hasOwnProperty(K)&&y!=null&&!p.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:fr(s,l,K,null,p,y)}for(A in p)if(y=p[A],w=c[A],p.hasOwnProperty(A)&&(y!=null||w!=null))switch(A){case"value":ze=y;break;case"defaultValue":Fe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==w&&fr(s,l,A,y,p,w)}Ni(s,ze,Fe);return;case"option":for(var Nt in c)if(ze=c[Nt],c.hasOwnProperty(Nt)&&ze!=null&&!p.hasOwnProperty(Nt))switch(Nt){case"selected":s.selected=!1;break;default:fr(s,l,Nt,null,p,ze)}for(ge in p)if(ze=p[ge],Fe=c[ge],p.hasOwnProperty(ge)&&ze!==Fe&&(ze!=null||Fe!=null))switch(ge){case"selected":s.selected=ze&&typeof ze!="function"&&typeof ze!="symbol";break;default:fr(s,l,ge,ze,p,Fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in c)ze=c[At],c.hasOwnProperty(At)&&ze!=null&&!p.hasOwnProperty(At)&&fr(s,l,At,null,p,ze);for(Le in p)if(ze=p[Le],Fe=c[Le],p.hasOwnProperty(Le)&&ze!==Fe&&(ze!=null||Fe!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,l));break;default:fr(s,l,Le,ze,p,Fe)}return;default:if(fe(l)){for(var hr in c)ze=c[hr],c.hasOwnProperty(hr)&&ze!==void 0&&!p.hasOwnProperty(hr)&&fb(s,l,hr,void 0,p,ze);for(Ve in p)ze=p[Ve],Fe=c[Ve],!p.hasOwnProperty(Ve)||ze===Fe||ze===void 0&&Fe===void 0||fb(s,l,Ve,ze,p,Fe);return}}for(var Te in c)ze=c[Te],c.hasOwnProperty(Te)&&ze!=null&&!p.hasOwnProperty(Te)&&fr(s,l,Te,null,p,ze);for(Qe in p)ze=p[Qe],Fe=c[Qe],!p.hasOwnProperty(Qe)||ze===Fe||ze==null&&Fe==null||fr(s,l,Qe,ze,p,Fe)}function W2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tD(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,c=performance.getEntriesByType("resource"),p=0;p<c.length;p++){var y=c[p],w=y.transferSize,A=y.initiatorType,K=y.duration;if(w&&K&&W2(A)){for(A=0,K=y.responseEnd,p+=1;p<c.length;p++){var ge=c[p],Le=ge.startTime;if(Le>K)break;var Ve=ge.transferSize,Qe=ge.initiatorType;Ve&&W2(Qe)&&(ge=ge.responseEnd,A+=Ve*(ge<K?1:(K-Le)/(ge-Le)))}if(--p,l+=8*(w+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var hb=null,mb=null;function Ff(s){return s.nodeType===9?s:s.ownerDocument}function J2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Z2(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function pb(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var xb=null;function rD(){var s=window.event;return s&&s.type==="popstate"?s===xb?!1:(xb=s,!0):(xb=null,!1)}var Q2=typeof setTimeout=="function"?setTimeout:void 0,aD=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,nD=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(s){return e_.resolve(null).then(s).catch(sD)}:Q2;function sD(s){setTimeout(function(){throw s})}function Xl(s){return s==="head"}function t_(s,l){var c=l,p=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(p===0){s.removeChild(y),oc(l);return}p--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")p++;else if(c==="html")Ed(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Ed(c);for(var w=c.firstChild;w;){var A=w.nextSibling,K=w.nodeName;w[jr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=A}}else c==="body"&&Ed(s.ownerDocument.body);c=y}while(c);oc(l)}function r_(s,l){var c=s;s=0;do{var p=c.nextSibling;if(c.nodeType===1?l?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(l?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=p}while(c)}function bb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":bb(c),xr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function lD(s,l,c,p){for(;s.nodeType===1;){var y=c;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[jr])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(w=s.getAttribute("rel"),w==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(w!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(w=s.getAttribute("src"),(w!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===w)return s}else return s;if(s=Kn(s.nextSibling),s===null)break}return null}function iD(s,l,c){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Kn(s.nextSibling),s===null))return null;return s}function a_(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Kn(s.nextSibling),s===null))return null;return s}function gb(s){return s.data==="$?"||s.data==="$~"}function vb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function oD(s,l){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||c.readyState!=="loading")l();else{var p=function(){l(),c.removeEventListener("DOMContentLoaded",p)};c.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function Kn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var yb=null;function n_(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(l===0)return Kn(s.nextSibling);l--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||l++}s=s.nextSibling}return null}function s_(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(l===0)return s;l--}else c!=="/$"&&c!=="/&"||l++}s=s.previousSibling}return null}function l_(s,l,c){switch(l=Ff(c),s){case"html":if(s=l.documentElement,!s)throw Error(n(452));return s;case"head":if(s=l.head,!s)throw Error(n(453));return s;case"body":if(s=l.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function Ed(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);xr(s)}var Vn=new Map,i_=new Set;function Hf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var sl=P.d;P.d={f:cD,r:dD,D:uD,C:fD,L:hD,m:mD,X:xD,S:pD,M:bD};function cD(){var s=sl.f(),l=Df();return s||l}function dD(s){var l=cr(s);l!==null&&l.tag===5&&l.type==="form"?_1(l):sl.r(s)}var sc=typeof document>"u"?null:document;function o_(s,l,c){var p=sc;if(p&&typeof l=="string"&&l){var y=$a(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),i_.has(y)||(i_.add(y),s={rel:s,crossOrigin:c,href:l},p.querySelector(y)===null&&(l=p.createElement("link"),Pa(l,"link",s),Sr(l),p.head.appendChild(l)))}}function uD(s){sl.D(s),o_("dns-prefetch",s,null)}function fD(s,l){sl.C(s,l),o_("preconnect",s,l)}function hD(s,l,c){sl.L(s,l,c);var p=sc;if(p&&s&&l){var y='link[rel="preload"][as="'+$a(l)+'"]';l==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+$a(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+$a(c.imageSizes)+'"]')):y+='[href="'+$a(s)+'"]';var w=y;switch(l){case"style":w=lc(s);break;case"script":w=ic(s)}Vn.has(w)||(s=x({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:s,as:l},c),Vn.set(w,s),p.querySelector(y)!==null||l==="style"&&p.querySelector(Td(w))||l==="script"&&p.querySelector(Cd(w))||(l=p.createElement("link"),Pa(l,"link",s),Sr(l),p.head.appendChild(l)))}}function mD(s,l){sl.m(s,l);var c=sc;if(c&&s){var p=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+$a(p)+'"][href="'+$a(s)+'"]',w=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ic(s)}if(!Vn.has(w)&&(s=x({rel:"modulepreload",href:s},l),Vn.set(w,s),c.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Cd(w)))return}p=c.createElement("link"),Pa(p,"link",s),Sr(p),c.head.appendChild(p)}}}function pD(s,l,c){sl.S(s,l,c);var p=sc;if(p&&s){var y=Ta(p).hoistableStyles,w=lc(s);l=l||"default";var A=y.get(w);if(!A){var K={loading:0,preload:null};if(A=p.querySelector(Td(w)))K.loading=5;else{s=x({rel:"stylesheet",href:s,"data-precedence":l},c),(c=Vn.get(w))&&jb(s,c);var ge=A=p.createElement("link");Sr(ge),Pa(ge,"link",s),ge._p=new Promise(function(Le,Ve){ge.onload=Le,ge.onerror=Ve}),ge.addEventListener("load",function(){K.loading|=1}),ge.addEventListener("error",function(){K.loading|=2}),K.loading|=4,Yf(A,l,p)}A={type:"stylesheet",instance:A,count:1,state:K},y.set(w,A)}}}function xD(s,l){sl.X(s,l);var c=sc;if(c&&s){var p=Ta(c).hoistableScripts,y=ic(s),w=p.get(y);w||(w=c.querySelector(Cd(y)),w||(s=x({src:s,async:!0},l),(l=Vn.get(y))&&Nb(s,l),w=c.createElement("script"),Sr(w),Pa(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function bD(s,l){sl.M(s,l);var c=sc;if(c&&s){var p=Ta(c).hoistableScripts,y=ic(s),w=p.get(y);w||(w=c.querySelector(Cd(y)),w||(s=x({src:s,async:!0,type:"module"},l),(l=Vn.get(y))&&Nb(s,l),w=c.createElement("script"),Sr(w),Pa(w,"link",s),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},p.set(y,w))}}function c_(s,l,c,p){var y=(y=Y.current)?Hf(y):null;if(!y)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=lc(c.href),c=Ta(y).hoistableStyles,p=c.get(l),p||(p={type:"style",instance:null,count:0,state:null},c.set(l,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=lc(c.href);var w=Ta(y).hoistableStyles,A=w.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(s,A),(w=y.querySelector(Td(s)))&&!w._p&&(A.instance=w,A.state.loading=5),Vn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Vn.set(s,c),w||gD(y,s,c,A.state))),l&&p===null)throw Error(n(528,""));return A}if(l&&p!==null)throw Error(n(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ic(c),c=Ta(y).hoistableScripts,p=c.get(l),p||(p={type:"script",instance:null,count:0,state:null},c.set(l,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function lc(s){return'href="'+$a(s)+'"'}function Td(s){return'link[rel="stylesheet"]['+s+"]"}function d_(s){return x({},s,{"data-precedence":s.precedence,precedence:null})}function gD(s,l,c,p){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?p.loading=1:(l=s.createElement("link"),p.preload=l,l.addEventListener("load",function(){return p.loading|=1}),l.addEventListener("error",function(){return p.loading|=2}),Pa(l,"link",c),Sr(l),s.head.appendChild(l))}function ic(s){return'[src="'+$a(s)+'"]'}function Cd(s){return"script[async]"+s}function u_(s,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var p=s.querySelector('style[data-href~="'+$a(c.href)+'"]');if(p)return l.instance=p,Sr(p),p;var y=x({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),Sr(p),Pa(p,"style",y),Yf(p,c.precedence,s),l.instance=p;case"stylesheet":y=lc(c.href);var w=s.querySelector(Td(y));if(w)return l.state.loading|=4,l.instance=w,Sr(w),w;p=d_(c),(y=Vn.get(y))&&jb(p,y),w=(s.ownerDocument||s).createElement("link"),Sr(w);var A=w;return A._p=new Promise(function(K,ge){A.onload=K,A.onerror=ge}),Pa(w,"link",p),l.state.loading|=4,Yf(w,c.precedence,s),l.instance=w;case"script":return w=ic(c.src),(y=s.querySelector(Cd(w)))?(l.instance=y,Sr(y),y):(p=c,(y=Vn.get(w))&&(p=x({},c),Nb(p,y)),s=s.ownerDocument||s,y=s.createElement("script"),Sr(y),Pa(y,"link",p),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(p=l.instance,l.state.loading|=4,Yf(p,c.precedence,s));return l.instance}function Yf(s,l,c){for(var p=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,w=y,A=0;A<p.length;A++){var K=p[A];if(K.dataset.precedence===l)w=K;else if(w!==y)break}w?w.parentNode.insertBefore(s,w.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(s,l.firstChild))}function jb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Nb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Kf=null;function f_(s,l,c){if(Kf===null){var p=new Map,y=Kf=new Map;y.set(c,p)}else y=Kf,p=y.get(c),p||(p=new Map,y.set(c,p));if(p.has(s))return p;for(p.set(s,null),c=c.getElementsByTagName(s),y=0;y<c.length;y++){var w=c[y];if(!(w[jr]||w[Ge]||s==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var A=w.getAttribute(l)||"";A=s+A;var K=p.get(A);K?K.push(w):p.set(A,[w])}}return p}function h_(s,l,c){s=s.ownerDocument||s,s.head.insertBefore(c,l==="title"?s.querySelector("head > title"):null)}function vD(s,l,c){if(c===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function m_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function yD(s,l,c,p){if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=lc(p.href),w=l.querySelector(Td(y));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Vf.bind(s),l.then(s,s)),c.state.loading|=4,c.instance=w,Sr(w);return}w=l.ownerDocument||l,p=d_(p),(y=Vn.get(y))&&jb(p,y),w=w.createElement("link"),Sr(w);var A=w;A._p=new Promise(function(K,ge){A.onload=K,A.onerror=ge}),Pa(w,"link",p),c.instance=w}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Vf.bind(s),l.addEventListener("load",c),l.addEventListener("error",c))}}var wb=0;function jD(s,l){return s.stylesheets&&s.count===0&&Xf(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var p=setTimeout(function(){if(s.stylesheets&&Xf(s,s.stylesheets),s.unsuspend){var w=s.unsuspend;s.unsuspend=null,w()}},6e4+l);0<s.imgBytes&&wb===0&&(wb=62500*tD());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Xf(s,s.stylesheets),s.unsuspend)){var w=s.unsuspend;s.unsuspend=null,w()}},(s.imgBytes>wb?50:800)+l);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function Vf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gf=null;function Xf(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gf=new Map,l.forEach(ND,s),Gf=null,Vf.call(s))}function ND(s,l){if(!(l.state.loading&4)){var c=Gf.get(s);if(c)var p=c.get(null);else{c=new Map,Gf.set(s,c);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var A=y[w];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),p=A)}p&&c.set(null,p)}y=l.instance,A=y.getAttribute("data-precedence"),w=c.get(A)||p,w===p&&c.set(null,y),c.set(A,y),this.count++,p=Vf.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),w?w.parentNode.insertBefore(y,w.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Ad={$$typeof:C,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function wD(s,l,c,p,y,w,A,K,ge){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function p_(s,l,c,p,y,w,A,K,ge,Le,Ve,Qe){return s=new wD(s,l,c,A,ge,Le,Ve,Qe,K),l=1,w===!0&&(l|=24),w=jn(3,null,null,l),s.current=w,w.stateNode=s,l=r0(),l.refCount++,s.pooledCache=l,l.refCount++,w.memoizedState={element:p,isDehydrated:c,cache:l},l0(w),s}function x_(s){return s?(s=$o,s):$o}function b_(s,l,c,p,y,w){y=x_(y),p.context===null?p.context=y:p.pendingContext=y,p=$l(l),p.payload={element:c},w=w===void 0?null:w,w!==null&&(p.callback=w),c=zl(s,p,l),c!==null&&(on(c,s,l),od(c,s,l))}function g_(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<l?c:l}}function _b(s,l){g_(s,l),(s=s.alternate)&&g_(s,l)}function v_(s){if(s.tag===13||s.tag===31){var l=Ti(s,67108864);l!==null&&on(l,s,67108864),_b(s,67108864)}}function y_(s){if(s.tag===13||s.tag===31){var l=Sn();l=ut(l);var c=Ti(s,l);c!==null&&on(c,s,l),_b(s,l)}}var Wf=!0;function _D(s,l,c,p){var y=M.T;M.T=null;var w=P.p;try{P.p=2,kb(s,l,c,p)}finally{P.p=w,M.T=y}}function kD(s,l,c,p){var y=M.T;M.T=null;var w=P.p;try{P.p=8,kb(s,l,c,p)}finally{P.p=w,M.T=y}}function kb(s,l,c,p){if(Wf){var y=Sb(p);if(y===null)ub(s,l,p,Jf,c),N_(s,p);else if(ED(y,s,l,c,p))p.stopPropagation();else if(N_(s,p),l&4&&-1<SD.indexOf(s)){for(;y!==null;){var w=cr(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var A=mt(w.pendingLanes);if(A!==0){var K=w;for(K.pendingLanes|=2,K.entangledLanes|=2;A;){var ge=1<<31-ht(A);K.entanglements[1]|=ge,A&=~ge}ys(w),(tr&6)===0&&(If=je()+500,_d(0))}}break;case 31:case 13:K=Ti(w,2),K!==null&&on(K,w,2),Df(),_b(w,2)}if(w=Sb(p),w===null&&ub(s,l,p,Jf,c),w===y)break;y=w}y!==null&&p.stopPropagation()}else ub(s,l,p,null,c)}}function Sb(s){return s=qe(s),Eb(s)}var Jf=null;function Eb(s){if(Jf=null,s=Ft(s),s!==null){var l=o(s);if(l===null)s=null;else{var c=l.tag;if(c===13){if(s=d(l),s!==null)return s;s=null}else if(c===31){if(s=h(l),s!==null)return s;s=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Jf=s,null}function j_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case pt:return 2;case ae:return 8;case tt:case ne:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var Tb=!1,Wl=null,Jl=null,Zl=null,Od=new Map,Md=new Map,Ql=[],SD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N_(s,l){switch(s){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Jl=null;break;case"mouseover":case"mouseout":Zl=null;break;case"pointerover":case"pointerout":Od.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Md.delete(l.pointerId)}}function Id(s,l,c,p,y,w){return s===null||s.nativeEvent!==w?(s={blockedOn:l,domEventName:c,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},l!==null&&(l=cr(l),l!==null&&v_(l)),s):(s.eventSystemFlags|=p,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function ED(s,l,c,p,y){switch(l){case"focusin":return Wl=Id(Wl,s,l,c,p,y),!0;case"dragenter":return Jl=Id(Jl,s,l,c,p,y),!0;case"mouseover":return Zl=Id(Zl,s,l,c,p,y),!0;case"pointerover":var w=y.pointerId;return Od.set(w,Id(Od.get(w)||null,s,l,c,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Md.set(w,Id(Md.get(w)||null,s,l,c,p,y)),!0}return!1}function w_(s){var l=Ft(s.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=d(c),l!==null){s.blockedOn=l,Ce(s.priority,function(){y_(c)});return}}else if(l===31){if(l=h(c),l!==null){s.blockedOn=l,Ce(s.priority,function(){y_(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Zf(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var c=Sb(s.nativeEvent);if(c===null){c=s.nativeEvent;var p=new c.constructor(c.type,c);De=p,c.target.dispatchEvent(p),De=null}else return l=cr(c),l!==null&&v_(l),s.blockedOn=c,!1;l.shift()}return!0}function __(s,l,c){Zf(s)&&c.delete(l)}function TD(){Tb=!1,Wl!==null&&Zf(Wl)&&(Wl=null),Jl!==null&&Zf(Jl)&&(Jl=null),Zl!==null&&Zf(Zl)&&(Zl=null),Od.forEach(__),Md.forEach(__)}function Qf(s,l){s.blockedOn===l&&(s.blockedOn=null,Tb||(Tb=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,TD)))}var eh=null;function k_(s){eh!==s&&(eh=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){eh===s&&(eh=null);for(var l=0;l<s.length;l+=3){var c=s[l],p=s[l+1],y=s[l+2];if(typeof p!="function"){if(Eb(p||c)===null)continue;break}var w=cr(c);w!==null&&(s.splice(l,3),l-=3,S0(w,{pending:!0,data:y,method:c.method,action:p},p,y))}}))}function oc(s){function l(ge){return Qf(ge,s)}Wl!==null&&Qf(Wl,s),Jl!==null&&Qf(Jl,s),Zl!==null&&Qf(Zl,s),Od.forEach(l),Md.forEach(l);for(var c=0;c<Ql.length;c++){var p=Ql[c];p.blockedOn===s&&(p.blockedOn=null)}for(;0<Ql.length&&(c=Ql[0],c.blockedOn===null);)w_(c),c.blockedOn===null&&Ql.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(p=0;p<c.length;p+=3){var y=c[p],w=c[p+1],A=y[ot]||null;if(typeof w=="function")A||k_(c);else if(A){var K=null;if(w&&w.hasAttribute("formAction")){if(y=w,A=w[ot]||null)K=A.formAction;else if(Eb(y)!==null)continue}else K=A.action;typeof K=="function"?c[p+1]=K:(c.splice(p,3),p-=3),k_(c)}}}function S_(){function s(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function l(){y!==null&&(y(),y=null),p||setTimeout(c,20)}function c(){if(!p&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(c,100),function(){p=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),y!==null&&(y(),y=null)}}}function Cb(s){this._internalRoot=s}th.prototype.render=Cb.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));var c=l.current,p=Sn();b_(c,p,s,l,null,null)},th.prototype.unmount=Cb.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;b_(s.current,2,null,s,null,null),Df(),l[at]=null}};function th(s){this._internalRoot=s}th.prototype.unstable_scheduleHydration=function(s){if(s){var l=ke();s={blockedOn:null,target:s,priority:l};for(var c=0;c<Ql.length&&l!==0&&l<Ql[c].priority;c++);Ql.splice(c,0,s),c===0&&w_(s)}};var E_=t.version;if(E_!=="19.2.4")throw Error(n(527,E_,"19.2.4"));P.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=u(l),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var CD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{st=rh.inject(CD),Ze=rh}catch{}}return Dd.createRoot=function(s,l){if(!i(s))throw Error(n(299));var c=!1,p="",y=P1,w=D1,A=L1;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError)),l=p_(s,1,!1,null,null,c,p,null,y,w,A,S_),s[at]=l.current,db(s),new Cb(l)},Dd.hydrateRoot=function(s,l,c){if(!i(s))throw Error(n(299));var p=!1,y="",w=P1,A=D1,K=L1,ge=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(K=c.onRecoverableError),c.formState!==void 0&&(ge=c.formState)),l=p_(s,1,!0,l,c??null,p,y,ge,w,A,K,S_),l.context=x_(null),c=l.current,p=Sn(),p=ut(p),y=$l(p),y.callback=null,zl(c,y,p),c=p,l.current.lanes=c,St(l,c),ys(l),s[at]=l.current,db(s),new th(l)},Dd.version="19.2.4",Dd}var R_;function qD(){if(R_)return Ib.exports;R_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ib.exports=UD(),Ib.exports}var FD=qD();const HD=ms(FD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=(...e)=>e.filter((t,a,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,n)=>n?n.toUpperCase():a.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=e=>{const t=KD(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:d,...h},m)=>g.createElement("svg",{ref:m,...VD,width:t,height:t,stroke:e,strokeWidth:n?Number(a)*24/Number(t):a,className:hO("lucide",i),...!o&&!GD(h)&&{"aria-hidden":"true"},...h},[...d.map(([u,f])=>g.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(e,t)=>{const a=g.forwardRef(({className:n,...i},o)=>g.createElement(XD,{ref:o,iconNode:t,className:hO(`lucide-${YD($_(e))}`,`lucide-${e}`,n),...i}));return a.displayName=$_(e),a};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mO=dt("activity",WD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],ZD=dt("archive",JD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],eL=dt("arrow-down-left",QD);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],rL=dt("arrow-down-right",tL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],nL=dt("arrow-down",aL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],vc=dt("arrow-left-right",sL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],iL=dt("arrow-right",lL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],xm=dt("arrow-up-right",oL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],dL=dt("arrow-up",cL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fL=dt("badge-check",uL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mL=dt("bell",hL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],au=dt("box",pL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],dl=dt("briefcase",xL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],bm=dt("building-2",bL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],vL=dt("calculator",gL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],jL=dt("calendar-days",yL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pO=dt("calendar",NL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Tv=dt("camera",wL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gm=dt("chart-column",_L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z_=dt("chevron-down",kL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xO=dt("chevron-left",SL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],TL=dt("chevron-right",EL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],AL=dt("circle-alert",CL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ML=dt("circle-check-big",OL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yc=dt("circle-check",IL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],DL=dt("circle-dollar-sign",PL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Rb=dt("circle-minus",LL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],tu=dt("circle-plus",RL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],zL=dt("clipboard-check",$L);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],UL=dt("clipboard-paste",BL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],FL=dt("cloud-upload",qL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Cv=dt("coins",HL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],KL=dt("copy",YL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],bO=dt("credit-card",VL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Av=dt("database",GL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],WL=dt("dollar-sign",XL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],vm=dt("download",JL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ha=dt("eye",ZL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],eR=dt("file-plus-corner",QL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],On=dt("file-text",tR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],ym=dt("fingerprint-pattern",rR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nR=dt("funnel",aR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],B_=dt("globe",sR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],io=dt("history",lR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],oR=dt("image",iR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dR=dt("info",cR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],fR=dt("key-round",uR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],mR=dt("landmark",hR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],U_=dt("layers",pR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],bR=dt("layout-dashboard",xR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],q_=dt("life-buoy",gR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],yR=dt("list",vR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],NR=dt("lock",jR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],_R=dt("log-in",wR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],SR=dt("log-out",kR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],TR=dt("mail",ER);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jm=dt("map-pin",CR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],OR=dt("menu",AR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],IR=dt("moon",MR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],nu=dt("package",PR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],LR=dt("pencil",DR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ly=dt("phone",RR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Or=dt("plus",$R);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],fn=dt("printer",zR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Nm=dt("qr-code",BR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M13 16H8",key:"wsln4y"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M4 3a1 1 0 0 1 1-1 1.3 1.3 0 0 1 .7.2l.933.6a1.3 1.3 0 0 0 1.4 0l.934-.6a1.3 1.3 0 0 1 1.4 0l.933.6a1.3 1.3 0 0 0 1.4 0l.933-.6a1.3 1.3 0 0 1 1.4 0l.934.6a1.3 1.3 0 0 0 1.4 0l.933-.6A1.3 1.3 0 0 1 19 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1 1.3 1.3 0 0 1-.7-.2l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.934.6a1.3 1.3 0 0 1-1.4 0l-.933-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-1.4 0l-.934-.6a1.3 1.3 0 0 0-1.4 0l-.933.6a1.3 1.3 0 0 1-.7.2 1 1 0 0 1-1-1z",key:"ycz6yz"}]],qR=dt("receipt-text",UR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],HR=dt("receipt",FR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],gO=dt("refresh-ccw",YR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ul=dt("refresh-cw",KR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yr=dt("save",VR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fs=dt("search",GR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],WR=dt("server",XR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ov=dt("settings",JR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Is=dt("shield-check",ZR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vO=dt("shield",QR);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],kc=dt("shopping-cart",e$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$b=dt("sparkles",t$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],F_=dt("square-check-big",r$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ma=dt("square-pen",a$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],H_=dt("square",n$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],l$=dt("sun",s$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],zb=dt("table",i$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Gr=dt("trash-2",o$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],d$=dt("trending-up",c$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Y_=dt("triangle-alert",u$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Ji=dt("truck",f$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wm=dt("upload",h$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ry=dt("user-check",m$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_m=dt("user-plus",p$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fi=dt("user",x$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sc=dt("users",b$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ap=dt("wallet",g$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],y$=dt("warehouse",v$);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],It=dt("x",j$),om=[{id:"dashboard",label:" ",icon:r.jsx(bR,{className:"w-5 h-5"}),slug:"dashboard"},{id:"factory-stock",label:" ",icon:r.jsx(nu,{className:"w-5 h-5"}),slug:"factory-stock",subItems:[{label:"",slug:"fabrics"},{label:"",slug:"accessories"},{label:"",slug:"products"}]},{id:"factory-management",label:" ",icon:r.jsx(Ov,{className:"w-5 h-5"}),slug:"factory-management",subItems:[{label:" ",slug:"production-stages"},{label:"",slug:"colors"},{label:"",slug:"sizes"}]},{id:"manufacturing-management",label:" ",icon:r.jsx(gm,{className:"w-5 h-5"}),slug:"manufacturing-management",subItems:[{label:" ",slug:"cutting-stage"},{label:" ",slug:"manufacturing-stages"},{label:" ",slug:"assembly"}]},{id:"pos",label:" ",icon:r.jsx(kc,{className:"w-5 h-5"}),slug:"pos"},{id:"dispatch",label:" ",icon:r.jsx(Ji,{className:"w-5 h-5"}),slug:"dispatch"},{id:"factory-receiving",label:"  ",icon:r.jsx(Ji,{className:"w-5 h-5"}),slug:"factory-receiving"},{id:"inventory",label:"  ",icon:r.jsx(nu,{className:"w-5 h-5"}),slug:"inventory",subItems:[{label:" ",slug:"stock"},{label:"",slug:"warehouses"},{label:"",slug:"transfer"},{label:"",slug:"receiving"},{label:"",slug:"returns"},{label:"",slug:"audit"}]},{id:"shipping-companies",label:" ",icon:r.jsx(Ji,{className:"w-5 h-5"}),slug:"shipping-companies"},{id:"orders",label:"",icon:r.jsx(kc,{className:"w-5 h-5"}),slug:"orders",subItems:[{label:" ",slug:"new-order"},{label:" ",slug:"manage-orders"},{label:" ",slug:"import-orders"}]},{id:"sales",label:"",icon:r.jsx(dl,{className:"w-5 h-5"}),slug:"sales",subItems:[{label:" ",slug:"sales-daily"},{label:"  ",slug:"sales-update-status"},{label:" ",slug:"sales-report"}]},{id:"crm",label:" ",icon:r.jsx(Sc,{className:"w-5 h-5"}),slug:"crm",subItems:[{label:" ",slug:"list"},{label:"  ",slug:"ledger"}]},{id:"srm",label:" ",icon:r.jsx(Ji,{className:"w-5 h-5"}),slug:"srm",subItems:[{label:" ",slug:"list"},{label:"  ",slug:"ledger"}]},{id:"reps",label:"",icon:r.jsx(Sc,{className:"w-5 h-5"}),slug:"reps",subItems:[{label:" ",slug:"list"},{label:" ",slug:"custody"},{label:" ",slug:"transactions"},{label:" ",slug:"rep-cycle"},{label:" ",slug:"rep-performance"}]},{id:"hrm",label:" ",icon:r.jsx(dl,{className:"w-5 h-5"}),slug:"hrm",subItems:[{label:"",slug:"employees"},{label:"",slug:"salaries"},{label:" ",slug:"loans"},{label:" ",slug:"salary-report"}]},{id:"workers",label:"",icon:r.jsx(dl,{className:"w-5 h-5"}),slug:"workers",subItems:[{label:" ",slug:"list"},{label:"",slug:"salaries"},{label:" ",slug:"transactions"},{label:" ",slug:"salary-report"}]},{id:"finance",label:"  ",icon:r.jsx(Ap,{className:"w-5 h-5"}),slug:"finance",subItems:[{label:" ",slug:"treasuries"},{label:"  ",slug:"transactions"}]},{id:"reports",label:"",icon:r.jsx(gm,{className:"w-5 h-5"}),slug:"reports",subItems:[{label:" ",slug:"sales"},{label:" ",slug:"inventory"},{label:" ",slug:"finance"},{label:"",slug:"daily"},{label:" ",slug:"totals"},{label:" ",slug:"crm-srm"},{label:" ",slug:"hrm"}]},{id:"admin",label:"  ",icon:r.jsx(Is,{className:"w-5 h-5"}),slug:"admin",subItems:[{label:" ",slug:"users"},{label:"",slug:"permissions"},{label:" ",slug:"logs"}]},{id:"attendance",label:"",icon:r.jsx(ym,{className:"w-5 h-5"}),slug:"attendance",subItems:[{label:"",slug:"devices"},{label:"",slug:"shifts"},{label:"",slug:"schedules"},{label:"",slug:"holidays"},{label:"",slug:"logs"},{label:"",slug:"summary"}]},{id:"sales-offices",label:" ",icon:r.jsx(dl,{className:"w-5 h-5"}),slug:"sales-offices"},{id:"barcode-print",label:" ",icon:r.jsx(Nm,{className:"w-5 h-5"}),slug:"barcode-print"},{id:"settings",label:" ",icon:r.jsx(Ov,{className:"w-5 h-5"}),slug:"settings"}];function N$(){var d,h;const e=(h=(d=import.meta)==null?void 0:d.env)==null?void 0:h.VITE_API_BASE_PATH,t=window==null?void 0:window.API_BASE_PATH_OVERRIDE,a=typeof window<"u"&&window.localStorage&&window.localStorage.getItem("apiBasePath")||void 0,n=e||t||a;if(n)return n.replace(/\/$/,"");if(!!(window.location.port&&window.location.port!=="80"&&window.location.port!=="443"))return`${window.location.origin}/components`;const o=new URL("./",window.location.href).pathname;return`${window.location.origin}${o}components`}const G=N$();async function w$(){try{const t=await(await fetch(`${G}/test.php`,{credentials:"include"})).text();try{const a=JSON.parse(t);return a&&a.status==="success"}catch{return console.error("Connection test failed: non-JSON response (first 120 chars):",t.slice(0,120)),!1}}catch(e){return console.error("Connection test failed:",e),!1}}if(typeof window<"u"&&window.fetch){const e=window.fetch.bind(window);window.fetch=(t,a)=>{const n=Object.assign({},a||{},{credentials:a&&a.credentials||"include"});return e(t,n)}}function ia(e){var i,o;const t=((o=(i=import.meta)==null?void 0:i.env)==null?void 0:o.BASE_URL)||"/",a=String(e).replace(/^\//,"");return`${t.endsWith("/")?t:`${t}/`}${a}`}const yO=g.createContext(void 0),_$=({children:e})=>{const[t,a]=g.useState(()=>{const i=localStorage.getItem("Dragon_theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});g.useEffect(()=>{try{const i=document.getElementById("root");if(t){document.documentElement.classList.add("dark"),document.body.classList.add("dark"),i&&i.classList.add("dark");try{document.documentElement.style.backgroundColor="#0f172a",document.body.style.backgroundColor="#0f172a",document.body.style.color="#f8fafc"}catch{}}else{document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"),i&&i.classList.remove("dark");try{document.documentElement.style.backgroundColor="",document.body.style.backgroundColor="",document.body.style.color=""}catch{}}}catch{}localStorage.setItem("Dragon_theme",t?"dark":"light");try{const i=new CustomEvent("themeChange",{detail:{isDark:t}});window.dispatchEvent(i)}catch{}try{console.debug("[ThemeContext] themeChange dispatched, isDark=",t,"html.hasDark=",document.documentElement.classList.contains("dark"),"body.hasDark=",document.body.classList.contains("dark"))}catch{}},[t]);const n=()=>a(i=>!i);return r.jsx(yO.Provider,{value:{isDark:t,toggleTheme:n},children:e})},$y=()=>{const e=g.useContext(yO);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},k$=()=>{const e=localStorage.getItem("Dragon_company_logo")||ia("Dragon.png"),t=new Date().getFullYear(),a=[{number:"01050016289",label:""},{number:"01150006289",label:""}];return r.jsxs("footer",{className:"w-full border-t border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 py-4 px-6 mt-8 transition-colors duration-300",children:[r.jsxs("div",{className:"max-w-7xl mx-auto flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"relative group",children:r.jsx("img",{src:e,alt:"logo",className:"w-10 h-10 rounded-lg shadow-sm object-cover border border-slate-200 dark:border-slate-700",onError:n=>{n.target.src=ia("Dragon.png")}})}),r.jsxs("div",{className:"text-right",children:[r.jsx("h3",{className:"font-bold text-sm text-slate-800 dark:text-slate-100",children:"   "}),r.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:["    ",t]})]})]}),r.jsxs("div",{className:"hidden sm:flex items-center gap-2 bg-white dark:bg-slate-800 px-3 py-1.5 rounded-full border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),r.jsxs("span",{className:"text-[11px] font-medium text-slate-600 dark:text-slate-300",children:[": ",r.jsx("span",{className:"font-bold",children:".  "})," (  )"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:a.map((n,i)=>r.jsxs("div",{className:"flex items-center gap-1.5 bg-white dark:bg-slate-800 p-1.5 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsx("div",{className:"hidden lg:block text-[10px] font-bold text-slate-400 px-1",children:n.label}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("a",{href:`tel:${n.number}`,className:"w-7 h-7 flex items-center justify-center bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-600 hover:text-white transition-all",title:"",children:r.jsx("i",{className:"fas fa-phone-alt text-[10px]"})}),r.jsx("a",{href:`https://wa.me/2${n.number}`,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 flex items-center justify-center bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-md hover:bg-green-600 hover:text-white transition-all",title:"",children:r.jsx("i",{className:"fab fa-whatsapp text-sm"})})]})]},i))})]}),r.jsx("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"})]})};/*!
* sweetalert2 v11.26.17
* Released under the MIT License.
*/function jO(e,t,a){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:a;throw new TypeError("Private element is not present on this object")}function S$(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function K_(e,t){return e.get(jO(e,t))}function E$(e,t,a){S$(e,t),t.set(e,a)}function T$(e,t,a){return e.set(jO(e,t),a),a}const C$=100,Et={},A$=()=>{Et.previousActiveElement instanceof HTMLElement?(Et.previousActiveElement.focus(),Et.previousActiveElement=null):document.body&&document.body.focus()},O$=e=>new Promise(t=>{if(!e)return t();const a=window.scrollX,n=window.scrollY;Et.restoreFocusTimeout=setTimeout(()=>{A$(),t()},C$),window.scrollTo(a,n)}),NO="swal2-",M$=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Ye=M$.reduce((e,t)=>(e[t]=NO+t,e),{}),I$=["success","warning","info","question","error"],km=I$.reduce((e,t)=>(e[t]=NO+t,e),{}),wO="SweetAlert2:",zy=e=>e.charAt(0).toUpperCase()+e.slice(1),Ja=e=>{console.warn(`${wO} ${typeof e=="object"?e.join(" "):e}`)},vo=e=>{console.error(`${wO} ${e}`)},V_=[],P$=e=>{V_.includes(e)||(V_.push(e),Ja(e))},_O=(e,t=null)=>{P$(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Op=e=>typeof e=="function"?e():e,By=e=>e&&typeof e.toPromise=="function",ju=e=>By(e)?e.toPromise():Promise.resolve(e),Uy=e=>e&&Promise.resolve(e)===e,en=()=>document.body.querySelector(`.${Ye.container}`),Nu=e=>{const t=en();return t?t.querySelector(e):null},Ln=e=>Nu(`.${e}`),ar=()=>Ln(Ye.popup),Lc=()=>Ln(Ye.icon),D$=()=>Ln(Ye["icon-content"]),kO=()=>Ln(Ye.title),qy=()=>Ln(Ye["html-container"]),SO=()=>Ln(Ye.image),Fy=()=>Ln(Ye["progress-steps"]),Mp=()=>Ln(Ye["validation-message"]),Ds=()=>Nu(`.${Ye.actions} .${Ye.confirm}`),Rc=()=>Nu(`.${Ye.actions} .${Ye.cancel}`),yo=()=>Nu(`.${Ye.actions} .${Ye.deny}`),L$=()=>Ln(Ye["input-label"]),$c=()=>Nu(`.${Ye.loader}`),wu=()=>Ln(Ye.actions),EO=()=>Ln(Ye.footer),Ip=()=>Ln(Ye["timer-progress-bar"]),Hy=()=>Ln(Ye.close),R$=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Yy=()=>{const e=ar();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),a=Array.from(t).sort((o,d)=>{const h=parseInt(o.getAttribute("tabindex")||"0"),m=parseInt(d.getAttribute("tabindex")||"0");return h>m?1:h<m?-1:0}),n=e.querySelectorAll(R$),i=Array.from(n).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(a.concat(i))].filter(o=>hn(o))},Ky=()=>ml(document.body,Ye.shown)&&!ml(document.body,Ye["toast-shown"])&&!ml(document.body,Ye["no-backdrop"]),Pp=()=>{const e=ar();return e?ml(e,Ye.toast):!1},$$=()=>{const e=ar();return e?e.hasAttribute("data-loading"):!1},Rn=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(d=>{e.appendChild(d)});const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach(d=>{d instanceof HTMLVideoElement||d instanceof HTMLAudioElement?e.appendChild(d.cloneNode(!0)):e.appendChild(d)})}},ml=(e,t)=>{if(!t)return!1;const a=t.split(/\s+/);for(let n=0;n<a.length;n++)if(!e.classList.contains(a[n]))return!1;return!0},z$=(e,t)=>{Array.from(e.classList).forEach(a=>{!Object.values(Ye).includes(a)&&!Object.values(km).includes(a)&&!Object.values(t.showClass||{}).includes(a)&&e.classList.remove(a)})},In=(e,t,a)=>{if(z$(e,t),!t.customClass)return;const n=t.customClass[a];if(n){if(typeof n!="string"&&!n.forEach){Ja(`Invalid type of customClass.${a}! Expected string or iterable object, got "${typeof n}"`);return}rr(e,n)}},Dp=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${Ye.popup} > .${Ye[t]}`);case"checkbox":return e.querySelector(`.${Ye.popup} > .${Ye.checkbox} input`);case"radio":return e.querySelector(`.${Ye.popup} > .${Ye.radio} input:checked`)||e.querySelector(`.${Ye.popup} > .${Ye.radio} input:first-child`);case"range":return e.querySelector(`.${Ye.popup} > .${Ye.range} input`);default:return e.querySelector(`.${Ye.popup} > .${Ye.input}`)}},TO=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},CO=(e,t,a)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{a?i.classList.add(n):i.classList.remove(n)}):a?e.classList.add(n):e.classList.remove(n)}))},rr=(e,t)=>{CO(e,t,!0)},Zn=(e,t)=>{CO(e,t,!1)},si=(e,t)=>{const a=Array.from(e.children);for(let n=0;n<a.length;n++){const i=a[n];if(i instanceof HTMLElement&&ml(i,t))return i}},ao=(e,t,a)=>{a===`${parseInt(`${a}`)}`&&(a=parseInt(a)),a||parseInt(`${a}`)===0?e.style.setProperty(t,typeof a=="number"?`${a}px`:a):e.style.removeProperty(t)},wa=(e,t="flex")=>{e&&(e.style.display=t)},Ha=e=>{e&&(e.style.display="none")},Vy=(e,t="block")=>{e&&new MutationObserver(()=>{_u(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},G_=(e,t,a,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(a,n)},_u=(e,t,a="flex")=>{t?wa(e,a):Ha(e)},hn=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),B$=()=>!hn(Ds())&&!hn(yo())&&!hn(Rc()),Mv=e=>e.scrollHeight>e.clientHeight,U$=(e,t)=>{let a=e;for(;a&&a!==t;){if(Mv(a))return!0;a=a.parentElement}return!1},AO=e=>{const t=window.getComputedStyle(e),a=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return a>0||n>0},Gy=(e,t=!1)=>{const a=Ip();a&&hn(a)&&(t&&(a.style.transition="none",a.style.width="100%"),setTimeout(()=>{a.style.transition=`width ${e/1e3}s linear`,a.style.width="0%"},10))},q$=()=>{const e=Ip();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const a=parseInt(window.getComputedStyle(e).width),n=t/a*100;e.style.width=`${n}%`},F$=()=>typeof window>"u"||typeof document>"u",H$=`
 <div aria-labelledby="${Ye.title}" aria-describedby="${Ye["html-container"]}" class="${Ye.popup}" tabindex="-1">
   <button type="button" class="${Ye.close}"></button>
   <ul class="${Ye["progress-steps"]}"></ul>
   <div class="${Ye.icon}"></div>
   <img class="${Ye.image}" />
   <h2 class="${Ye.title}" id="${Ye.title}"></h2>
   <div class="${Ye["html-container"]}" id="${Ye["html-container"]}"></div>
   <input class="${Ye.input}" id="${Ye.input}" />
   <input type="file" class="${Ye.file}" />
   <div class="${Ye.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Ye.select}" id="${Ye.select}"></select>
   <div class="${Ye.radio}"></div>
   <label class="${Ye.checkbox}">
     <input type="checkbox" id="${Ye.checkbox}" />
     <span class="${Ye.label}"></span>
   </label>
   <textarea class="${Ye.textarea}" id="${Ye.textarea}"></textarea>
   <div class="${Ye["validation-message"]}" id="${Ye["validation-message"]}"></div>
   <div class="${Ye.actions}">
     <div class="${Ye.loader}"></div>
     <button type="button" class="${Ye.confirm}"></button>
     <button type="button" class="${Ye.deny}"></button>
     <button type="button" class="${Ye.cancel}"></button>
   </div>
   <div class="${Ye.footer}"></div>
   <div class="${Ye["timer-progress-bar-container"]}">
     <div class="${Ye["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Y$=()=>{const e=en();return e?(e.remove(),Zn([document.documentElement,document.body],[Ye["no-backdrop"],Ye["toast-shown"],Ye["has-column"]]),!0):!1},Ui=()=>{Et.currentInstance&&Et.currentInstance.resetValidationMessage()},K$=()=>{const e=ar();if(!e)return;const t=si(e,Ye.input),a=si(e,Ye.file),n=e.querySelector(`.${Ye.range} input`),i=e.querySelector(`.${Ye.range} output`),o=si(e,Ye.select),d=e.querySelector(`.${Ye.checkbox} input`),h=si(e,Ye.textarea);t&&(t.oninput=Ui),a&&(a.onchange=Ui),o&&(o.onchange=Ui),d&&(d.onchange=Ui),h&&(h.oninput=Ui),n&&i&&(n.oninput=()=>{Ui(),i.value=n.value},n.onchange=()=>{Ui(),i.value=n.value})},V$=e=>{if(typeof e=="string"){const t=document.querySelector(e);if(!t)throw new Error(`Target element "${e}" not found`);return t}return e},G$=e=>{const t=ar();t&&(t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true"))},X$=e=>{window.getComputedStyle(e).direction==="rtl"&&(rr(en(),Ye.rtl),Et.isRTL=!0)},W$=e=>{const t=Y$();if(F$()){vo("SweetAlert2 requires document to initialize");return}const a=document.createElement("div");a.className=Ye.container,t&&rr(a,Ye["no-transition"]),Rn(a,H$),a.dataset.swal2Theme=e.theme;const n=V$(e.target||"body");n.appendChild(a),e.topLayer&&(a.setAttribute("popover",""),a.showPopover()),G$(e),X$(n),K$()},Xy=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?J$(e,t):e&&Rn(t,e)},J$=(e,t)=>{"jquery"in e?Z$(t,e):Rn(t,e.toString())},Z$=(e,t)=>{if(e.textContent="",0 in t)for(let a=0;a in t;a++)e.appendChild(t[a].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},Q$=(e,t)=>{const a=wu(),n=$c();!a||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Ha(a):wa(a),In(a,t,"actions"),e9(a,n,t),Rn(n,t.loaderHtml||""),In(n,t,"loader"))};function e9(e,t,a){const n=Ds(),i=yo(),o=Rc();!n||!i||!o||(Ub(n,"confirm",a),Ub(i,"deny",a),Ub(o,"cancel",a),t9(n,i,o,a),a.reverseButtons&&(a.toast?(e.insertBefore(o,n),e.insertBefore(i,n)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function t9(e,t,a,n){if(!n.buttonsStyling){Zn([e,t,a],Ye.styled);return}rr([e,t,a],Ye.styled),n.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",n.confirmButtonColor),n.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",n.denyButtonColor),n.cancelButtonColor&&a.style.setProperty("--swal2-cancel-button-background-color",n.cancelButtonColor),Bb(e),Bb(t),Bb(a)}function Bb(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const a=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${a}`))}function Ub(e,t,a){const n=zy(t);_u(e,a[`show${n}Button`],"inline-block"),Rn(e,a[`${t}ButtonText`]||""),e.setAttribute("aria-label",a[`${t}ButtonAriaLabel`]||""),e.className=Ye[t],In(e,a,`${t}Button`)}const r9=(e,t)=>{const a=Hy();a&&(Rn(a,t.closeButtonHtml||""),In(a,t,"closeButton"),_u(a,t.showCloseButton),a.setAttribute("aria-label",t.closeButtonAriaLabel||""))},a9=(e,t)=>{const a=en();a&&(n9(a,t.backdrop),s9(a,t.position),l9(a,t.grow),In(a,t,"container"))};function n9(e,t){typeof t=="string"?e.style.background=t:t||rr([document.documentElement,document.body],Ye["no-backdrop"])}function s9(e,t){t&&(t in Ye?rr(e,Ye[t]):(Ja('The "position" parameter is not valid, defaulting to "center"'),rr(e,Ye.center)))}function l9(e,t){t&&rr(e,Ye[`grow-${t}`])}var _r={innerParams:new WeakMap,domCache:new WeakMap};const i9=["input","file","range","select","radio","checkbox","textarea"],o9=(e,t)=>{const a=ar();if(!a)return;const n=_r.innerParams.get(e),i=!n||t.input!==n.input;i9.forEach(o=>{const d=si(a,Ye[o]);d&&(u9(o,t.inputAttributes),d.className=Ye[o],i&&Ha(d))}),t.input&&(i&&c9(t),f9(t))},c9=e=>{if(!e.input)return;if(!Qr[e.input]){vo(`Unexpected type of input! Expected ${Object.keys(Qr).join(" | ")}, got "${e.input}"`);return}const t=OO(e.input);if(!t)return;const a=Qr[e.input](t,e);wa(t),e.inputAutoFocus&&setTimeout(()=>{TO(a)})},d9=e=>{for(let t=0;t<e.attributes.length;t++){const a=e.attributes[t].name;["id","type","value","style"].includes(a)||e.removeAttribute(a)}},u9=(e,t)=>{const a=ar();if(!a)return;const n=Dp(a,e);if(n){d9(n);for(const i in t)n.setAttribute(i,t[i])}},f9=e=>{if(!e.input)return;const t=OO(e.input);t&&In(t,e,"input")},Wy=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ku=(e,t,a)=>{if(a.inputLabel){const n=document.createElement("label"),i=Ye["input-label"];n.setAttribute("for",e.id),n.className=i,typeof a.customClass=="object"&&rr(n,a.customClass.inputLabel),n.innerText=a.inputLabel,t.insertAdjacentElement("beforebegin",n)}},OO=e=>{const t=ar();if(t)return si(t,Ye[e]||Ye.input)},Sm=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Uy(t)||Ja(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Qr={};Qr.text=Qr.email=Qr.password=Qr.number=Qr.tel=Qr.url=Qr.search=Qr.date=Qr["datetime-local"]=Qr.time=Qr.week=Qr.month=(e,t)=>{const a=e;return Sm(a,t.inputValue),ku(a,a,t),Wy(a,t),a.type=t.input,a};Qr.file=(e,t)=>{const a=e;return ku(a,a,t),Wy(a,t),a};Qr.range=(e,t)=>{const a=e,n=a.querySelector("input"),i=a.querySelector("output");return n&&(Sm(n,t.inputValue),n.type=t.input,ku(n,e,t)),i&&Sm(i,t.inputValue),e};Qr.select=(e,t)=>{const a=e;if(a.textContent="",t.inputPlaceholder){const n=document.createElement("option");Rn(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,a.appendChild(n)}return ku(a,a,t),a};Qr.radio=e=>{const t=e;return t.textContent="",e};Qr.checkbox=(e,t)=>{const a=ar();if(!a)throw new Error("Popup not found");const n=Dp(a,"checkbox");if(!n)throw new Error("Checkbox input not found");n.value="1",n.checked=!!t.inputValue;const o=e.querySelector("span");if(o){const d=t.inputPlaceholder||t.inputLabel;d&&Rn(o,d)}return n};Qr.textarea=(e,t)=>{const a=e;Sm(a,t.inputValue),Wy(a,t),ku(a,a,t);const n=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=ar();if(!i)return;const o=parseInt(window.getComputedStyle(i).width),d=()=>{if(!document.body.contains(a))return;const h=a.offsetWidth+n(a),m=ar();m&&(h>o?m.style.width=`${h}px`:ao(m,"width",t.width))};new MutationObserver(d).observe(a,{attributes:!0,attributeFilter:["style"]})}}),a};const h9=(e,t)=>{const a=qy();a&&(Vy(a),In(a,t,"htmlContainer"),t.html?(Xy(t.html,a),wa(a,"block")):t.text?(a.textContent=t.text,wa(a,"block")):Ha(a),o9(e,t))},m9=(e,t)=>{const a=EO();a&&(Vy(a),_u(a,!!t.footer,"block"),t.footer&&Xy(t.footer,a),In(a,t,"footer"))},p9=(e,t)=>{const a=_r.innerParams.get(e),n=Lc();if(!n)return;if(a&&t.icon===a.icon){W_(n,t),X_(n,t);return}if(!t.icon&&!t.iconHtml){Ha(n);return}if(t.icon&&Object.keys(km).indexOf(t.icon)===-1){vo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Ha(n);return}wa(n),W_(n,t),X_(n,t),rr(n,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",MO)},X_=(e,t)=>{for(const[a,n]of Object.entries(km))t.icon!==a&&Zn(e,n);rr(e,t.icon&&km[t.icon]),g9(e,t),MO(),In(e,t,"icon")},MO=()=>{const e=ar();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),a=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<a.length;n++)a[n].style.backgroundColor=t},x9=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,b9=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,W_=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let a=e.innerHTML,n="";t.iconHtml?n=J_(t.iconHtml):t.icon==="success"?(n=x9(t),a=a.replace(/ style=".*?"/g,"")):t.icon==="error"?n=b9:t.icon&&(n=J_({question:"?",warning:"!",info:"i"}[t.icon])),a.trim()!==n.trim()&&Rn(e,n)},g9=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const a of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])G_(e,a,"background-color",t.iconColor);G_(e,".swal2-success-ring","border-color",t.iconColor)}},J_=e=>`<div class="${Ye["icon-content"]}">${e}</div>`,v9=(e,t)=>{const a=SO();if(a){if(!t.imageUrl){Ha(a);return}wa(a,""),a.setAttribute("src",t.imageUrl),a.setAttribute("alt",t.imageAlt||""),ao(a,"width",t.imageWidth),ao(a,"height",t.imageHeight),a.className=Ye.image,In(a,t,"image")}};let Jy=!1,IO=0,PO=0,DO=0,LO=0;const y9=e=>{e.addEventListener("mousedown",Em),document.body.addEventListener("mousemove",Tm),e.addEventListener("mouseup",Cm),e.addEventListener("touchstart",Em),document.body.addEventListener("touchmove",Tm),e.addEventListener("touchend",Cm)},j9=e=>{e.removeEventListener("mousedown",Em),document.body.removeEventListener("mousemove",Tm),e.removeEventListener("mouseup",Cm),e.removeEventListener("touchstart",Em),document.body.removeEventListener("touchmove",Tm),e.removeEventListener("touchend",Cm)},Em=e=>{const t=ar();if(!t)return;const a=Lc();if(e.target===t||a&&a.contains(e.target)){Jy=!0;const n=RO(e);IO=n.clientX,PO=n.clientY,DO=parseInt(t.style.insetInlineStart)||0,LO=parseInt(t.style.insetBlockStart)||0,rr(t,"swal2-dragging")}},Tm=e=>{const t=ar();if(t&&Jy){let{clientX:a,clientY:n}=RO(e);const i=a-IO;t.style.insetInlineStart=`${DO+(Et.isRTL?-i:i)}px`,t.style.insetBlockStart=`${LO+(n-PO)}px`}},Cm=()=>{const e=ar();Jy=!1,Zn(e,"swal2-dragging")},RO=e=>{let t=0,a=0;return e.type.startsWith("mouse")?(t=e.clientX,a=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,a=e.touches[0].clientY),{clientX:t,clientY:a}},N9=(e,t)=>{const a=en(),n=ar();if(!(!a||!n)){if(t.toast){ao(a,"width",t.width),n.style.width="100%";const i=$c();i&&n.insertBefore(i,Lc())}else ao(n,"width",t.width);ao(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),Ha(Mp()),w9(n,t),t.draggable&&!t.toast?(rr(n,Ye.draggable),y9(n)):(Zn(n,Ye.draggable),j9(n))}},w9=(e,t)=>{const a=t.showClass||{};e.className=`${Ye.popup} ${hn(e)?a.popup:""}`,t.toast?(rr([document.documentElement,document.body],Ye["toast-shown"]),rr(e,Ye.toast)):rr(e,Ye.modal),In(e,t,"popup"),typeof t.customClass=="string"&&rr(e,t.customClass),t.icon&&rr(e,Ye[`icon-${t.icon}`])},_9=(e,t)=>{const a=Fy();if(!a)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){Ha(a);return}wa(a),a.textContent="",i>=n.length&&Ja("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((o,d)=>{const h=k9(o);if(a.appendChild(h),d===i&&rr(h,Ye["active-progress-step"]),d!==n.length-1){const m=S9(t);a.appendChild(m)}})},k9=e=>{const t=document.createElement("li");return rr(t,Ye["progress-step"]),Rn(t,e),t},S9=e=>{const t=document.createElement("li");return rr(t,Ye["progress-step-line"]),e.progressStepsDistance&&ao(t,"width",e.progressStepsDistance),t},E9=(e,t)=>{const a=kO();a&&(Vy(a),_u(a,!!(t.title||t.titleText),"block"),t.title&&Xy(t.title,a),t.titleText&&(a.innerText=t.titleText),In(a,t,"title"))},$O=(e,t)=>{var a;N9(e,t),a9(e,t),_9(e,t),p9(e,t),v9(e,t),E9(e,t),r9(e,t),h9(e,t),Q$(e,t),m9(e,t);const n=ar();typeof t.didRender=="function"&&n&&t.didRender(n),(a=Et.eventEmitter)===null||a===void 0||a.emit("didRender",n)},T9=()=>hn(ar()),zO=()=>{var e;return(e=Ds())===null||e===void 0?void 0:e.click()},C9=()=>{var e;return(e=yo())===null||e===void 0?void 0:e.click()},A9=()=>{var e;return(e=Rc())===null||e===void 0?void 0:e.click()},zc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),BO=e=>{if(e.keydownTarget&&e.keydownHandlerAdded&&e.keydownHandler){const t=e.keydownHandler;e.keydownTarget.removeEventListener("keydown",t,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1}},O9=(e,t,a)=>{if(BO(e),!t.toast){const n=o=>I9(t,o,a);e.keydownHandler=n;const i=t.keydownListenerCapture?window:ar();if(i){e.keydownTarget=i,e.keydownListenerCapture=t.keydownListenerCapture;const o=n;e.keydownTarget.addEventListener("keydown",o,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0}}},Iv=(e,t)=>{var a;const n=Yy();if(n.length){e=e+t,e===-2&&(e=n.length-1),e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(a=ar())===null||a===void 0||a.focus()},UO=["ArrowRight","ArrowDown"],M9=["ArrowLeft","ArrowUp"],I9=(e,t,a)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?P9(t,e):t.key==="Tab"?D9(t):[...UO,...M9].includes(t.key)?L9(t.key):t.key==="Escape"&&R9(t,e,a)))},P9=(e,t)=>{if(!Op(t.allowEnterKey))return;const a=ar();if(!a||!t.input)return;const n=Dp(a,t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;zO(),e.preventDefault()}},D9=e=>{const t=e.target,a=Yy();let n=-1;for(let i=0;i<a.length;i++)if(t===a[i]){n=i;break}e.shiftKey?Iv(n,-1):Iv(n,1),e.stopPropagation(),e.preventDefault()},L9=e=>{const t=wu(),a=Ds(),n=yo(),i=Rc();if(!t||!a||!n||!i)return;const o=[a,n,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const d=UO.includes(e)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let m=0;m<t.children.length;m++){if(h=h[d],!h)return;if(h instanceof HTMLButtonElement&&hn(h))break}h instanceof HTMLButtonElement&&h.focus()}},R9=(e,t,a)=>{e.preventDefault(),Op(t.allowEscapeKey)&&a(zc.esc)};var Ec={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const $9=()=>{const e=en();Array.from(document.body.children).forEach(a=>{a.contains(e)||(a.hasAttribute("aria-hidden")&&a.setAttribute("data-previous-aria-hidden",a.getAttribute("aria-hidden")||""),a.setAttribute("aria-hidden","true"))})},qO=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},FO=typeof window<"u"&&!!window.GestureEvent,z9=()=>{if(FO&&!ml(document.body,Ye.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,rr(document.body,Ye.iosfix),B9()}},B9=()=>{const e=en();if(!e)return;let t;e.ontouchstart=a=>{t=U9(a)},e.ontouchmove=a=>{t&&(a.preventDefault(),a.stopPropagation())}},U9=e=>{const t=e.target,a=en(),n=qy();return!a||!n||q9(e)||F9(e)?!1:t===a||!Mv(a)&&t instanceof HTMLElement&&!U$(t,n)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Mv(n)&&n.contains(t))},q9=e=>!!(e.touches&&e.touches.length&&e.touches[0].touchType==="stylus"),F9=e=>e.touches&&e.touches.length>1,H9=()=>{if(ml(document.body,Ye.iosfix)){const e=parseInt(document.body.style.top,10);Zn(document.body,Ye.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},Y9=()=>{const e=document.createElement("div");e.className=Ye["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let jc=null;const K9=e=>{jc===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(jc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${jc+Y9()}px`)},V9=()=>{jc!==null&&(document.body.style.paddingRight=`${jc}px`,jc=null)};function HO(e,t,a,n){Pp()?Z_(e,n):(O$(a).then(()=>Z_(e,n)),BO(Et)),FO?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Ky()&&(V9(),H9(),qO()),G9()}function G9(){Zn([document.documentElement,document.body],[Ye.shown,Ye["height-auto"],Ye["no-backdrop"],Ye["toast-shown"]])}function li(e){e=W9(e);const t=Ec.swalPromiseResolve.get(this),a=X9(this);this.isAwaitingPromise?e.isDismissed||(Su(this),t(e)):a&&t(e)}const X9=e=>{const t=ar();if(!t)return!1;const a=_r.innerParams.get(e);if(!a||ml(t,a.hideClass.popup))return!1;Zn(t,a.showClass.popup),rr(t,a.hideClass.popup);const n=en();return Zn(n,a.showClass.backdrop),rr(n,a.hideClass.backdrop),J9(e,t,a),!0};function YO(e){const t=Ec.swalPromiseReject.get(this);Su(this),t&&t(e)}const Su=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,_r.innerParams.get(e)||e._destroy())},W9=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),J9=(e,t,a)=>{var n;const i=en(),o=AO(t);typeof a.willClose=="function"&&a.willClose(t),(n=Et.eventEmitter)===null||n===void 0||n.emit("willClose",t),o&&i?Z9(e,t,i,!!a.returnFocus,a.didClose):i&&HO(e,i,!!a.returnFocus,a.didClose)},Z9=(e,t,a,n,i)=>{Et.swalCloseEventFinishedCallback=HO.bind(null,e,a,n,i);const o=function(d){if(d.target===t){var h;(h=Et.swalCloseEventFinishedCallback)===null||h===void 0||h.call(Et),delete Et.swalCloseEventFinishedCallback,t.removeEventListener("animationend",o),t.removeEventListener("transitionend",o)}};t.addEventListener("animationend",o),t.addEventListener("transitionend",o)},Z_=(e,t)=>{setTimeout(()=>{var a;typeof t=="function"&&t.bind(e.params)(),(a=Et.eventEmitter)===null||a===void 0||a.emit("didClose"),e._destroy&&e._destroy()})},Tc=e=>{let t=ar();if(t||new T,t=ar(),!t)return;const a=$c();Pp()?Ha(Lc()):Q9(t,e),wa(a),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Q9=(e,t)=>{const a=wu(),n=$c();!a||!n||(!t&&hn(Ds())&&(t=Ds()),wa(a),t&&(Ha(t),n.setAttribute("data-button-to-replace",t.className),a.insertBefore(n,t)),rr([e,a],Ye.loading))},ez=(e,t)=>{t.input==="select"||t.input==="radio"?sz(e,t):["text","email","number","tel","textarea"].some(a=>a===t.input)&&(By(t.inputValue)||Uy(t.inputValue))&&(Tc(Ds()),lz(e,t))},tz=(e,t)=>{const a=e.getInput();if(!a)return null;switch(t.input){case"checkbox":return rz(a);case"radio":return az(a);case"file":return nz(a);default:return t.inputAutoTrim?a.value.trim():a.value}},rz=e=>e.checked?1:0,az=e=>e.checked?e.value:null,nz=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,sz=(e,t)=>{const a=ar();if(!a)return;const n=i=>{t.input==="select"?iz(a,Am(i),t):t.input==="radio"&&oz(a,Am(i),t)};By(t.inputOptions)||Uy(t.inputOptions)?(Tc(Ds()),ju(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):vo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},lz=(e,t)=>{const a=e.getInput();a&&(Ha(a),ju(t.inputValue).then(n=>{a.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,wa(a),a.focus(),e.hideLoading()}).catch(n=>{vo(`Error in inputValue promise: ${n}`),a.value="",wa(a),a.focus(),e.hideLoading()}))};function iz(e,t,a){const n=si(e,Ye.select);if(!n)return;const i=(o,d,h)=>{const m=document.createElement("option");m.value=h,Rn(m,d),m.selected=KO(h,a.inputValue),o.appendChild(m)};t.forEach(o=>{const d=o[0],h=o[1];if(Array.isArray(h)){const m=document.createElement("optgroup");m.label=d,m.disabled=!1,n.appendChild(m),h.forEach(u=>i(m,u[1],u[0]))}else i(n,h,d)}),n.focus()}function oz(e,t,a){const n=si(e,Ye.radio);if(!n)return;t.forEach(o=>{const d=o[0],h=o[1],m=document.createElement("input"),u=document.createElement("label");m.type="radio",m.name=Ye.radio,m.value=d,KO(d,a.inputValue)&&(m.checked=!0);const f=document.createElement("span");Rn(f,h),f.className=Ye.label,u.appendChild(m),u.appendChild(f),n.appendChild(u)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const Am=e=>{const t=[];return e instanceof Map?e.forEach((a,n)=>{let i=a;typeof i=="object"&&(i=Am(i)),t.push([n,i])}):Object.keys(e).forEach(a=>{let n=e[a];typeof n=="object"&&(n=Am(n)),t.push([a,n])}),t},KO=(e,t)=>!!t&&t!==null&&t!==void 0&&t.toString()===e.toString(),cz=e=>{const t=_r.innerParams.get(e);e.disableButtons(),t.input?VO(e,"confirm"):Qy(e,!0)},dz=e=>{const t=_r.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?VO(e,"deny"):Zy(e,!1)},uz=(e,t)=>{e.disableButtons(),t(zc.cancel)},VO=(e,t)=>{const a=_r.innerParams.get(e);if(!a.input){vo(`The "input" parameter is needed to be set when using returnInputValueOn${zy(t)}`);return}const n=e.getInput(),i=tz(e,a);a.inputValidator?fz(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(a.validationMessage||n.validationMessage)):t==="deny"?Zy(e,i):Qy(e,i)},fz=(e,t,a)=>{const n=_r.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>ju(n.inputValidator(t,n.validationMessage))).then(o=>{e.enableButtons(),e.enableInput(),o?e.showValidationMessage(o):a==="deny"?Zy(e,t):Qy(e,t)})},Zy=(e,t)=>{const a=_r.innerParams.get(e);a.showLoaderOnDeny&&Tc(yo()),a.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>ju(a.preDeny(t,a.validationMessage))).then(i=>{i===!1?(e.hideLoading(),Su(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>GO(e,i))):e.close({isDenied:!0,value:t})},Q_=(e,t)=>{e.close({isConfirmed:!0,value:t})},GO=(e,t)=>{e.rejectPromise(t)},Qy=(e,t)=>{const a=_r.innerParams.get(e);a.showLoaderOnConfirm&&Tc(),a.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>ju(a.preConfirm(t,a.validationMessage))).then(i=>{hn(Mp())||i===!1?(e.hideLoading(),Su(e)):Q_(e,typeof i>"u"?t:i)}).catch(i=>GO(e,i))):Q_(e,t)};function Om(){const e=_r.innerParams.get(this);if(!e)return;const t=_r.domCache.get(this);Ha(t.loader),Pp()?e.icon&&wa(Lc()):hz(t),Zn([t.popup,t.actions],Ye.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const hz=e=>{const t=e.loader.getAttribute("data-button-to-replace"),a=t?e.popup.getElementsByClassName(t):[];a.length?wa(a[0],"inline-block"):B$()&&Ha(e.actions)};function XO(){const e=_r.innerParams.get(this),t=_r.domCache.get(this);return t?Dp(t.popup,e.input):null}function WO(e,t,a){const n=_r.domCache.get(e);t.forEach(i=>{n[i].disabled=a})}function JO(e,t){const a=ar();if(!(!a||!e))if(e.type==="radio"){const n=a.querySelectorAll(`[name="${Ye.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function ZO(){WO(this,["confirmButton","denyButton","cancelButton"],!1)}function QO(){WO(this,["confirmButton","denyButton","cancelButton"],!0)}function e5(){JO(this.getInput(),!1)}function t5(){JO(this.getInput(),!0)}function r5(e){const t=_r.domCache.get(this),a=_r.innerParams.get(this);Rn(t.validationMessage,e),t.validationMessage.className=Ye["validation-message"],a.customClass&&a.customClass.validationMessage&&rr(t.validationMessage,a.customClass.validationMessage),wa(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",Ye["validation-message"]),TO(n),rr(n,Ye.inputerror))}function a5(){const e=_r.domCache.get(this);e.validationMessage&&Ha(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Zn(t,Ye.inputerror))}const ii={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},mz=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],pz={allowEnterKey:void 0},xz=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],n5=e=>Object.prototype.hasOwnProperty.call(ii,e),s5=e=>mz.indexOf(e)!==-1,l5=e=>pz[e],bz=e=>{n5(e)||Ja(`Unknown parameter "${e}"`)},gz=e=>{xz.includes(e)&&Ja(`The parameter "${e}" is incompatible with toasts`)},vz=e=>{const t=l5(e);t&&_O(e,t)},i5=e=>{e.backdrop===!1&&e.allowOutsideClick&&Ja('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Ja(`Invalid theme "${e.theme}"`);for(const t in e)bz(t),e.toast&&gz(t),vz(t)};function o5(e){const t=en(),a=ar(),n=_r.innerParams.get(this);if(!a||ml(a,n.hideClass.popup)){Ja("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=yz(e),o=Object.assign({},n,i);i5(o),t&&(t.dataset.swal2Theme=o.theme),$O(this,o),_r.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const yz=e=>{const t={};return Object.keys(e).forEach(a=>{if(s5(a)){const n=e;t[a]=n[a]}else Ja(`Invalid parameter to update: ${a}`)}),t};function c5(){var e;const t=_r.domCache.get(this),a=_r.innerParams.get(this);if(!a){d5(this);return}t.popup&&Et.swalCloseEventFinishedCallback&&(Et.swalCloseEventFinishedCallback(),delete Et.swalCloseEventFinishedCallback),typeof a.didDestroy=="function"&&a.didDestroy(),(e=Et.eventEmitter)===null||e===void 0||e.emit("didDestroy"),jz(this)}const jz=e=>{d5(e),delete e.params,delete Et.keydownHandler,delete Et.keydownTarget,delete Et.currentInstance},d5=e=>{e.isAwaitingPromise?(qb(_r,e),e.isAwaitingPromise=!0):(qb(Ec,e),qb(_r,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},qb=(e,t)=>{for(const a in e)e[a].delete(t)};var Nz=Object.freeze({__proto__:null,_destroy:c5,close:li,closeModal:li,closePopup:li,closeToast:li,disableButtons:QO,disableInput:t5,disableLoading:Om,enableButtons:ZO,enableInput:e5,getInput:XO,handleAwaitingPromise:Su,hideLoading:Om,rejectPromise:YO,resetValidationMessage:a5,showValidationMessage:r5,update:o5});const wz=(e,t,a)=>{e.toast?_z(e,t,a):(Sz(t),Ez(t),Tz(e,t,a))},_z=(e,t,a)=>{t.popup.onclick=()=>{e&&(kz(e)||e.timer||e.input)||a(zc.close)}},kz=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let Mm=!1;const Sz=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(Mm=!0)}}},Ez=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(a){e.popup.onmouseup=()=>{},(a.target===e.popup||a.target instanceof HTMLElement&&e.popup.contains(a.target))&&(Mm=!0)}}},Tz=(e,t,a)=>{t.container.onclick=n=>{if(Mm){Mm=!1;return}n.target===t.container&&Op(e.allowOutsideClick)&&a(zc.backdrop)}},Cz=e=>typeof e=="object"&&e.jquery,ek=e=>e instanceof Element||Cz(e),Az=e=>{const t={};return typeof e[0]=="object"&&!ek(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((a,n)=>{const i=e[n];typeof i=="string"||ek(i)?t[a]=i:i!==void 0&&vo(`Unexpected type of ${a}! Expected "string" or "Element", got ${typeof i}`)}),t};function Oz(...e){return new this(...e)}function Mz(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const Iz=()=>Et.timeout&&Et.timeout.getTimerLeft(),u5=()=>{if(Et.timeout)return q$(),Et.timeout.stop()},f5=()=>{if(Et.timeout){const e=Et.timeout.start();return Gy(e),e}},Pz=()=>{const e=Et.timeout;return e&&(e.running?u5():f5())},Dz=e=>{if(Et.timeout){const t=Et.timeout.increase(e);return Gy(t,!0),t}},Lz=()=>!!(Et.timeout&&Et.timeout.isRunning());let tk=!1;const Pv={};function Rz(e="data-swal-template"){Pv[e]=this,tk||(document.body.addEventListener("click",$z),tk=!0)}const $z=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const a in Pv){const n=t.getAttribute&&t.getAttribute(a);if(n){Pv[a].fire({template:n});return}}};let zz=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,a){const n=this._getHandlersByEventName(t);n.includes(a)||n.push(a)}once(t,a){const n=(...i)=>{this.removeListener(t,n),a.apply(this,i)};this.on(t,n)}emit(t,...a){this._getHandlersByEventName(t).forEach(n=>{try{n.apply(this,a)}catch(i){console.error(i)}})}removeListener(t,a){const n=this._getHandlersByEventName(t),i=n.indexOf(a);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};Et.eventEmitter=new zz;const Bz=(e,t)=>{Et.eventEmitter&&Et.eventEmitter.on(e,t)},Uz=(e,t)=>{Et.eventEmitter&&Et.eventEmitter.once(e,t)},qz=(e,t)=>{if(Et.eventEmitter){if(!e){Et.eventEmitter.reset();return}t?Et.eventEmitter.removeListener(e,t):Et.eventEmitter.removeAllListeners(e)}};var Fz=Object.freeze({__proto__:null,argsToParams:Az,bindClickHandler:Rz,clickCancel:A9,clickConfirm:zO,clickDeny:C9,enableLoading:Tc,fire:Oz,getActions:wu,getCancelButton:Rc,getCloseButton:Hy,getConfirmButton:Ds,getContainer:en,getDenyButton:yo,getFocusableElements:Yy,getFooter:EO,getHtmlContainer:qy,getIcon:Lc,getIconContent:D$,getImage:SO,getInputLabel:L$,getLoader:$c,getPopup:ar,getProgressSteps:Fy,getTimerLeft:Iz,getTimerProgressBar:Ip,getTitle:kO,getValidationMessage:Mp,increaseTimer:Dz,isDeprecatedParameter:l5,isLoading:$$,isTimerRunning:Lz,isUpdatableParameter:s5,isValidParameter:n5,isVisible:T9,mixin:Mz,off:qz,on:Bz,once:Uz,resumeTimer:f5,showLoading:Tc,stopTimer:u5,toggleTimer:Pz});class Hz{constructor(t,a){this.callback=t,this.remaining=a,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const a=this.running;return a&&this.stop(),this.remaining+=t,a&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const h5=["swal-title","swal-html","swal-footer"],Yz=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const a=t.content;return Qz(a),Object.assign(Kz(a),Vz(a),Gz(a),Xz(a),Wz(a),Jz(a),Zz(a,h5))},Kz=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{oo(n,["name","value"]);const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(i in ii&&typeof ii[i]=="boolean"?t[i]=o!=="false":i in ii&&typeof ii[i]=="object"?t[i]=JSON.parse(o):t[i]=o)}),t},Vz=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(t[i]=new Function(`return ${o}`)())}),t},Gz=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{oo(n,["type","color","aria-label"]);const i=n.getAttribute("type");if(!(!i||!["confirm","cancel","deny"].includes(i))){if(t[`${i}ButtonText`]=n.innerHTML,t[`show${zy(i)}Button`]=!0,n.hasAttribute("color")){const o=n.getAttribute("color");o!==null&&(t[`${i}ButtonColor`]=o)}if(n.hasAttribute("aria-label")){const o=n.getAttribute("aria-label");o!==null&&(t[`${i}ButtonAriaLabel`]=o)}}}),t},Xz=e=>{const t={},a=e.querySelector("swal-image");return a&&(oo(a,["src","width","height","alt"]),a.hasAttribute("src")&&(t.imageUrl=a.getAttribute("src")||void 0),a.hasAttribute("width")&&(t.imageWidth=a.getAttribute("width")||void 0),a.hasAttribute("height")&&(t.imageHeight=a.getAttribute("height")||void 0),a.hasAttribute("alt")&&(t.imageAlt=a.getAttribute("alt")||void 0)),t},Wz=e=>{const t={},a=e.querySelector("swal-icon");return a&&(oo(a,["type","color"]),a.hasAttribute("type")&&(t.icon=a.getAttribute("type")),a.hasAttribute("color")&&(t.iconColor=a.getAttribute("color")),t.iconHtml=a.innerHTML),t},Jz=e=>{const t={},a=e.querySelector("swal-input");a&&(oo(a,["type","label","placeholder","value"]),t.input=a.getAttribute("type")||"text",a.hasAttribute("label")&&(t.inputLabel=a.getAttribute("label")),a.hasAttribute("placeholder")&&(t.inputPlaceholder=a.getAttribute("placeholder")),a.hasAttribute("value")&&(t.inputValue=a.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{oo(i,["value"]);const o=i.getAttribute("value");if(!o)return;const d=i.innerHTML;t.inputOptions[o]=d})),t},Zz=(e,t)=>{const a={};for(const n in t){const i=t[n],o=e.querySelector(i);o&&(oo(o,[]),a[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return a},Qz=e=>{const t=h5.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(a=>{const n=a.tagName.toLowerCase();t.includes(n)||Ja(`Unrecognized element <${n}>`)})},oo=(e,t)=>{Array.from(e.attributes).forEach(a=>{t.indexOf(a.name)===-1&&Ja([`Unrecognized attribute "${a.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},m5=10,e8=e=>{var t,a;const n=en(),i=ar();if(!n||!i)return;typeof e.willOpen=="function"&&e.willOpen(i),(t=Et.eventEmitter)===null||t===void 0||t.emit("willOpen",i);const d=window.getComputedStyle(document.body).overflowY;if(a8(n,i,e),setTimeout(()=>{t8(n,i)},m5),Ky()&&(r8(n,e.scrollbarPadding!==void 0?e.scrollbarPadding:!1,d),$9()),!Pp()&&!Et.previousActiveElement&&(Et.previousActiveElement=document.activeElement),typeof e.didOpen=="function"){const h=e.didOpen;setTimeout(()=>h(i))}(a=Et.eventEmitter)===null||a===void 0||a.emit("didOpen",i)},Im=e=>{const t=ar();if(!t||e.target!==t)return;const a=en();a&&(t.removeEventListener("animationend",Im),t.removeEventListener("transitionend",Im),a.style.overflowY="auto",Zn(a,Ye["no-transition"]))},t8=(e,t)=>{AO(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Im),t.addEventListener("transitionend",Im)):e.style.overflowY="auto"},r8=(e,t,a)=>{z9(),t&&a!=="hidden"&&K9(a),setTimeout(()=>{e.scrollTop=0})},a8=(e,t,a)=>{var n;(n=a.showClass)!==null&&n!==void 0&&n.backdrop&&rr(e,a.showClass.backdrop),a.animation?(t.style.setProperty("opacity","0","important"),wa(t,"grid"),setTimeout(()=>{var i;(i=a.showClass)!==null&&i!==void 0&&i.popup&&rr(t,a.showClass.popup),t.style.removeProperty("opacity")},m5)):wa(t,"grid"),rr([document.documentElement,document.body],Ye.shown),a.heightAuto&&a.backdrop&&!a.toast&&rr([document.documentElement,document.body],Ye["height-auto"])};var rk={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function n8(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=rk.email),e.input==="url"&&(e.inputValidator=rk.url))}function s8(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Ja('Target parameter is not valid, defaulting to "body"'),e.target="body")}function l8(e){n8(e),e.showLoaderOnConfirm&&!e.preConfirm&&Ja(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),s8(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),W$(e)}let Ss;var ah=new WeakMap;class ea{constructor(...t){if(E$(this,ah,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;Ss=this;const a=Object.freeze(this.constructor.argsToParams(t));this.params=a,this.isAwaitingPromise=!1,T$(ah,this,this._main(Ss.params))}_main(t,a={}){if(i5(Object.assign({},a,t)),Et.currentInstance){const o=Ec.swalPromiseResolve.get(Et.currentInstance),{isAwaitingPromise:d}=Et.currentInstance;Et.currentInstance._destroy(),d||o({isDismissed:!0}),Ky()&&qO()}Et.currentInstance=Ss;const n=o8(t,a);l8(n),Object.freeze(n),Et.timeout&&(Et.timeout.stop(),delete Et.timeout),clearTimeout(Et.restoreFocusTimeout);const i=c8(Ss);return $O(Ss,n),_r.innerParams.set(Ss,n),i8(Ss,i,n)}then(t){return K_(ah,this).then(t)}finally(t){return K_(ah,this).finally(t)}}const i8=(e,t,a)=>new Promise((n,i)=>{const o=d=>{e.close({isDismissed:!0,dismiss:d,isConfirmed:!1,isDenied:!1})};Ec.swalPromiseResolve.set(e,n),Ec.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{cz(e)},t.denyButton.onclick=()=>{dz(e)},t.cancelButton.onclick=()=>{uz(e,o)},t.closeButton.onclick=()=>{o(zc.close)},wz(a,t,o),O9(Et,a,o),ez(e,a),e8(a),d8(Et,a,o),u8(t,a),setTimeout(()=>{t.container.scrollTop=0})}),o8=(e,t)=>{const a=Yz(e),n=Object.assign({},ii,t,a,e);return n.showClass=Object.assign({},ii.showClass,n.showClass),n.hideClass=Object.assign({},ii.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},c8=e=>{const t={popup:ar(),container:en(),actions:wu(),confirmButton:Ds(),denyButton:yo(),cancelButton:Rc(),loader:$c(),closeButton:Hy(),validationMessage:Mp(),progressSteps:Fy()};return _r.domCache.set(e,t),t},d8=(e,t,a)=>{const n=Ip();Ha(n),t.timer&&(e.timeout=new Hz(()=>{a("timer"),delete e.timeout},t.timer),t.timerProgressBar&&n&&(wa(n),In(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&Gy(t.timer)})))},u8=(e,t)=>{if(!t.toast){if(!Op(t.allowEnterKey)){_O("allowEnterKey"),m8();return}f8(e)||h8(e,t)||Iv(-1,1)}},f8=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const a of t)if(a instanceof HTMLElement&&hn(a))return a.focus(),!0;return!1},h8=(e,t)=>t.focusDeny&&hn(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&hn(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&hn(e.confirmButton)?(e.confirmButton.focus(),!0):!1,m8=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ea.prototype.disableButtons=QO;ea.prototype.enableButtons=ZO;ea.prototype.getInput=XO;ea.prototype.disableInput=t5;ea.prototype.enableInput=e5;ea.prototype.hideLoading=Om;ea.prototype.disableLoading=Om;ea.prototype.showValidationMessage=r5;ea.prototype.resetValidationMessage=a5;ea.prototype.close=li;ea.prototype.closePopup=li;ea.prototype.closeModal=li;ea.prototype.closeToast=li;ea.prototype.rejectPromise=YO;ea.prototype.update=o5;ea.prototype._destroy=c5;Object.assign(ea,Fz);Object.keys(Nz).forEach(e=>{ea[e]=function(...t){if(Ss&&Ss[e])return Ss[e](...t)}});ea.DismissReason=zc;ea.version="11.26.17";const T=ea;T.default=T;typeof document<"u"&&(function(e,t){var a=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=t);else try{a.innerHTML=t}catch{a.innerText=t}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const p8=({children:e,activeSlug:t,activeSubSlug:a,setActiveView:n,onLogout:i})=>{const{isDark:o,toggleTheme:d}=$y(),[h,m]=g.useState(!0),[u,f]=g.useState(null),[x,b]=g.useState(null),[v,N]=g.useState(!1),[j,_]=g.useState(null),[k,E]=g.useState(!1),[C,S]=g.useState(!1),[O,I]=g.useState([]),L=g.useRef([]),te=g.useRef(!1),H=g.useRef(new Set),B="Dragon_notif_read_ids",X=g.useRef(0),V=JSON.parse(localStorage.getItem("Dragon_user")||"{}"),le=ia("Dragon.png"),J=(localStorage.getItem("Dragon_sales_display_method")||"company").toString(),Z=(localStorage.getItem("Dragon_product_source")||"both").toString(),M=(localStorage.getItem("Dragon_delivery_method")||"reps").toString();g.useEffect(()=>{const D=U=>{try{console.debug("[Layout] themeChange event received",U.detail,"html.hasDark=",document.documentElement.classList.contains("dark"),"body.hasDark=",document.body.classList.contains("dark"))}catch{}};return window.addEventListener("themeChange",D),()=>window.removeEventListener("themeChange",D)},[]),g.useEffect(()=>{(async()=>{try{const U=JSON.parse(localStorage.getItem("Dragon_user")||"null"),[re,he,Ne]=await Promise.all([fetch(`${G}/api.php?module=permissions&action=getUserPages&user_id=${U?U.id:0}`).then(Me=>Me.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=permissions&action=getMyModules`).then(Me=>Me.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=permissions&action=getUserPermissions&user_id=${U?U.id:0}`).then(Me=>Me.json()).catch(()=>({success:!1,data:[]}))]),Y=re&&re.success&&Array.isArray(re.data)?re.data:[],me=he&&he.success&&Array.isArray(he.data)?he.data:[],z=Ne&&Ne.success&&Array.isArray(Ne.data)?Ne.data:[];if(b({pages:Y,myModules:me,userPerms:z}),Y.length>0){f([]);return}const F=me.map(Me=>(Me.slug||Me.name||"").toString().toLowerCase()).filter(Boolean),ye=z.map(Me=>(Me.module_name||Me.name||"").toString().toLowerCase()).filter(Boolean),Ae=z.map(Me=>String(Me.module_id||"")).filter(Boolean),be=Array.from(new Set([...F,...ye,...Ae]));f(be)}catch(U){console.error("Failed to fetch allowed modules",U),f([]),b(null)}})()},[]);const P=D=>(D||"").toString().toLowerCase(),W={crm:["customers"],srm:["suppliers"],finance:["treasuries","transactions"],inventory:["stock","products","warehouses","product_movements"],hrm:["employees"],admin:["users","permissions"],attendance:["attendance","attendance_devices","attendance_device_users","attendance_shifts","attendance_schedules","attendance_holidays","attendance_logs","attendance_summary"],sales:["orders"],dispatch:["manufacturing-management","manufacturing","dispatch","send_products","send_to_sales"],"factory-stock":["fabrics","accessories","products"],"factory-management":["production-stages","colors","sizes"],"manufacturing-management":["cutting-stage","manufacturing-stages","assembly"],"barcode-print":["barcode-print","barcode","print","barcodes"]},se=D=>{if(u===null)return!0;const U=x&&x.pages?x.pages:[];if(Array.isArray(U)&&U.length>0){const z=[P(D.slug),P(D.id),P(D.label)],F=W[P(D.slug)]||[];z.push(...F.map(P)),D.subItems&&z.push(...D.subItems.map(be=>P(be.slug)),...D.subItems.map(be=>P(be.label)));const ye=U.find(be=>{const Me=P(be.page_slug);return Me?!!(z.includes(Me)||Me.includes(P(D.slug))||P(D.slug).includes(Me)||Me.includes(P(D.id))||P(D.id).includes(Me)||D.subItems&&D.subItems.some(Oe=>Me.includes(P(Oe.slug))||P(Oe.slug).includes(Me)||Me.includes(P(Oe.label)))):!1});if(!ye)return!0;const Ae=ye.can_access;return Ae===1||Ae==="1"||Ae===!0||Ae==="true"||Number(Ae)===1}const re=[P(D.slug),P(D.id),P(D.label)].filter(Boolean),he=W[P(D.slug)]||[];re.push(...he.map(P)),D.subItems&&re.push(...D.subItems.map(z=>P(z.slug)),...D.subItems.map(z=>P(z.label)));const Ne=(u||[]).map(P),Y=re.some(z=>Ne.includes(z)),me=D.subItems&&D.subItems.some(z=>Ne.includes(P(z.slug))||Ne.includes(P(z.name)));return D.slug==="dashboard"||Y||!!me},ue=D=>{if(!se(D)){T.fire("","     .","error");return}if(D.subItems){_(j===D.id?null:D.id);return}console.debug("Layout: main menu click ->",D.slug),_(null),n(D.slug,"")};return g.useEffect(()=>{let D=!0;const U=Ne=>{if(!D)return;const Y=new Set(Ne.map(Ae=>String(Ae.id))),me=new Set(Array.from(H.current).filter(Ae=>Y.has(Ae)));H.current=me;try{localStorage.setItem(B,JSON.stringify(Array.from(me)))}catch{}const z=Ne.filter(Ae=>!me.has(String(Ae.id)));I(z);const F=new Set(L.current),ye=z.filter(Ae=>!F.has(String(Ae.id)));ye.length>0&&T.fire({toast:!0,position:"top-start",icon:"warning",title:" ",text:` ${ye.length}   `,showConfirmButton:!1,timer:4e3,timerProgressBar:!0}),L.current=z.map(Ae=>String(Ae.id))};try{const Ne=JSON.parse(localStorage.getItem(B)||"[]");Array.isArray(Ne)&&(H.current=new Set(Ne.map(Y=>String(Y))))}catch{}const re=async()=>{const Ne=Date.now();if(!(Ne-X.current<6e4)&&!te.current){te.current=!0,X.current=Ne;try{const[Y,me]=await Promise.all([fetch(`${G}/api.php?module=products&action=getAll`,{credentials:"include"}).then(ye=>ye.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=notifications&action=getMy`,{credentials:"include"}).then(ye=>ye.json()).catch(()=>({success:!1,data:[]}))]),z=Y!=null&&Y.success&&Array.isArray(Y==null?void 0:Y.data)?Y.data.filter(ye=>Number(ye.stock)<=Number(ye.reorderLevel)).map(ye=>({id:`lowstock-${ye.id}`,title:` : ${ye.name}`,text:`  ${ye.stock} (  ${ye.reorderLevel})`,product:ye})):[],F=me!=null&&me.success&&Array.isArray(me==null?void 0:me.data)?me.data.map(ye=>({id:`srv-${ye.id}`,title:String(ye.title||""),text:String(ye.text||""),raw:ye})):[];U([...F,...z])}catch(Y){console.error("Failed to fetch low stock",Y)}finally{te.current=!1}}};re();const he=window.setInterval(re,12e4);return()=>{D=!1,window.clearInterval(he)}},[]),r.jsxs("div",{className:"min-h-screen flex bg-app font-['Cairo'] transition-colors duration-300",style:{color:"var(--text)"},children:[r.jsx("aside",{className:"fixed inset-y-0 right-0 z-50 w-64 transition-transform duration-300 transform card backdrop-blur-xl border-l border-card shadow-xl no-print",style:{transform:h?"translateX(0)":"translateX(100%)"},children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gradient-to-r from-transparent via-slate-200/50 dark:via-slate-700/50 to-transparent bg-gradient-to-b from-blue-500/5 dark:from-blue-400/10 to-transparent",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[le?r.jsx("img",{src:le,alt:"logo",className:"w-11 h-11 rounded-xl object-cover border-2 border-blue-500/20 dark:border-blue-400/30 shadow-lg",onError:D=>{D.target.src=ia("Dragon.png")}}):r.jsx("img",{src:ia("Dragon.png"),alt:"logo",className:"w-11 h-11 rounded-xl object-cover border-2 border-blue-500/20 dark:border-blue-400/30 shadow-lg"}),r.jsxs("span",{className:"font-bold text-xl tracking-tight bg-gradient-to-l from-slate-900 via-blue-600 to-slate-900 dark:from-slate-100 dark:via-blue-400 dark:to-slate-100 bg-clip-text text-transparent",children:[" ",r.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:""})]})]}),r.jsx("button",{onClick:()=>m(!1),className:"lg:hidden hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3 space-y-1.5",children:om.filter(D=>!(D.id==="sales-offices"&&J==="company"||M==="direct"&&["orders","sales","reps","shipping-companies"].includes(D.id)||M==="shipping"&&["reps","pos"].includes(D.id)||M==="reps"&&["pos","shipping-companies"].includes(D.id)||Z==="suppliers"&&["factory-stock","factory-management","manufacturing-management","dispatch","factory-receiving","workers"].includes(D.id))).map(D=>se(D)?r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>ue(D),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200
                      ${t===D.slug?"bg-gradient-to-l from-blue-600 to-blue-500 dark:from-blue-500 dark:to-blue-600 text-white shadow-lg shadow-blue-500/40 dark:shadow-blue-400/30 scale-[1.02]":"hover:bg-slate-100/80 dark:hover:bg-slate-800/80 hover:scale-[1.01]"}
                  `,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:t===D.slug?"text-white":"",children:D.icon}),r.jsx("span",{className:"font-semibold text-sm",children:D.label})]}),D.subItems&&r.jsx("span",{className:`transition-transform duration-200 ${j===D.id?"rotate-180":""}`,children:j===D.id?r.jsx(z_,{size:16}):r.jsx(xO,{size:16,className:"rtl-flip"})})]}),D.subItems&&j===D.id&&r.jsx("div",{className:"mt-2 mr-10 space-y-1 border-r-2 border-blue-500/30 dark:border-blue-400/30 pr-1",children:D.subItems.map(U=>r.jsx("button",{onClick:()=>{console.debug("Layout: subitem click ->",D.slug,U.slug),n(D.slug,U.slug)},className:`w-full text-right px-3 py-2.5 text-xs transition-all duration-200 rounded-lg
                          ${t===D.slug&&a===U.slug?"text-blue-600 dark:text-blue-400 font-bold bg-blue-50/80 dark:bg-blue-900/30 border-r-2 border-blue-600 dark:border-blue-400 -mr-[2px] shadow-sm":"hover:text-blue-600 dark:hover:text-blue-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
                        `,children:U.label},U.slug))})]},D.id):null)})]})}),r.jsxs("main",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ${h?"lg:mr-64":"mr-0"}`,children:[r.jsxs("header",{className:"h-16 flex items-center justify-between px-4 sticky top-0 z-40 backdrop-blur-xl border-b card border-card shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>m(!h),className:"p-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-200 hover:shadow-md hover:scale-105 active:scale-95",children:r.jsx(OR,{size:22})}),r.jsxs("div",{className:"hidden md:flex items-center bg-slate-100/80 dark:bg-slate-800/80 rounded-xl px-4 py-2 w-64 border border-slate-200/50 dark:border-slate-700/50 focus-within:border-blue-500/50 dark:focus-within:border-blue-400/50 focus-within:shadow-lg focus-within:shadow-blue-500/10 transition-all",children:[r.jsx(fs,{className:"w-4 h-4"}),r.jsx("input",{type:"text",placeholder:" ...",className:"bg-transparent border-none focus:ring-0 text-sm mr-2 w-full text-right placeholder:text-slate-400 dark:placeholder:text-slate-500"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:d,className:"p-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-300 hover:shadow-lg hover:scale-110 active:scale-95 group",children:o?r.jsx(l$,{size:20,className:"text-amber-500 group-hover:rotate-180 transition-transform duration-500"}):r.jsx(IR,{size:20,className:"group-hover:rotate-12 transition-transform duration-300"})}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>S(!C),className:"p-2.5 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 relative transition-all duration-200 hover:shadow-md hover:scale-105 active:scale-95",children:[r.jsx(mL,{size:20}),r.jsx("span",{className:"absolute top-1.5 left-1.5 w-2.5 h-2.5 bg-gradient-to-br from-red-500 to-red-600 rounded-full border-2 border-white dark:border-slate-900 animate-pulse"})]}),C&&r.jsxs("div",{className:"absolute left-0 mt-2 w-80 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl shadow-2xl z-50 overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200/50 dark:border-slate-700/50 bg-gradient-to-l from-blue-50/50 dark:from-blue-900/20 to-transparent flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-sm bg-gradient-to-l from-slate-900 to-blue-600 dark:from-slate-100 dark:to-blue-400 bg-clip-text text-transparent",children:""}),r.jsx("button",{className:"text-[10px] text-blue-600 dark:text-blue-400 hover:underline font-semibold",onClick:()=>{const D=O.map(re=>String(re.id)),U=new Set(H.current);D.forEach(re=>U.add(re)),H.current=U;try{localStorage.setItem(B,JSON.stringify(Array.from(U)))}catch{}I([]),L.current=[],fetch(`${G}/api.php?module=notifications&action=markAllRead`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).catch(()=>null)},children:"  "})]}),r.jsx("div",{className:"max-h-72 overflow-y-auto",children:O.length===0?r.jsx("div",{className:"p-6 text-center text-sm text-muted",children:"   "}):O.map(D=>r.jsxs("div",{className:"p-4 border-b border-slate-200/30 dark:border-slate-700/30 hover:bg-gradient-to-l from-blue-50/50 dark:from-slate-800/50 to-transparent transition-all flex gap-3 cursor-pointer group",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/40 dark:to-blue-800/40 p-2.5 rounded-xl h-fit group-hover:scale-110 transition-transform",children:r.jsx(dR,{size:16,className:"text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xs font-bold",children:D.title}),r.jsx("p",{className:"text-[11px] mt-1.5 leading-relaxed text-muted",children:D.text})]})]},D.id))}),r.jsx("button",{className:"w-full py-3 text-xs text-muted hover:bg-gradient-to-l from-blue-50 dark:from-slate-800 to-transparent font-semibold transition-all",children:"  "})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>E(!k),className:"flex items-center gap-2.5 mr-2 p-1.5 pr-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-200 hover:shadow-md hover:scale-[1.02] active:scale-95 group",children:[le?r.jsx("img",{src:le,className:"w-9 h-9 rounded-xl object-cover border-2 border-blue-500/30 dark:border-blue-400/30 shadow-md group-hover:border-blue-500/50 transition-all"}):r.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-500 rounded-xl flex items-center justify-center text-white shadow-lg group-hover:shadow-xl transition-all",children:r.jsx(fi,{size:18})}),r.jsxs("div",{className:"hidden sm:block text-right",children:[r.jsx("p",{className:"text-xs font-bold leading-none",children:V.name||""}),r.jsx("p",{className:"text-[10px] text-muted mt-1.5 font-medium",children:"Super Admin"})]}),r.jsx(z_,{size:15,className:"text-muted group-hover:text-blue-500 transition-colors"})]}),k&&r.jsxs("div",{className:"absolute left-0 mt-2 w-56 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl shadow-2xl z-50 p-1.5 animate-in fade-in slide-in-from-top-2 duration-200",children:[r.jsxs("button",{onClick:()=>{n("profile"),E(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm hover:bg-gradient-to-l from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent transition-all group",children:[r.jsx(fi,{size:18,className:"text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"font-medium",children:" "})]}),r.jsxs("button",{onClick:()=>n("settings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm hover:bg-gradient-to-l from-blue-50 to-transparent dark:from-blue-900/30 dark:to-transparent transition-all group",children:[r.jsx(Ov,{size:18,className:"text-blue-600 dark:text-blue-400 group-hover:rotate-90 transition-transform duration-300"}),r.jsx("span",{className:"font-medium",children:" "})]}),r.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-slate-200 dark:via-slate-700 to-transparent my-1.5 mx-2"}),r.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm text-red-600 dark:text-red-400 hover:bg-gradient-to-l from-red-50 to-transparent dark:from-red-900/30 dark:to-transparent transition-all group",children:[r.jsx(SR,{size:18,className:"group-hover:translate-x-1 transition-transform"}),r.jsx("span",{className:"font-medium",children:" "})]})]})]})]})]}),v&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-black/40",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-white dark:bg-slate-900 p-6 border border-card shadow-2xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold",children:"   (raw)"}),r.jsx("button",{onClick:()=>N(!1),className:"text-muted",children:""})]}),r.jsx("div",{className:"mb-4",children:r.jsx("pre",{className:"max-h-48 overflow-auto text-xs p-2 bg-slate-50 dark:bg-slate-800 rounded",children:JSON.stringify(x||u||[],null,2)})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold mb-2",children:"  "}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:om.map(D=>{const U=(D.slug||"").toString().toLowerCase(),re=se(D);return r.jsxs("div",{className:`p-2 rounded flex justify-between items-center ${re?"bg-emerald-50 text-emerald-700":"bg-rose-50 text-rose-700"}`,children:[r.jsxs("div",{children:[D.label," ",r.jsxs("span",{className:"text-xs text-muted",children:["(",U,")"]})]}),r.jsx("div",{className:"text-sm font-bold",children:re?"":""})]},D.id)})})]})]})}),r.jsx("div",{className:"p-4 md:p-6 overflow-y-auto flex-1 bg-gradient-to-br from-transparent via-blue-50/20 dark:via-transparent to-transparent",children:(()=>{if(u===null)return e;const D=om.find(re=>re.slug===t);return(D?se(D):(u||[]).includes(t))||t==="profile"?e:t==="dashboard"?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[r.jsx("img",{src:ia("Dragon.png"),alt:"dragon",className:"w-40 h-40 mx-auto mb-6"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"    "}),r.jsx("p",{className:"text-muted mb-4",children:"        ."})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"      "}),r.jsx("p",{className:"text-muted mb-4",children:"     .    ."}),r.jsx("button",{onClick:()=>{n("dashboard")},className:"mt-2 px-4 py-2 bg-accent text-white rounded",children:"   "})]})})()}),r.jsx(k$,{})]})]})};function p5(e){var t,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(a=p5(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function nr(){for(var e,t,a=0,n="",i=arguments.length;a<i;a++)(e=arguments[a])&&(t=p5(e))&&(n&&(n+=" "),n+=t);return n}var x8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ej(e){if(typeof e!="string")return!1;var t=x8;return t.includes(e)}var b8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g8=new Set(b8);function x5(e){return typeof e!="string"?!1:g8.has(e)}function b5(e){return typeof e=="string"&&e.startsWith("data-")}function Pn(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(x5(a)||b5(a))&&(t[a]=e[a]);return t}function co(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Pn(t)}return typeof e=="object"&&!Array.isArray(e)?Pn(e):null}function Za(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(x5(a)||b5(a)||ej(a))&&(t[a]=e[a]);return t}function v8(e){return e==null?null:g.isValidElement(e)?Za(e.props):typeof e=="object"&&!Array.isArray(e)?Za(e):null}var y8=["children","width","height","viewBox","className","style","title","desc"];function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Dv.apply(null,arguments)}function j8(e,t){if(e==null)return{};var a,n,i=N8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function N8(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var g5=g.forwardRef((e,t)=>{var{children:a,width:n,height:i,viewBox:o,className:d,style:h,title:m,desc:u}=e,f=j8(e,y8),x=o||{width:n,height:i,x:0,y:0},b=nr("recharts-surface",d);return g.createElement("svg",Dv({},Za(f),{className:b,width:n,height:i,style:h,viewBox:"".concat(x.x," ").concat(x.y," ").concat(x.width," ").concat(x.height),ref:t}),g.createElement("title",null,m),g.createElement("desc",null,u),a)}),w8=["children","className"];function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Lv.apply(null,arguments)}function _8(e,t){if(e==null)return{};var a,n,i=k8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function k8(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var _a=g.forwardRef((e,t)=>{var{children:a,className:n}=e,i=_8(e,w8),o=nr("recharts-layer",n);return g.createElement("g",Lv({className:o},Za(i),{ref:t}),a)}),v5=fO(),S8=g.createContext(null);function wr(e){return function(){return e}}const y5=Math.cos,Pm=Math.sin,ps=Math.sqrt,Dm=Math.PI,Lp=2*Dm,Rv=Math.PI,$v=2*Rv,Vi=1e-6,E8=$v-Vi;function j5(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function T8(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return j5;const a=10**t;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*a)/a+n[i]}}class C8{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?j5:T8(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,n,i){this._append`Q${+t},${+a},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,a,n,i,o,d){this._append`C${+t},${+a},${+n},${+i},${this._x1=+o},${this._y1=+d}`}arcTo(t,a,n,i,o){if(t=+t,a=+a,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,h=this._y1,m=n-t,u=i-a,f=d-t,x=h-a,b=f*f+x*x;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(b>Vi)if(!(Math.abs(x*m-u*f)>Vi)||!o)this._append`L${this._x1=t},${this._y1=a}`;else{let v=n-d,N=i-h,j=m*m+u*u,_=v*v+N*N,k=Math.sqrt(j),E=Math.sqrt(b),C=o*Math.tan((Rv-Math.acos((j+b-_)/(2*k*E)))/2),S=C/E,O=C/k;Math.abs(S-1)>Vi&&this._append`L${t+S*f},${a+S*x}`,this._append`A${o},${o},0,0,${+(x*v>f*N)},${this._x1=t+O*m},${this._y1=a+O*u}`}}arc(t,a,n,i,o,d){if(t=+t,a=+a,n=+n,d=!!d,n<0)throw new Error(`negative radius: ${n}`);let h=n*Math.cos(i),m=n*Math.sin(i),u=t+h,f=a+m,x=1^d,b=d?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Vi||Math.abs(this._y1-f)>Vi)&&this._append`L${u},${f}`,n&&(b<0&&(b=b%$v+$v),b>E8?this._append`A${n},${n},0,1,${x},${t-h},${a-m}A${n},${n},0,1,${x},${this._x1=u},${this._y1=f}`:b>Vi&&this._append`A${n},${n},0,${+(b>=Rv)},${x},${this._x1=t+n*Math.cos(o)},${this._y1=a+n*Math.sin(o)}`)}rect(t,a,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function tj(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const n=Math.floor(a);if(!(n>=0))throw new RangeError(`invalid digits: ${a}`);t=n}return e},()=>new C8(t)}function rj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N5(e){this._context=e}N5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rp(e){return new N5(e)}function w5(e){return e[0]}function _5(e){return e[1]}function k5(e,t){var a=wr(!0),n=null,i=Rp,o=null,d=tj(h);e=typeof e=="function"?e:e===void 0?w5:wr(e),t=typeof t=="function"?t:t===void 0?_5:wr(t);function h(m){var u,f=(m=rj(m)).length,x,b=!1,v;for(n==null&&(o=i(v=d())),u=0;u<=f;++u)!(u<f&&a(x=m[u],u,m))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(x,u,m),+t(x,u,m));if(v)return o=null,v+""||null}return h.x=function(m){return arguments.length?(e=typeof m=="function"?m:wr(+m),h):e},h.y=function(m){return arguments.length?(t=typeof m=="function"?m:wr(+m),h):t},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:wr(!!m),h):a},h.curve=function(m){return arguments.length?(i=m,n!=null&&(o=i(n)),h):i},h.context=function(m){return arguments.length?(m==null?n=o=null:o=i(n=m),h):n},h}function nh(e,t,a){var n=null,i=wr(!0),o=null,d=Rp,h=null,m=tj(u);e=typeof e=="function"?e:e===void 0?w5:wr(+e),t=typeof t=="function"?t:wr(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?_5:wr(+a);function u(x){var b,v,N,j=(x=rj(x)).length,_,k=!1,E,C=new Array(j),S=new Array(j);for(o==null&&(h=d(E=m())),b=0;b<=j;++b){if(!(b<j&&i(_=x[b],b,x))===k)if(k=!k)v=b,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),N=b-1;N>=v;--N)h.point(C[N],S[N]);h.lineEnd(),h.areaEnd()}k&&(C[b]=+e(_,b,x),S[b]=+t(_,b,x),h.point(n?+n(_,b,x):C[b],a?+a(_,b,x):S[b]))}if(E)return h=null,E+""||null}function f(){return k5().defined(i).curve(d).context(o)}return u.x=function(x){return arguments.length?(e=typeof x=="function"?x:wr(+x),n=null,u):e},u.x0=function(x){return arguments.length?(e=typeof x=="function"?x:wr(+x),u):e},u.x1=function(x){return arguments.length?(n=x==null?null:typeof x=="function"?x:wr(+x),u):n},u.y=function(x){return arguments.length?(t=typeof x=="function"?x:wr(+x),a=null,u):t},u.y0=function(x){return arguments.length?(t=typeof x=="function"?x:wr(+x),u):t},u.y1=function(x){return arguments.length?(a=x==null?null:typeof x=="function"?x:wr(+x),u):a},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(a)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(x){return arguments.length?(i=typeof x=="function"?x:wr(!!x),u):i},u.curve=function(x){return arguments.length?(d=x,o!=null&&(h=d(o)),u):d},u.context=function(x){return arguments.length?(x==null?o=h=null:h=d(o=x),u):o},u}class S5{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function A8(e){return new S5(e,!0)}function O8(e){return new S5(e,!1)}const aj={draw(e,t){const a=ps(t/Dm);e.moveTo(a,0),e.arc(0,0,a,0,Lp)}},M8={draw(e,t){const a=ps(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},E5=ps(1/3),I8=E5*2,P8={draw(e,t){const a=ps(t/I8),n=a*E5;e.moveTo(0,-a),e.lineTo(n,0),e.lineTo(0,a),e.lineTo(-n,0),e.closePath()}},D8={draw(e,t){const a=ps(t),n=-a/2;e.rect(n,n,a,a)}},L8=.8908130915292852,T5=Pm(Dm/10)/Pm(7*Dm/10),R8=Pm(Lp/10)*T5,$8=-y5(Lp/10)*T5,z8={draw(e,t){const a=ps(t*L8),n=R8*a,i=$8*a;e.moveTo(0,-a),e.lineTo(n,i);for(let o=1;o<5;++o){const d=Lp*o/5,h=y5(d),m=Pm(d);e.lineTo(m*a,-h*a),e.lineTo(h*n-m*i,m*n+h*i)}e.closePath()}},Fb=ps(3),B8={draw(e,t){const a=-ps(t/(Fb*3));e.moveTo(0,a*2),e.lineTo(-Fb*a,-a),e.lineTo(Fb*a,-a),e.closePath()}},Gn=-.5,Xn=ps(3)/2,zv=1/ps(12),U8=(zv/2+1)*3,q8={draw(e,t){const a=ps(t/U8),n=a/2,i=a*zv,o=n,d=a*zv+a,h=-o,m=d;e.moveTo(n,i),e.lineTo(o,d),e.lineTo(h,m),e.lineTo(Gn*n-Xn*i,Xn*n+Gn*i),e.lineTo(Gn*o-Xn*d,Xn*o+Gn*d),e.lineTo(Gn*h-Xn*m,Xn*h+Gn*m),e.lineTo(Gn*n+Xn*i,Gn*i-Xn*n),e.lineTo(Gn*o+Xn*d,Gn*d-Xn*o),e.lineTo(Gn*h+Xn*m,Gn*m-Xn*h),e.closePath()}};function F8(e,t){let a=null,n=tj(i);e=typeof e=="function"?e:wr(e||aj),t=typeof t=="function"?t:wr(t===void 0?64:+t);function i(){let o;if(a||(a=o=n()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),o)return a=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:wr(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:wr(+o),i):t},i.context=function(o){return arguments.length?(a=o??null,i):a},i}function Lm(){}function Rm(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function C5(e){this._context=e}C5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H8(e){return new C5(e)}function A5(e){this._context=e}A5.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Y8(e){return new A5(e)}function O5(e){this._context=e}O5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,n):this._context.moveTo(a,n);break;case 3:this._point=4;default:Rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K8(e){return new O5(e)}function M5(e){this._context=e}M5.prototype={areaStart:Lm,areaEnd:Lm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function V8(e){return new M5(e)}function ak(e){return e<0?-1:1}function nk(e,t,a){var n=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(n||i<0&&-0),d=(a-e._y1)/(i||n<0&&-0),h=(o*i+d*n)/(n+i);return(ak(o)+ak(d))*Math.min(Math.abs(o),Math.abs(d),.5*Math.abs(h))||0}function sk(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function Hb(e,t,a){var n=e._x0,i=e._y0,o=e._x1,d=e._y1,h=(o-n)/3;e._context.bezierCurveTo(n+h,i+h*t,o-h,d-h*a,o,d)}function $m(e){this._context=e}$m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hb(this,this._t0,sk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hb(this,sk(this,a=nk(this,e,t)),a);break;default:Hb(this,this._t0,a=nk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function I5(e){this._context=new P5(e)}(I5.prototype=Object.create($m.prototype)).point=function(e,t){$m.prototype.point.call(this,t,e)};function P5(e){this._context=e}P5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,n,i,o){this._context.bezierCurveTo(t,e,n,a,o,i)}};function G8(e){return new $m(e)}function X8(e){return new I5(e)}function D5(e){this._context=e}D5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var n=lk(e),i=lk(t),o=0,d=1;d<a;++o,++d)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],e[d],t[d]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lk(e){var t,a=e.length-1,n,i=new Array(a),o=new Array(a),d=new Array(a);for(i[0]=0,o[0]=2,d[0]=e[0]+2*e[1],t=1;t<a-1;++t)i[t]=1,o[t]=4,d[t]=4*e[t]+2*e[t+1];for(i[a-1]=2,o[a-1]=7,d[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)n=i[t]/o[t-1],o[t]-=n,d[t]-=n*d[t-1];for(i[a-1]=d[a-1]/o[a-1],t=a-2;t>=0;--t)i[t]=(d[t]-i[t+1])/o[t];for(o[a-1]=(e[a]+i[a-1])/2,t=0;t<a-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function W8(e){return new D5(e)}function $p(e,t){this._context=e,this._t=t}$p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function J8(e){return new $p(e,.5)}function Z8(e){return new $p(e,0)}function Q8(e){return new $p(e,1)}function uo(e,t){if((d=e.length)>1)for(var a=1,n,i,o=e[t[0]],d,h=o.length;a<d;++a)for(i=o,o=e[t[a]],n=0;n<h;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Bv(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function e7(e,t){return e[t]}function t7(e){const t=[];return t.key=e,t}function r7(){var e=wr([]),t=Bv,a=uo,n=e7;function i(o){var d=Array.from(e.apply(this,arguments),t7),h,m=d.length,u=-1,f;for(const x of o)for(h=0,++u;h<m;++h)(d[h][u]=[0,+n(x,d[h].key,u,o)]).data=x;for(h=0,f=rj(t(d));h<m;++h)d[f[h]].index=h;return a(d,f),d}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:wr(Array.from(o)),i):e},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:wr(+o),i):n},i.order=function(o){return arguments.length?(t=o==null?Bv:typeof o=="function"?o:wr(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(a=o??uo,i):a},i}function a7(e,t){if((n=e.length)>0){for(var a,n,i=0,o=e[0].length,d;i<o;++i){for(d=a=0;a<n;++a)d+=e[a][i][1]||0;if(d)for(a=0;a<n;++a)e[a][i][1]/=d}uo(e,t)}}function n7(e,t){if((i=e.length)>0){for(var a=0,n=e[t[0]],i,o=n.length;a<o;++a){for(var d=0,h=0;d<i;++d)h+=e[d][a][1]||0;n[a][1]+=n[a][0]=-h/2}uo(e,t)}}function s7(e,t){if(!(!((d=e.length)>0)||!((o=(i=e[t[0]]).length)>0))){for(var a=0,n=1,i,o,d;n<o;++n){for(var h=0,m=0,u=0;h<d;++h){for(var f=e[t[h]],x=f[n][1]||0,b=f[n-1][1]||0,v=(x-b)/2,N=0;N<h;++N){var j=e[t[N]],_=j[n][1]||0,k=j[n-1][1]||0;v+=_-k}m+=x,u+=v*x}i[n-1][1]+=i[n-1][0]=a,m&&(a-=u/m)}i[n-1][1]+=i[n-1][0]=a,uo(e,t)}}var Yb={},Kb={},ik;function l7(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(Kb)),Kb}var Vb={},ok;function L5(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(Vb)),Vb}var Gb={},ck;function nj(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){var n;return typeof a=="string"||typeof a=="symbol"?a:Object.is((n=a==null?void 0:a.valueOf)==null?void 0:n.call(a),-0)?"-0":String(a)}e.toKey=t})(Gb)),Gb}var Xb={},Wb={},dk;function i7(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const n=String(a);return n==="0"&&Object.is(Number(a),-0)?"-0":n}e.toString=t})(Wb)),Wb}var uk;function sj(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i7(),a=nj();function n(i){if(Array.isArray(i))return i.map(a.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const o=[],d=i.length;if(d===0)return o;let h=0,m="",u="",f=!1;for(i.charCodeAt(0)===46&&(o.push(""),h++);h<d;){const x=i[h];u?x==="\\"&&h+1<d?(h++,m+=i[h]):x===u?u="":m+=x:f?x==='"'||x==="'"?u=x:x==="]"?(f=!1,o.push(m),m=""):m+=x:x==="["?(f=!0,m&&(o.push(m),m="")):x==="."?m&&(o.push(m),m=""):m+=x,h++}return m&&o.push(m),o}e.toPath=n})(Xb)),Xb}var fk;function lj(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l7(),a=L5(),n=nj(),i=sj();function o(h,m,u){if(h==null)return u;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return u;const f=h[m];return f===void 0?a.isDeepKey(m)?o(h,i.toPath(m),u):u:f}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const f=h[m];return f===void 0?u:f}default:{if(Array.isArray(m))return d(h,m,u);if(Object.is(m==null?void 0:m.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return u;const f=h[m];return f===void 0?u:f}}}function d(h,m,u){if(m.length===0)return u;let f=h;for(let x=0;x<m.length;x++){if(f==null||t.isUnsafeProperty(m[x]))return u;f=f[m[x]]}return f===void 0?u:f}e.get=o})(Yb)),Yb}var Jb,hk;function o7(){return hk||(hk=1,Jb=lj().get),Jb}var c7=o7();const fo=ms(c7);var d7=4;function oi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d7,a=10**t,n=Math.round(e*a)/a;return Object.is(n,-0)?0:n}function Kr(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e.reduce((i,o,d)=>{var h=a[d-1];return typeof h=="string"?i+h+o:h!==void 0?i+oi(h)+o:i+o},"")}var Na=e=>e===0?0:e>0?1:-1,Ls=e=>typeof e=="number"&&e!=+e,ho=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,vt=e=>(typeof e=="number"||e instanceof Number)&&!Ls(e),Rs=e=>vt(e)||typeof e=="string",u7=0,su=e=>{var t=++u7;return"".concat(e||"").concat(t)},Fa=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(t)&&typeof t!="string")return n;var o;if(ho(t)){if(a==null)return n;var d=t.indexOf("%");o=a*parseFloat(t.slice(0,d))/100}else o=+t;return Ls(o)&&(o=n),i&&a!=null&&o>a&&(o=a),o},R5=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},n=0;n<t;n++)if(!a[String(e[n])])a[String(e[n])]=!0;else return!0;return!1};function Pr(e,t,a){return vt(e)&&vt(t)?oi(e+a*(t-e)):t}function $5(e,t,a){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):fo(n,t))===a)}var Br=e=>e===null||typeof e>"u",Eu=e=>Br(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function dn(e){return e!=null}function jo(){}var f7=["type","size","sizeType"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Uv.apply(null,arguments)}function mk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function pk(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(a),!0).forEach(function(n){h7(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function h7(e,t,a){return(t=m7(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x7(e,t){if(e==null)return{};var a,n,i=b7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function b7(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var z5={symbolCircle:aj,symbolCross:M8,symbolDiamond:P8,symbolSquare:D8,symbolStar:z8,symbolTriangle:B8,symbolWye:q8},g7=Math.PI/180,v7=e=>{var t="symbol".concat(Eu(e));return z5[t]||aj},y7=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*g7;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},j7=(e,t)=>{z5["symbol".concat(Eu(e))]=t},B5=e=>{var{type:t="circle",size:a=64,sizeType:n="area"}=e,i=x7(e,f7),o=pk(pk({},i),{},{type:t,size:a,sizeType:n}),d="circle";typeof t=="string"&&(d=t);var h=()=>{var b=v7(d),v=F8().type(b).size(y7(a,n,d)),N=v();if(N!==null)return N},{className:m,cx:u,cy:f}=o,x=Za(o);return vt(u)&&vt(f)&&vt(a)?g.createElement("path",Uv({},x,{className:nr("recharts-symbols",m),transform:"translate(".concat(u,", ").concat(f,")"),d:h()})):null};B5.registerSymbol=j7;var U5=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ij=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(g.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var n={};return Object.keys(a).forEach(i=>{ej(i)&&(n[i]=(o=>a[i](a,o)))}),n},N7=(e,t,a)=>n=>(e(t,a,n),null),zp=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var o=e[i];ej(i)&&typeof o=="function"&&(n||(n={}),n[i]=N7(o,t,a))}),n};function xk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function w7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(a),!0).forEach(function(n){_7(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xk(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function _7(e,t,a){return(t=k7(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k7(e){var t=S7(e,"string");return typeof t=="symbol"?t:t+""}function S7(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ka(e,t){var a=w7({},e),n=t,i=Object.keys(t),o=i.reduce((d,h)=>(d[h]===void 0&&n[h]!==void 0&&(d[h]=n[h]),d),a);return o}var Zb={},Qb={},bk;function E7(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,n){const i=new Map;for(let o=0;o<a.length;o++){const d=a[o],h=n(d,o,a);i.has(h)||i.set(h,d)}return Array.from(i.values())}e.uniqBy=t})(Qb)),Qb}var eg={},gk;function T7(){return gk||(gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,n){return function(...i){return a.apply(this,i.slice(0,n))}}e.ary=t})(eg)),eg}var tg={},vk;function q5(){return vk||(vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(tg)),tg}var rg={},ag={},ng={},yk;function C7(){return yk||(yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(ng)),ng}var jk;function oj(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C7();function a(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=a})(ag)),ag}var sg={},Nk;function A7(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(sg)),sg}var wk;function O7(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oj(),a=A7();function n(i){return a.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(rg)),rg}var lg={},ig={},_k;function M7(){return _k||(_k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lj();function a(n){return function(i){return t.get(i,n)}}e.property=a})(ig)),ig}var og={},cg={},dg={},ug={},kk;function F5(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(ug)),ug}var fg={},Sk;function H5(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(fg)),fg}var hg={},Ek;function Y5(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,n){return a===n||Number.isNaN(a)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(hg)),hg}var Tk;function I7(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F5(),a=H5(),n=Y5();function i(f,x,b){return typeof b!="function"?i(f,x,()=>{}):o(f,x,function v(N,j,_,k,E,C){const S=b(N,j,_,k,E,C);return S!==void 0?!!S:o(N,j,v,C)},new Map)}function o(f,x,b,v){if(x===f)return!0;switch(typeof x){case"object":return d(f,x,b,v);case"function":return Object.keys(x).length>0?o(f,{...x},b,v):n.isEqualsSameValueZero(f,x);default:return t.isObject(f)?typeof x=="string"?x==="":!0:n.isEqualsSameValueZero(f,x)}}function d(f,x,b,v){if(x==null)return!0;if(Array.isArray(x))return m(f,x,b,v);if(x instanceof Map)return h(f,x,b,v);if(x instanceof Set)return u(f,x,b,v);const N=Object.keys(x);if(f==null||a.isPrimitive(f))return N.length===0;if(N.length===0)return!0;if(v!=null&&v.has(x))return v.get(x)===f;v==null||v.set(x,f);try{for(let j=0;j<N.length;j++){const _=N[j];if(!a.isPrimitive(f)&&!(_ in f)||x[_]===void 0&&f[_]!==void 0||x[_]===null&&f[_]!==null||!b(f[_],x[_],_,f,x,v))return!1}return!0}finally{v==null||v.delete(x)}}function h(f,x,b,v){if(x.size===0)return!0;if(!(f instanceof Map))return!1;for(const[N,j]of x.entries()){const _=f.get(N);if(b(_,j,N,f,x,v)===!1)return!1}return!0}function m(f,x,b,v){if(x.length===0)return!0;if(!Array.isArray(f))return!1;const N=new Set;for(let j=0;j<x.length;j++){const _=x[j];let k=!1;for(let E=0;E<f.length;E++){if(N.has(E))continue;const C=f[E];let S=!1;if(b(C,_,j,f,x,v)&&(S=!0),S){N.add(E),k=!0;break}}if(!k)return!1}return!0}function u(f,x,b,v){return x.size===0?!0:f instanceof Set?m([...f],[...x],b,v):!1}e.isMatchWith=i,e.isSetMatch=u})(dg)),dg}var Ck;function K5(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I7();function a(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=a})(cg)),cg}var mg={},pg={},xg={},Ak;function P7(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(n=>Object.prototype.propertyIsEnumerable.call(a,n))}e.getSymbols=t})(xg)),xg}var bg={},Ok;function cj(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(bg)),bg}var gg={},Mk;function V5(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",n="[object Number]",i="[object Boolean]",o="[object Arguments]",d="[object Symbol]",h="[object Date]",m="[object Map]",u="[object Set]",f="[object Array]",x="[object Function]",b="[object ArrayBuffer]",v="[object Object]",N="[object Error]",j="[object DataView]",_="[object Uint8Array]",k="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",S="[object BigUint64Array]",O="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",te="[object BigInt64Array]",H="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=f,e.bigInt64ArrayTag=te,e.bigUint64ArrayTag=S,e.booleanTag=i,e.dataViewTag=j,e.dateTag=h,e.errorTag=N,e.float32ArrayTag=H,e.float64ArrayTag=B,e.functionTag=x,e.int16ArrayTag=I,e.int32ArrayTag=L,e.int8ArrayTag=O,e.mapTag=m,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=u,e.stringTag=a,e.symbolTag=d,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=k})(gg)),gg}var vg={},Ik;function D7(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(vg)),vg}var Pk;function G5(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P7(),a=cj(),n=V5(),i=H5(),o=D7();function d(f,x){return h(f,void 0,f,new Map,x)}function h(f,x,b,v=new Map,N=void 0){const j=N==null?void 0:N(f,x,b,v);if(j!==void 0)return j;if(i.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const _=new Array(f.length);v.set(f,_);for(let k=0;k<f.length;k++)_[k]=h(f[k],k,b,v,N);return Object.hasOwn(f,"index")&&(_.index=f.index),Object.hasOwn(f,"input")&&(_.input=f.input),_}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const _=new RegExp(f.source,f.flags);return _.lastIndex=f.lastIndex,_}if(f instanceof Map){const _=new Map;v.set(f,_);for(const[k,E]of f)_.set(k,h(E,k,b,v,N));return _}if(f instanceof Set){const _=new Set;v.set(f,_);for(const k of f)_.add(h(k,void 0,b,v,N));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(o.isTypedArray(f)){const _=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,_);for(let k=0;k<f.length;k++)_[k]=h(f[k],k,b,v,N);return _}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const _=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,_),m(_,f,b,v,N),_}if(typeof File<"u"&&f instanceof File){const _=new File([f],f.name,{type:f.type});return v.set(f,_),m(_,f,b,v,N),_}if(typeof Blob<"u"&&f instanceof Blob){const _=new Blob([f],{type:f.type});return v.set(f,_),m(_,f,b,v,N),_}if(f instanceof Error){const _=new f.constructor;return v.set(f,_),_.message=f.message,_.name=f.name,_.stack=f.stack,_.cause=f.cause,m(_,f,b,v,N),_}if(f instanceof Boolean){const _=new Boolean(f.valueOf());return v.set(f,_),m(_,f,b,v,N),_}if(f instanceof Number){const _=new Number(f.valueOf());return v.set(f,_),m(_,f,b,v,N),_}if(f instanceof String){const _=new String(f.valueOf());return v.set(f,_),m(_,f,b,v,N),_}if(typeof f=="object"&&u(f)){const _=Object.create(Object.getPrototypeOf(f));return v.set(f,_),m(_,f,b,v,N),_}return f}function m(f,x,b=f,v,N){const j=[...Object.keys(x),...t.getSymbols(x)];for(let _=0;_<j.length;_++){const k=j[_],E=Object.getOwnPropertyDescriptor(f,k);(E==null||E.writable)&&(f[k]=h(x[k],k,b,v,N))}}function u(f){switch(a.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=h,e.copyProperties=m})(pg)),pg}var Dk;function L7(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G5();function a(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=a})(mg)),mg}var Lk;function R7(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K5(),a=L7();function n(i){return i=a.cloneDeep(i),o=>t.isMatch(o,i)}e.matches=n})(og)),og}var yg={},jg={},Ng={},Rk;function $7(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G5(),a=cj(),n=V5();function i(o,d){return t.cloneDeepWith(o,(h,m,u,f)=>{const x=d==null?void 0:d(h,m,u,f);if(x!==void 0)return x;if(typeof o=="object"){if(a.getTag(o)===n.objectTag&&typeof o.constructor!="function"){const b={};return f.set(o,b),t.copyProperties(b,o,u,f),b}switch(Object.prototype.toString.call(o)){case n.numberTag:case n.stringTag:case n.booleanTag:{const b=new o.constructor(o==null?void 0:o.valueOf());return t.copyProperties(b,o),b}case n.argumentsTag:{const b={};return t.copyProperties(b,o),b.length=o.length,b[Symbol.iterator]=o[Symbol.iterator],b}default:return}}})}e.cloneDeepWith=i})(Ng)),Ng}var $k;function z7(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$7();function a(n){return t.cloneDeepWith(n)}e.cloneDeep=a})(jg)),jg}var wg={},_g={},zk;function X5(){return zk||(zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=a})(_g)),_g}var kg={},Bk;function B7(){return Bk||(Bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cj();function a(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=a})(kg)),kg}var Uk;function U7(){return Uk||(Uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),a=X5(),n=B7(),i=sj();function o(d,h){let m;if(Array.isArray(h)?m=h:typeof h=="string"&&t.isDeepKey(h)&&(d==null?void 0:d[h])==null?m=i.toPath(h):m=[h],m.length===0)return!1;let u=d;for(let f=0;f<m.length;f++){const x=m[f];if((u==null||!Object.hasOwn(u,x))&&!((Array.isArray(u)||n.isArguments(u))&&a.isIndex(x)&&x<u.length))return!1;u=u[x]}return!0}e.has=o})(wg)),wg}var qk;function q7(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K5(),a=nj(),n=z7(),i=lj(),o=U7();function d(h,m){switch(typeof h){case"object":{Object.is(h==null?void 0:h.valueOf(),-0)&&(h="-0");break}case"number":{h=a.toKey(h);break}}return m=n.cloneDeep(m),function(u){const f=i.get(u,h);return f===void 0?o.has(u,h):m===void 0?f===void 0:t.isMatch(f,m)}}e.matchesProperty=d})(yg)),yg}var Fk;function F7(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q5(),a=M7(),n=R7(),i=q7();function o(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?i.matchesProperty(d[0],d[1]):n.matches(d);case"string":case"symbol":case"number":return a.property(d)}}e.iteratee=o})(lg)),lg}var Hk;function H7(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7(),a=T7(),n=q5(),i=O7(),o=F7();function d(h,m=n.identity){return i.isArrayLikeObject(h)?t.uniqBy(Array.from(h),a.ary(o.iteratee(m),1)):[]}e.uniqBy=d})(Zb)),Zb}var Sg,Yk;function Y7(){return Yk||(Yk=1,Sg=H7().uniqBy),Sg}var K7=Y7();const Kk=ms(K7);function V7(e,t,a){return t===!0?Kk(e,a):typeof t=="function"?Kk(e,t):e}var Eg={exports:{}},Tg={},Cg={exports:{}},Ag={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk;function G7(){if(Vk)return Ag;Vk=1;var e=Dc();function t(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var a=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,o=e.useLayoutEffect,d=e.useDebugValue;function h(x,b){var v=b(),N=n({inst:{value:v,getSnapshot:b}}),j=N[0].inst,_=N[1];return o(function(){j.value=v,j.getSnapshot=b,m(j)&&_({inst:j})},[x,v,b]),i(function(){return m(j)&&_({inst:j}),x(function(){m(j)&&_({inst:j})})},[x]),d(v),v}function m(x){var b=x.getSnapshot;x=x.value;try{var v=b();return!a(x,v)}catch{return!0}}function u(x,b){return b()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:h;return Ag.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Ag}var Gk;function X7(){return Gk||(Gk=1,Cg.exports=G7()),Cg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xk;function W7(){if(Xk)return Tg;Xk=1;var e=Dc(),t=X7();function a(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var n=typeof Object.is=="function"?Object.is:a,i=t.useSyncExternalStore,o=e.useRef,d=e.useEffect,h=e.useMemo,m=e.useDebugValue;return Tg.useSyncExternalStoreWithSelector=function(u,f,x,b,v){var N=o(null);if(N.current===null){var j={hasValue:!1,value:null};N.current=j}else j=N.current;N=h(function(){function k(I){if(!E){if(E=!0,C=I,I=b(I),v!==void 0&&j.hasValue){var L=j.value;if(v(L,I))return S=L}return S=I}if(L=S,n(C,I))return L;var te=b(I);return v!==void 0&&v(L,te)?(C=I,L):(C=I,S=te)}var E=!1,C,S,O=x===void 0?null:x;return[function(){return k(f())},O===null?void 0:function(){return k(O())}]},[f,x,b,v]);var _=i(u,N[0],N[1]);return d(function(){j.hasValue=!0,j.value=_},[_]),m(_),_},Tg}var Wk;function J7(){return Wk||(Wk=1,Eg.exports=W7()),Eg.exports}var Z7=J7(),dj=g.createContext(null),Q7=e=>e,Lr=()=>{var e=g.useContext(dj);return e?e.store.dispatch:Q7},cm=()=>{},eB=()=>cm,tB=(e,t)=>e===t;function _t(e){var t=g.useContext(dj),a=g.useMemo(()=>t?n=>{if(n!=null)return e(n)}:cm,[t,e]);return Z7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:eB,t?t.store.getState:cm,t?t.store.getState:cm,a,tB)}function rB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function aB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function nB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${a}]`)}}var Jk=e=>Array.isArray(e)?e:[e];function sB(e){const t=Array.isArray(e[0])?e[0]:e;return nB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function lB(e,t){const a=[],{length:n}=e;for(let i=0;i<n;i++)a.push(e[i].apply(null,t));return a}var iB=class{constructor(e){this.value=e}deref(){return this.value}},oB=typeof WeakRef<"u"?WeakRef:iB,cB=0,Zk=1;function sh(){return{s:cB,v:void 0,o:null,p:null}}function W5(e,t={}){let a=sh();const{resultEqualityCheck:n}=t;let i,o=0;function d(){var x;let h=a;const{length:m}=arguments;for(let b=0,v=m;b<v;b++){const N=arguments[b];if(typeof N=="function"||typeof N=="object"&&N!==null){let j=h.o;j===null&&(h.o=j=new WeakMap);const _=j.get(N);_===void 0?(h=sh(),j.set(N,h)):h=_}else{let j=h.p;j===null&&(h.p=j=new Map);const _=j.get(N);_===void 0?(h=sh(),j.set(N,h)):h=_}}const u=h;let f;if(h.s===Zk)f=h.v;else if(f=e.apply(null,arguments),o++,n){const b=((x=i==null?void 0:i.deref)==null?void 0:x.call(i))??i;b!=null&&n(b,f)&&(f=b,o!==0&&o--),i=typeof f=="object"&&f!==null||typeof f=="function"?new oB(f):f}return u.s=Zk,u.v=f,f}return d.clearCache=()=>{a=sh(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function dB(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let o=0,d=0,h,m={},u=i.pop();typeof u=="object"&&(m=u,u=i.pop()),rB(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...a,...m},{memoize:x,memoizeOptions:b=[],argsMemoize:v=W5,argsMemoizeOptions:N=[]}=f,j=Jk(b),_=Jk(N),k=sB(i),E=x(function(){return o++,u.apply(null,arguments)},...j),C=v(function(){d++;const O=lB(k,arguments);return h=E.apply(null,O),h},..._);return Object.assign(C,{resultFunc:u,memoizedResultFunc:E,dependencies:k,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>h,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:x,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var Ie=dB(W5),uB=Object.assign((e,t=Ie)=>{aB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),n=a.map(o=>e[o]);return t(n,(...o)=>o.reduce((d,h,m)=>(d[a[m]]=h,d),{}))},{withTypes:()=>uB}),Og={},Mg={},Ig={},Qk;function fB(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const a=(n,i,o)=>{if(n!==i){const d=t(n),h=t(i);if(d===h&&d===0){if(n<i)return o==="desc"?1:-1;if(n>i)return o==="desc"?-1:1}return o==="desc"?h-d:d-h}return 0};e.compareValues=a})(Ig)),Ig}var Pg={},Dg={},eS;function J5(){return eS||(eS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(Dg)),Dg}var tS;function hB(){return tS||(tS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J5(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,d){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(n.test(o)||!a.test(o))||d!=null&&Object.hasOwn(d,o)}e.isKey=i})(Pg)),Pg}var rS;function mB(){return rS||(rS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fB(),a=hB(),n=sj();function i(o,d,h,m){if(o==null)return[];h=m?void 0:h,Array.isArray(o)||(o=Object.values(o)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(h)||(h=h==null?[]:[h]),h=h.map(v=>String(v));const u=(v,N)=>{let j=v;for(let _=0;_<N.length&&j!=null;++_)j=j[N[_]];return j},f=(v,N)=>N==null||v==null?N:typeof v=="object"&&"key"in v?Object.hasOwn(N,v.key)?N[v.key]:u(N,v.path):typeof v=="function"?v(N):Array.isArray(v)?u(N,v):typeof N=="object"?N[v]:N,x=d.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||a.isKey(v)?v:{key:v,path:n.toPath(v)}));return o.map(v=>({original:v,criteria:x.map(N=>f(N,v))})).slice().sort((v,N)=>{for(let j=0;j<x.length;j++){const _=t.compareValues(v.criteria[j],N.criteria[j],h[j]);if(_!==0)return _}return 0}).map(v=>v.original)}e.orderBy=i})(Mg)),Mg}var Lg={},aS;function pB(){return aS||(aS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,n=1){const i=[],o=Math.floor(n),d=(h,m)=>{for(let u=0;u<h.length;u++){const f=h[u];Array.isArray(f)&&m<o?d(f,m+1):i.push(f)}};return d(a,0),i}e.flatten=t})(Lg)),Lg}var Rg={},nS;function Z5(){return nS||(nS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X5(),a=oj(),n=F5(),i=Y5();function o(d,h,m){return n.isObject(m)&&(typeof h=="number"&&a.isArrayLike(m)&&t.isIndex(h)&&h<m.length||typeof h=="string"&&h in m)?i.isEqualsSameValueZero(m[h],d):!1}e.isIterateeCall=o})(Rg)),Rg}var sS;function xB(){return sS||(sS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mB(),a=pB(),n=Z5();function i(o,...d){const h=d.length;return h>1&&n.isIterateeCall(o,d[0],d[1])?d=[]:h>2&&n.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(o,a.flatten(d),["asc"])}e.sortBy=i})(Og)),Og}var $g,lS;function bB(){return lS||(lS=1,$g=xB().sortBy),$g}var gB=bB();const Bp=ms(gB);var Q5=e=>e.legend.settings,vB=e=>e.legend.size,yB=e=>e.legend.payload;Ie([yB,Q5],(e,t)=>{var{itemSorter:a}=t,n=e.flat(1);return a?Bp(n,a):n});var lh=1;function jB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),d={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(d.height-t.height)>lh||Math.abs(d.left-t.left)>lh||Math.abs(d.top-t.top)>lh||Math.abs(d.width-t.width)>lh)&&a({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Da(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var NB=typeof Symbol=="function"&&Symbol.observable||"@@observable",iS=NB,zg=()=>Math.random().toString(36).substring(7).split("").join("."),wB={INIT:`@@redux/INIT${zg()}`,REPLACE:`@@redux/REPLACE${zg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zg()}`},zm=wB;function uj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function e4(e,t,a){if(typeof e!="function")throw new Error(Da(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Da(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Da(1));return a(e4)(e,t)}let n=e,i=t,o=new Map,d=o,h=0,m=!1;function u(){d===o&&(d=new Map,o.forEach((_,k)=>{d.set(k,_)}))}function f(){if(m)throw new Error(Da(3));return i}function x(_){if(typeof _!="function")throw new Error(Da(4));if(m)throw new Error(Da(5));let k=!0;u();const E=h++;return d.set(E,_),function(){if(k){if(m)throw new Error(Da(6));k=!1,u(),d.delete(E),o=null}}}function b(_){if(!uj(_))throw new Error(Da(7));if(typeof _.type>"u")throw new Error(Da(8));if(typeof _.type!="string")throw new Error(Da(17));if(m)throw new Error(Da(9));try{m=!0,i=n(i,_)}finally{m=!1}return(o=d).forEach(E=>{E()}),_}function v(_){if(typeof _!="function")throw new Error(Da(10));n=_,b({type:zm.REPLACE})}function N(){const _=x;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Da(11));function E(){const S=k;S.next&&S.next(f())}return E(),{unsubscribe:_(E)}},[iS](){return this}}}return b({type:zm.INIT}),{dispatch:b,subscribe:x,getState:f,replaceReducer:v,[iS]:N}}function _B(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:zm.INIT})>"u")throw new Error(Da(12));if(typeof a(void 0,{type:zm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Da(13))})}function t4(e){const t=Object.keys(e),a={};for(let o=0;o<t.length;o++){const d=t[o];typeof e[d]=="function"&&(a[d]=e[d])}const n=Object.keys(a);let i;try{_B(a)}catch(o){i=o}return function(d={},h){if(i)throw i;let m=!1;const u={};for(let f=0;f<n.length;f++){const x=n[f],b=a[x],v=d[x],N=b(v,h);if(typeof N>"u")throw h&&h.type,new Error(Da(14));u[x]=N,m=m||N!==v}return m=m||n.length!==Object.keys(d).length,m?u:d}}function Bm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...n)=>t(a(...n)))}function kB(...e){return t=>(a,n)=>{const i=t(a,n);let o=()=>{throw new Error(Da(15))};const d={getState:i.getState,dispatch:(m,...u)=>o(m,...u)},h=e.map(m=>m(d));return o=Bm(...h)(i.dispatch),{...i,dispatch:o}}}function r4(e){return uj(e)&&"type"in e&&typeof e.type=="string"}var a4=Symbol.for("immer-nothing"),oS=Symbol.for("immer-draftable"),Qa=Symbol.for("immer-state");function os(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var An=Object,Cc=An.getPrototypeOf,Um="constructor",Up="prototype",qv="configurable",qm="enumerable",dm="writable",lu="value",bl=e=>!!e&&!!e[Qa];function hs(e){var t;return e?n4(e)||Fp(e)||!!e[oS]||!!((t=e[Um])!=null&&t[oS])||Hp(e)||Yp(e):!1}var SB=An[Up][Um].toString(),cS=new WeakMap;function n4(e){if(!e||!fj(e))return!1;const t=Cc(e);if(t===null||t===An[Up])return!0;const a=An.hasOwnProperty.call(t,Um)&&t[Um];if(a===Object)return!0;if(!xc(a))return!1;let n=cS.get(a);return n===void 0&&(n=Function.toString.call(a),cS.set(a,n)),n===SB}function qp(e,t,a=!0){Tu(e)===0?(a?Reflect.ownKeys(e):An.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Tu(e){const t=e[Qa];return t?t.type_:Fp(e)?1:Hp(e)?2:Yp(e)?3:0}var dS=(e,t,a=Tu(e))=>a===2?e.has(t):An[Up].hasOwnProperty.call(e,t),Fv=(e,t,a=Tu(e))=>a===2?e.get(t):e[t],Fm=(e,t,a,n=Tu(e))=>{n===2?e.set(t,a):n===3?e.add(a):e[t]=a};function EB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Fp=Array.isArray,Hp=e=>e instanceof Map,Yp=e=>e instanceof Set,fj=e=>typeof e=="object",xc=e=>typeof e=="function",Bg=e=>typeof e=="boolean";function TB(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ol=e=>e.copy_||e.base_,hj=e=>e.modified_?e.copy_:e.base_;function Hv(e,t){if(Hp(e))return new Map(e);if(Yp(e))return new Set(e);if(Fp(e))return Array[Up].slice.call(e);const a=n4(e);if(t===!0||t==="class_only"&&!a){const n=An.getOwnPropertyDescriptors(e);delete n[Qa];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const d=i[o],h=n[d];h[dm]===!1&&(h[dm]=!0,h[qv]=!0),(h.get||h.set)&&(n[d]={[qv]:!0,[dm]:!0,[qm]:h[qm],[lu]:e[d]})}return An.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&a)return{...e};const i=An.create(n);return An.assign(i,e)}}function mj(e,t=!1){return Kp(e)||bl(e)||!hs(e)||(Tu(e)>1&&An.defineProperties(e,{set:ih,add:ih,clear:ih,delete:ih}),An.freeze(e),t&&qp(e,(a,n)=>{mj(n,!0)},!1)),e}function CB(){os(2)}var ih={[lu]:CB};function Kp(e){return e===null||!fj(e)?!0:An.isFrozen(e)}var Hm="MapSet",Yv="Patches",uS="ArrayMethods",s4={};function mo(e){const t=s4[e];return t||os(0,e),t}var fS=e=>!!s4[e],iu,l4=()=>iu,AB=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:fS(Hm)?mo(Hm):void 0,arrayMethodsPlugin_:fS(uS)?mo(uS):void 0});function hS(e,t){t&&(e.patchPlugin_=mo(Yv),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kv(e){Vv(e),e.drafts_.forEach(OB),e.drafts_=null}function Vv(e){e===iu&&(iu=e.parent_)}var mS=e=>iu=AB(iu,e);function OB(e){const t=e[Qa];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function pS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Qa].modified_&&(Kv(t),os(4)),hs(e)&&(e=xS(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(a[Qa].base_,e,t)}else e=xS(t,a);return MB(t,e,!0),Kv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==a4?e:void 0}function xS(e,t){if(Kp(t))return t;const a=t[Qa];if(!a)return Ym(t,e.handledSet_,e);if(!Vp(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:n}=a;if(n)for(;n.length>0;)n.pop()(e);c4(a,e)}return a.copy_}function MB(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mj(t,a)}function i4(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Vp=(e,t)=>e.scope_===t,IB=[];function o4(e,t,a,n){const i=ol(e),o=e.type_;if(n!==void 0&&Fv(i,n,o)===t){Fm(i,n,a,o);return}if(!e.draftLocations_){const h=e.draftLocations_=new Map;qp(i,(m,u)=>{if(bl(u)){const f=h.get(u)||[];f.push(m),h.set(u,f)}})}const d=e.draftLocations_.get(t)??IB;for(const h of d)Fm(i,h,a,o)}function PB(e,t,a){e.callbacks_.push(function(i){var h;const o=t;if(!o||!Vp(o,i))return;(h=i.mapSetPlugin_)==null||h.fixSetContents(o);const d=hj(o);o4(e,o.draft_??o,d,a),c4(o,i)})}function c4(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const o=i.getPath(e);o&&i.generatePatches_(e,o,t)}i4(e)}}function DB(e,t,a){const{scope_:n}=e;if(bl(a)){const i=a[Qa];Vp(i,n)&&i.callbacks_.push(function(){um(e);const d=hj(i);o4(e,a,d,t)})}else hs(a)&&e.callbacks_.push(function(){const o=ol(e);e.type_===3?o.has(a)&&Ym(a,n.handledSet_,n):Fv(o,t,e.type_)===a&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Ym(Fv(e.copy_,t,e.type_),n.handledSet_,n)})}function Ym(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||bl(e)||t.has(e)||!hs(e)||Kp(e)||(t.add(e),qp(e,(n,i)=>{if(bl(i)){const o=i[Qa];if(Vp(o,a)){const d=hj(o);Fm(e,n,d,e.type_),i4(o)}}else hs(i)&&Ym(i,t,a)})),e}function LB(e,t){const a=Fp(e),n={type_:a?1:0,scope_:t?t.scope_:l4(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,o=Km;a&&(i=[n],o=ou);const{revoke:d,proxy:h}=Proxy.revocable(i,o);return n.draft_=h,n.revoke_=d,[h,n]}var Km={get(e,t){if(t===Qa)return e;let a=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&a!=null&&a.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const i=ol(e);if(!dS(i,t,e.type_))return RB(e,i,t);const o=i[t];if(e.finalized_||!hs(o)||n&&e.operationMethod&&(a!=null&&a.isMutatingArrayMethod(e.operationMethod))&&TB(t))return o;if(o===Ug(e.base_,t)){um(e);const d=e.type_===1?+t:t,h=Xv(e.scope_,o,e,d);return e.copy_[d]=h}return o},has(e,t){return t in ol(e)},ownKeys(e){return Reflect.ownKeys(ol(e))},set(e,t,a){const n=d4(ol(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,a),!0;if(!e.modified_){const i=Ug(ol(e),t),o=i==null?void 0:i[Qa];if(o&&o.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(EB(a,i)&&(a!==void 0||dS(e.base_,t,e.type_)))return!0;um(e),Gv(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),DB(e,t,a)),!0},deleteProperty(e,t){return um(e),Ug(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Gv(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=ol(e),n=Reflect.getOwnPropertyDescriptor(a,t);return n&&{[dm]:!0,[qv]:e.type_!==1||t!=="length",[qm]:n[qm],[lu]:a[t]}},defineProperty(){os(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){os(12)}},ou={};for(let e in Km){let t=Km[e];ou[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}}ou.deleteProperty=function(e,t){return ou.set.call(this,e,t,void 0)};ou.set=function(e,t,a){return Km.set.call(this,e[0],t,a,e[0])};function Ug(e,t){const a=e[Qa];return(a?ol(a):e)[t]}function RB(e,t,a){var i;const n=d4(t,a);return n?lu in n?n[lu]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function d4(e,t){if(!(t in e))return;let a=Cc(e);for(;a;){const n=Object.getOwnPropertyDescriptor(a,t);if(n)return n;a=Cc(a)}}function Gv(e){e.modified_||(e.modified_=!0,e.parent_&&Gv(e.parent_))}function um(e){e.copy_||(e.assigned_=new Map,e.copy_=Hv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $B=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,n,i)=>{if(xc(a)&&!xc(n)){const d=n;n=a;const h=this;return function(u=d,...f){return h.produce(u,x=>n.call(this,x,...f))}}xc(n)||os(6),i!==void 0&&!xc(i)&&os(7);let o;if(hs(a)){const d=mS(this),h=Xv(d,a,void 0);let m=!0;try{o=n(h),m=!1}finally{m?Kv(d):Vv(d)}return hS(d,i),pS(o,d)}else if(!a||!fj(a)){if(o=n(a),o===void 0&&(o=a),o===a4&&(o=void 0),this.autoFreeze_&&mj(o,!0),i){const d=[],h=[];mo(Yv).generateReplacementPatches_(a,o,{patches_:d,inversePatches_:h}),i(d,h)}return o}else os(1,a)},this.produceWithPatches=(a,n)=>{if(xc(a))return(h,...m)=>this.produceWithPatches(h,u=>a(u,...m));let i,o;return[this.produce(a,n,(h,m)=>{i=h,o=m}),i,o]},Bg(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Bg(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Bg(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){hs(t)||os(8),bl(t)&&(t=us(t));const a=mS(this),n=Xv(a,t,void 0);return n[Qa].isManual_=!0,Vv(a),n}finishDraft(t,a){const n=t&&t[Qa];(!n||!n.isManual_)&&os(9);const{scope_:i}=n;return hS(i,a),pS(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let n;for(n=a.length-1;n>=0;n--){const o=a[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(a=a.slice(n+1));const i=mo(Yv).applyPatches_;return bl(t)?i(t,a):this.produce(t,o=>i(o,a))}};function Xv(e,t,a,n){const[i,o]=Hp(t)?mo(Hm).proxyMap_(t,a):Yp(t)?mo(Hm).proxySet_(t,a):LB(t,a);return((a==null?void 0:a.scope_)??l4()).drafts_.push(i),o.callbacks_=(a==null?void 0:a.callbacks_)??[],o.key_=n,a&&n!==void 0?PB(a,o,n):o.callbacks_.push(function(m){var f;(f=m.mapSetPlugin_)==null||f.fixSetContents(o);const{patchPlugin_:u}=m;o.modified_&&u&&u.generatePatches_(o,[],m)}),i}function us(e){return bl(e)||os(10,e),u4(e)}function u4(e){if(!hs(e)||Kp(e))return e;const t=e[Qa];let a,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=Hv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else a=Hv(e,!0);return qp(a,(i,o)=>{Fm(a,i,u4(o))},n),t&&(t.finalized_=!1),a}var zB=new $B,f4=zB.produce;function h4(e){return({dispatch:a,getState:n})=>i=>o=>typeof o=="function"?o(a,n,e):i(o)}var BB=h4(),UB=h4,qB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bm:Bm.apply(null,arguments)};function Qn(e,t){function a(...n){if(t){let i=t(...n);if(!i)throw new Error(Mn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=n=>r4(n)&&n.type===e,a}var m4=class Jd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Jd.prototype)}static get[Symbol.species](){return Jd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Jd(...t[0].concat(this)):new Jd(...t.concat(this))}};function bS(e){return hs(e)?f4(e,()=>{}):e}function oh(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function FB(e){return typeof e=="boolean"}var HB=()=>function(t){const{thunk:a=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let d=new m4;return a&&(FB(a)?d.push(BB):d.push(UB(a.extraArgument))),d},p4="RTK_autoBatch",Ir=()=>e=>({payload:e,meta:{[p4]:!0}}),gS=e=>t=>{setTimeout(t,e)},x4=(e={type:"raf"})=>t=>(...a)=>{const n=t(...a);let i=!0,o=!1,d=!1;const h=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gS(10):e.type==="callback"?e.queueNotification:gS(e.timeout),u=()=>{d=!1,o&&(o=!1,h.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const x=()=>i&&f(),b=n.subscribe(x);return h.add(f),()=>{b(),h.delete(f)}},dispatch(f){var x;try{return i=!((x=f==null?void 0:f.meta)!=null&&x[p4]),o=!i,o&&(d||(d=!0,m(u))),n.dispatch(f)}finally{i=!0}}})},YB=e=>function(a){const{autoBatch:n=!0}=a??{};let i=new m4(e);return n&&i.push(x4(typeof n=="object"?n:void 0)),i};function KB(e){const t=HB(),{reducer:a=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{};let h;if(typeof a=="function")h=a;else if(uj(a))h=t4(a);else throw new Error(Mn(1));let m;typeof n=="function"?m=n(t):m=t();let u=Bm;i&&(u=qB({trace:!1,...typeof i=="object"&&i}));const f=kB(...m),x=YB(f);let b=typeof d=="function"?d(x):x();const v=u(...b);return e4(h,o,v)}function b4(e){const t={},a=[];let n;const i={addCase(o,d){const h=typeof o=="string"?o:o.type;if(!h)throw new Error(Mn(28));if(h in t)throw new Error(Mn(29));return t[h]=d,i},addAsyncThunk(o,d){return d.pending&&(t[o.pending.type]=d.pending),d.rejected&&(t[o.rejected.type]=d.rejected),d.fulfilled&&(t[o.fulfilled.type]=d.fulfilled),d.settled&&a.push({matcher:o.settled,reducer:d.settled}),i},addMatcher(o,d){return a.push({matcher:o,reducer:d}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,a,n]}function VB(e){return typeof e=="function"}function GB(e,t){let[a,n,i]=b4(t),o;if(VB(e))o=()=>bS(e());else{const h=bS(e);o=()=>h}function d(h=o(),m){let u=[a[m.type],...n.filter(({matcher:f})=>f(m)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,x)=>{if(x)if(bl(f)){const v=x(f,m);return v===void 0?f:v}else{if(hs(f))return f4(f,b=>x(b,m));{const b=x(f,m);if(b===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return f},h)}return d.getInitialState=o,d}var XB="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",WB=(e=21)=>{let t="",a=e;for(;a--;)t+=XB[Math.random()*64|0];return t},JB=Symbol.for("rtk-slice-createasyncthunk");function ZB(e,t){return`${e}/${t}`}function QB({creators:e}={}){var a;const t=(a=e==null?void 0:e.asyncThunk)==null?void 0:a[JB];return function(i){const{name:o,reducerPath:d=o}=i;if(!o)throw new Error(Mn(11));const h=(typeof i.reducers=="function"?i.reducers(tU()):i.reducers)||{},m=Object.keys(h),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(S,O){const I=typeof S=="string"?S:S.type;if(!I)throw new Error(Mn(12));if(I in u.sliceCaseReducersByType)throw new Error(Mn(13));return u.sliceCaseReducersByType[I]=O,f},addMatcher(S,O){return u.sliceMatchers.push({matcher:S,reducer:O}),f},exposeAction(S,O){return u.actionCreators[S]=O,f},exposeCaseReducer(S,O){return u.sliceCaseReducersByName[S]=O,f}};m.forEach(S=>{const O=h[S],I={reducerName:S,type:ZB(o,S),createNotation:typeof i.reducers=="function"};aU(O)?sU(I,O,f,t):rU(I,O,f)});function x(){const[S={},O=[],I=void 0]=typeof i.extraReducers=="function"?b4(i.extraReducers):[i.extraReducers],L={...S,...u.sliceCaseReducersByType};return GB(i.initialState,te=>{for(let H in L)te.addCase(H,L[H]);for(let H of u.sliceMatchers)te.addMatcher(H.matcher,H.reducer);for(let H of O)te.addMatcher(H.matcher,H.reducer);I&&te.addDefaultCase(I)})}const b=S=>S,v=new Map,N=new WeakMap;let j;function _(S,O){return j||(j=x()),j(S,O)}function k(){return j||(j=x()),j.getInitialState()}function E(S,O=!1){function I(te){let H=te[S];return typeof H>"u"&&O&&(H=oh(N,I,k)),H}function L(te=b){const H=oh(v,O,()=>new WeakMap);return oh(H,te,()=>{const B={};for(const[X,V]of Object.entries(i.selectors??{}))B[X]=eU(V,te,()=>oh(N,te,k),O);return B})}return{reducerPath:S,getSelectors:L,get selectors(){return L(I)},selectSlice:I}}const C={name:o,reducer:_,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:k,...E(d),injectInto(S,{reducerPath:O,...I}={}){const L=O??d;return S.inject({reducerPath:L,reducer:_},I),{...C,...E(L,!0)}}};return C}}function eU(e,t,a,n){function i(o,...d){let h=t(o);return typeof h>"u"&&n&&(h=a()),e(h,...d)}return i.unwrapped=e,i}var mn=QB();function tU(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function rU({type:e,reducerName:t,createNotation:a},n,i){let o,d;if("reducer"in n){if(a&&!nU(n))throw new Error(Mn(17));o=n.reducer,d=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,d?Qn(e,d):Qn(e))}function aU(e){return e._reducerDefinitionType==="asyncThunk"}function nU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sU({type:e,reducerName:t},a,n,i){if(!i)throw new Error(Mn(18));const{payloadCreator:o,fulfilled:d,pending:h,rejected:m,settled:u,options:f}=a,x=i(e,o,f);n.exposeAction(t,x),d&&n.addCase(x.fulfilled,d),h&&n.addCase(x.pending,h),m&&n.addCase(x.rejected,m),u&&n.addMatcher(x.settled,u),n.exposeCaseReducer(t,{fulfilled:d||ch,pending:h||ch,rejected:m||ch,settled:u||ch})}function ch(){}var lU="task",g4="listener",v4="completed",pj="cancelled",iU=`task-${pj}`,oU=`task-${v4}`,Wv=`${g4}-${pj}`,cU=`${g4}-${v4}`,Gp=class{constructor(e){Ab(this,"name","TaskAbortError");Ab(this,"message");this.code=e,this.message=`${lU} ${pj} (reason: ${e})`}},xj=(e,t)=>{if(typeof e!="function")throw new TypeError(Mn(32))},Vm=()=>{},y4=(e,t=Vm)=>(e.catch(t),e),j4=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),no=e=>{if(e.aborted)throw new Gp(e.reason)};function N4(e,t){let a=Vm;return new Promise((n,i)=>{const o=()=>i(new Gp(e.reason));if(e.aborted){o();return}a=j4(e,o),t.finally(()=>a()).then(n,i)}).finally(()=>{a=Vm})}var dU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof Gp?"cancelled":"rejected",error:a}}finally{t==null||t()}},Gm=e=>t=>y4(N4(e,t).then(a=>(no(e),a))),w4=e=>{const t=Gm(e);return a=>t(new Promise(n=>setTimeout(n,a)))},{assign:Nc}=Object,vS={},Xp="listenerMiddleware",uU=(e,t)=>{const a=n=>j4(e,()=>n.abort(e.reason));return(n,i)=>{xj(n);const o=new AbortController;a(o);const d=dU(async()=>{no(e),no(o.signal);const h=await n({pause:Gm(o.signal),delay:w4(o.signal),signal:o.signal});return no(o.signal),h},()=>o.abort(oU));return i!=null&&i.autoJoin&&t.push(d.catch(Vm)),{result:Gm(e)(d),cancel(){o.abort(iU)}}}},fU=(e,t)=>{const a=async(n,i)=>{no(t);let o=()=>{};const h=[new Promise((m,u)=>{let f=e({predicate:n,effect:(x,b)=>{b.unsubscribe(),m([x,b.getState(),b.getOriginalState()])}});o=()=>{f(),u()}})];i!=null&&h.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await N4(t,Promise.race(h));return no(t),m}finally{o()}};return(n,i)=>y4(a(n,i))},_4=e=>{let{type:t,actionCreator:a,matcher:n,predicate:i,effect:o}=e;if(t)i=Qn(t).match;else if(a)t=a.type,i=a.match;else if(n)i=n;else if(!i)throw new Error(Mn(21));return xj(o),{predicate:i,type:t,effect:o}},k4=Nc(e=>{const{type:t,predicate:a,effect:n}=_4(e);return{id:WB(),effect:n,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Mn(22))}}},{withTypes:()=>k4}),yS=(e,t)=>{const{type:a,effect:n,predicate:i}=_4(t);return Array.from(e.values()).find(o=>(typeof a=="string"?o.type===a:o.predicate===i)&&o.effect===n)},Jv=e=>{e.pending.forEach(t=>{t.abort(Wv)})},hU=(e,t)=>()=>{for(const a of t.keys())Jv(a);e.clear()},jS=(e,t,a)=>{try{e(t,a)}catch(n){setTimeout(()=>{throw n},0)}},S4=Nc(Qn(`${Xp}/add`),{withTypes:()=>S4}),mU=Qn(`${Xp}/removeAll`),E4=Nc(Qn(`${Xp}/remove`),{withTypes:()=>E4}),pU=(...e)=>{console.error(`${Xp}/error`,...e)},Cu=(e={})=>{const t=new Map,a=new Map,n=v=>{const N=a.get(v)??0;a.set(v,N+1)},i=v=>{const N=a.get(v)??1;N===1?a.delete(v):a.set(v,N-1)},{extra:o,onError:d=pU}=e;xj(d);const h=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),N=>{v.unsubscribe(),N!=null&&N.cancelActive&&Jv(v)}),m=v=>{const N=yS(t,v)??k4(v);return h(N)};Nc(m,{withTypes:()=>m});const u=v=>{const N=yS(t,v);return N&&(N.unsubscribe(),v.cancelActive&&Jv(N)),!!N};Nc(u,{withTypes:()=>u});const f=async(v,N,j,_)=>{const k=new AbortController,E=fU(m,k.signal),C=[];try{v.pending.add(k),n(v),await Promise.resolve(v.effect(N,Nc({},j,{getOriginalState:_,condition:(S,O)=>E(S,O).then(Boolean),take:E,delay:w4(k.signal),pause:Gm(k.signal),extra:o,signal:k.signal,fork:uU(k.signal,C),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((S,O,I)=>{S!==k&&(S.abort(Wv),I.delete(S))})},cancel:()=>{k.abort(Wv),v.pending.delete(k)},throwIfCancelled:()=>{no(k.signal)}})))}catch(S){S instanceof Gp||jS(d,S,{raisedBy:"effect"})}finally{await Promise.all(C),k.abort(cU),i(v),v.pending.delete(k)}},x=hU(t,a);return{middleware:v=>N=>j=>{if(!r4(j))return N(j);if(S4.match(j))return m(j.payload);if(mU.match(j)){x();return}if(E4.match(j))return u(j.payload);let _=v.getState();const k=()=>{if(_===vS)throw new Error(Mn(23));return _};let E;try{if(E=N(j),t.size>0){const C=v.getState(),S=Array.from(t.values());for(const O of S){let I=!1;try{I=O.predicate(j,C,_)}catch(L){I=!1,jS(d,L,{raisedBy:"predicate"})}I&&f(O,j,v,k)}}}finally{_=vS}return E},startListening:m,stopListening:u,clearListeners:x}};function Mn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},T4=mn({name:"chartLayout",initialState:xU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,n,i,o;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:bU,setLayout:gU,setChartSize:vU,setScale:yU}=T4.actions,jU=T4.reducer;function C4(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function Gt(e){return Number.isFinite(e)}function $s(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function NS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function bc(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NS(Object(a),!0).forEach(function(n){NU(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function NU(e,t,a){return(t=wU(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wU(e){var t=_U(e,"string");return typeof t=="symbol"?t:t+""}function _U(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pr(e,t,a){return Br(e)||Br(t)?a:Rs(t)?fo(e,t,a):typeof t=="function"?t(e):a}var kU=(e,t,a)=>{if(t&&a){var{width:n,height:i}=a,{align:o,verticalAlign:d,layout:h}=t;if((h==="vertical"||h==="horizontal"&&d==="middle")&&o!=="center"&&vt(e[o]))return bc(bc({},e),{},{[o]:e[o]+(n||0)});if((h==="horizontal"||h==="vertical"&&o==="center")&&d!=="middle"&&vt(e[d]))return bc(bc({},e),{},{[d]:e[d]+(i||0)})}return e},_l=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",A4=(e,t,a,n)=>{if(n)return e.map(h=>h.coordinate);var i,o,d=e.map(h=>(h.coordinate===t&&(i=!0),h.coordinate===a&&(o=!0),h.coordinate));return i||d.push(t),o||d.push(a),d},O4=(e,t,a)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:o,scale:d,realScaleType:h,isCategorical:m,categoricalDomain:u,tickCount:f,ticks:x,niceTicks:b,axisType:v}=e;if(!d)return null;var N=h==="scaleBand"&&d.bandwidth?d.bandwidth()/2:2,j=i==="category"&&d.bandwidth?d.bandwidth()/N:0;if(j=v==="angleAxis"&&o&&o.length>=2?Na(o[0]-o[1])*2*j:j,x||b){var _=(x||b||[]).map((k,E)=>{var C=n?n.indexOf(k):k,S=d.map(C);return Gt(S)?{coordinate:S+j,value:k,offset:j,index:E}:null}).filter(dn);return _}return m&&u?u.map((k,E)=>{var C=d.map(k);return Gt(C)?{coordinate:C+j,value:k,index:E,offset:j}:null}).filter(dn):d.ticks&&f!=null?d.ticks(f).map((k,E)=>{var C=d.map(k);return Gt(C)?{coordinate:C+j,value:k,index:E,offset:j}:null}).filter(dn):d.domain().map((k,E)=>{var C=d.map(k);return Gt(C)?{coordinate:C+j,value:n?n[k]:k,index:E,offset:j}:null}).filter(dn)},SU=(e,t)=>{if(!t||t.length!==2||!vt(t[0])||!vt(t[1]))return e;var a=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!vt(e[0])||e[0]<a)&&(i[0]=a),(!vt(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<a&&(i[1]=a),i},EU=e=>{var t,a=e.length;if(!(a<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var o=0,d=0,h=0;h<a;++h){var m=e[h],u=m==null?void 0:m[i];if(u!=null){var f=u[1],x=u[0],b=Ls(f)?x:f;b>=0?(u[0]=o,o+=b,u[1]=o):(u[0]=d,d+=b,u[1]=d)}}}},TU=e=>{var t,a=e.length;if(!(a<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var o=0,d=0;d<a;++d){var h=e[d],m=h==null?void 0:h[i];if(m!=null){var u=Ls(m[1])?m[0]:m[1];u>=0?(m[0]=o,o+=u,m[1]=o):(m[0]=0,m[1]=0)}}}},CU={sign:EU,expand:a7,none:uo,silhouette:n7,wiggle:s7,positive:TU},AU=(e,t,a)=>{var n,i=(n=CU[a])!==null&&n!==void 0?n:uo,o=r7().keys(t).value((h,m)=>Number(pr(h,m,0))).order(Bv).offset(i),d=o(e);return d.forEach((h,m)=>{h.forEach((u,f)=>{var x=pr(e[f],t[m],0);Array.isArray(x)&&x.length===2&&vt(x[0])&&vt(x[1])&&(u[0]=x[0],u[1]=x[1])})}),d};function OU(e){return e==null?void 0:String(e)}function wS(e){var{axis:t,ticks:a,bandSize:n,entry:i,index:o,dataKey:d}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Br(i[t.dataKey])){var h=$5(a,"value",i[t.dataKey]);if(h)return h.coordinate+n/2}return a!=null&&a[o]?a[o].coordinate+n/2:null}var m=pr(i,Br(d)?t.dataKey:d),u=t.scale.map(m);return vt(u)?u:null}var _S=e=>{var{axis:t,ticks:a,offset:n,bandSize:i,entry:o,index:d}=e;if(t.type==="category")return a[d]?a[d].coordinate+n:null;var h=pr(o,t.dataKey,t.scale.domain()[d]);if(Br(h))return null;var m=t.scale.map(h);return vt(m)?m-i/2+n:null},MU=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var n=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return n<=0&&i>=0?0:i<0?i:n}return a[0]},IU=e=>{var t=e.flat(2).filter(vt);return[Math.min(...t),Math.max(...t)]},PU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],DU=(e,t,a)=>{if(e!=null)return PU(Object.keys(e).reduce((n,i)=>{var o=e[i];if(!o)return n;var{stackedData:d}=o,h=d.reduce((m,u)=>{var f=C4(u,t,a),x=IU(f);return!Gt(x[0])||!Gt(x[1])?m:[Math.min(m[0],x[0]),Math.max(m[1],x[1])]},[1/0,-1/0]);return[Math.min(h[0],n[0]),Math.max(h[1],n[1])]},[1/0,-1/0]))},kS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ac=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!a||n>0)return n}if(e&&t&&t.length>=2){for(var i=Bp(t,f=>f.coordinate),o=1/0,d=1,h=i.length;d<h;d++){var m=i[d],u=i[d-1];o=Math.min(((m==null?void 0:m.coordinate)||0)-((u==null?void 0:u.coordinate)||0),o)}return o===1/0?0:o}return a?void 0:0};function ES(e){var{tooltipEntrySettings:t,dataKey:a,payload:n,value:i,name:o}=e;return bc(bc({},t),{},{dataKey:a,payload:n,value:i,name:o})}function Bc(e,t){if(e)return String(e);if(typeof t=="string")return t}var LU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},RU=(e,t)=>t==="centric"?e.angle:e.radius,kl=e=>e.layout.width,Sl=e=>e.layout.height,$U=e=>e.layout.scale,M4=e=>e.layout.margin,Wp=Ie(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Jp=Ie(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),I4="data-recharts-item-index",P4="data-recharts-item-id",Au=60;function TS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function dh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(a),!0).forEach(function(n){zU(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function zU(e,t,a){return(t=BU(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function BU(e){var t=UU(e,"string");return typeof t=="symbol"?t:t+""}function UU(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qU=e=>e.brush.height;function FU(e){var t=Jp(e);return t.reduce((a,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Au;return a+i}return a},0)}function HU(e){var t=Jp(e);return t.reduce((a,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Au;return a+i}return a},0)}function YU(e){var t=Wp(e);return t.reduce((a,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?a+n.height:a,0)}function KU(e){var t=Wp(e);return t.reduce((a,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?a+n.height:a,0)}var pa=Ie([kl,Sl,M4,qU,FU,HU,YU,KU,Q5,vB],(e,t,a,n,i,o,d,h,m,u)=>{var f={left:(a.left||0)+i,right:(a.right||0)+o},x={top:(a.top||0)+d,bottom:(a.bottom||0)+h},b=dh(dh({},x),f),v=b.bottom;b.bottom+=n,b=kU(b,m,u);var N=e-b.left-b.right,j=t-b.top-b.bottom;return dh(dh({brushBottom:v},b),{},{width:Math.max(N,0),height:Math.max(j,0)})}),VU=Ie(pa,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),bj=Ie(kl,Sl,(e,t)=>({x:0,y:0,width:e,height:t})),GU=g.createContext(null),Ya=()=>g.useContext(GU)!=null,Zp=e=>e.brush,Qp=Ie([Zp,pa,M4],(e,t,a)=>({height:e.height,x:vt(e.x)?e.x:t.left,y:vt(e.y)?e.y:t.top+t.height+t.brushBottom-((a==null?void 0:a.bottom)||0),width:vt(e.width)?e.width:t.width})),qg={},Fg={},Hg={},CS;function XU(){return CS||(CS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,n,{signal:i,edges:o}={}){let d,h=null;const m=o!=null&&o.includes("leading"),u=o==null||o.includes("trailing"),f=()=>{h!==null&&(a.apply(d,h),d=void 0,h=null)},x=()=>{u&&f(),j()};let b=null;const v=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,x()},n)},N=()=>{b!==null&&(clearTimeout(b),b=null)},j=()=>{N(),d=void 0,h=null},_=()=>{f()},k=function(...E){if(i!=null&&i.aborted)return;d=this,h=E;const C=b==null;v(),m&&C&&f()};return k.schedule=v,k.cancel=j,k.flush=_,i==null||i.addEventListener("abort",j,{once:!0}),k}e.debounce=t})(Hg)),Hg}var AS;function WU(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XU();function a(n,i=0,o={}){typeof o!="object"&&(o={});const{leading:d=!1,trailing:h=!0,maxWait:m}=o,u=Array(2);d&&(u[0]="leading"),h&&(u[1]="trailing");let f,x=null;const b=t.debounce(function(...j){f=n.apply(this,j),x=null},i,{edges:u}),v=function(...j){return m!=null&&(x===null&&(x=Date.now()),Date.now()-x>=m)?(f=n.apply(this,j),x=Date.now(),b.cancel(),b.schedule(),f):(b.apply(this,j),f)},N=()=>(b.flush(),f);return v.cancel=b.cancel,v.flush=N,v}e.debounce=a})(Fg)),Fg}var OS;function JU(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WU();function a(n,i=0,o={}){const{leading:d=!0,trailing:h=!0}=o;return t.debounce(n,i,{leading:d,maxWait:i,trailing:h})}e.throttle=a})(qg)),qg}var Yg,MS;function ZU(){return MS||(MS=1,Yg=JU().throttle),Yg}var QU=ZU();const eq=ms(QU);var Xm=function(t,a){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(a.replace(/%s/g,()=>i[d++]))}},Os={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},D4=(e,t,a)=>{var{width:n=Os.width,height:i=Os.height,aspect:o,maxHeight:d}=a,h=ho(n)?e:Number(n),m=ho(i)?t:Number(i);return o&&o>0&&(h?m=h/o:m&&(h=m*o),d&&m!=null&&m>d&&(m=d)),{calculatedWidth:h,calculatedHeight:m}},tq={width:0,height:0,overflow:"visible"},rq={width:0,overflowX:"visible"},aq={height:0,overflowY:"visible"},nq={},sq=e=>{var{width:t,height:a}=e,n=ho(t),i=ho(a);return n&&i?tq:n?rq:i?aq:nq};function lq(e){var{width:t,height:a,aspect:n}=e,i=t,o=a;return i===void 0&&o===void 0?(i=Os.width,o=Os.height):i===void 0?i=n&&n>0?void 0:Os.width:o===void 0&&(o=n&&n>0?void 0:Os.height),{width:i,height:o}}function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Zv.apply(null,arguments)}function IS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function PS(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(a),!0).forEach(function(n){iq(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function iq(e,t,a){return(t=oq(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oq(e){var t=cq(e,"string");return typeof t=="symbol"?t:t+""}function cq(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L4=g.createContext(Os.initialDimension);function dq(e){return $s(e.width)&&$s(e.height)}function R4(e){var{children:t,width:a,height:n}=e,i=g.useMemo(()=>({width:a,height:n}),[a,n]);return dq(i)?g.createElement(L4.Provider,{value:i},t):null}var gj=()=>g.useContext(L4),uq=g.forwardRef((e,t)=>{var{aspect:a,initialDimension:n=Os.initialDimension,width:i,height:o,minWidth:d=Os.minWidth,minHeight:h,maxHeight:m,children:u,debounce:f=Os.debounce,id:x,className:b,onResize:v,style:N={}}=e,j=g.useRef(null),_=g.useRef();_.current=v,g.useImperativeHandle(t,()=>j.current);var[k,E]=g.useState({containerWidth:n.width,containerHeight:n.height}),C=g.useCallback((te,H)=>{E(B=>{var X=Math.round(te),V=Math.round(H);return B.containerWidth===X&&B.containerHeight===V?B:{containerWidth:X,containerHeight:V}})},[]);g.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return jo;var te=V=>{var le,J=V[0];if(J!=null){var{width:Z,height:M}=J.contentRect;C(Z,M),(le=_.current)===null||le===void 0||le.call(_,Z,M)}};f>0&&(te=eq(te,f,{trailing:!0,leading:!1}));var H=new ResizeObserver(te),{width:B,height:X}=j.current.getBoundingClientRect();return C(B,X),H.observe(j.current),()=>{H.disconnect()}},[C,f]);var{containerWidth:S,containerHeight:O}=k;Xm(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:I,calculatedHeight:L}=D4(S,O,{width:i,height:o,aspect:a,maxHeight:m});return Xm(I!=null&&I>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,L,i,o,d,h,a),g.createElement("div",{id:x?"".concat(x):void 0,className:nr("recharts-responsive-container",b),style:PS(PS({},N),{},{width:i,height:o,minWidth:d,minHeight:h,maxHeight:m}),ref:j},g.createElement("div",{style:sq({width:i,height:o})},g.createElement(R4,{width:I,height:L},u)))}),_s=g.forwardRef((e,t)=>{var a=gj();if($s(a.width)&&$s(a.height))return e.children;var{width:n,height:i}=lq({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:d}=D4(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return vt(o)&&vt(d)?g.createElement(R4,{width:o,height:d},e.children):g.createElement(uq,Zv({},e,{width:n,height:i,ref:t}))});function vj(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ex=()=>{var e,t=Ya(),a=_t(VU),n=_t(Qp),i=(e=_t(Zp))===null||e===void 0?void 0:e.padding;return!t||!n||!i?a:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},fq={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$4=()=>{var e;return(e=_t(pa))!==null&&e!==void 0?e:fq},z4=()=>_t(kl),B4=()=>_t(Sl),er=e=>e.layout.layoutType,No=()=>_t(er),U4=()=>{var e=No();if(e==="horizontal"||e==="vertical")return e},q4=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},hq=()=>{var e=No();return e!==void 0},Ou=e=>{var t=Lr(),a=Ya(),{width:n,height:i}=e,o=gj(),d=n,h=i;return o&&(d=o.width>0?o.width:n,h=o.height>0?o.height:i),g.useEffect(()=>{!a&&$s(d)&&$s(h)&&t(vU({width:d,height:h}))},[t,a,d,h]),null},F4=Symbol.for("immer-nothing"),DS=Symbol.for("immer-draftable"),Dn=Symbol.for("immer-state");function cs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cu=Object.getPrototypeOf;function Oc(e){return!!e&&!!e[Dn]}function po(e){var t;return e?H4(e)||Array.isArray(e)||!!e[DS]||!!((t=e.constructor)!=null&&t[DS])||Mu(e)||rx(e):!1}var mq=Object.prototype.constructor.toString(),LS=new WeakMap;function H4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let n=LS.get(a);return n===void 0&&(n=Function.toString.call(a),LS.set(a,n)),n===mq}function Wm(e,t,a=!0){tx(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function tx(e){const t=e[Dn];return t?t.type_:Array.isArray(e)?1:Mu(e)?2:rx(e)?3:0}function Qv(e,t){return tx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Y4(e,t,a){const n=tx(e);n===2?e.set(t,a):n===3?e.add(a):e[t]=a}function pq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Mu(e){return e instanceof Map}function rx(e){return e instanceof Set}function Gi(e){return e.copy_||e.base_}function ey(e,t){if(Mu(e))return new Map(e);if(rx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=H4(e);if(t===!0||t==="class_only"&&!a){const n=Object.getOwnPropertyDescriptors(e);delete n[Dn];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const d=i[o],h=n[d];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(n[d]={configurable:!0,writable:!0,enumerable:h.enumerable,value:e[d]})}return Object.create(cu(e),n)}else{const n=cu(e);if(n!==null&&a)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function yj(e,t=!1){return ax(e)||Oc(e)||!po(e)||(tx(e)>1&&Object.defineProperties(e,{set:uh,add:uh,clear:uh,delete:uh}),Object.freeze(e),t&&Object.values(e).forEach(a=>yj(a,!0))),e}function xq(){cs(2)}var uh={value:xq};function ax(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var bq={};function xo(e){const t=bq[e];return t||cs(0,e),t}var du;function K4(){return du}function gq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RS(e,t){t&&(xo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ty(e){ry(e),e.drafts_.forEach(vq),e.drafts_=null}function ry(e){e===du&&(du=e.parent_)}function $S(e){return du=gq(du,e)}function vq(e){const t=e[Dn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Dn].modified_&&(ty(t),cs(4)),po(e)&&(e=Jm(t,e),t.parent_||Zm(t,e)),t.patches_&&xo("Patches").generateReplacementPatches_(a[Dn].base_,e,t.patches_,t.inversePatches_)):e=Jm(t,a,[]),ty(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==F4?e:void 0}function Jm(e,t,a){if(ax(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[Dn];if(!i)return Wm(t,(o,d)=>BS(e,i,t,o,d,a),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Zm(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let d=o,h=!1;i.type_===3&&(d=new Set(o),o.clear(),h=!0),Wm(d,(m,u)=>BS(e,i,o,m,u,a,h),n),Zm(e,o,!1),a&&e.patches_&&xo("Patches").generatePatches_(i,a,e.patches_,e.inversePatches_)}return i.copy_}function BS(e,t,a,n,i,o,d){if(i==null||typeof i!="object"&&!d)return;const h=ax(i);if(!(h&&!d)){if(Oc(i)){const m=o&&t&&t.type_!==3&&!Qv(t.assigned_,n)?o.concat(n):void 0,u=Jm(e,i,m);if(Y4(a,n,u),Oc(u))e.canAutoFreeze_=!1;else return}else d&&a.add(i);if(po(i)&&!h){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&h)return;Jm(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Mu(a)?a.has(n):Object.prototype.propertyIsEnumerable.call(a,n))&&Zm(e,i)}}}function Zm(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yj(t,a)}function yq(e,t){const a=Array.isArray(e),n={type_:a?1:0,scope_:t?t.scope_:K4(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=jj;a&&(i=[n],o=uu);const{revoke:d,proxy:h}=Proxy.revocable(i,o);return n.draft_=h,n.revoke_=d,h}var jj={get(e,t){if(t===Dn)return e;const a=Gi(e);if(!Qv(a,t))return jq(e,a,t);const n=a[t];return e.finalized_||!po(n)?n:n===Kg(e.base_,t)?(Vg(e),e.copy_[t]=ny(n,e)):n},has(e,t){return t in Gi(e)},ownKeys(e){return Reflect.ownKeys(Gi(e))},set(e,t,a){const n=V4(Gi(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,a),!0;if(!e.modified_){const i=Kg(Gi(e),t),o=i==null?void 0:i[Dn];if(o&&o.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(pq(a,i)&&(a!==void 0||Qv(e.base_,t)))return!0;Vg(e),ay(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Kg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Vg(e),ay(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Gi(e),n=Reflect.getOwnPropertyDescriptor(a,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:a[t]}},defineProperty(){cs(11)},getPrototypeOf(e){return cu(e.base_)},setPrototypeOf(){cs(12)}},uu={};Wm(jj,(e,t)=>{uu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});uu.deleteProperty=function(e,t){return uu.set.call(this,e,t,void 0)};uu.set=function(e,t,a){return jj.set.call(this,e[0],t,a,e[0])};function Kg(e,t){const a=e[Dn];return(a?Gi(a):e)[t]}function jq(e,t,a){var i;const n=V4(t,a);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function V4(e,t){if(!(t in e))return;let a=cu(e);for(;a;){const n=Object.getOwnPropertyDescriptor(a,t);if(n)return n;a=cu(a)}}function ay(e){e.modified_||(e.modified_=!0,e.parent_&&ay(e.parent_))}function Vg(e){e.copy_||(e.copy_=ey(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Nq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,n)=>{if(typeof t=="function"&&typeof a!="function"){const o=a;a=t;const d=this;return function(m=o,...u){return d.produce(m,f=>a.call(this,f,...u))}}typeof a!="function"&&cs(6),n!==void 0&&typeof n!="function"&&cs(7);let i;if(po(t)){const o=$S(this),d=ny(t,void 0);let h=!0;try{i=a(d),h=!1}finally{h?ty(o):ry(o)}return RS(o,n),zS(i,o)}else if(!t||typeof t!="object"){if(i=a(t),i===void 0&&(i=t),i===F4&&(i=void 0),this.autoFreeze_&&yj(i,!0),n){const o=[],d=[];xo("Patches").generateReplacementPatches_(t,i,o,d),n(o,d)}return i}else cs(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(d,...h)=>this.produceWithPatches(d,m=>t(m,...h));let n,i;return[this.produce(t,a,(d,h)=>{n=d,i=h}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){po(e)||cs(8),Oc(e)&&(e=wq(e));const t=$S(this),a=ny(e,void 0);return a[Dn].isManual_=!0,ry(t),a}finishDraft(e,t){const a=e&&e[Dn];(!a||!a.isManual_)&&cs(9);const{scope_:n}=a;return RS(n,t),zS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const i=t[a];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}a>-1&&(t=t.slice(a+1));const n=xo("Patches").applyPatches_;return Oc(e)?n(e,t):this.produce(e,i=>n(i,t))}};function ny(e,t){const a=Mu(e)?xo("MapSet").proxyMap_(e,t):rx(e)?xo("MapSet").proxySet_(e,t):yq(e,t);return(t?t.scope_:K4()).drafts_.push(a),a}function wq(e){return Oc(e)||cs(10,e),G4(e)}function G4(e){if(!po(e)||ax(e))return e;const t=e[Dn];let a,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=ey(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else a=ey(e,!0);return Wm(a,(i,o)=>{Y4(a,i,G4(o))},n),t&&(t.finalized_=!1),a}var _q=new Nq;_q.produce;var kq={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},X4=mn({name:"legend",initialState:kq,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ir()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:n}=t.payload,i=us(e).payload.indexOf(a);i>-1&&(e.payload[i]=n)},prepare:Ir()},removeLegendPayload:{reducer(e,t){var a=us(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:Ir()}}}),{setLegendSize:use,setLegendSettings:fse,addLegendPayload:W4,replaceLegendPayload:J4,removeLegendPayload:Z4}=X4.actions,Sq=X4.reducer;function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},sy.apply(null,arguments)}function US(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Ld(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?US(Object(a),!0).forEach(function(n){Eq(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):US(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Eq(e,t,a){return(t=Tq(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Tq(e){var t=Cq(e,"string");return typeof t=="symbol"?t:t+""}function Cq(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aq(e){return Array.isArray(e)&&Rs(e[0])&&Rs(e[1])?e.join(" ~ "):e}var cc={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Oq=e=>{var{separator:t=cc.separator,contentStyle:a,itemStyle:n,labelStyle:i=cc.labelStyle,payload:o,formatter:d,itemSorter:h,wrapperClassName:m,labelClassName:u,label:f,labelFormatter:x,accessibilityLayer:b=cc.accessibilityLayer}=e,v=()=>{if(o&&o.length){var O={padding:0,margin:0},I=(h?Bp(o,h):o).map((L,te)=>{if(L.type==="none")return null;var H=L.formatter||d||Aq,{value:B,name:X}=L,V=B,le=X;if(H){var J=H(B,X,L,te,o);if(Array.isArray(J))[V,le]=J;else if(J!=null)V=J;else return null}var Z=Ld(Ld({},cc.itemStyle),{},{color:L.color||cc.itemStyle.color},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(te),style:Z},Rs(le)?g.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Rs(le)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},V),g.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:O},I)}return null},N=Ld(Ld({},cc.contentStyle),a),j=Ld({margin:0},i),_=!Br(f),k=_?f:"",E=nr("recharts-default-tooltip",m),C=nr("recharts-tooltip-label",u);_&&x&&o!==void 0&&o!==null&&(k=x(f,o));var S=b?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",sy({className:E,style:N},S),g.createElement("p",{className:C,style:j},g.isValidElement(k)?k:"".concat(k)),v())},Rd="recharts-tooltip-wrapper",Mq={visibility:"hidden"};function Iq(e){var{coordinate:t,translateX:a,translateY:n}=e;return nr(Rd,{["".concat(Rd,"-right")]:vt(a)&&t&&vt(t.x)&&a>=t.x,["".concat(Rd,"-left")]:vt(a)&&t&&vt(t.x)&&a<t.x,["".concat(Rd,"-bottom")]:vt(n)&&t&&vt(t.y)&&n>=t.y,["".concat(Rd,"-top")]:vt(n)&&t&&vt(t.y)&&n<t.y})}function qS(e){var{allowEscapeViewBox:t,coordinate:a,key:n,offset:i,position:o,reverseDirection:d,tooltipDimension:h,viewBox:m,viewBoxDimension:u}=e;if(o&&vt(o[n]))return o[n];var f=a[n]-h-(i>0?i:0),x=a[n]+i;if(t[n])return d[n]?f:x;var b=m[n];if(b==null)return 0;if(d[n]){var v=f,N=b;return v<N?Math.max(x,b):Math.max(f,b)}if(u==null)return 0;var j=x+h,_=b+u;return j>_?Math.max(f,b):Math.max(x,b)}function Pq(e){var{translateX:t,translateY:a,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function Dq(e){var{allowEscapeViewBox:t,coordinate:a,offsetTop:n,offsetLeft:i,position:o,reverseDirection:d,tooltipBox:h,useTranslate3d:m,viewBox:u}=e,f,x,b;return h.height>0&&h.width>0&&a?(x=qS({allowEscapeViewBox:t,coordinate:a,key:"x",offset:i,position:o,reverseDirection:d,tooltipDimension:h.width,viewBox:u,viewBoxDimension:u.width}),b=qS({allowEscapeViewBox:t,coordinate:a,key:"y",offset:n,position:o,reverseDirection:d,tooltipDimension:h.height,viewBox:u,viewBoxDimension:u.height}),f=Pq({translateX:x,translateY:b,useTranslate3d:m})):f=Mq,{cssProperties:f,cssClasses:Iq({translateX:x,translateY:b,coordinate:a})}}function FS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function fh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(a),!0).forEach(function(n){ly(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ly(e,t,a){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Lq(e){var t=Rq(e,"string");return typeof t=="symbol"?t:t+""}function Rq(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $q extends g.PureComponent{constructor(){super(...arguments),ly(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ly(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,n,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&a!==void 0?a:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:n,animationEasing:i,children:o,coordinate:d,hasPayload:h,isAnimationActive:m,offset:u,position:f,reverseDirection:x,useTranslate3d:b,viewBox:v,wrapperStyle:N,lastBoundingBox:j,innerRef:_,hasPortalFromProps:k}=this.props,E=typeof u=="number"?u:u.x,C=typeof u=="number"?u:u.y,{cssClasses:S,cssProperties:O}=Dq({allowEscapeViewBox:a,coordinate:d,offsetLeft:E,offsetTop:C,position:f,reverseDirection:x,tooltipBox:{height:j.height,width:j.width},useTranslate3d:b,viewBox:v}),I=k?{}:fh(fh({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&h?"visible":"hidden",position:"absolute",top:0,left:0}),L=fh(fh({},I),{},{visibility:!this.state.dismissed&&t&&h?"visible":"hidden"},N);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:L,ref:_},o)}}var Q4=()=>{var e;return(e=_t(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},iy.apply(null,arguments)}function HS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function YS(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(a),!0).forEach(function(n){zq(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function zq(e,t,a){return(t=Bq(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Bq(e){var t=Uq(e,"string");return typeof t=="symbol"?t:t+""}function Uq(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KS={curveBasisClosed:Y8,curveBasisOpen:K8,curveBasis:H8,curveBumpX:A8,curveBumpY:O8,curveLinearClosed:V8,curveLinear:Rp,curveMonotoneX:G8,curveMonotoneY:X8,curveNatural:W8,curveStep:J8,curveStepAfter:Q8,curveStepBefore:Z8},Qm=e=>Gt(e.x)&&Gt(e.y),VS=e=>e.base!=null&&Qm(e.base)&&Qm(e),$d=e=>e.x,zd=e=>e.y,qq=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Eu(e));if((a==="curveMonotone"||a==="curveBump")&&t){var n=KS["".concat(a).concat(t==="vertical"?"Y":"X")];if(n)return n}return KS[a]||Rp},GS={connectNulls:!1,type:"linear"},Fq=e=>{var{type:t=GS.type,points:a=[],baseLine:n,layout:i,connectNulls:o=GS.connectNulls}=e,d=qq(t,i),h=o?a.filter(Qm):a;if(Array.isArray(n)){var m,u=a.map((N,j)=>YS(YS({},N),{},{base:n[j]}));i==="vertical"?m=nh().y(zd).x1($d).x0(N=>N.base.x):m=nh().x($d).y1(zd).y0(N=>N.base.y);var f=m.defined(VS).curve(d),x=o?u.filter(VS):u;return f(x)}var b;i==="vertical"&&vt(n)?b=nh().y(zd).x1($d).x0(n):vt(n)?b=nh().x($d).y1(zd).y0(n):b=k5().x($d).y(zd);var v=b.defined(Qm).curve(d);return v(h)},Nj=e=>{var{className:t,points:a,path:n,pathRef:i}=e,o=No();if((!a||!a.length)&&!n)return null;var d={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},h=a&&a.length?Fq(d):n;return g.createElement("path",iy({},Pn(e),ij(e),{className:nr("recharts-curve",t),d:h===null?void 0:h,ref:i}))},Hq=["x","y","top","left","width","height","className"];function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},oy.apply(null,arguments)}function XS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Yq(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(a),!0).forEach(function(n){Kq(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Kq(e,t,a){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Vq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xq(e,t){if(e==null)return{};var a,n,i=Wq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Wq(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var Jq=(e,t,a,n,i,o)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(a),Zq=e=>{var{x:t=0,y:a=0,top:n=0,left:i=0,width:o=0,height:d=0,className:h}=e,m=Xq(e,Hq),u=Yq({x:t,y:a,top:n,left:i,width:o,height:d},m);return!vt(t)||!vt(a)||!vt(o)||!vt(d)||!vt(n)||!vt(i)?null:g.createElement("path",oy({},Za(u),{className:nr("recharts-cross",h),d:Jq(t,a,o,d,n,i)}))};function Qq(e,t,a,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-i,width:e==="horizontal"?n:a.width-1,height:e==="horizontal"?a.height-1:n}}function WS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function JS(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(a),!0).forEach(function(n){eF(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function eF(e,t,a){return(t=tF(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function tF(e){var t=rF(e,"string");return typeof t=="symbol"?t:t+""}function rF(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),e3=(e,t,a)=>e.map(n=>"".concat(aF(n)," ").concat(t,"ms ").concat(a)).join(","),nF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,n)=>a.filter(i=>n.includes(i))),fu=(e,t)=>Object.keys(t).reduce((a,n)=>JS(JS({},a),{},{[n]:e(n,t[n])}),{});function ZS(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(a),!0).forEach(function(n){sF(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZS(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function sF(e,t,a){return(t=lF(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lF(e){var t=iF(e,"string");return typeof t=="symbol"?t:t+""}function iF(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ep=(e,t,a)=>e+(t-e)*a,cy=e=>{var{from:t,to:a}=e;return t!==a},t3=(e,t,a)=>{var n=fu((i,o)=>{if(cy(o)){var[d,h]=e(o.from,o.to,o.velocity);return fa(fa({},o),{},{from:d,velocity:h})}return o},t);return a<1?fu((i,o)=>cy(o)&&n[i]!=null?fa(fa({},o),{},{velocity:ep(o.velocity,n[i].velocity,a),from:ep(o.from,n[i].from,a)}):o,t):t3(e,n,a-1)};function oF(e,t,a,n,i,o){var d,h=n.reduce((b,v)=>fa(fa({},b),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),m=()=>fu((b,v)=>v.from,h),u=()=>!Object.values(h).filter(cy).length,f=null,x=b=>{d||(d=b);var v=b-d,N=v/a.dt;h=t3(a,h,N),i(fa(fa(fa({},e),t),m())),d=b,u()||(f=o.setTimeout(x))};return()=>(f=o.setTimeout(x),()=>{var b;(b=f)===null||b===void 0||b()})}function cF(e,t,a,n,i,o,d){var h=null,m=i.reduce((x,b)=>{var v=e[b],N=t[b];return v==null||N==null?x:fa(fa({},x),{},{[b]:[v,N]})},{}),u,f=x=>{u||(u=x);var b=(x-u)/n,v=fu((j,_)=>ep(..._,a(b)),m);if(o(fa(fa(fa({},e),t),v)),b<1)h=d.setTimeout(f);else{var N=fu((j,_)=>ep(..._,a(1)),m);o(fa(fa(fa({},e),t),N))}};return()=>(h=d.setTimeout(f),()=>{var x;(x=h)===null||x===void 0||x()})}const dF=(e,t,a,n,i,o)=>{var d=nF(e,t);return a==null?()=>(i(fa(fa({},e),t)),()=>{}):a.isStepper===!0?oF(e,t,a,d,i,o):cF(e,t,a,n,d,i,o)};var tp=1e-4,r3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],a3=(e,t)=>e.map((a,n)=>a*t**n).reduce((a,n)=>a+n),QS=(e,t)=>a=>{var n=r3(e,t);return a3(n,a)},uF=(e,t)=>a=>{var n=r3(e,t),i=[...n.map((o,d)=>o*d).slice(1),0];return a3(i,a)},fF=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var n=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(o=>parseFloat(o));return[i[0],i[1],i[2],i[3]]},hF=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=fF(a[0]);if(i)return i}}return a.length===4?a:[0,0,1,1]},mF=(e,t,a,n)=>{var i=QS(e,a),o=QS(t,n),d=uF(e,a),h=u=>u>1?1:u<0?0:u,m=u=>{for(var f=u>1?1:u,x=f,b=0;b<8;++b){var v=i(x)-f,N=d(x);if(Math.abs(v-f)<tp||N<tp)return o(x);x=h(x-v/N)}return o(x)};return m.isStepper=!1,m},eE=function(){return mF(...hF(...arguments))},pF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:n=8,dt:i=17}=t,o=(d,h,m)=>{var u=-(d-h)*a,f=m*n,x=m+(u-f)*i/1e3,b=m*i/1e3+d;return Math.abs(b-h)<tp&&Math.abs(x)<tp?[h,0]:[b,x]};return o.isStepper=!0,o.dt=i,o},xF=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eE(e);case"spring":return pF();default:if(e.split("(")[0]==="cubic-bezier")return eE(e)}return typeof e=="function"?e:null};function bF(e){var t,a=()=>null,n=!1,i=null,o=d=>{if(!n){if(Array.isArray(d)){if(!d.length)return;var h=d,[m,...u]=h;if(typeof m=="number"){i=e.setTimeout(o.bind(null,u),m);return}o(m),i=e.setTimeout(o.bind(null,u));return}typeof d=="string"&&(t=d,a(t)),typeof d=="object"&&(t=d,a(t)),typeof d=="function"&&d()}};return{stop:()=>{n=!0},start:d=>{n=!1,i&&(i(),i=null),o(d)},subscribe:d=>(a=d,()=>{a=()=>null}),getTimeoutController:()=>e}}class gF{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,o=d=>{d-n>=a?t(d):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{i!=null&&cancelAnimationFrame(i)}}}function vF(){return bF(new gF)}var yF=g.createContext(vF);function jF(e,t){var a=g.useContext(yF);return g.useMemo(()=>t??a(e),[e,t,a])}var NF=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),nx={isSsr:NF()},wF={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},tE={t:0},Gg={t:1};function Iu(e){var t=ka(e,wF),{isActive:a,canBegin:n,duration:i,easing:o,begin:d,onAnimationEnd:h,onAnimationStart:m,children:u}=t,f=a==="auto"?!nx.isSsr:a,x=jF(t.animationId,t.animationManager),[b,v]=g.useState(f?tE:Gg),N=g.useRef(null);return g.useEffect(()=>{f||v(Gg)},[f]),g.useEffect(()=>{if(!f||!n)return jo;var j=dF(tE,Gg,xF(o),i,v,x.getTimeoutController()),_=()=>{N.current=j()};return x.start([m,d,_,i,h]),()=>{x.stop(),N.current&&N.current(),h()}},[f,n,i,o,d,m,h,x]),u(b.t)}function Pu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=g.useRef(su(t)),n=g.useRef(e);return n.current!==e&&(a.current=su(t),n.current=e),a.current}var _F=["radius"],kF=["radius"],rE,aE,nE,sE,lE,iE,oE,cE,dE,uE;function fE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function hE(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(a),!0).forEach(function(n){SF(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function SF(e,t,a){return(t=EF(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function EF(e){var t=TF(e,"string");return typeof t=="symbol"?t:t+""}function TF(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rp.apply(null,arguments)}function mE(e,t){if(e==null)return{};var a,n,i=CF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function CF(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function js(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pE=(e,t,a,n,i)=>{var o=oi(a),d=oi(n),h=Math.min(Math.abs(o)/2,Math.abs(d)/2),m=d>=0?1:-1,u=o>=0?1:-1,f=d>=0&&o>=0||d<0&&o<0?1:0,x;if(h>0&&Array.isArray(i)){for(var b=[0,0,0,0],v=0,N=4;v<N;v++){var j,_=(j=i[v])!==null&&j!==void 0?j:0;b[v]=_>h?h:_}x=Kr(rE||(rE=js(["M",",",""])),e,t+m*b[0]),b[0]>0&&(x+=Kr(aE||(aE=js(["A ",",",",0,0,",",",",",""])),b[0],b[0],f,e+u*b[0],t)),x+=Kr(nE||(nE=js(["L ",",",""])),e+a-u*b[1],t),b[1]>0&&(x+=Kr(sE||(sE=js(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],f,e+a,t+m*b[1])),x+=Kr(lE||(lE=js(["L ",",",""])),e+a,t+n-m*b[2]),b[2]>0&&(x+=Kr(iE||(iE=js(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],f,e+a-u*b[2],t+n)),x+=Kr(oE||(oE=js(["L ",",",""])),e+u*b[3],t+n),b[3]>0&&(x+=Kr(cE||(cE=js(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],f,e,t+n-m*b[3])),x+="Z"}else if(h>0&&i===+i&&i>0){var k=Math.min(h,i);x=Kr(dE||(dE=js(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*k,k,k,f,e+u*k,t,e+a-u*k,t,k,k,f,e+a,t+m*k,e+a,t+n-m*k,k,k,f,e+a-u*k,t+n,e+u*k,t+n,k,k,f,e,t+n-m*k)}else x=Kr(uE||(uE=js(["M ",","," h "," v "," h "," Z"])),e,t,a,n,-a);return x},xE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n3=e=>{var t=ka(e,xE),a=g.useRef(null),[n,i]=g.useState(-1);g.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var P=a.current.getTotalLength();P&&i(P)}catch{}},[]);var{x:o,y:d,width:h,height:m,radius:u,className:f}=t,{animationEasing:x,animationDuration:b,animationBegin:v,isAnimationActive:N,isUpdateAnimationActive:j}=t,_=g.useRef(h),k=g.useRef(m),E=g.useRef(o),C=g.useRef(d),S=g.useMemo(()=>({x:o,y:d,width:h,height:m,radius:u}),[o,d,h,m,u]),O=Pu(S,"rectangle-");if(o!==+o||d!==+d||h!==+h||m!==+m||h===0||m===0)return null;var I=nr("recharts-rectangle",f);if(!j){var L=Za(t),{radius:te}=L,H=mE(L,_F);return g.createElement("path",rp({},H,{x:oi(o),y:oi(d),width:oi(h),height:oi(m),radius:typeof u=="number"?u:void 0,className:I,d:pE(o,d,h,m,u)}))}var B=_.current,X=k.current,V=E.current,le=C.current,J="0px ".concat(n===-1?1:n,"px"),Z="".concat(n,"px 0px"),M=e3(["strokeDasharray"],b,typeof x=="string"?x:xE.animationEasing);return g.createElement(Iu,{animationId:O,key:O,canBegin:n>0,duration:b,easing:x,isActive:j,begin:v},P=>{var W=Pr(B,h,P),se=Pr(X,m,P),ue=Pr(V,o,P),D=Pr(le,d,P);a.current&&(_.current=W,k.current=se,E.current=ue,C.current=D);var U;N?P>0?U={transition:M,strokeDasharray:Z}:U={strokeDasharray:J}:U={strokeDasharray:Z};var re=Za(t),{radius:he}=re,Ne=mE(re,kF);return g.createElement("path",rp({},Ne,{radius:typeof u=="number"?u:void 0,className:I,d:pE(ue,D,W,se,u),ref:a,style:hE(hE({},U),t.style)}))})};function bE(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function gE(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(a),!0).forEach(function(n){AF(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bE(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function AF(e,t,a){return(t=OF(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OF(e){var t=MF(e,"string");return typeof t=="symbol"?t:t+""}function MF(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ap=Math.PI/180,IF=e=>e*180/Math.PI,oa=(e,t,a,n)=>({x:e+Math.cos(-ap*n)*a,y:t+Math.sin(-ap*n)*a}),s3=function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(a-(n.top||0)-(n.bottom||0)))/2},PF=(e,t)=>{var{x:a,y:n}=e,{x:i,y:o}=t;return Math.sqrt((a-i)**2+(n-o)**2)},DF=(e,t)=>{var{x:a,y:n}=e,{cx:i,cy:o}=t,d=PF({x:a,y:n},{x:i,y:o});if(d<=0)return{radius:d,angle:0};var h=(a-i)/d,m=Math.acos(h);return n>o&&(m=2*Math.PI-m),{radius:d,angle:IF(m),angleInRadian:m}},LF=e=>{var{startAngle:t,endAngle:a}=e,n=Math.floor(t/360),i=Math.floor(a/360),o=Math.min(n,i);return{startAngle:t-o*360,endAngle:a-o*360}},RF=(e,t)=>{var{startAngle:a,endAngle:n}=t,i=Math.floor(a/360),o=Math.floor(n/360),d=Math.min(i,o);return e+d*360},$F=(e,t)=>{var{chartX:a,chartY:n}=e,{radius:i,angle:o}=DF({x:a,y:n},t),{innerRadius:d,outerRadius:h}=t;if(i<d||i>h||i===0)return null;var{startAngle:m,endAngle:u}=LF(t),f=o,x;if(m<=u){for(;f>u;)f-=360;for(;f<m;)f+=360;x=f>=m&&f<=u}else{for(;f>m;)f-=360;for(;f<u;)f+=360;x=f>=u&&f<=m}return x?gE(gE({},t),{},{radius:i,angle:RF(f,t)}):null};function l3(e){var{cx:t,cy:a,radius:n,startAngle:i,endAngle:o}=e,d=oa(t,a,n,i),h=oa(t,a,n,o);return{points:[d,h],cx:t,cy:a,radius:n,startAngle:i,endAngle:o}}var vE,yE,jE,NE,wE,_E,kE;function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},dy.apply(null,arguments)}function Zi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zF=(e,t)=>{var a=Na(t-e),n=Math.min(Math.abs(t-e),359.999);return a*n},hh=e=>{var{cx:t,cy:a,radius:n,angle:i,sign:o,isExternal:d,cornerRadius:h,cornerIsExternal:m}=e,u=h*(d?1:-1)+n,f=Math.asin(h/u)/ap,x=m?i:i+o*f,b=oa(t,a,u,x),v=oa(t,a,n,x),N=m?i-o*f:i,j=oa(t,a,u*Math.cos(f*ap),N);return{center:b,circleTangency:v,lineTangency:j,theta:f}},i3=e=>{var{cx:t,cy:a,innerRadius:n,outerRadius:i,startAngle:o,endAngle:d}=e,h=zF(o,d),m=o+h,u=oa(t,a,i,o),f=oa(t,a,i,m),x=Kr(vE||(vE=Zi(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(h)>180),+(o>m),f.x,f.y);if(n>0){var b=oa(t,a,n,o),v=oa(t,a,n,m);x+=Kr(yE||(yE=Zi(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,n,n,+(Math.abs(h)>180),+(o<=m),b.x,b.y)}else x+=Kr(jE||(jE=Zi(["L ",","," Z"])),t,a);return x},BF=e=>{var{cx:t,cy:a,innerRadius:n,outerRadius:i,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:h,startAngle:m,endAngle:u}=e,f=Na(u-m),{circleTangency:x,lineTangency:b,theta:v}=hh({cx:t,cy:a,radius:i,angle:m,sign:f,cornerRadius:o,cornerIsExternal:h}),{circleTangency:N,lineTangency:j,theta:_}=hh({cx:t,cy:a,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:h}),k=h?Math.abs(m-u):Math.abs(m-u)-v-_;if(k<0)return d?Kr(NE||(NE=Zi(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):i3({cx:t,cy:a,innerRadius:n,outerRadius:i,startAngle:m,endAngle:u});var E=Kr(wE||(wE=Zi(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(f<0),x.x,x.y,i,i,+(k>180),+(f<0),N.x,N.y,o,o,+(f<0),j.x,j.y);if(n>0){var{circleTangency:C,lineTangency:S,theta:O}=hh({cx:t,cy:a,radius:n,angle:m,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),{circleTangency:I,lineTangency:L,theta:te}=hh({cx:t,cy:a,radius:n,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:h}),H=h?Math.abs(m-u):Math.abs(m-u)-O-te;if(H<0&&o===0)return"".concat(E,"L").concat(t,",").concat(a,"Z");E+=Kr(_E||(_E=Zi(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,o,o,+(f<0),I.x,I.y,n,n,+(H>180),+(f>0),C.x,C.y,o,o,+(f<0),S.x,S.y)}else E+=Kr(kE||(kE=Zi(["L",",","Z"])),t,a);return E},UF={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},o3=e=>{var t=ka(e,UF),{cx:a,cy:n,innerRadius:i,outerRadius:o,cornerRadius:d,forceCornerRadius:h,cornerIsExternal:m,startAngle:u,endAngle:f,className:x}=t;if(o<i||u===f)return null;var b=nr("recharts-sector",x),v=o-i,N=Fa(d,v,0,!0),j;return N>0&&Math.abs(u-f)<360?j=BF({cx:a,cy:n,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,v/2),forceCornerRadius:h,cornerIsExternal:m,startAngle:u,endAngle:f}):j=i3({cx:a,cy:n,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),g.createElement("path",dy({},Za(t),{className:b,d:j}))};function qF(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(U5(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:o,outerRadius:d,angle:h}=t,m=oa(n,i,o,h),u=oa(n,i,d,h);return[{x:m.x,y:m.y},{x:u.x,y:u.y}]}return l3(t)}}var Xg={},Wg={},Jg={},SE;function FF(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J5();function a(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=a})(Jg)),Jg}var EE;function HF(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FF();function a(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=a})(Wg)),Wg}var TE;function YF(){return TE||(TE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z5(),a=HF();function n(i,o,d){d&&typeof d!="number"&&t.isIterateeCall(i,o,d)&&(o=d=void 0),i=a.toFinite(i),o===void 0?(o=i,i=0):o=a.toFinite(o),d=d===void 0?i<o?1:-1:a.toFinite(d);const h=Math.max(Math.ceil((o-i)/(d||1)),0),m=new Array(h);for(let u=0;u<h;u++)m[u]=i,i+=d;return m}e.range=n})(Xg)),Xg}var Zg,CE;function KF(){return CE||(CE=1,Zg=YF().range),Zg}var VF=KF();const c3=ms(VF);function di(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wj(e){let t,a,n;e.length!==2?(t=di,a=(h,m)=>di(e(h),m),n=(h,m)=>e(h)-m):(t=e===di||e===GF?e:XF,a=e,n=e);function i(h,m,u=0,f=h.length){if(u<f){if(t(m,m)!==0)return f;do{const x=u+f>>>1;a(h[x],m)<0?u=x+1:f=x}while(u<f)}return u}function o(h,m,u=0,f=h.length){if(u<f){if(t(m,m)!==0)return f;do{const x=u+f>>>1;a(h[x],m)<=0?u=x+1:f=x}while(u<f)}return u}function d(h,m,u=0,f=h.length){const x=i(h,m,u,f-1);return x>u&&n(h[x-1],m)>-n(h[x],m)?x-1:x}return{left:i,center:d,right:o}}function XF(){return 0}function d3(e){return e===null?NaN:+e}function*WF(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const JF=wj(di),Du=JF.right;wj(d3).center;class AE extends Map{constructor(t,a=eH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(OE(this,t))}has(t){return super.has(OE(this,t))}set(t,a){return super.set(ZF(this,t),a)}delete(t){return super.delete(QF(this,t))}}function OE({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):a}function ZF({_intern:e,_key:t},a){const n=t(a);return e.has(n)?e.get(n):(e.set(n,a),a)}function QF({_intern:e,_key:t},a){const n=t(a);return e.has(n)&&(a=e.get(n),e.delete(n)),a}function eH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tH(e=di){if(e===di)return u3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,a)=>{const n=e(t,a);return n||n===0?n:(e(a,a)===0)-(e(t,t)===0)}}function u3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rH=Math.sqrt(50),aH=Math.sqrt(10),nH=Math.sqrt(2);function np(e,t,a){const n=(t-e)/Math.max(0,a),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),d=o>=rH?10:o>=aH?5:o>=nH?2:1;let h,m,u;return i<0?(u=Math.pow(10,-i)/d,h=Math.round(e*u),m=Math.round(t*u),h/u<e&&++h,m/u>t&&--m,u=-u):(u=Math.pow(10,i)*d,h=Math.round(e/u),m=Math.round(t/u),h*u<e&&++h,m*u>t&&--m),m<h&&.5<=a&&a<2?np(e,t,a*2):[h,m,u]}function uy(e,t,a){if(t=+t,e=+e,a=+a,!(a>0))return[];if(e===t)return[e];const n=t<e,[i,o,d]=n?np(t,e,a):np(e,t,a);if(!(o>=i))return[];const h=o-i+1,m=new Array(h);if(n)if(d<0)for(let u=0;u<h;++u)m[u]=(o-u)/-d;else for(let u=0;u<h;++u)m[u]=(o-u)*d;else if(d<0)for(let u=0;u<h;++u)m[u]=(i+u)/-d;else for(let u=0;u<h;++u)m[u]=(i+u)*d;return m}function fy(e,t,a){return t=+t,e=+e,a=+a,np(e,t,a)[2]}function hy(e,t,a){t=+t,e=+e,a=+a;const n=t<e,i=n?fy(t,e,a):fy(e,t,a);return(n?-1:1)*(i<0?1/-i:i)}function ME(e,t){let a;for(const n of e)n!=null&&(a<n||a===void 0&&n>=n)&&(a=n);return a}function IE(e,t){let a;for(const n of e)n!=null&&(a>n||a===void 0&&n>=n)&&(a=n);return a}function f3(e,t,a=0,n=1/0,i){if(t=Math.floor(t),a=Math.floor(Math.max(0,a)),n=Math.floor(Math.min(e.length-1,n)),!(a<=t&&t<=n))return e;for(i=i===void 0?u3:tH(i);n>a;){if(n-a>600){const m=n-a+1,u=t-a+1,f=Math.log(m),x=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*x*(m-x)/m)*(u-m/2<0?-1:1),v=Math.max(a,Math.floor(t-u*x/m+b)),N=Math.min(n,Math.floor(t+(m-u)*x/m+b));f3(e,t,v,N,i)}const o=e[t];let d=a,h=n;for(Bd(e,a,t),i(e[n],o)>0&&Bd(e,a,n);d<h;){for(Bd(e,d,h),++d,--h;i(e[d],o)<0;)++d;for(;i(e[h],o)>0;)--h}i(e[a],o)===0?Bd(e,a,h):(++h,Bd(e,h,n)),h<=t&&(a=h+1),t<=h&&(n=h-1)}return e}function Bd(e,t,a){const n=e[t];e[t]=e[a],e[a]=n}function sH(e,t,a){if(e=Float64Array.from(WF(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return IE(e);if(t>=1)return ME(e);var n,i=(n-1)*t,o=Math.floor(i),d=ME(f3(e,o).subarray(0,o+1)),h=IE(e.subarray(o+1));return d+(h-d)*(i-o)}}function lH(e,t,a=d3){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+a(e[0],0,e);if(t>=1)return+a(e[n-1],n-1,e);var n,i=(n-1)*t,o=Math.floor(i),d=+a(e[o],o,e),h=+a(e[o+1],o+1,e);return d+(h-d)*(i-o)}}function iH(e,t,a){e=+e,t=+t,a=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+a;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/a))|0,o=new Array(i);++n<i;)o[n]=e+n*a;return o}function ts(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function El(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const my=Symbol("implicit");function _j(){var e=new AE,t=[],a=[],n=my;function i(o){let d=e.get(o);if(d===void 0){if(n!==my)return n;e.set(o,d=t.push(o)-1)}return a[d%a.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new AE;for(const d of o)e.has(d)||e.set(d,t.push(d)-1);return i},i.range=function(o){return arguments.length?(a=Array.from(o),i):a.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return _j(t,a).unknown(n)},ts.apply(i,arguments),i}function kj(){var e=_j().unknown(void 0),t=e.domain,a=e.range,n=0,i=1,o,d,h=!1,m=0,u=0,f=.5;delete e.unknown;function x(){var b=t().length,v=i<n,N=v?i:n,j=v?n:i;o=(j-N)/Math.max(1,b-m+u*2),h&&(o=Math.floor(o)),N+=(j-N-o*(b-m))*f,d=o*(1-m),h&&(N=Math.round(N),d=Math.round(d));var _=iH(b).map(function(k){return N+o*k});return a(v?_.reverse():_)}return e.domain=function(b){return arguments.length?(t(b),x()):t()},e.range=function(b){return arguments.length?([n,i]=b,n=+n,i=+i,x()):[n,i]},e.rangeRound=function(b){return[n,i]=b,n=+n,i=+i,h=!0,x()},e.bandwidth=function(){return d},e.step=function(){return o},e.round=function(b){return arguments.length?(h=!!b,x()):h},e.padding=function(b){return arguments.length?(m=Math.min(1,u=+b),x()):m},e.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),x()):m},e.paddingOuter=function(b){return arguments.length?(u=+b,x()):u},e.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),x()):f},e.copy=function(){return kj(t(),[n,i]).round(h).paddingInner(m).paddingOuter(u).align(f)},ts.apply(x(),arguments)}function h3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h3(t())},e}function oH(){return h3(kj.apply(null,arguments).paddingInner(1))}function Sj(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function m3(e,t){var a=Object.create(e.prototype);for(var n in t)a[n]=t[n];return a}function Lu(){}var hu=.7,sp=1/hu,wc="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cH=/^#([0-9a-f]{3,8})$/,dH=new RegExp(`^rgb\\(${wc},${wc},${wc}\\)$`),uH=new RegExp(`^rgb\\(${Ps},${Ps},${Ps}\\)$`),fH=new RegExp(`^rgba\\(${wc},${wc},${wc},${mu}\\)$`),hH=new RegExp(`^rgba\\(${Ps},${Ps},${Ps},${mu}\\)$`),mH=new RegExp(`^hsl\\(${mu},${Ps},${Ps}\\)$`),pH=new RegExp(`^hsla\\(${mu},${Ps},${Ps},${mu}\\)$`),PE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sj(Lu,pu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:DE,formatHex:DE,formatHex8:xH,formatHsl:bH,formatRgb:LE,toString:LE});function DE(){return this.rgb().formatHex()}function xH(){return this.rgb().formatHex8()}function bH(){return p3(this).formatHsl()}function LE(){return this.rgb().formatRgb()}function pu(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=cH.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?RE(t):a===3?new un(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?mh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?mh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dH.exec(e))?new un(t[1],t[2],t[3],1):(t=uH.exec(e))?new un(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fH.exec(e))?mh(t[1],t[2],t[3],t[4]):(t=hH.exec(e))?mh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mH.exec(e))?BE(t[1],t[2]/100,t[3]/100,1):(t=pH.exec(e))?BE(t[1],t[2]/100,t[3]/100,t[4]):PE.hasOwnProperty(e)?RE(PE[e]):e==="transparent"?new un(NaN,NaN,NaN,0):null}function RE(e){return new un(e>>16&255,e>>8&255,e&255,1)}function mh(e,t,a,n){return n<=0&&(e=t=a=NaN),new un(e,t,a,n)}function gH(e){return e instanceof Lu||(e=pu(e)),e?(e=e.rgb(),new un(e.r,e.g,e.b,e.opacity)):new un}function py(e,t,a,n){return arguments.length===1?gH(e):new un(e,t,a,n??1)}function un(e,t,a,n){this.r=+e,this.g=+t,this.b=+a,this.opacity=+n}Sj(un,py,m3(Lu,{brighter(e){return e=e==null?sp:Math.pow(sp,e),new un(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hu:Math.pow(hu,e),new un(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new un(so(this.r),so(this.g),so(this.b),lp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$E,formatHex:$E,formatHex8:vH,formatRgb:zE,toString:zE}));function $E(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}`}function vH(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}${Qi((isNaN(this.opacity)?1:this.opacity)*255)}`}function zE(){const e=lp(this.opacity);return`${e===1?"rgb(":"rgba("}${so(this.r)}, ${so(this.g)}, ${so(this.b)}${e===1?")":`, ${e})`}`}function lp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function so(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qi(e){return e=so(e),(e<16?"0":"")+e.toString(16)}function BE(e,t,a,n){return n<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new ds(e,t,a,n)}function p3(e){if(e instanceof ds)return new ds(e.h,e.s,e.l,e.opacity);if(e instanceof Lu||(e=pu(e)),!e)return new ds;if(e instanceof ds)return e;e=e.rgb();var t=e.r/255,a=e.g/255,n=e.b/255,i=Math.min(t,a,n),o=Math.max(t,a,n),d=NaN,h=o-i,m=(o+i)/2;return h?(t===o?d=(a-n)/h+(a<n)*6:a===o?d=(n-t)/h+2:d=(t-a)/h+4,h/=m<.5?o+i:2-o-i,d*=60):h=m>0&&m<1?0:d,new ds(d,h,m,e.opacity)}function yH(e,t,a,n){return arguments.length===1?p3(e):new ds(e,t,a,n??1)}function ds(e,t,a,n){this.h=+e,this.s=+t,this.l=+a,this.opacity=+n}Sj(ds,yH,m3(Lu,{brighter(e){return e=e==null?sp:Math.pow(sp,e),new ds(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hu:Math.pow(hu,e),new ds(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*t,i=2*a-n;return new un(Qg(e>=240?e-240:e+120,i,n),Qg(e,i,n),Qg(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ds(UE(this.h),ph(this.s),ph(this.l),lp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lp(this.opacity);return`${e===1?"hsl(":"hsla("}${UE(this.h)}, ${ph(this.s)*100}%, ${ph(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UE(e){return e=(e||0)%360,e<0?e+360:e}function ph(e){return Math.max(0,Math.min(1,e||0))}function Qg(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const Ej=e=>()=>e;function jH(e,t){return function(a){return e+a*t}}function NH(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(n){return Math.pow(e+n*t,a)}}function wH(e){return(e=+e)==1?x3:function(t,a){return a-t?NH(t,a,e):Ej(isNaN(t)?a:t)}}function x3(e,t){var a=t-e;return a?jH(e,a):Ej(isNaN(e)?t:e)}const qE=(function e(t){var a=wH(t);function n(i,o){var d=a((i=py(i)).r,(o=py(o)).r),h=a(i.g,o.g),m=a(i.b,o.b),u=x3(i.opacity,o.opacity);return function(f){return i.r=d(f),i.g=h(f),i.b=m(f),i.opacity=u(f),i+""}}return n.gamma=e,n})(1);function _H(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<a;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function kH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SH(e,t){var a=t?t.length:0,n=e?Math.min(a,e.length):0,i=new Array(n),o=new Array(a),d;for(d=0;d<n;++d)i[d]=Uc(e[d],t[d]);for(;d<a;++d)o[d]=t[d];return function(h){for(d=0;d<n;++d)o[d]=i[d](h);return o}}function EH(e,t){var a=new Date;return e=+e,t=+t,function(n){return a.setTime(e*(1-n)+t*n),a}}function ip(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function TH(e,t){var a={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?a[i]=Uc(e[i],t[i]):n[i]=t[i];return function(o){for(i in a)n[i]=a[i](o);return n}}var xy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ev=new RegExp(xy.source,"g");function CH(e){return function(){return e}}function AH(e){return function(t){return e(t)+""}}function OH(e,t){var a=xy.lastIndex=ev.lastIndex=0,n,i,o,d=-1,h=[],m=[];for(e=e+"",t=t+"";(n=xy.exec(e))&&(i=ev.exec(t));)(o=i.index)>a&&(o=t.slice(a,o),h[d]?h[d]+=o:h[++d]=o),(n=n[0])===(i=i[0])?h[d]?h[d]+=i:h[++d]=i:(h[++d]=null,m.push({i:d,x:ip(n,i)})),a=ev.lastIndex;return a<t.length&&(o=t.slice(a),h[d]?h[d]+=o:h[++d]=o),h.length<2?m[0]?AH(m[0].x):CH(t):(t=m.length,function(u){for(var f=0,x;f<t;++f)h[(x=m[f]).i]=x.x(u);return h.join("")})}function Uc(e,t){var a=typeof t,n;return t==null||a==="boolean"?Ej(t):(a==="number"?ip:a==="string"?(n=pu(t))?(t=n,qE):OH:t instanceof pu?qE:t instanceof Date?EH:kH(t)?_H:Array.isArray(t)?SH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TH:ip)(e,t)}function Tj(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function MH(e,t){t===void 0&&(t=e,e=Uc);for(var a=0,n=t.length-1,i=t[0],o=new Array(n<0?0:n);a<n;)o[a]=e(i,i=t[++a]);return function(d){var h=Math.max(0,Math.min(n-1,Math.floor(d*=n)));return o[h](d-h)}}function IH(e){return function(){return e}}function op(e){return+e}var FE=[0,1];function Wa(e){return e}function by(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:IH(isNaN(t)?NaN:.5)}function PH(e,t){var a;return e>t&&(a=e,e=t,t=a),function(n){return Math.max(e,Math.min(t,n))}}function DH(e,t,a){var n=e[0],i=e[1],o=t[0],d=t[1];return i<n?(n=by(i,n),o=a(d,o)):(n=by(n,i),o=a(o,d)),function(h){return o(n(h))}}function LH(e,t,a){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),d=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<n;)i[d]=by(e[d],e[d+1]),o[d]=a(t[d],t[d+1]);return function(h){var m=Du(e,h,1,n)-1;return o[m](i[m](h))}}function Ru(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sx(){var e=FE,t=FE,a=Uc,n,i,o,d=Wa,h,m,u;function f(){var b=Math.min(e.length,t.length);return d!==Wa&&(d=PH(e[0],e[b-1])),h=b>2?LH:DH,m=u=null,x}function x(b){return b==null||isNaN(b=+b)?o:(m||(m=h(e.map(n),t,a)))(n(d(b)))}return x.invert=function(b){return d(i((u||(u=h(t,e.map(n),ip)))(b)))},x.domain=function(b){return arguments.length?(e=Array.from(b,op),f()):e.slice()},x.range=function(b){return arguments.length?(t=Array.from(b),f()):t.slice()},x.rangeRound=function(b){return t=Array.from(b),a=Tj,f()},x.clamp=function(b){return arguments.length?(d=b?!0:Wa,f()):d!==Wa},x.interpolate=function(b){return arguments.length?(a=b,f()):a},x.unknown=function(b){return arguments.length?(o=b,x):o},function(b,v){return n=b,i=v,f()}}function Cj(){return sx()(Wa,Wa)}function RH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function cp(e,t){if(!isFinite(e)||e===0)return null;var a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+e.slice(a+1)]}function Mc(e){return e=cp(Math.abs(e)),e?e[1]:NaN}function $H(e,t){return function(a,n){for(var i=a.length,o=[],d=0,h=e[0],m=0;i>0&&h>0&&(m+h+1>n&&(h=Math.max(1,n-m)),o.push(a.substring(i-=h,i+h)),!((m+=h+1)>n));)h=e[d=(d+1)%e.length];return o.reverse().join(t)}}function zH(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var BH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xu(e){if(!(t=BH.exec(e)))throw new Error("invalid format: "+e);var t;return new Aj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xu.prototype=Aj.prototype;function Aj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Aj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UH(e){e:for(var t=e.length,a=1,n=-1,i;a<t;++a)switch(e[a]){case".":n=i=a;break;case"0":n===0&&(n=a),i=a;break;default:if(!+e[a])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var dp;function qH(e,t){var a=cp(e,t);if(!a)return dp=void 0,e.toPrecision(t);var n=a[0],i=a[1],o=i-(dp=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,d=n.length;return o===d?n:o>d?n+new Array(o-d+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+cp(e,Math.max(0,t+o-1))[0]}function HE(e,t){var a=cp(e,t);if(!a)return e+"";var n=a[0],i=a[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const YE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:RH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HE(e*100,t),r:HE,s:qH,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KE(e){return e}var VE=Array.prototype.map,GE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FH(e){var t=e.grouping===void 0||e.thousands===void 0?KE:$H(VE.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?KE:zH(VE.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function u(x,b){x=xu(x);var v=x.fill,N=x.align,j=x.sign,_=x.symbol,k=x.zero,E=x.width,C=x.comma,S=x.precision,O=x.trim,I=x.type;I==="n"?(C=!0,I="g"):YE[I]||(S===void 0&&(S=12),O=!0,I="g"),(k||v==="0"&&N==="=")&&(k=!0,v="0",N="=");var L=(b&&b.prefix!==void 0?b.prefix:"")+(_==="$"?a:_==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),te=(_==="$"?n:/[%p]/.test(I)?d:"")+(b&&b.suffix!==void 0?b.suffix:""),H=YE[I],B=/[defgprs%]/.test(I);S=S===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function X(V){var le=L,J=te,Z,M,P;if(I==="c")J=H(V)+J,V="";else{V=+V;var W=V<0||1/V<0;if(V=isNaN(V)?m:H(Math.abs(V),S),O&&(V=UH(V)),W&&+V==0&&j!=="+"&&(W=!1),le=(W?j==="("?j:h:j==="-"||j==="("?"":j)+le,J=(I==="s"&&!isNaN(V)&&dp!==void 0?GE[8+dp/3]:"")+J+(W&&j==="("?")":""),B){for(Z=-1,M=V.length;++Z<M;)if(P=V.charCodeAt(Z),48>P||P>57){J=(P===46?i+V.slice(Z+1):V.slice(Z))+J,V=V.slice(0,Z);break}}}C&&!k&&(V=t(V,1/0));var se=le.length+V.length+J.length,ue=se<E?new Array(E-se+1).join(v):"";switch(C&&k&&(V=t(ue+V,ue.length?E-J.length:1/0),ue=""),N){case"<":V=le+V+J+ue;break;case"=":V=le+ue+V+J;break;case"^":V=ue.slice(0,se=ue.length>>1)+le+V+J+ue.slice(se);break;default:V=ue+le+V+J;break}return o(V)}return X.toString=function(){return x+""},X}function f(x,b){var v=Math.max(-8,Math.min(8,Math.floor(Mc(b)/3)))*3,N=Math.pow(10,-v),j=u((x=xu(x),x.type="f",x),{suffix:GE[8+v/3]});return function(_){return j(N*_)}}return{format:u,formatPrefix:f}}var xh,Oj,b3;HH({thousands:",",grouping:[3],currency:["$",""]});function HH(e){return xh=FH(e),Oj=xh.format,b3=xh.formatPrefix,xh}function YH(e){return Math.max(0,-Mc(Math.abs(e)))}function KH(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mc(t)/3)))*3-Mc(Math.abs(e)))}function VH(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Mc(t)-Mc(e))+1}function g3(e,t,a,n){var i=hy(e,t,a),o;switch(n=xu(n??",f"),n.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=KH(i,d))&&(n.precision=o),b3(n,d)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=VH(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=YH(i))&&(n.precision=o-(n.type==="%")*2);break}}return Oj(n)}function bi(e){var t=e.domain;return e.ticks=function(a){var n=t();return uy(n[0],n[n.length-1],a??10)},e.tickFormat=function(a,n){var i=t();return g3(i[0],i[i.length-1],a??10,n)},e.nice=function(a){a==null&&(a=10);var n=t(),i=0,o=n.length-1,d=n[i],h=n[o],m,u,f=10;for(h<d&&(u=d,d=h,h=u,u=i,i=o,o=u);f-- >0;){if(u=fy(d,h,a),u===m)return n[i]=d,n[o]=h,t(n);if(u>0)d=Math.floor(d/u)*u,h=Math.ceil(h/u)*u;else if(u<0)d=Math.ceil(d*u)/u,h=Math.floor(h*u)/u;else break;m=u}return e},e}function v3(){var e=Cj();return e.copy=function(){return Ru(e,v3())},ts.apply(e,arguments),bi(e)}function y3(e){var t;function a(n){return n==null||isNaN(n=+n)?t:n}return a.invert=a,a.domain=a.range=function(n){return arguments.length?(e=Array.from(n,op),a):e.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.copy=function(){return y3(e).unknown(t)},e=arguments.length?Array.from(e,op):[0,1],bi(a)}function j3(e,t){e=e.slice();var a=0,n=e.length-1,i=e[a],o=e[n],d;return o<i&&(d=a,a=n,n=d,d=i,i=o,o=d),e[a]=t.floor(i),e[n]=t.ceil(o),e}function XE(e){return Math.log(e)}function WE(e){return Math.exp(e)}function GH(e){return-Math.log(-e)}function XH(e){return-Math.exp(-e)}function WH(e){return isFinite(e)?+("1e"+e):e<0?0:e}function JH(e){return e===10?WH:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ZH(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function JE(e){return(t,a)=>-e(-t,a)}function Mj(e){const t=e(XE,WE),a=t.domain;let n=10,i,o;function d(){return i=ZH(n),o=JH(n),a()[0]<0?(i=JE(i),o=JE(o),e(GH,XH)):e(XE,WE),t}return t.base=function(h){return arguments.length?(n=+h,d()):n},t.domain=function(h){return arguments.length?(a(h),d()):a()},t.ticks=h=>{const m=a();let u=m[0],f=m[m.length-1];const x=f<u;x&&([u,f]=[f,u]);let b=i(u),v=i(f),N,j;const _=h==null?10:+h;let k=[];if(!(n%1)&&v-b<_){if(b=Math.floor(b),v=Math.ceil(v),u>0){for(;b<=v;++b)for(N=1;N<n;++N)if(j=b<0?N/o(-b):N*o(b),!(j<u)){if(j>f)break;k.push(j)}}else for(;b<=v;++b)for(N=n-1;N>=1;--N)if(j=b>0?N/o(-b):N*o(b),!(j<u)){if(j>f)break;k.push(j)}k.length*2<_&&(k=uy(u,f,_))}else k=uy(b,v,Math.min(v-b,_)).map(o);return x?k.reverse():k},t.tickFormat=(h,m)=>{if(h==null&&(h=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=xu(m)).precision==null&&(m.trim=!0),m=Oj(m)),h===1/0)return m;const u=Math.max(1,n*h/t.ticks().length);return f=>{let x=f/o(Math.round(i(f)));return x*n<n-.5&&(x*=n),x<=u?m(f):""}},t.nice=()=>a(j3(a(),{floor:h=>o(Math.floor(i(h))),ceil:h=>o(Math.ceil(i(h)))})),t}function N3(){const e=Mj(sx()).domain([1,10]);return e.copy=()=>Ru(e,N3()).base(e.base()),ts.apply(e,arguments),e}function ZE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ij(e){var t=1,a=e(ZE(t),QE(t));return a.constant=function(n){return arguments.length?e(ZE(t=+n),QE(t)):t},bi(a)}function w3(){var e=Ij(sx());return e.copy=function(){return Ru(e,w3()).constant(e.constant())},ts.apply(e,arguments)}function eT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function QH(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eY(e){return e<0?-e*e:e*e}function Pj(e){var t=e(Wa,Wa),a=1;function n(){return a===1?e(Wa,Wa):a===.5?e(QH,eY):e(eT(a),eT(1/a))}return t.exponent=function(i){return arguments.length?(a=+i,n()):a},bi(t)}function Dj(){var e=Pj(sx());return e.copy=function(){return Ru(e,Dj()).exponent(e.exponent())},ts.apply(e,arguments),e}function tY(){return Dj.apply(null,arguments).exponent(.5)}function tT(e){return Math.sign(e)*e*e}function rY(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _3(){var e=Cj(),t=[0,1],a=!1,n;function i(o){var d=rY(e(o));return isNaN(d)?n:a?Math.round(d):d}return i.invert=function(o){return e.invert(tT(o))},i.domain=function(o){return arguments.length?(e.domain(o),i):e.domain()},i.range=function(o){return arguments.length?(e.range((t=Array.from(o,op)).map(tT)),i):t.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(a=!!o,i):a},i.clamp=function(o){return arguments.length?(e.clamp(o),i):e.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return _3(e.domain(),t).round(a).clamp(e.clamp()).unknown(n)},ts.apply(i,arguments),bi(i)}function k3(){var e=[],t=[],a=[],n;function i(){var d=0,h=Math.max(1,t.length);for(a=new Array(h-1);++d<h;)a[d-1]=lH(e,d/h);return o}function o(d){return d==null||isNaN(d=+d)?n:t[Du(a,d)]}return o.invertExtent=function(d){var h=t.indexOf(d);return h<0?[NaN,NaN]:[h>0?a[h-1]:e[0],h<a.length?a[h]:e[e.length-1]]},o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let h of d)h!=null&&!isNaN(h=+h)&&e.push(h);return e.sort(di),i()},o.range=function(d){return arguments.length?(t=Array.from(d),i()):t.slice()},o.unknown=function(d){return arguments.length?(n=d,o):n},o.quantiles=function(){return a.slice()},o.copy=function(){return k3().domain(e).range(t).unknown(n)},ts.apply(o,arguments)}function S3(){var e=0,t=1,a=1,n=[.5],i=[0,1],o;function d(m){return m!=null&&m<=m?i[Du(n,m,0,a)]:o}function h(){var m=-1;for(n=new Array(a);++m<a;)n[m]=((m+1)*t-(m-a)*e)/(a+1);return d}return d.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,h()):[e,t]},d.range=function(m){return arguments.length?(a=(i=Array.from(m)).length-1,h()):i.slice()},d.invertExtent=function(m){var u=i.indexOf(m);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=a?[n[a-1],t]:[n[u-1],n[u]]},d.unknown=function(m){return arguments.length&&(o=m),d},d.thresholds=function(){return n.slice()},d.copy=function(){return S3().domain([e,t]).range(i).unknown(o)},ts.apply(bi(d),arguments)}function E3(){var e=[.5],t=[0,1],a,n=1;function i(o){return o!=null&&o<=o?t[Du(e,o,0,n)]:a}return i.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var d=t.indexOf(o);return[e[d-1],e[d]]},i.unknown=function(o){return arguments.length?(a=o,i):a},i.copy=function(){return E3().domain(e).range(t).unknown(a)},ts.apply(i,arguments)}const tv=new Date,rv=new Date;function xa(e,t,a,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const d=i(o),h=i.ceil(o);return o-d<h-o?d:h},i.offset=(o,d)=>(t(o=new Date(+o),d==null?1:Math.floor(d)),o),i.range=(o,d,h)=>{const m=[];if(o=i.ceil(o),h=h==null?1:Math.floor(h),!(o<d)||!(h>0))return m;let u;do m.push(u=new Date(+o)),t(o,h),e(o);while(u<o&&o<d);return m},i.filter=o=>xa(d=>{if(d>=d)for(;e(d),!o(d);)d.setTime(d-1)},(d,h)=>{if(d>=d)if(h<0)for(;++h<=0;)for(;t(d,-1),!o(d););else for(;--h>=0;)for(;t(d,1),!o(d););}),a&&(i.count=(o,d)=>(tv.setTime(+o),rv.setTime(+d),e(tv),e(rv),Math.floor(a(tv,rv))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?d=>n(d)%o===0:d=>i.count(0,d)%o===0):i)),i}const up=xa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);up.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xa(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):up);up.range;const fl=1e3,Jn=fl*60,hl=Jn*60,gl=hl*24,Lj=gl*7,rT=gl*30,av=gl*365,eo=xa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*fl)},(e,t)=>(t-e)/fl,e=>e.getUTCSeconds());eo.range;const Rj=xa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fl)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getMinutes());Rj.range;const $j=xa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getUTCMinutes());$j.range;const zj=xa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*fl-e.getMinutes()*Jn)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getHours());zj.range;const Bj=xa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getUTCHours());Bj.range;const $u=xa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jn)/gl,e=>e.getDate()-1);$u.range;const lx=xa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gl,e=>e.getUTCDate()-1);lx.range;const T3=xa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gl,e=>Math.floor(e/gl));T3.range;function wo(e){return xa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*Jn)/Lj)}const ix=wo(0),fp=wo(1),aY=wo(2),nY=wo(3),Ic=wo(4),sY=wo(5),lY=wo(6);ix.range;fp.range;aY.range;nY.range;Ic.range;sY.range;lY.range;function _o(e){return xa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/Lj)}const ox=_o(0),hp=_o(1),iY=_o(2),oY=_o(3),Pc=_o(4),cY=_o(5),dY=_o(6);ox.range;hp.range;iY.range;oY.range;Pc.range;cY.range;dY.range;const Uj=xa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Uj.range;const qj=xa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qj.range;const vl=xa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});vl.range;const yl=xa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});yl.range;function C3(e,t,a,n,i,o){const d=[[eo,1,fl],[eo,5,5*fl],[eo,15,15*fl],[eo,30,30*fl],[o,1,Jn],[o,5,5*Jn],[o,15,15*Jn],[o,30,30*Jn],[i,1,hl],[i,3,3*hl],[i,6,6*hl],[i,12,12*hl],[n,1,gl],[n,2,2*gl],[a,1,Lj],[t,1,rT],[t,3,3*rT],[e,1,av]];function h(u,f,x){const b=f<u;b&&([u,f]=[f,u]);const v=x&&typeof x.range=="function"?x:m(u,f,x),N=v?v.range(u,+f+1):[];return b?N.reverse():N}function m(u,f,x){const b=Math.abs(f-u)/x,v=wj(([,,_])=>_).right(d,b);if(v===d.length)return e.every(hy(u/av,f/av,x));if(v===0)return up.every(Math.max(hy(u,f,x),1));const[N,j]=d[b/d[v-1][2]<d[v][2]/b?v-1:v];return N.every(j)}return[h,m]}const[uY,fY]=C3(yl,qj,ox,T3,Bj,$j),[hY,mY]=C3(vl,Uj,ix,$u,zj,Rj);function nv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ud(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function pY(e){var t=e.dateTime,a=e.date,n=e.time,i=e.periods,o=e.days,d=e.shortDays,h=e.months,m=e.shortMonths,u=qd(i),f=Fd(i),x=qd(o),b=Fd(o),v=qd(d),N=Fd(d),j=qd(h),_=Fd(h),k=qd(m),E=Fd(m),C={a:P,A:W,b:se,B:ue,c:null,d:oT,e:oT,f:$Y,g:GY,G:WY,H:DY,I:LY,j:RY,L:A3,m:zY,M:BY,p:D,q:U,Q:uT,s:fT,S:UY,u:qY,U:FY,V:HY,w:YY,W:KY,x:null,X:null,y:VY,Y:XY,Z:JY,"%":dT},S={a:re,A:he,b:Ne,B:Y,c:null,d:cT,e:cT,f:tK,g:uK,G:hK,H:ZY,I:QY,j:eK,L:M3,m:rK,M:aK,p:me,q:z,Q:uT,s:fT,S:nK,u:sK,U:lK,V:iK,w:oK,W:cK,x:null,X:null,y:dK,Y:fK,Z:mK,"%":dT},O={a:B,A:X,b:V,B:le,c:J,d:lT,e:lT,f:OY,g:sT,G:nT,H:iT,I:iT,j:EY,L:AY,m:SY,M:TY,p:H,q:kY,Q:IY,s:PY,S:CY,u:yY,U:jY,V:NY,w:vY,W:wY,x:Z,X:M,y:sT,Y:nT,Z:_Y,"%":MY};C.x=I(a,C),C.X=I(n,C),C.c=I(t,C),S.x=I(a,S),S.X=I(n,S),S.c=I(t,S);function I(F,ye){return function(Ae){var be=[],Me=-1,Oe=0,ve=F.length,$,ce,ie;for(Ae instanceof Date||(Ae=new Date(+Ae));++Me<ve;)F.charCodeAt(Me)===37&&(be.push(F.slice(Oe,Me)),(ce=aT[$=F.charAt(++Me)])!=null?$=F.charAt(++Me):ce=$==="e"?" ":"0",(ie=ye[$])&&($=ie(Ae,ce)),be.push($),Oe=Me+1);return be.push(F.slice(Oe,Me)),be.join("")}}function L(F,ye){return function(Ae){var be=Ud(1900,void 0,1),Me=te(be,F,Ae+="",0),Oe,ve;if(Me!=Ae.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ye&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Oe=sv(Ud(be.y,0,1)),ve=Oe.getUTCDay(),Oe=ve>4||ve===0?hp.ceil(Oe):hp(Oe),Oe=lx.offset(Oe,(be.V-1)*7),be.y=Oe.getUTCFullYear(),be.m=Oe.getUTCMonth(),be.d=Oe.getUTCDate()+(be.w+6)%7):(Oe=nv(Ud(be.y,0,1)),ve=Oe.getDay(),Oe=ve>4||ve===0?fp.ceil(Oe):fp(Oe),Oe=$u.offset(Oe,(be.V-1)*7),be.y=Oe.getFullYear(),be.m=Oe.getMonth(),be.d=Oe.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),ve="Z"in be?sv(Ud(be.y,0,1)).getUTCDay():nv(Ud(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(ve+5)%7:be.w+be.U*7-(ve+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,sv(be)):nv(be)}}function te(F,ye,Ae,be){for(var Me=0,Oe=ye.length,ve=Ae.length,$,ce;Me<Oe;){if(be>=ve)return-1;if($=ye.charCodeAt(Me++),$===37){if($=ye.charAt(Me++),ce=O[$ in aT?ye.charAt(Me++):$],!ce||(be=ce(F,Ae,be))<0)return-1}else if($!=Ae.charCodeAt(be++))return-1}return be}function H(F,ye,Ae){var be=u.exec(ye.slice(Ae));return be?(F.p=f.get(be[0].toLowerCase()),Ae+be[0].length):-1}function B(F,ye,Ae){var be=v.exec(ye.slice(Ae));return be?(F.w=N.get(be[0].toLowerCase()),Ae+be[0].length):-1}function X(F,ye,Ae){var be=x.exec(ye.slice(Ae));return be?(F.w=b.get(be[0].toLowerCase()),Ae+be[0].length):-1}function V(F,ye,Ae){var be=k.exec(ye.slice(Ae));return be?(F.m=E.get(be[0].toLowerCase()),Ae+be[0].length):-1}function le(F,ye,Ae){var be=j.exec(ye.slice(Ae));return be?(F.m=_.get(be[0].toLowerCase()),Ae+be[0].length):-1}function J(F,ye,Ae){return te(F,t,ye,Ae)}function Z(F,ye,Ae){return te(F,a,ye,Ae)}function M(F,ye,Ae){return te(F,n,ye,Ae)}function P(F){return d[F.getDay()]}function W(F){return o[F.getDay()]}function se(F){return m[F.getMonth()]}function ue(F){return h[F.getMonth()]}function D(F){return i[+(F.getHours()>=12)]}function U(F){return 1+~~(F.getMonth()/3)}function re(F){return d[F.getUTCDay()]}function he(F){return o[F.getUTCDay()]}function Ne(F){return m[F.getUTCMonth()]}function Y(F){return h[F.getUTCMonth()]}function me(F){return i[+(F.getUTCHours()>=12)]}function z(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var ye=I(F+="",C);return ye.toString=function(){return F},ye},parse:function(F){var ye=L(F+="",!1);return ye.toString=function(){return F},ye},utcFormat:function(F){var ye=I(F+="",S);return ye.toString=function(){return F},ye},utcParse:function(F){var ye=L(F+="",!0);return ye.toString=function(){return F},ye}}}var aT={"-":"",_:" ",0:"0"},Sa=/^\s*\d+/,xY=/^%/,bY=/[\\^$*+?|[\]().{}]/g;function Qt(e,t,a){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<a?new Array(a-o+1).join(t)+i:i)}function gY(e){return e.replace(bY,"\\$&")}function qd(e){return new RegExp("^(?:"+e.map(gY).join("|")+")","i")}function Fd(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function vY(e,t,a){var n=Sa.exec(t.slice(a,a+1));return n?(e.w=+n[0],a+n[0].length):-1}function yY(e,t,a){var n=Sa.exec(t.slice(a,a+1));return n?(e.u=+n[0],a+n[0].length):-1}function jY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.U=+n[0],a+n[0].length):-1}function NY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.V=+n[0],a+n[0].length):-1}function wY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.W=+n[0],a+n[0].length):-1}function nT(e,t,a){var n=Sa.exec(t.slice(a,a+4));return n?(e.y=+n[0],a+n[0].length):-1}function sT(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),a+n[0].length):-1}function _Y(e,t,a){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),a+n[0].length):-1}function kY(e,t,a){var n=Sa.exec(t.slice(a,a+1));return n?(e.q=n[0]*3-3,a+n[0].length):-1}function SY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.m=n[0]-1,a+n[0].length):-1}function lT(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.d=+n[0],a+n[0].length):-1}function EY(e,t,a){var n=Sa.exec(t.slice(a,a+3));return n?(e.m=0,e.d=+n[0],a+n[0].length):-1}function iT(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.H=+n[0],a+n[0].length):-1}function TY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.M=+n[0],a+n[0].length):-1}function CY(e,t,a){var n=Sa.exec(t.slice(a,a+2));return n?(e.S=+n[0],a+n[0].length):-1}function AY(e,t,a){var n=Sa.exec(t.slice(a,a+3));return n?(e.L=+n[0],a+n[0].length):-1}function OY(e,t,a){var n=Sa.exec(t.slice(a,a+6));return n?(e.L=Math.floor(n[0]/1e3),a+n[0].length):-1}function MY(e,t,a){var n=xY.exec(t.slice(a,a+1));return n?a+n[0].length:-1}function IY(e,t,a){var n=Sa.exec(t.slice(a));return n?(e.Q=+n[0],a+n[0].length):-1}function PY(e,t,a){var n=Sa.exec(t.slice(a));return n?(e.s=+n[0],a+n[0].length):-1}function oT(e,t){return Qt(e.getDate(),t,2)}function DY(e,t){return Qt(e.getHours(),t,2)}function LY(e,t){return Qt(e.getHours()%12||12,t,2)}function RY(e,t){return Qt(1+$u.count(vl(e),e),t,3)}function A3(e,t){return Qt(e.getMilliseconds(),t,3)}function $Y(e,t){return A3(e,t)+"000"}function zY(e,t){return Qt(e.getMonth()+1,t,2)}function BY(e,t){return Qt(e.getMinutes(),t,2)}function UY(e,t){return Qt(e.getSeconds(),t,2)}function qY(e){var t=e.getDay();return t===0?7:t}function FY(e,t){return Qt(ix.count(vl(e)-1,e),t,2)}function O3(e){var t=e.getDay();return t>=4||t===0?Ic(e):Ic.ceil(e)}function HY(e,t){return e=O3(e),Qt(Ic.count(vl(e),e)+(vl(e).getDay()===4),t,2)}function YY(e){return e.getDay()}function KY(e,t){return Qt(fp.count(vl(e)-1,e),t,2)}function VY(e,t){return Qt(e.getFullYear()%100,t,2)}function GY(e,t){return e=O3(e),Qt(e.getFullYear()%100,t,2)}function XY(e,t){return Qt(e.getFullYear()%1e4,t,4)}function WY(e,t){var a=e.getDay();return e=a>=4||a===0?Ic(e):Ic.ceil(e),Qt(e.getFullYear()%1e4,t,4)}function JY(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qt(t/60|0,"0",2)+Qt(t%60,"0",2)}function cT(e,t){return Qt(e.getUTCDate(),t,2)}function ZY(e,t){return Qt(e.getUTCHours(),t,2)}function QY(e,t){return Qt(e.getUTCHours()%12||12,t,2)}function eK(e,t){return Qt(1+lx.count(yl(e),e),t,3)}function M3(e,t){return Qt(e.getUTCMilliseconds(),t,3)}function tK(e,t){return M3(e,t)+"000"}function rK(e,t){return Qt(e.getUTCMonth()+1,t,2)}function aK(e,t){return Qt(e.getUTCMinutes(),t,2)}function nK(e,t){return Qt(e.getUTCSeconds(),t,2)}function sK(e){var t=e.getUTCDay();return t===0?7:t}function lK(e,t){return Qt(ox.count(yl(e)-1,e),t,2)}function I3(e){var t=e.getUTCDay();return t>=4||t===0?Pc(e):Pc.ceil(e)}function iK(e,t){return e=I3(e),Qt(Pc.count(yl(e),e)+(yl(e).getUTCDay()===4),t,2)}function oK(e){return e.getUTCDay()}function cK(e,t){return Qt(hp.count(yl(e)-1,e),t,2)}function dK(e,t){return Qt(e.getUTCFullYear()%100,t,2)}function uK(e,t){return e=I3(e),Qt(e.getUTCFullYear()%100,t,2)}function fK(e,t){return Qt(e.getUTCFullYear()%1e4,t,4)}function hK(e,t){var a=e.getUTCDay();return e=a>=4||a===0?Pc(e):Pc.ceil(e),Qt(e.getUTCFullYear()%1e4,t,4)}function mK(){return"+0000"}function dT(){return"%"}function uT(e){return+e}function fT(e){return Math.floor(+e/1e3)}var dc,P3,D3;pK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pK(e){return dc=pY(e),P3=dc.format,dc.parse,D3=dc.utcFormat,dc.utcParse,dc}function xK(e){return new Date(e)}function bK(e){return e instanceof Date?+e:+new Date(+e)}function Fj(e,t,a,n,i,o,d,h,m,u){var f=Cj(),x=f.invert,b=f.domain,v=u(".%L"),N=u(":%S"),j=u("%I:%M"),_=u("%I %p"),k=u("%a %d"),E=u("%b %d"),C=u("%B"),S=u("%Y");function O(I){return(m(I)<I?v:h(I)<I?N:d(I)<I?j:o(I)<I?_:n(I)<I?i(I)<I?k:E:a(I)<I?C:S)(I)}return f.invert=function(I){return new Date(x(I))},f.domain=function(I){return arguments.length?b(Array.from(I,bK)):b().map(xK)},f.ticks=function(I){var L=b();return e(L[0],L[L.length-1],I??10)},f.tickFormat=function(I,L){return L==null?O:u(L)},f.nice=function(I){var L=b();return(!I||typeof I.range!="function")&&(I=t(L[0],L[L.length-1],I??10)),I?b(j3(L,I)):f},f.copy=function(){return Ru(f,Fj(e,t,a,n,i,o,d,h,m,u))},f}function gK(){return ts.apply(Fj(hY,mY,vl,Uj,ix,$u,zj,Rj,eo,P3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vK(){return ts.apply(Fj(uY,fY,yl,qj,ox,lx,Bj,$j,eo,D3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cx(){var e=0,t=1,a,n,i,o,d=Wa,h=!1,m;function u(x){return x==null||isNaN(x=+x)?m:d(i===0?.5:(x=(o(x)-a)*i,h?Math.max(0,Math.min(1,x)):x))}u.domain=function(x){return arguments.length?([e,t]=x,a=o(e=+e),n=o(t=+t),i=a===n?0:1/(n-a),u):[e,t]},u.clamp=function(x){return arguments.length?(h=!!x,u):h},u.interpolator=function(x){return arguments.length?(d=x,u):d};function f(x){return function(b){var v,N;return arguments.length?([v,N]=b,d=x(v,N),u):[d(0),d(1)]}}return u.range=f(Uc),u.rangeRound=f(Tj),u.unknown=function(x){return arguments.length?(m=x,u):m},function(x){return o=x,a=x(e),n=x(t),i=a===n?0:1/(n-a),u}}function gi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function L3(){var e=bi(cx()(Wa));return e.copy=function(){return gi(e,L3())},El.apply(e,arguments)}function R3(){var e=Mj(cx()).domain([1,10]);return e.copy=function(){return gi(e,R3()).base(e.base())},El.apply(e,arguments)}function $3(){var e=Ij(cx());return e.copy=function(){return gi(e,$3()).constant(e.constant())},El.apply(e,arguments)}function Hj(){var e=Pj(cx());return e.copy=function(){return gi(e,Hj()).exponent(e.exponent())},El.apply(e,arguments)}function yK(){return Hj.apply(null,arguments).exponent(.5)}function z3(){var e=[],t=Wa;function a(n){if(n!=null&&!isNaN(n=+n))return t((Du(e,n,1)-1)/(e.length-1))}return a.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(di),a},a.interpolator=function(n){return arguments.length?(t=n,a):t},a.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},a.quantiles=function(n){return Array.from({length:n+1},(i,o)=>sH(e,o/n))},a.copy=function(){return z3(t).domain(e)},El.apply(a,arguments)}function dx(){var e=0,t=.5,a=1,n=1,i,o,d,h,m,u=Wa,f,x=!1,b;function v(j){return isNaN(j=+j)?b:(j=.5+((j=+f(j))-o)*(n*j<n*o?h:m),u(x?Math.max(0,Math.min(1,j)):j))}v.domain=function(j){return arguments.length?([e,t,a]=j,i=f(e=+e),o=f(t=+t),d=f(a=+a),h=i===o?0:.5/(o-i),m=o===d?0:.5/(d-o),n=o<i?-1:1,v):[e,t,a]},v.clamp=function(j){return arguments.length?(x=!!j,v):x},v.interpolator=function(j){return arguments.length?(u=j,v):u};function N(j){return function(_){var k,E,C;return arguments.length?([k,E,C]=_,u=MH(j,[k,E,C]),v):[u(0),u(.5),u(1)]}}return v.range=N(Uc),v.rangeRound=N(Tj),v.unknown=function(j){return arguments.length?(b=j,v):b},function(j){return f=j,i=j(e),o=j(t),d=j(a),h=i===o?0:.5/(o-i),m=o===d?0:.5/(d-o),n=o<i?-1:1,v}}function B3(){var e=bi(dx()(Wa));return e.copy=function(){return gi(e,B3())},El.apply(e,arguments)}function U3(){var e=Mj(dx()).domain([.1,1,10]);return e.copy=function(){return gi(e,U3()).base(e.base())},El.apply(e,arguments)}function q3(){var e=Ij(dx());return e.copy=function(){return gi(e,q3()).constant(e.constant())},El.apply(e,arguments)}function Yj(){var e=Pj(dx());return e.copy=function(){return gi(e,Yj()).exponent(e.exponent())},El.apply(e,arguments)}function jK(){return Yj.apply(null,arguments).exponent(.5)}const Zd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kj,scaleDiverging:B3,scaleDivergingLog:U3,scaleDivergingPow:Yj,scaleDivergingSqrt:jK,scaleDivergingSymlog:q3,scaleIdentity:y3,scaleImplicit:my,scaleLinear:v3,scaleLog:N3,scaleOrdinal:_j,scalePoint:oH,scalePow:Dj,scaleQuantile:k3,scaleQuantize:S3,scaleRadial:_3,scaleSequential:L3,scaleSequentialLog:R3,scaleSequentialPow:Hj,scaleSequentialQuantile:z3,scaleSequentialSqrt:yK,scaleSequentialSymlog:$3,scaleSqrt:tY,scaleSymlog:w3,scaleThreshold:E3,scaleTime:gK,scaleUtc:vK,tickFormat:g3},Symbol.toStringTag,{value:"Module"}));var Tl=e=>e.chartData,ux=Ie([Tl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Kj=(e,t,a,n)=>n?ux(e):Tl(e),NK=(e,t,a)=>a?ux(e):Tl(e);function jl(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(Gt(t)&&Gt(a))return!0}return!1}function hT(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function F3(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,n]=e,i,o;if(Gt(a))i=a;else if(typeof a=="function")return;if(Gt(n))o=n;else if(typeof n=="function")return;var d=[i,o];if(jl(d))return d}}function wK(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,a);if(jl(n))return hT(n,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[i,o]=e,d,h;if(i==="auto")t!=null&&(d=Math.min(...t));else if(vt(i))d=i;else if(typeof i=="function")try{t!=null&&(d=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&kS.test(i)){var m=kS.exec(i);if(m==null||m[1]==null||t==null)d=void 0;else{var u=+m[1];d=t[0]-u}}else d=t==null?void 0:t[0];if(o==="auto")t!=null&&(h=Math.max(...t));else if(vt(o))h=o;else if(typeof o=="function")try{t!=null&&(h=o(t==null?void 0:t[1]))}catch{}else if(typeof o=="string"&&SS.test(o)){var f=SS.exec(o);if(f==null||f[1]==null||t==null)h=void 0;else{var x=+f[1];h=t[1]+x}}else h=t==null?void 0:t[1];var b=[d,h];if(jl(b))return t==null?b:hT(b,t,a)}}}var qc=1e9,_K={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Gj,Dr=!0,es="[DecimalError] ",lo=es+"Invalid argument: ",Vj=es+"Exponent out of range: ",Fc=Math.floor,Xi=Math.pow,kK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cn,ja=1e7,Ar=7,H3=9007199254740991,mp=Fc(H3/Ar),yt={};yt.absoluteValue=yt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};yt.comparedTo=yt.cmp=function(e){var t,a,n,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,i=e.d.length,t=0,a=n<i?n:i;t<a;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};yt.decimalPlaces=yt.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*Ar;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};yt.dividedBy=yt.div=function(e){return pl(this,new this.constructor(e))};yt.dividedToIntegerBy=yt.idiv=function(e){var t=this,a=t.constructor;return vr(pl(t,new a(e),0,1),a.precision)};yt.equals=yt.eq=function(e){return!this.cmp(e)};yt.exponent=function(){return da(this)};yt.greaterThan=yt.gt=function(e){return this.cmp(e)>0};yt.greaterThanOrEqualTo=yt.gte=function(e){return this.cmp(e)>=0};yt.isInteger=yt.isint=function(){return this.e>this.d.length-2};yt.isNegative=yt.isneg=function(){return this.s<0};yt.isPositive=yt.ispos=function(){return this.s>0};yt.isZero=function(){return this.s===0};yt.lessThan=yt.lt=function(e){return this.cmp(e)<0};yt.lessThanOrEqualTo=yt.lte=function(e){return this.cmp(e)<1};yt.logarithm=yt.log=function(e){var t,a=this,n=a.constructor,i=n.precision,o=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Cn))throw Error(es+"NaN");if(a.s<1)throw Error(es+(a.s?"NaN":"-Infinity"));return a.eq(Cn)?new n(0):(Dr=!1,t=pl(bu(a,o),bu(e,o),o),Dr=!0,vr(t,i))};yt.minus=yt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?V3(t,e):Y3(t,(e.s=-e.s,e))};yt.modulo=yt.mod=function(e){var t,a=this,n=a.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(es+"NaN");return a.s?(Dr=!1,t=pl(a,e,0,1).times(e),Dr=!0,a.minus(t)):vr(new n(a),i)};yt.naturalExponential=yt.exp=function(){return K3(this)};yt.naturalLogarithm=yt.ln=function(){return bu(this)};yt.negated=yt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};yt.plus=yt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y3(t,e):V3(t,(e.s=-e.s,e))};yt.precision=yt.sd=function(e){var t,a,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(lo+e);if(t=da(i)+1,n=i.d.length-1,a=n*Ar+1,n=i.d[n],n){for(;n%10==0;n/=10)a--;for(n=i.d[0];n>=10;n/=10)a++}return e&&t>a?t:a};yt.squareRoot=yt.sqrt=function(){var e,t,a,n,i,o,d,h=this,m=h.constructor;if(h.s<1){if(!h.s)return new m(0);throw Error(es+"NaN")}for(e=da(h),Dr=!1,i=Math.sqrt(+h),i==0||i==1/0?(t=Ms(h.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Fc((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),a=m.precision,i=d=a+3;;)if(o=n,n=o.plus(pl(h,o,d+2)).times(.5),Ms(o.d).slice(0,d)===(t=Ms(n.d)).slice(0,d)){if(t=t.slice(d-3,d+1),i==d&&t=="4999"){if(vr(o,a+1,0),o.times(o).eq(h)){n=o;break}}else if(t!="9999")break;d+=4}return Dr=!0,vr(n,a)};yt.times=yt.mul=function(e){var t,a,n,i,o,d,h,m,u,f=this,x=f.constructor,b=f.d,v=(e=new x(e)).d;if(!f.s||!e.s)return new x(0);for(e.s*=f.s,a=f.e+e.e,m=b.length,u=v.length,m<u&&(o=b,b=v,v=o,d=m,m=u,u=d),o=[],d=m+u,n=d;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=m+n;i>n;)h=o[i]+v[n]*b[i-n-1]+t,o[i--]=h%ja|0,t=h/ja|0;o[i]=(o[i]+t)%ja|0}for(;!o[--d];)o.pop();return t?++a:o.shift(),e.d=o,e.e=a,Dr?vr(e,x.precision):e};yt.toDecimalPlaces=yt.todp=function(e,t){var a=this,n=a.constructor;return a=new n(a),e===void 0?a:(zs(e,0,qc),t===void 0?t=n.rounding:zs(t,0,8),vr(a,e+da(a)+1,t))};yt.toExponential=function(e,t){var a,n=this,i=n.constructor;return e===void 0?a=bo(n,!0):(zs(e,0,qc),t===void 0?t=i.rounding:zs(t,0,8),n=vr(new i(n),e+1,t),a=bo(n,!0,e+1)),a};yt.toFixed=function(e,t){var a,n,i=this,o=i.constructor;return e===void 0?bo(i):(zs(e,0,qc),t===void 0?t=o.rounding:zs(t,0,8),n=vr(new o(i),e+da(i)+1,t),a=bo(n.abs(),!1,e+da(n)+1),i.isneg()&&!i.isZero()?"-"+a:a)};yt.toInteger=yt.toint=function(){var e=this,t=e.constructor;return vr(new t(e),da(e)+1,t.rounding)};yt.toNumber=function(){return+this};yt.toPower=yt.pow=function(e){var t,a,n,i,o,d,h=this,m=h.constructor,u=12,f=+(e=new m(e));if(!e.s)return new m(Cn);if(h=new m(h),!h.s){if(e.s<1)throw Error(es+"Infinity");return h}if(h.eq(Cn))return h;if(n=m.precision,e.eq(Cn))return vr(h,n);if(t=e.e,a=e.d.length-1,d=t>=a,o=h.s,d){if((a=f<0?-f:f)<=H3){for(i=new m(Cn),t=Math.ceil(n/Ar+4),Dr=!1;a%2&&(i=i.times(h),pT(i.d,t)),a=Fc(a/2),a!==0;)h=h.times(h),pT(h.d,t);return Dr=!0,e.s<0?new m(Cn).div(i):vr(i,n)}}else if(o<0)throw Error(es+"NaN");return o=o<0&&e.d[Math.max(t,a)]&1?-1:1,h.s=1,Dr=!1,i=e.times(bu(h,n+u)),Dr=!0,i=K3(i),i.s=o,i};yt.toPrecision=function(e,t){var a,n,i=this,o=i.constructor;return e===void 0?(a=da(i),n=bo(i,a<=o.toExpNeg||a>=o.toExpPos)):(zs(e,1,qc),t===void 0?t=o.rounding:zs(t,0,8),i=vr(new o(i),e,t),a=da(i),n=bo(i,e<=a||a<=o.toExpNeg,e)),n};yt.toSignificantDigits=yt.tosd=function(e,t){var a=this,n=a.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zs(e,1,qc),t===void 0?t=n.rounding:zs(t,0,8)),vr(new n(a),e,t)};yt.toString=yt.valueOf=yt.val=yt.toJSON=yt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=da(e),a=e.constructor;return bo(e,t<=a.toExpNeg||t>=a.toExpPos)};function Y3(e,t){var a,n,i,o,d,h,m,u,f=e.constructor,x=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Dr?vr(t,x):t;if(m=e.d,u=t.d,d=e.e,i=t.e,m=m.slice(),o=d-i,o){for(o<0?(n=m,o=-o,h=u.length):(n=u,i=d,h=m.length),d=Math.ceil(x/Ar),h=d>h?d+1:h+1,o>h&&(o=h,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(h=m.length,o=u.length,h-o<0&&(o=h,n=u,u=m,m=n),a=0;o;)a=(m[--o]=m[o]+u[o]+a)/ja|0,m[o]%=ja;for(a&&(m.unshift(a),++i),h=m.length;m[--h]==0;)m.pop();return t.d=m,t.e=i,Dr?vr(t,x):t}function zs(e,t,a){if(e!==~~e||e<t||e>a)throw Error(lo+e)}function Ms(e){var t,a,n,i=e.length-1,o="",d=e[0];if(i>0){for(o+=d,t=1;t<i;t++)n=e[t]+"",a=Ar-n.length,a&&(o+=ri(a)),o+=n;d=e[t],n=d+"",a=Ar-n.length,a&&(o+=ri(a))}else if(d===0)return"0";for(;d%10===0;)d/=10;return o+d}var pl=(function(){function e(n,i){var o,d=0,h=n.length;for(n=n.slice();h--;)o=n[h]*i+d,n[h]=o%ja|0,d=o/ja|0;return d&&n.unshift(d),n}function t(n,i,o,d){var h,m;if(o!=d)m=o>d?1:-1;else for(h=m=0;h<o;h++)if(n[h]!=i[h]){m=n[h]>i[h]?1:-1;break}return m}function a(n,i,o){for(var d=0;o--;)n[o]-=d,d=n[o]<i[o]?1:0,n[o]=d*ja+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,d){var h,m,u,f,x,b,v,N,j,_,k,E,C,S,O,I,L,te,H=n.constructor,B=n.s==i.s?1:-1,X=n.d,V=i.d;if(!n.s)return new H(n);if(!i.s)throw Error(es+"Division by zero");for(m=n.e-i.e,L=V.length,O=X.length,v=new H(B),N=v.d=[],u=0;V[u]==(X[u]||0);)++u;if(V[u]>(X[u]||0)&&--m,o==null?E=o=H.precision:d?E=o+(da(n)-da(i))+1:E=o,E<0)return new H(0);if(E=E/Ar+2|0,u=0,L==1)for(f=0,V=V[0],E++;(u<O||f)&&E--;u++)C=f*ja+(X[u]||0),N[u]=C/V|0,f=C%V|0;else{for(f=ja/(V[0]+1)|0,f>1&&(V=e(V,f),X=e(X,f),L=V.length,O=X.length),S=L,j=X.slice(0,L),_=j.length;_<L;)j[_++]=0;te=V.slice(),te.unshift(0),I=V[0],V[1]>=ja/2&&++I;do f=0,h=t(V,j,L,_),h<0?(k=j[0],L!=_&&(k=k*ja+(j[1]||0)),f=k/I|0,f>1?(f>=ja&&(f=ja-1),x=e(V,f),b=x.length,_=j.length,h=t(x,j,b,_),h==1&&(f--,a(x,L<b?te:V,b))):(f==0&&(h=f=1),x=V.slice()),b=x.length,b<_&&x.unshift(0),a(j,x,_),h==-1&&(_=j.length,h=t(V,j,L,_),h<1&&(f++,a(j,L<_?te:V,_))),_=j.length):h===0&&(f++,j=[0]),N[u++]=f,h&&j[0]?j[_++]=X[S]||0:(j=[X[S]],_=1);while((S++<O||j[0]!==void 0)&&E--)}return N[0]||N.shift(),v.e=m,vr(v,d?o+da(v)+1:o)}})();function K3(e,t){var a,n,i,o,d,h,m=0,u=0,f=e.constructor,x=f.precision;if(da(e)>16)throw Error(Vj+da(e));if(!e.s)return new f(Cn);for(Dr=!1,h=x,d=new f(.03125);e.abs().gte(.1);)e=e.times(d),u+=5;for(n=Math.log(Xi(2,u))/Math.LN10*2+5|0,h+=n,a=i=o=new f(Cn),f.precision=h;;){if(i=vr(i.times(e),h),a=a.times(++m),d=o.plus(pl(i,a,h)),Ms(d.d).slice(0,h)===Ms(o.d).slice(0,h)){for(;u--;)o=vr(o.times(o),h);return f.precision=x,t==null?(Dr=!0,vr(o,x)):o}o=d}}function da(e){for(var t=e.e*Ar,a=e.d[0];a>=10;a/=10)t++;return t}function lv(e,t,a){if(t>e.LN10.sd())throw Dr=!0,a&&(e.precision=a),Error(es+"LN10 precision limit exceeded");return vr(new e(e.LN10),t)}function ri(e){for(var t="";e--;)t+="0";return t}function bu(e,t){var a,n,i,o,d,h,m,u,f,x=1,b=10,v=e,N=v.d,j=v.constructor,_=j.precision;if(v.s<1)throw Error(es+(v.s?"NaN":"-Infinity"));if(v.eq(Cn))return new j(0);if(t==null?(Dr=!1,u=_):u=t,v.eq(10))return t==null&&(Dr=!0),lv(j,u);if(u+=b,j.precision=u,a=Ms(N),n=a.charAt(0),o=da(v),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&a.charAt(1)>3;)v=v.times(e),a=Ms(v.d),n=a.charAt(0),x++;o=da(v),n>1?(v=new j("0."+a),o++):v=new j(n+"."+a.slice(1))}else return m=lv(j,u+2,_).times(o+""),v=bu(new j(n+"."+a.slice(1)),u-b).plus(m),j.precision=_,t==null?(Dr=!0,vr(v,_)):v;for(h=d=v=pl(v.minus(Cn),v.plus(Cn),u),f=vr(v.times(v),u),i=3;;){if(d=vr(d.times(f),u),m=h.plus(pl(d,new j(i),u)),Ms(m.d).slice(0,u)===Ms(h.d).slice(0,u))return h=h.times(2),o!==0&&(h=h.plus(lv(j,u+2,_).times(o+""))),h=pl(h,new j(x),u),j.precision=_,t==null?(Dr=!0,vr(h,_)):h;h=m,i+=2}}function mT(e,t){var a,n,i;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(a<0&&(a=n),a+=+t.slice(n+1),t=t.substring(0,n)):a<0&&(a=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,a=a-n-1,e.e=Fc(a/Ar),e.d=[],n=(a+1)%Ar,a<0&&(n+=Ar),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ar;n<i;)e.d.push(+t.slice(n,n+=Ar));t=t.slice(n),n=Ar-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Dr&&(e.e>mp||e.e<-mp))throw Error(Vj+a)}else e.s=0,e.e=0,e.d=[0];return e}function vr(e,t,a){var n,i,o,d,h,m,u,f,x=e.d;for(d=1,o=x[0];o>=10;o/=10)d++;if(n=t-d,n<0)n+=Ar,i=t,u=x[f=0];else{if(f=Math.ceil((n+1)/Ar),o=x.length,f>=o)return e;for(u=o=x[f],d=1;o>=10;o/=10)d++;n%=Ar,i=n-Ar+d}if(a!==void 0&&(o=Xi(10,d-i-1),h=u/o%10|0,m=t<0||x[f+1]!==void 0||u%o,m=a<4?(h||m)&&(a==0||a==(e.s<0?3:2)):h>5||h==5&&(a==4||m||a==6&&(n>0?i>0?u/Xi(10,d-i):0:x[f-1])%10&1||a==(e.s<0?8:7))),t<1||!x[0])return m?(o=da(e),x.length=1,t=t-o-1,x[0]=Xi(10,(Ar-t%Ar)%Ar),e.e=Fc(-t/Ar)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(n==0?(x.length=f,o=1,f--):(x.length=f+1,o=Xi(10,Ar-n),x[f]=i>0?(u/Xi(10,d-i)%Xi(10,i)|0)*o:0),m)for(;;)if(f==0){(x[0]+=o)==ja&&(x[0]=1,++e.e);break}else{if(x[f]+=o,x[f]!=ja)break;x[f--]=0,o=1}for(n=x.length;x[--n]===0;)x.pop();if(Dr&&(e.e>mp||e.e<-mp))throw Error(Vj+da(e));return e}function V3(e,t){var a,n,i,o,d,h,m,u,f,x,b=e.constructor,v=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),Dr?vr(t,v):t;if(m=e.d,x=t.d,n=t.e,u=e.e,m=m.slice(),d=u-n,d){for(f=d<0,f?(a=m,d=-d,h=x.length):(a=x,n=u,h=m.length),i=Math.max(Math.ceil(v/Ar),h)+2,d>i&&(d=i,a.length=1),a.reverse(),i=d;i--;)a.push(0);a.reverse()}else{for(i=m.length,h=x.length,f=i<h,f&&(h=i),i=0;i<h;i++)if(m[i]!=x[i]){f=m[i]<x[i];break}d=0}for(f&&(a=m,m=x,x=a,t.s=-t.s),h=m.length,i=x.length-h;i>0;--i)m[h++]=0;for(i=x.length;i>d;){if(m[--i]<x[i]){for(o=i;o&&m[--o]===0;)m[o]=ja-1;--m[o],m[i]+=ja}m[i]-=x[i]}for(;m[--h]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Dr?vr(t,v):t):new b(0)}function bo(e,t,a){var n,i=da(e),o=Ms(e.d),d=o.length;return t?(a&&(n=a-d)>0?o=o.charAt(0)+"."+o.slice(1)+ri(n):d>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+ri(-i-1)+o,a&&(n=a-d)>0&&(o+=ri(n))):i>=d?(o+=ri(i+1-d),a&&(n=a-i-1)>0&&(o=o+"."+ri(n))):((n=i+1)<d&&(o=o.slice(0,n)+"."+o.slice(n)),a&&(n=a-d)>0&&(i+1===d&&(o+="."),o+=ri(n))),e.s<0?"-"+o:o}function pT(e,t){if(e.length>t)return e.length=t,!0}function G3(e){var t,a,n;function i(o){var d=this;if(!(d instanceof i))return new i(o);if(d.constructor=i,o instanceof i){d.s=o.s,d.e=o.e,d.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(lo+o);if(o>0)d.s=1;else if(o<0)o=-o,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(o===~~o&&o<1e7){d.e=0,d.d=[o];return}return mT(d,o.toString())}else if(typeof o!="string")throw Error(lo+o);if(o.charCodeAt(0)===45?(o=o.slice(1),d.s=-1):d.s=1,kK.test(o))mT(d,o);else throw Error(lo+o)}if(i.prototype=yt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=G3,i.config=i.set=SK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(a=n[t++])||(e[a]=this[a]);return i.config(e),i}function SK(e){if(!e||typeof e!="object")throw Error(es+"Object expected");var t,a,n,i=["precision",1,qc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[a=i[t]])!==void 0)if(Fc(n)===n&&n>=i[t+1]&&n<=i[t+2])this[a]=n;else throw Error(lo+a+": "+n);if((n=e[a="LN10"])!==void 0)if(n==Math.LN10)this[a]=new this(n);else throw Error(lo+a+": "+n);return this}var Gj=G3(_K);Cn=new Gj(1);const or=Gj;function X3(e){var t;return e===0?t=1:t=Math.floor(new or(e).abs().log(10).toNumber())+1,t}function W3(e,t,a){for(var n=new or(e),i=0,o=[];n.lt(t)&&i<1e5;)o.push(n.toNumber()),n=n.add(a),i++;return o}var J3=e=>{var[t,a]=e,[n,i]=[t,a];return t>a&&([n,i]=[a,t]),[n,i]},Z3=(e,t,a)=>{if(e.lte(0))return new or(0);var n=X3(e.toNumber()),i=new or(10).pow(n),o=e.div(i),d=n!==1?.05:.1,h=new or(Math.ceil(o.div(d).toNumber())).add(a).mul(d),m=h.mul(i);return t?new or(m.toNumber()):new or(Math.ceil(m.toNumber()))},EK=(e,t,a)=>{var n=new or(1),i=new or(e);if(!i.isint()&&a){var o=Math.abs(e);o<1?(n=new or(10).pow(X3(e)-1),i=new or(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new or(Math.floor(e)))}else e===0?i=new or(Math.floor((t-1)/2)):a||(i=new or(Math.floor(e)));for(var d=Math.floor((t-1)/2),h=[],m=0;m<t;m++)h.push(i.add(new or(m-d).mul(n)).toNumber());return h},Q3=function(t,a,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(n-1)))return{step:new or(0),tickMin:new or(0),tickMax:new or(0)};var d=Z3(new or(a).sub(t).div(n-1),i,o),h;t<=0&&a>=0?h=new or(0):(h=new or(t).add(a).div(2),h=h.sub(new or(h).mod(d)));var m=Math.ceil(h.sub(t).div(d).toNumber()),u=Math.ceil(new or(a).sub(h).div(d).toNumber()),f=m+u+1;return f>n?Q3(t,a,n,i,o+1):(f<n&&(u=a>0?u+(n-f):u,m=a>0?m:m+(n-f)),{step:d,tickMin:h.sub(new or(m).mul(d)),tickMax:h.add(new or(u).mul(d))})},TK=function(t){var[a,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(i,2),[h,m]=J3([a,n]);if(h===-1/0||m===1/0){var u=m===1/0?[h,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),m];return a>n?u.reverse():u}if(h===m)return EK(h,i,o);var{step:f,tickMin:x,tickMax:b}=Q3(h,m,d,o,0),v=W3(x,b.add(new or(.1).mul(f)),f);return a>n?v.reverse():v},CK=function(t,a){var[n,i]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,h]=J3([n,i]);if(d===-1/0||h===1/0)return[n,i];if(d===h)return[d];var m=Math.max(a,2),u=Z3(new or(h).sub(d).div(m-1),o,0),f=[...W3(new or(d),new or(h),u),h];return o===!1&&(f=f.map(x=>Math.round(x))),n>i?f.reverse():f},eM=e=>e.rootProps.maxBarSize,AK=e=>e.rootProps.barGap,tM=e=>e.rootProps.barCategoryGap,OK=e=>e.rootProps.barSize,zu=e=>e.rootProps.stackOffset,rM=e=>e.rootProps.reverseStackOrder,Xj=e=>e.options.chartName,Wj=e=>e.rootProps.syncId,aM=e=>e.rootProps.syncMethod,Jj=e=>e.options.eventEmitter,ca={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},qi={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ns={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},fx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function hx(e,t,a){if(a!=="auto")return a;if(e!=null)return _l(e,t)?"category":"number"}function xT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function pp(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(a),!0).forEach(function(n){MK(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function MK(e,t,a){return(t=IK(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function IK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bT={allowDataOverflow:qi.allowDataOverflow,allowDecimals:qi.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:qi.angleAxisId,includeHidden:!1,name:void 0,reversed:qi.reversed,scale:qi.scale,tick:qi.tick,tickCount:void 0,ticks:void 0,type:qi.type,unit:void 0},gT={allowDataOverflow:Ns.allowDataOverflow,allowDecimals:Ns.allowDecimals,allowDuplicatedCategory:Ns.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ns.radiusAxisId,includeHidden:Ns.includeHidden,name:void 0,reversed:Ns.reversed,scale:Ns.scale,tick:Ns.tick,tickCount:Ns.tickCount,ticks:void 0,type:Ns.type,unit:void 0},DK=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},Zj=Ie([DK,q4],(e,t)=>{var a;if(e!=null)return e;var n=(a=hx(t,"angleAxis",bT.type))!==null&&a!==void 0?a:"category";return pp(pp({},bT),{},{type:n})}),LK=(e,t)=>e.polarAxis.radiusAxis[t],Qj=Ie([LK,q4],(e,t)=>{var a;if(e!=null)return e;var n=(a=hx(t,"radiusAxis",gT.type))!==null&&a!==void 0?a:"category";return pp(pp({},gT),{},{type:n})}),mx=e=>e.polarOptions,eN=Ie([kl,Sl,pa],s3),nM=Ie([mx,eN],(e,t)=>{if(e!=null)return Fa(e.innerRadius,t,0)}),sM=Ie([mx,eN],(e,t)=>{if(e!=null)return Fa(e.outerRadius,t,t*.8)}),RK=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},lM=Ie([mx],RK);Ie([Zj,lM],fx);var iM=Ie([eN,nM,sM],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});Ie([Qj,iM],fx);var oM=Ie([er,mx,nM,sM,kl,Sl],(e,t,a,n,i,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||n==null)){var{cx:d,cy:h,startAngle:m,endAngle:u}=t;return{cx:Fa(d,i,i/2),cy:Fa(h,o,o/2),innerRadius:a,outerRadius:n,startAngle:m,endAngle:u,clockWise:!1}}}),Ur=(e,t)=>t,Bu=(e,t,a)=>a;function tN(e){return e==null?void 0:e.id}function cM(e,t,a){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:o}=a,d=new Map;return e.forEach(h=>{var m,u=(m=h.data)!==null&&m!==void 0?m:n;if(!(u==null||u.length===0)){var f=tN(h);u.forEach((x,b)=>{var v=o==null||i?b:String(pr(x,o,null)),N=pr(x,h.dataKey,0),j;d.has(v)?j=d.get(v):j={},Object.assign(j,{[f]:N}),d.set(v,j)})}}),Array.from(d.values())}function px(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var xx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function bx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function $K(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var Ea=e=>{var t=er(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Hc=e=>e.tooltip.settings.axisId;function zK(e){if(e in Zd)return Zd[e]();var t="scale".concat(Eu(e));if(t in Zd)return Zd[t]()}function vT(e){var t=e.ticks,a=e.bandwidth,n=e.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(o){function d(){return o.apply(this,arguments)}return d.toString=function(){return o.toString()},d})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(o){var d=i[0],h=i[1];return d<=h?o>=d&&o<=h:o>=h&&o<=d},bandwidth:a?()=>a.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,d)=>{var h=e(o);if(h!=null){if(e.bandwidth&&d!==null&&d!==void 0&&d.position){var m=e.bandwidth();switch(d.position){case"middle":h+=m/2;break;case"end":h+=m;break}}return h}}}}function yT(e,t,a){if(typeof e=="function")return vT(e.copy().domain(t).range(a));if(e!=null){var n=zK(e);if(n!=null)return n.domain(t).range(a),vT(n)}}var dM=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!jl(t)){for(var a,n,i=0;i<t.length;i++){var o=t[i];Gt(o)&&((a===void 0||o<a)&&(a=o),(n===void 0||o>n)&&(n=o))}return a!==void 0&&n!==void 0?[a,n]:void 0}return t}default:return t}};function jT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function xp(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(a),!0).forEach(function(n){BK(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function BK(e,t,a){return(t=UK(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function UK(e){var t=qK(e,"string");return typeof t=="symbol"?t:t+""}function qK(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gy=[0,"auto"],va={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uM=(e,t)=>e.cartesianAxis.xAxis[t],Cl=(e,t)=>{var a=uM(e,t);return a??va},ya={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:gy,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Au},fM=(e,t)=>e.cartesianAxis.yAxis[t],Al=(e,t)=>{var a=fM(e,t);return a??ya},FK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},rN=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??FK},Xr=(e,t,a)=>{switch(t){case"xAxis":return Cl(e,a);case"yAxis":return Al(e,a);case"zAxis":return rN(e,a);case"angleAxis":return Zj(e,a);case"radiusAxis":return Qj(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},HK=(e,t,a)=>{switch(t){case"xAxis":return Cl(e,a);case"yAxis":return Al(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Yc=(e,t,a)=>{switch(t){case"xAxis":return Cl(e,a);case"yAxis":return Al(e,a);case"angleAxis":return Zj(e,a);case"radiusAxis":return Qj(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},hM=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function aN(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var gx=e=>e.graphicalItems.cartesianItems,YK=Ie([Ur,Bu],aN),nN=(e,t,a)=>e.filter(a).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Uu=Ie([gx,Xr,YK],nN,{memoizeOptions:{resultEqualityCheck:bx}}),mM=Ie([Uu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(px)),pM=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),KK=Ie([Uu],pM),sN=e=>e.map(t=>t.data).filter(Boolean).flat(1),VK=Ie([Uu],sN,{memoizeOptions:{resultEqualityCheck:bx}}),lN=(e,t)=>{var{chartData:a=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:a.slice(n,i+1)},iN=Ie([VK,Kj],lN),oN=(e,t,a)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:pr(n,t.dataKey)})):a.length>0?a.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:pr(i,n)}))):e.map(n=>({value:n})),vx=Ie([iN,Xr,Uu],oN);function xM(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function fm(e){if(Rs(e)||e instanceof Date){var t=Number(e);if(Gt(t))return t}}function NT(e){if(Array.isArray(e)){var t=[fm(e[0]),fm(e[1])];return jl(t)?t:void 0}var a=fm(e);if(a!=null)return[a,a]}function Nl(e){return e.map(fm).filter(dn)}function GK(e,t,a){return!a||typeof t!="number"||Ls(t)?[]:a.length?Nl(a.flatMap(n=>{var i=pr(e,n.dataKey),o,d;if(Array.isArray(i)?[o,d]=i:o=d=i,!(!Gt(o)||!Gt(d)))return[t-o,t+d]})):[]}var ba=e=>{var t=Ea(e),a=Hc(e);return Yc(e,t,a)},qu=Ie([ba],e=>e==null?void 0:e.dataKey),XK=Ie([mM,Kj,ba],cM),bM=(e,t,a,n)=>{var i={},o=t.reduce((d,h)=>{if(h.stackId==null)return d;var m=d[h.stackId];return m==null&&(m=[]),m.push(h),d[h.stackId]=m,d},i);return Object.fromEntries(Object.entries(o).map(d=>{var[h,m]=d,u=n?[...m].reverse():m,f=u.map(tN);return[h,{stackedData:AU(e,f,a),graphicalItems:u}]}))},vy=Ie([XK,mM,zu,rM],bM),gM=(e,t,a,n)=>{var{dataStartIndex:i,dataEndIndex:o}=t;if(n==null&&a!=="zAxis"){var d=DU(e,i,o);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},WK=Ie([Xr],e=>e.allowDataOverflow),cN=e=>{var t;if(e==null||!("domain"in e))return gy;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Nl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:gy},dN=Ie([Xr],cN),uN=Ie([dN,WK],F3),JK=Ie([vy,Tl,Ur,uN],gM,{memoizeOptions:{resultEqualityCheck:xx}}),yx=e=>e.errorBars,ZK=(e,t,a)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>xM(a,n)),bp=function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=a.filter(Boolean);if(i.length!==0){var o=i.flat(),d=Math.min(...o),h=Math.max(...o);return[d,h]}},fN=(e,t,a,n,i)=>{var o,d;if(a.length>0&&e.forEach(h=>{a.forEach(m=>{var u,f,x=(u=n[m.id])===null||u===void 0?void 0:u.filter(k=>xM(i,k)),b=pr(h,(f=t.dataKey)!==null&&f!==void 0?f:m.dataKey),v=GK(h,b,x);if(v.length>=2){var N=Math.min(...v),j=Math.max(...v);(o==null||N<o)&&(o=N),(d==null||j>d)&&(d=j)}var _=NT(b);_!=null&&(o=o==null?_[0]:Math.min(o,_[0]),d=d==null?_[1]:Math.max(d,_[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(h=>{var m=NT(pr(h,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),d=d==null?m[1]:Math.max(d,m[1]))}),Gt(o)&&Gt(d))return[o,d]},QK=Ie([iN,Xr,KK,yx,Ur],fN,{memoizeOptions:{resultEqualityCheck:xx}});function eV(e){var{value:t}=e;if(Rs(t)||t instanceof Date)return t}var tV=(e,t,a)=>{var n=e.map(eV).filter(i=>i!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&R5(n))?c3(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},vM=e=>e.referenceElements.dots,Kc=(e,t,a)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===a:n.yAxisId===a),rV=Ie([vM,Ur,Bu],Kc),yM=e=>e.referenceElements.areas,aV=Ie([yM,Ur,Bu],Kc),jM=e=>e.referenceElements.lines,nV=Ie([jM,Ur,Bu],Kc),NM=(e,t)=>{if(e!=null){var a=Nl(e.map(n=>t==="xAxis"?n.x:n.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},sV=Ie(rV,Ur,NM),wM=(e,t)=>{if(e!=null){var a=Nl(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},lV=Ie([aV,Ur],wM);function iV(e){var t;if(e.x!=null)return Nl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return a==null||a.length===0?[]:Nl(a)}function oV(e){var t;if(e.y!=null)return Nl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return a==null||a.length===0?[]:Nl(a)}var _M=(e,t)=>{if(e!=null){var a=e.flatMap(n=>t==="xAxis"?iV(n):oV(n));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},cV=Ie([nV,Ur],_M),dV=Ie(sV,cV,lV,(e,t,a)=>bp(e,a,t)),hN=(e,t,a,n,i,o,d,h)=>{if(a!=null)return a;var m=d==="vertical"&&h==="xAxis"||d==="horizontal"&&h==="yAxis",u=m?bp(n,o,i):bp(o,i);return wK(t,u,e.allowDataOverflow)},uV=Ie([Xr,dN,uN,JK,QK,dV,er,Ur],hN,{memoizeOptions:{resultEqualityCheck:xx}}),fV=[0,1],mN=(e,t,a,n,i,o,d)=>{if(!((e==null||a==null||a.length===0)&&d===void 0)){var{dataKey:h,type:m}=e,u=_l(t,o);if(u&&h==null){var f;return c3(0,(f=a==null?void 0:a.length)!==null&&f!==void 0?f:0)}return m==="category"?tV(n,e,u):i==="expand"?fV:d}},pN=Ie([Xr,er,iN,vx,zu,Ur,uV],mN);function hV(e){return e in Zd}var kM=(e,t,a)=>{if(e!=null){var{scale:n,type:i}=e;if(n==="auto")return i==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!t)?"point":i==="category"?"band":"linear";if(typeof n=="string"){var o="scale".concat(Eu(n));return hV(o)?o:"point"}}},vi=Ie([Xr,hM,Xj],kM);function xN(e,t,a,n){if(!(a==null||n==null))return typeof e.scale=="function"?yT(e.scale,a,n):yT(t,a,n)}var bN=(e,t,a)=>{var n=cN(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&jl(e))return TK(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&jl(e))return CK(e,t.tickCount,t.allowDecimals)}},gN=Ie([pN,Yc,vi],bN),vN=(e,t,a,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&jl(t)&&Array.isArray(a)&&a.length>0){var i,o,d=t[0],h=(i=a[0])!==null&&i!==void 0?i:0,m=t[1],u=(o=a[a.length-1])!==null&&o!==void 0?o:0;return[Math.min(d,h),Math.max(m,u)]}return t},mV=Ie([Xr,pN,gN,Ur],vN),pV=Ie(vx,Xr,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,n=Array.from(Nl(e.map(x=>x.value))).sort((x,b)=>x-b),i=n[0],o=n[n.length-1];if(i==null||o==null)return 1/0;var d=o-i;if(d===0)return 1/0;for(var h=0;h<n.length-1;h++){var m=n[h],u=n[h+1];if(!(m==null||u==null)){var f=u-m;a=Math.min(a,f)}}return a/d}}),SM=Ie(pV,er,tM,pa,(e,t,a,n,i)=>i,(e,t,a,n,i)=>{if(!Gt(e))return 0;var o=t==="vertical"?n.height:n.width;if(i==="gap")return e*o/2;if(i==="no-gap"){var d=Fa(a,e*o),h=e*o/2;return h-d-(h-d)/o*d}return 0}),xV=(e,t,a)=>{var n=Cl(e,t);return n==null||typeof n.padding!="string"?0:SM(e,"xAxis",t,a,n.padding)},bV=(e,t,a)=>{var n=Al(e,t);return n==null||typeof n.padding!="string"?0:SM(e,"yAxis",t,a,n.padding)},gV=Ie(Cl,xV,(e,t)=>{var a,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((a=i.left)!==null&&a!==void 0?a:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),vV=Ie(Al,bV,(e,t)=>{var a,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((a=i.top)!==null&&a!==void 0?a:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),yV=Ie([pa,gV,Qp,Zp,(e,t,a)=>a],(e,t,a,n,i)=>{var{padding:o}=n;return i?[o.left,a.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),jV=Ie([pa,er,vV,Qp,Zp,(e,t,a)=>a],(e,t,a,n,i,o)=>{var{padding:d}=i;return o?[n.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),Fu=(e,t,a,n)=>{var i;switch(t){case"xAxis":return yV(e,a,n);case"yAxis":return jV(e,a,n);case"zAxis":return(i=rN(e,a))===null||i===void 0?void 0:i.range;case"angleAxis":return lM(e);case"radiusAxis":return iM(e,a);default:return}},EM=Ie([Xr,Fu],fx),NV=Ie([vi,mV],dM),jx=Ie([Xr,vi,NV,EM],xN);Ie([Uu,yx,Ur],ZK);function TM(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Nx=(e,t)=>t,wx=(e,t,a)=>a,wV=Ie(Wp,Nx,wx,(e,t,a)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===a).sort(TM)),_V=Ie(Jp,Nx,wx,(e,t,a)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===a).sort(TM)),CM=(e,t)=>({width:e.width,height:t.height}),kV=(e,t)=>{var a=typeof t.width=="number"?t.width:Au;return{width:a,height:e.height}},AM=Ie(pa,Cl,CM),SV=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},EV=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},TV=Ie(Sl,pa,wV,Nx,wx,(e,t,a,n,i)=>{var o={},d;return a.forEach(h=>{var m=CM(t,h);d==null&&(d=SV(t,n,e));var u=n==="top"&&!i||n==="bottom"&&i;o[h.id]=d-Number(u)*m.height,d+=(u?-1:1)*m.height}),o}),CV=Ie(kl,pa,_V,Nx,wx,(e,t,a,n,i)=>{var o={},d;return a.forEach(h=>{var m=kV(t,h);d==null&&(d=EV(t,n,e));var u=n==="left"&&!i||n==="right"&&i;o[h.id]=d-Number(u)*m.width,d+=(u?-1:1)*m.width}),o}),AV=(e,t)=>{var a=Cl(e,t);if(a!=null)return TV(e,a.orientation,a.mirror)},OV=Ie([pa,Cl,AV,(e,t)=>t],(e,t,a,n)=>{if(t!=null){var i=a==null?void 0:a[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),MV=(e,t)=>{var a=Al(e,t);if(a!=null)return CV(e,a.orientation,a.mirror)},IV=Ie([pa,Al,MV,(e,t)=>t],(e,t,a,n)=>{if(t!=null){var i=a==null?void 0:a[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),OM=Ie(pa,Al,(e,t)=>{var a=typeof t.width=="number"?t.width:Au;return{width:a,height:e.height}}),wT=(e,t,a)=>{switch(t){case"xAxis":return AM(e,a).width;case"yAxis":return OM(e,a).height;default:return}},MM=(e,t,a,n)=>{if(a!=null){var{allowDuplicatedCategory:i,type:o,dataKey:d}=a,h=_l(e,n),m=t.map(u=>u.value);if(d&&h&&o==="category"&&i&&R5(m))return m}},yN=Ie([er,vx,Xr,Ur],MM),IM=(e,t,a,n)=>{if(!(a==null||a.dataKey==null)){var{type:i,scale:o}=a,d=_l(e,n);if(d&&(i==="number"||o!=="auto"))return t.map(h=>h.value)}},jN=Ie([er,vx,Yc,Ur],IM),_T=Ie([er,HK,vi,jx,yN,jN,Fu,gN,Ur],(e,t,a,n,i,o,d,h,m)=>{if(t!=null){var u=_l(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:i,isCategorical:u,niceTicks:h,range:d,realScaleType:a,scale:n}}}),PV=(e,t,a,n,i,o,d,h,m)=>{if(!(t==null||n==null)){var u=_l(e,m),{type:f,ticks:x,tickCount:b}=t,v=a==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,N=f==="category"&&n.bandwidth?n.bandwidth()/v:0;N=m==="angleAxis"&&o!=null&&o.length>=2?Na(o[0]-o[1])*2*N:N;var j=x||i;return j?j.map((_,k)=>{var E=d?d.indexOf(_):_,C=n.map(E);return Gt(C)?{index:k,coordinate:C+N,value:_,offset:N}:null}).filter(dn):u&&h?h.map((_,k)=>{var E=n.map(_);return Gt(E)?{coordinate:E+N,value:_,index:k,offset:N}:null}).filter(dn):n.ticks?n.ticks(b).map((_,k)=>{var E=n.map(_);return Gt(E)?{coordinate:E+N,value:_,index:k,offset:N}:null}).filter(dn):n.domain().map((_,k)=>{var E=n.map(_);return Gt(E)?{coordinate:E+N,value:d?d[_]:_,index:k,offset:N}:null}).filter(dn)}},PM=Ie([er,Yc,vi,jx,gN,Fu,yN,jN,Ur],PV),DV=(e,t,a,n,i,o,d)=>{if(!(t==null||a==null||n==null||n[0]===n[1])){var h=_l(e,d),{tickCount:m}=t,u=0;return u=d==="angleAxis"&&(n==null?void 0:n.length)>=2?Na(n[0]-n[1])*2*u:u,h&&o?o.map((f,x)=>{var b=a.map(f);return Gt(b)?{coordinate:b+u,value:f,index:x,offset:u}:null}).filter(dn):a.ticks?a.ticks(m).map((f,x)=>{var b=a.map(f);return Gt(b)?{coordinate:b+u,value:f,index:x,offset:u}:null}).filter(dn):a.domain().map((f,x)=>{var b=a.map(f);return Gt(b)?{coordinate:b+u,value:i?i[f]:f,index:x,offset:u}:null}).filter(dn)}},hi=Ie([er,Yc,jx,Fu,yN,jN,Ur],DV),mi=Ie(Xr,jx,(e,t)=>{if(!(e==null||t==null))return xp(xp({},e),{},{scale:t})}),LV=Ie([Xr,vi,pN,EM],xN);Ie((e,t,a)=>rN(e,a),LV,(e,t)=>{if(!(e==null||t==null))return xp(xp({},e),{},{scale:t})});var RV=Ie([er,Wp,Jp],(e,t,a)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),DM=e=>e.options.defaultTooltipEventType,LM=e=>e.options.validateTooltipEventTypes;function RM(e,t,a){if(e==null)return t;var n=e?"axis":"item";return a==null?t:a.includes(n)?n:t}function NN(e,t){var a=DM(e),n=LM(e);return RM(t,a,n)}function $V(e){return _t(t=>NN(t,e))}var $M=(e,t)=>{var a,n=Number(t);if(!(Ls(n)||t==null))return n>=0?e==null||(a=e[n])===null||a===void 0?void 0:a.value:void 0},zV=e=>e.tooltip.settings,ni={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},BV={itemInteraction:{click:ni,hover:ni},axisInteraction:{click:ni,hover:ni},keyboardInteraction:ni,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},zM=mn({name:"tooltip",initialState:BV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ir()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:n}=t.payload,i=us(e).tooltipItemPayloads.indexOf(a);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Ir()},removeTooltipEntrySettings:{reducer(e,t){var a=us(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:Ir()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:UV,replaceTooltipEntrySettings:qV,removeTooltipEntrySettings:FV,setTooltipSettingsState:HV,setActiveMouseOverItemIndex:BM,mouseLeaveItem:YV,mouseLeaveChart:UM,setActiveClickItemIndex:KV,setMouseOverAxisIndex:qM,setMouseClickAxisIndex:VV,setSyncInteraction:yy,setKeyboardInteraction:jy}=zM.actions,GV=zM.reducer;function kT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function bh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(a),!0).forEach(function(n){XV(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function XV(e,t,a){return(t=WV(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function WV(e){var t=JV(e,"string");return typeof t=="symbol"?t:t+""}function JV(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZV(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function QV(e){return e.index!=null}var FM=(e,t,a,n)=>{if(t==null)return ni;var i=ZV(e,t,a);if(i==null)return ni;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(QV(i)){if(o)return bh(bh({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return bh(bh({},ni),{},{coordinate:i.coordinate})};function eG(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function tG(e,t){var a=eG(e),n=t[0],i=t[1];if(a===void 0)return!1;var o=Math.min(n,i),d=Math.max(n,i);return a>=o&&a<=d}function rG(e,t,a){if(a==null||t==null)return!0;var n=pr(e,t);return n==null||!jl(a)?!0:tG(n,a)}var wN=(e,t,a,n)=>{var i=e==null?void 0:e.index;if(i==null)return null;var o=Number(i);if(!Gt(o))return i;var d=0,h=1/0;t.length>0&&(h=t.length-1);var m=Math.max(d,Math.min(o,h)),u=t[m];return u==null||rG(u,a,n)?String(m):null},HM=(e,t,a,n,i,o,d)=>{if(o!=null){var h=d[0],m=h==null?void 0:h.getPosition(o);if(m!=null)return m;var u=i==null?void 0:i[Number(o)];if(u)switch(a){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},YM=(e,t,a,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(a==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(d=>{var h;return((h=d.settings)===null||h===void 0?void 0:h.graphicalItemId)===i})},KM=e=>e.options.tooltipPayloadSearcher,Vc=e=>e.tooltip;function ST(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function ET(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ST(Object(a),!0).forEach(function(n){aG(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ST(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function aG(e,t,a){return(t=nG(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nG(e){var t=sG(e,"string");return typeof t=="symbol"?t:t+""}function sG(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lG(e,t){return e??t}var VM=(e,t,a,n,i,o,d)=>{if(!(t==null||o==null)){var{chartData:h,computedData:m,dataStartIndex:u,dataEndIndex:f}=a,x=[];return e.reduce((b,v)=>{var N,{dataDefinedOnItem:j,settings:_}=v,k=lG(j,h),E=Array.isArray(k)?C4(k,u,f):k,C=(N=_==null?void 0:_.dataKey)!==null&&N!==void 0?N:n,S=_==null?void 0:_.nameKey,O;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&d==="axis"?O=$5(E,n,i):O=o(E,t,m,S),Array.isArray(O))O.forEach(L=>{var te=ET(ET({},_),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});b.push(ES({tooltipEntrySettings:te,dataKey:L.dataKey,payload:L.payload,value:pr(L.payload,L.dataKey),name:L.name}))});else{var I;b.push(ES({tooltipEntrySettings:_,dataKey:C,payload:O,value:pr(O,C),name:(I=pr(O,S))!==null&&I!==void 0?I:_==null?void 0:_.name}))}return b},x)}},_N=Ie([ba,hM,Xj],kM),iG=Ie([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),oG=Ie([Ea,Hc],aN),Gc=Ie([iG,ba,oG],nN,{memoizeOptions:{resultEqualityCheck:bx}}),cG=Ie([Gc],e=>e.filter(px)),dG=Ie([Gc],sN,{memoizeOptions:{resultEqualityCheck:bx}}),Xc=Ie([dG,Tl],lN),uG=Ie([cG,Tl,ba],cM),kN=Ie([Xc,ba,Gc],oN),GM=Ie([ba],cN),fG=Ie([ba],e=>e.allowDataOverflow),XM=Ie([GM,fG],F3),hG=Ie([Gc],e=>e.filter(px)),mG=Ie([uG,hG,zu,rM],bM),pG=Ie([mG,Tl,Ea,XM],gM),xG=Ie([Gc],pM),bG=Ie([Xc,ba,xG,yx,Ea],fN,{memoizeOptions:{resultEqualityCheck:xx}}),gG=Ie([vM,Ea,Hc],Kc),vG=Ie([gG,Ea],NM),yG=Ie([yM,Ea,Hc],Kc),jG=Ie([yG,Ea],wM),NG=Ie([jM,Ea,Hc],Kc),wG=Ie([NG,Ea],_M),_G=Ie([vG,wG,jG],bp),kG=Ie([ba,GM,XM,pG,bG,_G,er,Ea],hN),Hu=Ie([ba,er,Xc,kN,zu,Ea,kG],mN),SG=Ie([Hu,ba,_N],bN),EG=Ie([ba,Hu,SG,Ea],vN),WM=e=>{var t=Ea(e),a=Hc(e),n=!1;return Fu(e,t,a,n)},JM=Ie([ba,WM],fx),ZM=Ie([ba,_N,EG,JM],xN),TG=Ie([er,kN,ba,Ea],MM),CG=Ie([er,kN,ba,Ea],IM),AG=(e,t,a,n,i,o,d,h)=>{if(t){var{type:m}=t,u=_l(e,h);if(n){var f=a==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,x=m==="category"&&n.bandwidth?n.bandwidth()/f:0;return x=h==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Na(i[0]-i[1])*2*x:x,u&&d?d.map((b,v)=>{var N=n.map(b);return Gt(N)?{coordinate:N+x,value:b,index:v,offset:x}:null}).filter(dn):n.domain().map((b,v)=>{var N=n.map(b);return Gt(N)?{coordinate:N+x,value:o?o[b]:b,index:v,offset:x}:null}).filter(dn)}}},Ol=Ie([er,ba,_N,ZM,WM,TG,CG,Ea],AG),SN=Ie([DM,LM,zV],(e,t,a)=>RM(a.shared,e,t)),QM=e=>e.tooltip.settings.trigger,EN=e=>e.tooltip.settings.defaultIndex,Yu=Ie([Vc,SN,QM,EN],FM),pi=Ie([Yu,Xc,qu,Hu],wN),e6=Ie([Ol,pi],$M),TN=Ie([Yu],e=>{if(e)return e.dataKey}),OG=Ie([Yu],e=>{if(e)return e.graphicalItemId}),t6=Ie([Vc,SN,QM,EN],YM),MG=Ie([kl,Sl,er,pa,Ol,EN,t6],HM),IG=Ie([Yu,MG],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),PG=Ie([Yu],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),DG=Ie([t6,pi,Tl,qu,e6,KM,SN],VM),LG=Ie([DG],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function TT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function CT(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(a),!0).forEach(function(n){RG(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function RG(e,t,a){return(t=$G(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $G(e){var t=zG(e,"string");return typeof t=="symbol"?t:t+""}function zG(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BG=()=>_t(ba),UG=()=>{var e=BG(),t=_t(Ol),a=_t(ZM);return Ac(!e||!a?void 0:CT(CT({},e),{},{scale:a}),t)};function AT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function uc(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(a),!0).forEach(function(n){qG(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):AT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function qG(e,t,a){return(t=FG(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function FG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YG=(e,t,a,n)=>{var i=t.find(o=>o&&o.index===a);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},KG=(e,t,a,n)=>{var i=t.find(u=>u&&u.index===a);if(i){if(e==="centric"){var o=i.coordinate,{radius:d}=n;return uc(uc(uc({},n),oa(n.cx,n.cy,d,o)),{},{angle:o,radius:d})}var h=i.coordinate,{angle:m}=n;return uc(uc(uc({},n),oa(n.cx,n.cy,h,m)),{},{angle:m,radius:h})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function VG(e,t){var{chartX:a,chartY:n}=e;return a>=t.left&&a<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var r6=(e,t,a,n,i)=>{var o,d=(o=t==null?void 0:t.length)!==null&&o!==void 0?o:0;if(d<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var h=0;h<d;h++){var m,u,f,x,b,v=h>0?(m=a[h-1])===null||m===void 0?void 0:m.coordinate:(u=a[d-1])===null||u===void 0?void 0:u.coordinate,N=(f=a[h])===null||f===void 0?void 0:f.coordinate,j=h>=d-1?(x=a[0])===null||x===void 0?void 0:x.coordinate:(b=a[h+1])===null||b===void 0?void 0:b.coordinate,_=void 0;if(!(v==null||N==null||j==null))if(Na(N-v)!==Na(j-N)){var k=[];if(Na(j-N)===Na(i[1]-i[0])){_=j;var E=N+i[1]-i[0];k[0]=Math.min(E,(E+v)/2),k[1]=Math.max(E,(E+v)/2)}else{_=v;var C=j+i[1]-i[0];k[0]=Math.min(N,(C+N)/2),k[1]=Math.max(N,(C+N)/2)}var S=[Math.min(N,(_+N)/2),Math.max(N,(_+N)/2)];if(e>S[0]&&e<=S[1]||e>=k[0]&&e<=k[1]){var O;return(O=a[h])===null||O===void 0?void 0:O.index}}else{var I=Math.min(v,j),L=Math.max(v,j);if(e>(I+N)/2&&e<=(L+N)/2){var te;return(te=a[h])===null||te===void 0?void 0:te.index}}}else if(t)for(var H=0;H<d;H++){var B=t[H];if(B!=null){var X=t[H+1],V=t[H-1];if(H===0&&X!=null&&e<=(B.coordinate+X.coordinate)/2||H===d-1&&V!=null&&e>(B.coordinate+V.coordinate)/2||H>0&&H<d-1&&V!=null&&X!=null&&e>(B.coordinate+V.coordinate)/2&&e<=(B.coordinate+X.coordinate)/2)return B.index}}return-1},GG=()=>_t(Xj),CN=(e,t)=>t,a6=(e,t,a)=>a,AN=(e,t,a,n)=>n,XG=Ie(Ol,e=>Bp(e,t=>t.coordinate)),ON=Ie([Vc,CN,a6,AN],FM),MN=Ie([ON,Xc,qu,Hu],wN),WG=(e,t,a)=>{if(t!=null){var n=Vc(e);return t==="axis"?a==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:a==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},n6=Ie([Vc,CN,a6,AN],YM),gp=Ie([kl,Sl,er,pa,Ol,AN,n6],HM),JG=Ie([ON,gp],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),s6=Ie([Ol,MN],$M),ZG=Ie([n6,MN,Tl,qu,s6,KM,CN],VM),QG=Ie([ON,MN],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),eX=(e,t,a,n,i,o,d)=>{if(!(!e||!a||!n||!i)&&VG(e,d)){var h=LU(e,t),m=r6(h,o,i,a,n),u=YG(t,i,m,e);return{activeIndex:String(m),activeCoordinate:u}}},tX=(e,t,a,n,i,o,d)=>{if(!(!e||!n||!i||!o||!a)){var h=$F(e,a);if(h){var m=RU(h,t),u=r6(m,d,o,n,i),f=KG(t,o,u,h);return{activeIndex:String(u),activeCoordinate:f}}}},rX=(e,t,a,n,i,o,d,h)=>{if(!(!e||!t||!n||!i||!o))return t==="horizontal"||t==="vertical"?eX(e,t,n,i,o,d,h):tX(e,t,a,n,i,o,d)},aX=Ie(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var n=e[t];if(n!=null)return a?n.panoramaElement:n.element}}),nX=Ie(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ca)),a=Array.from(new Set(t));return a.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:$K}});function OT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function MT(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(a),!0).forEach(function(n){sX(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function sX(e,t,a){return(t=lX(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lX(e){var t=iX(e,"string");return typeof t=="symbol"?t:t+""}function iX(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oX={},cX={zIndexMap:Object.values(ca).reduce((e,t)=>MT(MT({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),oX)},dX=new Set(Object.values(ca));function uX(e){return dX.has(e)}var l6=mn({name:"zIndex",initialState:cX,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ir()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!uX(a)&&delete e.zIndexMap[a])},prepare:Ir()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:n,isPanorama:i}=t.payload;e.zIndexMap[a]?i?e.zIndexMap[a].panoramaElement=n:e.zIndexMap[a].element=n:e.zIndexMap[a]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Ir()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:Ir()}}}),{registerZIndexPortal:fX,unregisterZIndexPortal:hX,registerZIndexPortalElement:mX,unregisterZIndexPortalElement:pX}=l6.actions,xX=l6.reducer;function pn(e){var{zIndex:t,children:a}=e,n=hq(),i=n&&t!==void 0&&t!==0,o=Ya(),d=Lr();g.useLayoutEffect(()=>i?(d(fX({zIndex:t})),()=>{d(hX({zIndex:t}))}):jo,[d,t,i]);var h=_t(m=>aX(m,t,o));return i?h?v5.createPortal(a,h):null:a}function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ny.apply(null,arguments)}function IT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function gh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(a),!0).forEach(function(n){bX(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function bX(e,t,a){return(t=gX(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function gX(e){var t=vX(e,"string");return typeof t=="symbol"?t:t+""}function vX(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yX(e){var{cursor:t,cursorComp:a,cursorProps:n}=e;return g.isValidElement(t)?g.cloneElement(t,n):g.createElement(a,n)}function jX(e){var t,{coordinate:a,payload:n,index:i,offset:o,tooltipAxisBandSize:d,layout:h,cursor:m,tooltipEventType:u,chartName:f}=e,x=a,b=n,v=i;if(!m||!x||f!=="ScatterChart"&&u!=="axis")return null;var N,j,_;if(f==="ScatterChart")N=x,j=Zq,_=ca.cursorLine;else if(f==="BarChart")N=Qq(h,x,o,d),j=n3,_=ca.cursorRectangle;else if(h==="radial"&&U5(x)){var{cx:k,cy:E,radius:C,startAngle:S,endAngle:O}=l3(x);N={cx:k,cy:E,startAngle:S,endAngle:O,innerRadius:C,outerRadius:C},j=o3,_=ca.cursorLine}else N={points:qF(h,x,o)},j=Nj,_=ca.cursorLine;var I=typeof m=="object"&&"className"in m?m.className:void 0,L=gh(gh(gh(gh({stroke:"#ccc",pointerEvents:"none"},o),N),co(m)),{},{payload:b,payloadIndex:v,className:nr("recharts-tooltip-cursor",I)});return g.createElement(pn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},g.createElement(yX,{cursor:m,cursorComp:j,cursorProps:L}))}function NX(e){var t=UG(),a=$4(),n=No(),i=GG();return t==null||a==null||n==null||i==null?null:g.createElement(jX,Ny({},e,{offset:a,layout:n,tooltipAxisBandSize:t,chartName:i}))}var i6=g.createContext(null),wX=()=>g.useContext(i6),iv={exports:{}},PT;function _X(){return PT||(PT=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(a=!1));function i(m,u,f){this.fn=m,this.context=u,this.once=f||!1}function o(m,u,f,x,b){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,x||m,b),N=a?a+u:u;return m._events[N]?m._events[N].fn?m._events[N]=[m._events[N],v]:m._events[N].push(v):(m._events[N]=v,m._eventsCount++),m}function d(m,u){--m._eventsCount===0?m._events=new n:delete m._events[u]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var u=[],f,x;if(this._eventsCount===0)return u;for(x in f=this._events)t.call(f,x)&&u.push(a?x.slice(1):x);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},h.prototype.listeners=function(u){var f=a?a+u:u,x=this._events[f];if(!x)return[];if(x.fn)return[x.fn];for(var b=0,v=x.length,N=new Array(v);b<v;b++)N[b]=x[b].fn;return N},h.prototype.listenerCount=function(u){var f=a?a+u:u,x=this._events[f];return x?x.fn?1:x.length:0},h.prototype.emit=function(u,f,x,b,v,N){var j=a?a+u:u;if(!this._events[j])return!1;var _=this._events[j],k=arguments.length,E,C;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),k){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,x),!0;case 4:return _.fn.call(_.context,f,x,b),!0;case 5:return _.fn.call(_.context,f,x,b,v),!0;case 6:return _.fn.call(_.context,f,x,b,v,N),!0}for(C=1,E=new Array(k-1);C<k;C++)E[C-1]=arguments[C];_.fn.apply(_.context,E)}else{var S=_.length,O;for(C=0;C<S;C++)switch(_[C].once&&this.removeListener(u,_[C].fn,void 0,!0),k){case 1:_[C].fn.call(_[C].context);break;case 2:_[C].fn.call(_[C].context,f);break;case 3:_[C].fn.call(_[C].context,f,x);break;case 4:_[C].fn.call(_[C].context,f,x,b);break;default:if(!E)for(O=1,E=new Array(k-1);O<k;O++)E[O-1]=arguments[O];_[C].fn.apply(_[C].context,E)}}return!0},h.prototype.on=function(u,f,x){return o(this,u,f,x,!1)},h.prototype.once=function(u,f,x){return o(this,u,f,x,!0)},h.prototype.removeListener=function(u,f,x,b){var v=a?a+u:u;if(!this._events[v])return this;if(!f)return d(this,v),this;var N=this._events[v];if(N.fn)N.fn===f&&(!b||N.once)&&(!x||N.context===x)&&d(this,v);else{for(var j=0,_=[],k=N.length;j<k;j++)(N[j].fn!==f||b&&!N[j].once||x&&N[j].context!==x)&&_.push(N[j]);_.length?this._events[v]=_.length===1?_[0]:_:d(this,v)}return this},h.prototype.removeAllListeners=function(u){var f;return u?(f=a?a+u:u,this._events[f]&&d(this,f)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=a,h.EventEmitter=h,e.exports=h})(iv)),iv.exports}var kX=_X();const SX=ms(kX);var gu=new SX,wy="recharts.syncEvent.tooltip",DT="recharts.syncEvent.brush",IN=(e,t)=>{if(t&&Array.isArray(e)){var a=Number.parseInt(t,10);if(!Ls(a))return e[a]}},EX={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},o6=mn({name:"options",initialState:EX,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),TX=o6.reducer,{createEventEmitter:CX}=o6.actions;function AX(e){return e.tooltip.syncInteraction}var OX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},c6=mn({name:"chartData",initialState:OX,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:n}=t.payload;a!=null&&(e.dataStartIndex=a),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:LT,setDataStartEndIndexes:MX,setComputedData:hse}=c6.actions,IX=c6.reducer,PX=["x","y"];function RT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function fc(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RT(Object(a),!0).forEach(function(n){DX(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function DX(e,t,a){return(t=LX(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function LX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $X(e,t){if(e==null)return{};var a,n,i=zX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function zX(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function BX(){var e=_t(Wj),t=_t(Jj),a=Lr(),n=_t(aM),i=_t(Ol),o=No(),d=ex(),h=_t(m=>m.rootProps.className);g.useEffect(()=>{if(e==null)return jo;var m=(u,f,x)=>{if(t!==x&&e===u){if(n==="index"){var b;if(d&&f!==null&&f!==void 0&&(b=f.payload)!==null&&b!==void 0&&b.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:N,y:j}=v,_=$X(v,PX),{x:k,y:E,width:C,height:S}=f.payload.sourceViewBox,O=fc(fc({},_),{},{x:d.x+(C?(N-k)/C:0)*d.width,y:d.y+(S?(j-E)/S:0)*d.height});a(fc(fc({},f),{},{payload:fc(fc({},f.payload),{},{coordinate:O})}))}else a(f);return}if(i!=null){var I;if(typeof n=="function"){var L={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},te=n(i,L);I=i[te]}else n==="value"&&(I=i.find(M=>String(M.value)===f.payload.label));var{coordinate:H}=f.payload;if(I==null||f.payload.active===!1||H==null||d==null){a(yy({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:B,y:X}=H,V=Math.min(B,d.x+d.width),le=Math.min(X,d.y+d.height),J={x:o==="horizontal"?I.coordinate:V,y:o==="horizontal"?le:I.coordinate},Z=yy({active:f.payload.active,coordinate:J,dataKey:f.payload.dataKey,index:String(I.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});a(Z)}}};return gu.on(wy,m),()=>{gu.off(wy,m)}},[h,a,t,e,n,i,o,d])}function UX(){var e=_t(Wj),t=_t(Jj),a=Lr();g.useEffect(()=>{if(e==null)return jo;var n=(i,o,d)=>{t!==d&&e===i&&a(MX(o))};return gu.on(DT,n),()=>{gu.off(DT,n)}},[a,t,e])}function qX(){var e=Lr();g.useEffect(()=>{e(CX())},[e]),BX(),UX()}function FX(e,t,a,n,i,o){var d=_t(v=>WG(v,e,t)),h=_t(Jj),m=_t(Wj),u=_t(aM),f=_t(AX),x=f==null?void 0:f.active,b=ex();g.useEffect(()=>{if(!x&&m!=null&&h!=null){var v=yy({active:o,coordinate:a,dataKey:d,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:b,graphicalItemId:void 0});gu.emit(wy,m,v,h)}},[x,a,d,i,n,h,m,u,o,b])}function $T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function zT(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(a),!0).forEach(function(n){HX(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$T(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function HX(e,t,a){return(t=YX(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function YX(e){var t=KX(e,"string");return typeof t=="symbol"?t:t+""}function KX(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VX(e){return e.dataKey}function GX(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(Oq,t)}var BT=[],XX={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ks(e){var t,a,n=ka(e,XX),{active:i,allowEscapeViewBox:o,animationDuration:d,animationEasing:h,content:m,filterNull:u,isAnimationActive:f,offset:x,payloadUniqBy:b,position:v,reverseDirection:N,useTranslate3d:j,wrapperStyle:_,cursor:k,shared:E,trigger:C,defaultIndex:S,portal:O,axisId:I}=n,L=Lr(),te=typeof S=="number"?String(S):S;g.useEffect(()=>{L(HV({shared:E,trigger:C,axisId:I,active:i,defaultIndex:te}))},[L,E,C,I,i,te]);var H=ex(),B=Q4(),X=$V(E),{activeIndex:V,isActive:le}=(t=_t(me=>QG(me,X,C,te)))!==null&&t!==void 0?t:{},J=_t(me=>ZG(me,X,C,te)),Z=_t(me=>s6(me,X,C,te)),M=_t(me=>JG(me,X,C,te)),P=J,W=wX(),se=(a=i??le)!==null&&a!==void 0?a:!1,[ue,D]=jB([P,se]),U=X==="axis"?Z:void 0;FX(X,C,M,U,V,se);var re=O??W;if(re==null||H==null||X==null)return null;var he=P??BT;se||(he=BT),u&&he.length&&(he=V7(he.filter(me=>me.value!=null&&(me.hide!==!0||n.includeHidden)),b,VX));var Ne=he.length>0,Y=g.createElement($q,{allowEscapeViewBox:o,animationDuration:d,animationEasing:h,isAnimationActive:f,active:se,coordinate:M,hasPayload:Ne,offset:x,position:v,reverseDirection:N,useTranslate3d:j,viewBox:H,wrapperStyle:_,lastBoundingBox:ue,innerRef:D,hasPortalFromProps:!!O},GX(m,zT(zT({},n),{},{payload:he,label:U,active:se,activeIndex:V,coordinate:M,accessibilityLayer:B})));return g.createElement(g.Fragment,null,v5.createPortal(Y,re),se&&g.createElement(NX,{cursor:k,tooltipEventType:X,coordinate:M,payload:he,index:V}))}var _x=e=>null;_x.displayName="Cell";function WX(e,t,a){return(t=JX(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JX(e){var t=ZX(e,"string");return typeof t=="symbol"?t:t+""}function ZX(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class QX{constructor(t){WX(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function UT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function eW(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(a),!0).forEach(function(n){tW(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function tW(e,t,a){return(t=rW(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rW(e){var t=aW(e,"string");return typeof t=="symbol"?t:t+""}function aW(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nW={cacheSize:2e3,enableCache:!0},d6=eW({},nW),qT=new QX(d6.cacheSize),sW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FT="recharts_measurement_span";function lW(e,t){var a=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",o=t.fontStyle||"",d=t.letterSpacing||"",h=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(n,"|").concat(i,"|").concat(o,"|").concat(d,"|").concat(h)}var HT=(e,t)=>{try{var a=document.getElementById(FT);a||(a=document.createElement("span"),a.setAttribute("id",FT),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,sW,t),a.textContent="".concat(e);var n=a.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ru=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||nx.isSsr)return{width:0,height:0};if(!d6.enableCache)return HT(t,a);var n=lW(t,a),i=qT.get(n);if(i)return i;var o=HT(t,a);return qT.set(n,o),o},u6;function iW(e,t,a){return(t=oW(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oW(e){var t=cW(e,"string");return typeof t=="symbol"?t:t+""}function cW(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hW=["cm","mm","pt","pc","in","Q","px"];function mW(e){return hW.includes(e)}var gc="NaN";function pW(e,t){return e*fW[t]}class La{static parse(t){var a,[,n,i]=(a=uW.exec(t))!==null&&a!==void 0?a:[];return n==null?La.NaN:new La(parseFloat(n),i??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Ls(t)&&(this.unit=""),a!==""&&!dW.test(a)&&(this.num=NaN,this.unit=""),mW(a)&&(this.num=pW(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new La(NaN,""):new La(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new La(NaN,""):new La(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new La(NaN,""):new La(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new La(NaN,""):new La(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ls(this.num)}}u6=La;iW(La,"NaN",new u6(NaN,""));function f6(e){if(e==null||e.includes(gc))return gc;for(var t=e;t.includes("*")||t.includes("/");){var a,[,n,i,o]=(a=YT.exec(t))!==null&&a!==void 0?a:[],d=La.parse(n??""),h=La.parse(o??""),m=i==="*"?d.multiply(h):d.divide(h);if(m.isNaN())return gc;t=t.replace(YT,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,f,x,b]=(u=KT.exec(t))!==null&&u!==void 0?u:[],v=La.parse(f??""),N=La.parse(b??""),j=x==="+"?v.add(N):v.subtract(N);if(j.isNaN())return gc;t=t.replace(KT,j.toString())}return t}var VT=/\(([^()]*)\)/;function xW(e){for(var t=e,a;(a=VT.exec(t))!=null;){var[,n]=a;t=t.replace(VT,f6(n))}return t}function bW(e){var t=e.replace(/\s+/g,"");return t=xW(t),t=f6(t),t}function gW(e){try{return bW(e)}catch{return gc}}function ov(e){var t=gW(e.slice(5,-1));return t===gc?"":t}var vW=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],yW=["dx","dy","angle","className","breakAll"];function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_y.apply(null,arguments)}function GT(e,t){if(e==null)return{};var a,n,i=jW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function jW(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var h6=/[ \f\n\r\t\v\u2028\u2029]+/,m6=e=>{var{children:t,breakAll:a,style:n}=e;try{var i=[];Br(t)||(a?i=t.toString().split(""):i=t.toString().split(h6));var o=i.map(h=>({word:h,width:ru(h,n).width})),d=a?0:ru("",n).width;return{wordsWithComputedWidth:o,spaceWidth:d}}catch{return null}};function NW(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var p6=(e,t,a,n)=>e.reduce((i,o)=>{var{word:d,width:h}=o,m=i[i.length-1];if(m&&h!=null&&(t==null||n||m.width+h+a<Number(t)))m.words.push(d),m.width+=h+a;else{var u={words:[d],width:h};i.push(u)}return i},[]),x6=e=>e.reduce((t,a)=>t.width>a.width?t:a),wW="",XT=(e,t,a,n,i,o,d,h)=>{var m=e.slice(0,t),u=m6({breakAll:a,style:n,children:m+wW});if(!u)return[!1,[]];var f=p6(u.wordsWithComputedWidth,o,d,h),x=f.length>i||x6(f).width>Number(o);return[x,f]},_W=(e,t,a,n,i)=>{var{maxLines:o,children:d,style:h,breakAll:m}=e,u=vt(o),f=String(d),x=p6(t,n,a,i);if(!u||i)return x;var b=x.length>o||x6(x).width>Number(n);if(!b)return x;for(var v=0,N=f.length-1,j=0,_;v<=N&&j<=f.length-1;){var k=Math.floor((v+N)/2),E=k-1,[C,S]=XT(f,E,m,h,o,n,a,i),[O]=XT(f,k,m,h,o,n,a,i);if(!C&&!O&&(v=k+1),C&&O&&(N=k-1),!C&&O){_=S;break}j++}return _||x},WT=e=>{var t=Br(e)?[]:e.toString().split(h6);return[{words:t,width:void 0}]},kW=e=>{var{width:t,scaleToFit:a,children:n,style:i,breakAll:o,maxLines:d}=e;if((t||a)&&!nx.isSsr){var h,m,u=m6({breakAll:o,children:n,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:x}=u;h=f,m=x}else return WT(n);return _W({breakAll:o,children:n,maxLines:d,style:i},h,m,t,!!a)}return WT(n)},b6="#808080",SW={angle:0,breakAll:!1,capHeight:"0.71em",fill:b6,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},kx=g.forwardRef((e,t)=>{var a=ka(e,SW),{x:n,y:i,lineHeight:o,capHeight:d,fill:h,scaleToFit:m,textAnchor:u,verticalAnchor:f}=a,x=GT(a,vW),b=g.useMemo(()=>kW({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:m,style:x.style,width:x.width}),[x.breakAll,x.children,x.maxLines,m,x.style,x.width]),{dx:v,dy:N,angle:j,className:_,breakAll:k}=x,E=GT(x,yW);if(!Rs(n)||!Rs(i)||b.length===0)return null;var C=Number(n)+(vt(v)?v:0),S=Number(i)+(vt(N)?N:0);if(!Gt(C)||!Gt(S))return null;var O;switch(f){case"start":O=ov("calc(".concat(d,")"));break;case"middle":O=ov("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:O=ov("calc(".concat(b.length-1," * -").concat(o,")"));break}var I=[],L=b[0];if(m&&L!=null){var te=L.width,{width:H}=x;I.push("scale(".concat(vt(H)&&vt(te)?H/te:1,")"))}return j&&I.push("rotate(".concat(j,", ").concat(C,", ").concat(S,")")),I.length&&(E.transform=I.join(" ")),g.createElement("text",_y({},Za(E),{ref:t,x:C,y:S,className:nr("recharts-text",_),textAnchor:u,fill:h.includes("url")?b6:h}),b.map((B,X)=>{var V=B.words.join(k?"":" ");return g.createElement("tspan",{x:C,dy:X===0?O:o,key:"".concat(V,"-").concat(X)},V)}))});kx.displayName="Text";function JT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function ws(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(a),!0).forEach(function(n){EW(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function EW(e,t,a){return(t=TW(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TW(e){var t=CW(e,"string");return typeof t=="symbol"?t:t+""}function CW(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AW=e=>{var{viewBox:t,position:a,offset:n=0,parentViewBox:i}=e,{x:o,y:d,height:h,upperWidth:m,lowerWidth:u}=vj(t),f=o,x=o+(m-u)/2,b=(f+x)/2,v=(m+u)/2,N=f+m/2,j=h>=0?1:-1,_=j*n,k=j>0?"end":"start",E=j>0?"start":"end",C=m>=0?1:-1,S=C*n,O=C>0?"end":"start",I=C>0?"start":"end",L=i;if(a==="top"){var te={x:f+m/2,y:d-_,horizontalAnchor:"middle",verticalAnchor:k};return L&&(te.height=Math.max(d-L.y,0),te.width=m),te}if(a==="bottom"){var H={x:x+u/2,y:d+h+_,horizontalAnchor:"middle",verticalAnchor:E};return L&&(H.height=Math.max(L.y+L.height-(d+h),0),H.width=u),H}if(a==="left"){var B={x:b-S,y:d+h/2,horizontalAnchor:O,verticalAnchor:"middle"};return L&&(B.width=Math.max(B.x-L.x,0),B.height=h),B}if(a==="right"){var X={x:b+v+S,y:d+h/2,horizontalAnchor:I,verticalAnchor:"middle"};return L&&(X.width=Math.max(L.x+L.width-X.x,0),X.height=h),X}var V=L?{width:v,height:h}:{};return a==="insideLeft"?ws({x:b+S,y:d+h/2,horizontalAnchor:I,verticalAnchor:"middle"},V):a==="insideRight"?ws({x:b+v-S,y:d+h/2,horizontalAnchor:O,verticalAnchor:"middle"},V):a==="insideTop"?ws({x:f+m/2,y:d+_,horizontalAnchor:"middle",verticalAnchor:E},V):a==="insideBottom"?ws({x:x+u/2,y:d+h-_,horizontalAnchor:"middle",verticalAnchor:k},V):a==="insideTopLeft"?ws({x:f+S,y:d+_,horizontalAnchor:I,verticalAnchor:E},V):a==="insideTopRight"?ws({x:f+m-S,y:d+_,horizontalAnchor:O,verticalAnchor:E},V):a==="insideBottomLeft"?ws({x:x+S,y:d+h-_,horizontalAnchor:I,verticalAnchor:k},V):a==="insideBottomRight"?ws({x:x+u-S,y:d+h-_,horizontalAnchor:O,verticalAnchor:k},V):a&&typeof a=="object"&&(vt(a.x)||ho(a.x))&&(vt(a.y)||ho(a.y))?ws({x:o+Fa(a.x,v),y:d+Fa(a.y,h),horizontalAnchor:"end",verticalAnchor:"end"},V):ws({x:N,y:d+h/2,horizontalAnchor:"middle",verticalAnchor:"middle"},V)},OW=["labelRef"],MW=["content"];function ZT(e,t){if(e==null)return{};var a,n,i=IW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function IW(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function QT(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Qd(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QT(Object(a),!0).forEach(function(n){PW(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QT(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function PW(e,t,a){return(t=DW(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DW(e){var t=LW(e,"string");return typeof t=="symbol"?t:t+""}function LW(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},cl.apply(null,arguments)}var g6=g.createContext(null),RW=e=>{var{x:t,y:a,upperWidth:n,lowerWidth:i,width:o,height:d,children:h}=e,m=g.useMemo(()=>({x:t,y:a,upperWidth:n,lowerWidth:i,width:o,height:d}),[t,a,n,i,o,d]);return g.createElement(g6.Provider,{value:m},h)},v6=()=>{var e=g.useContext(g6),t=ex();return e||(t?vj(t):void 0)},$W=g.createContext(null),zW=()=>{var e=g.useContext($W),t=_t(oM);return e||t},BW=e=>{var{value:t,formatter:a}=e,n=Br(e.children)?t:e.children;return typeof a=="function"?a(n):n},PN=e=>e!=null&&typeof e=="function",UW=(e,t)=>{var a=Na(t-e),n=Math.min(Math.abs(t-e),360);return a*n},qW=(e,t,a,n,i)=>{var{offset:o,className:d}=e,{cx:h,cy:m,innerRadius:u,outerRadius:f,startAngle:x,endAngle:b,clockWise:v}=i,N=(u+f)/2,j=UW(x,b),_=j>=0?1:-1,k,E;switch(t){case"insideStart":k=x+_*o,E=v;break;case"insideEnd":k=b-_*o,E=!v;break;case"end":k=b+_*o,E=v;break;default:throw new Error("Unsupported position ".concat(t))}E=j<=0?E:!E;var C=oa(h,m,N,k),S=oa(h,m,N,k+(E?1:-1)*359),O="M".concat(C.x,",").concat(C.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(E?0:1,`,
    `).concat(S.x,",").concat(S.y),I=Br(e.id)?su("recharts-radial-line-"):e.id;return g.createElement("text",cl({},n,{dominantBaseline:"central",className:nr("recharts-radial-bar-label",d)}),g.createElement("defs",null,g.createElement("path",{id:I,d:O})),g.createElement("textPath",{xlinkHref:"#".concat(I)},a))},FW=(e,t,a)=>{var{cx:n,cy:i,innerRadius:o,outerRadius:d,startAngle:h,endAngle:m}=e,u=(h+m)/2;if(a==="outside"){var{x:f,y:x}=oa(n,i,d+t,u);return{x:f,y:x,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(o+d)/2,{x:v,y:N}=oa(n,i,b,u);return{x:v,y:N,textAnchor:"middle",verticalAnchor:"middle"}},hm=e=>e!=null&&"cx"in e&&vt(e.cx),HW={angle:0,offset:5,zIndex:ca.label,position:"middle",textBreakAll:!1};function YW(e){if(!hm(e))return e;var{cx:t,cy:a,outerRadius:n}=e,i=n*2;return{x:t-n,y:a-n,width:i,upperWidth:i,lowerWidth:i,height:i}}function ai(e){var t=ka(e,HW),{viewBox:a,parentViewBox:n,position:i,value:o,children:d,content:h,className:m="",textBreakAll:u,labelRef:f}=t,x=zW(),b=v6(),v=i==="center"?b:x??b,N,j,_;a==null?N=v:hm(a)?N=a:N=vj(a);var k=YW(N);if(!N||Br(o)&&Br(d)&&!g.isValidElement(h)&&typeof h!="function")return null;var E=Qd(Qd({},t),{},{viewBox:N});if(g.isValidElement(h)){var{labelRef:C}=E,S=ZT(E,OW);return g.cloneElement(h,S)}if(typeof h=="function"){var{content:O}=E,I=ZT(E,MW);if(j=g.createElement(h,I),g.isValidElement(j))return j}else j=BW(t);var L=Za(t);if(hm(N)){if(i==="insideStart"||i==="insideEnd"||i==="end")return qW(t,i,j,L,N);_=FW(N,t.offset,t.position)}else{if(!k)return null;var te=AW({viewBox:k,position:i,offset:t.offset,parentViewBox:hm(n)?void 0:n});_=Qd(Qd({x:te.x,y:te.y,textAnchor:te.horizontalAnchor,verticalAnchor:te.verticalAnchor},te.width!==void 0?{width:te.width}:{}),te.height!==void 0?{height:te.height}:{})}return g.createElement(pn,{zIndex:t.zIndex},g.createElement(kx,cl({ref:f,className:nr("recharts-label",m)},L,_,{textAnchor:NW(L.textAnchor)?L.textAnchor:_.textAnchor,breakAll:u}),j))}ai.displayName="Label";var KW=(e,t,a)=>{if(!e)return null;var n={viewBox:t,labelRef:a};return e===!0?g.createElement(ai,cl({key:"label-implicit"},n)):Rs(e)?g.createElement(ai,cl({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===ai?g.cloneElement(e,Qd({key:"label-implicit"},n)):g.createElement(ai,cl({key:"label-implicit",content:e},n)):PN(e)?g.createElement(ai,cl({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(ai,cl({},e,{key:"label-implicit"},n)):null};function VW(e){var{label:t,labelRef:a}=e,n=v6();return KW(t,n,a)||null}var cv={},dv={},eC;function GW(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(dv)),dv}var uv={},tC;function XW(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(uv)),uv}var rC;function WW(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GW(),a=XW(),n=oj();function i(o){if(n.isArrayLike(o))return t.last(a.toArray(o))}e.last=i})(cv)),cv}var fv,aC;function JW(){return aC||(aC=1,fv=WW().last),fv}var ZW=JW();const QW=ms(ZW);var eJ=["valueAccessor"],tJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},vp.apply(null,arguments)}function nC(e,t){if(e==null)return{};var a,n,i=rJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function rJ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var aJ=e=>Array.isArray(e.value)?QW(e.value):e.value,y6=g.createContext(void 0),j6=y6.Provider,N6=g.createContext(void 0),nJ=N6.Provider;function sJ(){return g.useContext(y6)}function lJ(){return g.useContext(N6)}function mm(e){var{valueAccessor:t=aJ}=e,a=nC(e,eJ),{dataKey:n,clockWise:i,id:o,textBreakAll:d,zIndex:h}=a,m=nC(a,tJ),u=sJ(),f=lJ(),x=u||f;return!x||!x.length?null:g.createElement(pn,{zIndex:h??ca.label},g.createElement(_a,{className:"recharts-label-list"},x.map((b,v)=>{var N,j=Br(n)?t(b,v):pr(b.payload,n),_=Br(o)?{}:{id:"".concat(o,"-").concat(v)};return g.createElement(ai,vp({key:"label-".concat(v)},Za(b),m,_,{fill:(N=a.fill)!==null&&N!==void 0?N:b.fill,parentViewBox:b.parentViewBox,value:j,textBreakAll:d,viewBox:b.viewBox,index:v,zIndex:0}))})))}mm.displayName="LabelList";function DN(e){var{label:t}=e;return t?t===!0?g.createElement(mm,{key:"labelList-implicit"}):g.isValidElement(t)||PN(t)?g.createElement(mm,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(mm,vp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ky(){return ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ky.apply(null,arguments)}var w6=e=>{var{cx:t,cy:a,r:n,className:i}=e,o=nr("recharts-dot",i);return vt(t)&&vt(a)&&vt(n)?g.createElement("circle",ky({},Pn(e),ij(e),{className:o,cx:t,cy:a,r:n})):null},_6=e=>e.graphicalItems.polarItems,iJ=Ie([Ur,Bu],aN),Sx=Ie([_6,Xr,iJ],nN),oJ=Ie([Sx],sN),Ex=Ie([oJ,ux],lN),cJ=Ie([Ex,Xr,Sx],oN);Ie([Ex,Xr,Sx],(e,t,a)=>a.length>0?e.flatMap(n=>a.flatMap(i=>{var o,d=pr(n,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:pr(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var sC=()=>{},dJ=Ie([Ex,Xr,Sx,yx,Ur],fN),uJ=Ie([Xr,dN,uN,sC,dJ,sC,er,Ur],hN),k6=Ie([Xr,er,Ex,cJ,zu,Ur,uJ],mN),fJ=Ie([k6,Yc,vi],bN),hJ=Ie([Xr,k6,fJ,Ur],vN);Ie([vi,hJ],dM);var mJ={radiusAxis:{},angleAxis:{}},S6=mn({name:"polarAxis",initialState:mJ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mse,removeRadiusAxis:pse,addAngleAxis:xse,removeAngleAxis:bse}=S6.actions,pJ=S6.reducer;function E6(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function lC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function iC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(a),!0).forEach(function(n){xJ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function xJ(e,t,a){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bJ(e){var t=gJ(e,"string");return typeof t=="symbol"?t:t+""}function gJ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vJ=(e,t)=>t,LN=Ie([_6,vJ],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),yJ=[],RN=(e,t,a)=>(a==null?void 0:a.length)===0?yJ:a,T6=Ie([ux,LN,RN],(e,t,a)=>{var{chartData:n}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&a!=null&&(i=a.map(o=>iC(iC({},t.presentationProps),o.props))),i!=null)return i}}),jJ=Ie([T6,LN,RN],(e,t,a)=>{if(!(e==null||t==null))return e.map((n,i)=>{var o,d=pr(n,t.nameKey,t.name),h;return a!=null&&(o=a[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?h=a[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?h=n.fill:h=t.fill,{value:Bc(d,t.dataKey),color:h,payload:n,type:t.legendType}})}),NJ=Ie([T6,LN,RN,pa],(e,t,a,n)=>{if(!(t==null||e==null))return wZ({offset:n,pieSettings:t,displayedData:e,cells:a})}),hv={exports:{}},mr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function wJ(){if(oC)return mr;oC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function N(j){if(typeof j=="object"&&j!==null){var _=j.$$typeof;switch(_){case e:switch(j=j.type,j){case a:case i:case n:case m:case u:case b:return j;default:switch(j=j&&j.$$typeof,j){case d:case h:case x:case f:return j;case o:return j;default:return _}}case t:return _}}}return mr.ContextConsumer=o,mr.ContextProvider=d,mr.Element=e,mr.ForwardRef=h,mr.Fragment=a,mr.Lazy=x,mr.Memo=f,mr.Portal=t,mr.Profiler=i,mr.StrictMode=n,mr.Suspense=m,mr.SuspenseList=u,mr.isContextConsumer=function(j){return N(j)===o},mr.isContextProvider=function(j){return N(j)===d},mr.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},mr.isForwardRef=function(j){return N(j)===h},mr.isFragment=function(j){return N(j)===a},mr.isLazy=function(j){return N(j)===x},mr.isMemo=function(j){return N(j)===f},mr.isPortal=function(j){return N(j)===t},mr.isProfiler=function(j){return N(j)===i},mr.isStrictMode=function(j){return N(j)===n},mr.isSuspense=function(j){return N(j)===m},mr.isSuspenseList=function(j){return N(j)===u},mr.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===a||j===i||j===n||j===m||j===u||typeof j=="object"&&j!==null&&(j.$$typeof===x||j.$$typeof===f||j.$$typeof===d||j.$$typeof===o||j.$$typeof===h||j.$$typeof===v||j.getModuleId!==void 0)},mr.typeOf=N,mr}var cC;function _J(){return cC||(cC=1,hv.exports=wJ()),hv.exports}var kJ=_J(),dC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uC=null,mv=null,C6=e=>{if(e===uC&&Array.isArray(mv))return mv;var t=[];return g.Children.forEach(e,a=>{Br(a)||(kJ.isFragment(a)?t=t.concat(C6(a.props.children)):t.push(a))}),mv=t,uC=e,t};function $N(e,t){var a=[],n=[];return Array.isArray(t)?n=t.map(i=>dC(i)):n=[dC(t)],C6(e).forEach(i=>{var o=fo(i,"type.displayName")||fo(i,"type.name");o&&n.indexOf(o)!==-1&&a.push(i)}),a}var A6=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,pv={},fC;function SJ(){return fC||(fC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){var i;if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const o=a[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(a,Symbol.toStringTag))!=null&&i.writable)?!1:a.toString()===`[object ${o}]`}let n=a;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(a)===n}e.isPlainObject=t})(pv)),pv}var xv,hC;function EJ(){return hC||(hC=1,xv=SJ().isPlainObject),xv}var TJ=EJ();const CJ=ms(TJ);var mC,pC,xC,bC,gC;function vC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function yC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(a),!0).forEach(function(n){AJ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function AJ(e,t,a){return(t=OJ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OJ(e){var t=MJ(e,"string");return typeof t=="symbol"?t:t+""}function MJ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},yp.apply(null,arguments)}function Hd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var jC=(e,t,a,n,i)=>{var o=a-n,d;return d=Kr(mC||(mC=Hd(["M ",",",""])),e,t),d+=Kr(pC||(pC=Hd(["L ",",",""])),e+a,t),d+=Kr(xC||(xC=Hd(["L ",",",""])),e+a-o/2,t+i),d+=Kr(bC||(bC=Hd(["L ",",",""])),e+a-o/2-n,t+i),d+=Kr(gC||(gC=Hd(["L ",","," Z"])),e,t),d},IJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PJ=e=>{var t=ka(e,IJ),{x:a,y:n,upperWidth:i,lowerWidth:o,height:d,className:h}=t,{animationEasing:m,animationDuration:u,animationBegin:f,isUpdateAnimationActive:x}=t,b=g.useRef(null),[v,N]=g.useState(-1),j=g.useRef(i),_=g.useRef(o),k=g.useRef(d),E=g.useRef(a),C=g.useRef(n),S=Pu(e,"trapezoid-");if(g.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var J=b.current.getTotalLength();J&&N(J)}catch{}},[]),a!==+a||n!==+n||i!==+i||o!==+o||d!==+d||i===0&&o===0||d===0)return null;var O=nr("recharts-trapezoid",h);if(!x)return g.createElement("g",null,g.createElement("path",yp({},Za(t),{className:O,d:jC(a,n,i,o,d)})));var I=j.current,L=_.current,te=k.current,H=E.current,B=C.current,X="0px ".concat(v===-1?1:v,"px"),V="".concat(v,"px 0px"),le=e3(["strokeDasharray"],u,m);return g.createElement(Iu,{animationId:S,key:S,canBegin:v>0,duration:u,easing:m,isActive:x,begin:f},J=>{var Z=Pr(I,i,J),M=Pr(L,o,J),P=Pr(te,d,J),W=Pr(H,a,J),se=Pr(B,n,J);b.current&&(j.current=Z,_.current=M,k.current=P,E.current=W,C.current=se);var ue=J>0?{transition:le,strokeDasharray:V}:{strokeDasharray:X};return g.createElement("path",yp({},Za(t),{className:O,d:jC(W,se,Z,M,P),ref:b,style:yC(yC({},ue),t.style)}))})},DJ=["option","shapeType","activeClassName"];function LJ(e,t){if(e==null)return{};var a,n,i=RJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function RJ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function NC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function jp(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(a),!0).forEach(function(n){$J(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function $J(e,t,a){return(t=zJ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zJ(e){var t=BJ(e,"string");return typeof t=="symbol"?t:t+""}function BJ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UJ(e,t){return jp(jp({},t),e)}function qJ(e,t){return e==="symbols"}function wC(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return g.createElement(n3,a);case"trapezoid":return g.createElement(PJ,a);case"sector":return g.createElement(o3,a);case"symbols":if(qJ(t))return g.createElement(B5,a);break;case"curve":return g.createElement(Nj,a);default:return null}}function FJ(e){return g.isValidElement(e)?e.props:e}function zN(e){var{option:t,shapeType:a,activeClassName:n="recharts-active-shape"}=e,i=LJ(e,DJ),o;if(g.isValidElement(t))o=g.cloneElement(t,jp(jp({},i),FJ(t)));else if(typeof t=="function")o=t(i,i.index);else if(CJ(t)&&typeof t!="boolean"){var d=UJ(t,i);o=g.createElement(wC,{shapeType:a,elementProps:d})}else{var h=i;o=g.createElement(wC,{shapeType:a,elementProps:h})}return i.isActive?g.createElement(_a,{className:n},o):o}var BN=(e,t,a)=>{var n=Lr();return(i,o)=>d=>{e==null||e(i,o,d),n(BM({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},UN=e=>{var t=Lr();return(a,n)=>i=>{e==null||e(a,n,i),t(YV())}},qN=(e,t,a)=>{var n=Lr();return(i,o)=>d=>{e==null||e(i,o,d),n(KV({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}};function FN(e){var{tooltipEntrySettings:t}=e,a=Lr(),n=Ya(),i=g.useRef(null);return g.useLayoutEffect(()=>{n||(i.current===null?a(UV(t)):i.current!==t&&a(qV({prev:i.current,next:t})),i.current=t)},[t,a,n]),g.useLayoutEffect(()=>()=>{i.current&&(a(FV(i.current)),i.current=null)},[a]),null}function O6(e){var{legendPayload:t}=e,a=Lr(),n=Ya(),i=g.useRef(null);return g.useLayoutEffect(()=>{n||(i.current===null?a(W4(t)):i.current!==t&&a(J4({prev:i.current,next:t})),i.current=t)},[a,n,t]),g.useLayoutEffect(()=>()=>{i.current&&(a(Z4(i.current)),i.current=null)},[a]),null}function HJ(e){var{legendPayload:t}=e,a=Lr(),n=_t(er),i=g.useRef(null);return g.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?a(W4(t)):i.current!==t&&a(J4({prev:i.current,next:t})),i.current=t)},[a,n,t]),g.useLayoutEffect(()=>()=>{i.current&&(a(Z4(i.current)),i.current=null)},[a]),null}var bv,YJ=()=>{var[e]=g.useState(()=>su("uid-"));return e},KJ=(bv=RD.useId)!==null&&bv!==void 0?bv:YJ;function VJ(e,t){var a=KJ();return t||(e?"".concat(e,"-").concat(a):a)}var GJ=g.createContext(void 0),HN=e=>{var{id:t,type:a,children:n}=e,i=VJ("recharts-".concat(a),t);return g.createElement(GJ.Provider,{value:i},n(i))},XJ={cartesianItems:[],polarItems:[]},M6=mn({name:"graphicalItems",initialState:XJ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ir()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:n}=t.payload,i=us(e).cartesianItems.indexOf(a);i>-1&&(e.cartesianItems[i]=n)},prepare:Ir()},removeCartesianGraphicalItem:{reducer(e,t){var a=us(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:Ir()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ir()},removePolarGraphicalItem:{reducer(e,t){var a=us(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:Ir()}}}),{addCartesianGraphicalItem:WJ,replaceCartesianGraphicalItem:JJ,removeCartesianGraphicalItem:ZJ,addPolarGraphicalItem:QJ,removePolarGraphicalItem:eZ}=M6.actions,tZ=M6.reducer,rZ=e=>{var t=Lr(),a=g.useRef(null);return g.useLayoutEffect(()=>{a.current===null?t(WJ(e)):a.current!==e&&t(JJ({prev:a.current,next:e})),a.current=e},[t,e]),g.useLayoutEffect(()=>()=>{a.current&&(t(ZJ(a.current)),a.current=null)},[t]),null},I6=g.memo(rZ);function aZ(e){var t=Lr();return g.useLayoutEffect(()=>(t(QJ(e)),()=>{t(eZ(e))}),[t,e]),null}var nZ=["key"],sZ=["onMouseEnter","onClick","onMouseLeave"],lZ=["id"],iZ=["id"];function _C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Vr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(a),!0).forEach(function(n){oZ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_C(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function oZ(e,t,a){return(t=cZ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cZ(e){var t=dZ(e,"string");return typeof t=="symbol"?t:t+""}function dZ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xi(){return xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xi.apply(null,arguments)}function Tx(e,t){if(e==null)return{};var a,n,i=uZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function uZ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function fZ(e){var t=g.useMemo(()=>$N(e.children,_x),[e.children]),a=_t(n=>jJ(n,e.id,t));return a==null?null:g.createElement(HJ,{legendPayload:a})}var hZ=g.memo(e=>{var{dataKey:t,nameKey:a,sectors:n,stroke:i,strokeWidth:o,fill:d,name:h,hide:m,tooltipType:u,id:f}=e,x={dataDefinedOnItem:n.map(b=>b.tooltipPayload),getPosition:b=>{var v;return(v=n[Number(b)])===null||v===void 0?void 0:v.tooltipPosition},settings:{stroke:i,strokeWidth:o,fill:d,dataKey:t,nameKey:a,name:Bc(h,t),hide:m,type:u,color:d,unit:"",graphicalItemId:f}};return g.createElement(FN,{tooltipEntrySettings:x})}),mZ=(e,t)=>e>t?"start":e<t?"end":"middle",pZ=(e,t,a)=>Fa(typeof t=="function"?t(e):t,a,a*.8),xZ=(e,t,a)=>{var{top:n,left:i,width:o,height:d}=t,h=s3(o,d),m=i+Fa(e.cx,o,o/2),u=n+Fa(e.cy,d,d/2),f=Fa(e.innerRadius,h,0),x=pZ(a,e.outerRadius,h),b=e.maxRadius||Math.sqrt(o*o+d*d)/2;return{cx:m,cy:u,innerRadius:f,outerRadius:x,maxRadius:b}},bZ=(e,t)=>{var a=Na(t-e),n=Math.min(Math.abs(t-e),360);return a*n},gZ=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var a=nr("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=Tx(t,nZ);return g.createElement(Nj,xi({},i,{type:"linear",className:a}))},vZ=(e,t,a)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var n=a;if(typeof e=="function"&&(n=e(t),g.isValidElement(n)))return n;var i=nr("recharts-pie-label-text",E6(e));return g.createElement(kx,xi({},t,{alignmentBaseline:"middle",className:i}),n)};function yZ(e){var{sectors:t,props:a,showLabels:n}=e,{label:i,labelLine:o,dataKey:d}=a;if(!n||!i||!t)return null;var h=Pn(a),m=co(i),u=co(o),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,x=t.map((b,v)=>{var N=(b.startAngle+b.endAngle)/2,j=oa(b.cx,b.cy,b.outerRadius+f,N),_=Vr(Vr(Vr(Vr({},h),b),{},{stroke:"none"},m),{},{index:v,textAnchor:mZ(j.x,b.cx)},j),k=Vr(Vr(Vr(Vr({},h),b),{},{fill:"none",stroke:b.fill},u),{},{index:v,points:[oa(b.cx,b.cy,b.outerRadius,N),j],key:"line"});return g.createElement(pn,{zIndex:ca.label,key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(v)},g.createElement(_a,null,o&&gZ(o,k),vZ(i,_,pr(b,d))))});return g.createElement(_a,{className:"recharts-pie-labels"},x)}function jZ(e){var{sectors:t,props:a,showLabels:n}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?g.createElement(DN,{label:i}):g.createElement(yZ,{sectors:t,props:a,showLabels:n})}function NZ(e){var{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:i,shape:o,id:d}=e,h=_t(pi),m=_t(TN),u=_t(OG),{onMouseEnter:f,onClick:x,onMouseLeave:b}=i,v=Tx(i,sZ),N=BN(f,i.dataKey,d),j=UN(b),_=qN(x,i.dataKey,d);return t==null||t.length===0?null:g.createElement(g.Fragment,null,t.map((k,E)=>{if((k==null?void 0:k.startAngle)===0&&(k==null?void 0:k.endAngle)===0&&t.length!==1)return null;var C=u==null||u===d,S=String(E)===h&&(m==null||i.dataKey===m)&&C,O=h?n:null,I=a&&S?a:O,L=Vr(Vr({},k),{},{stroke:k.stroke,tabIndex:-1,[I4]:E,[P4]:d});return g.createElement(_a,xi({key:"sector-".concat(k==null?void 0:k.startAngle,"-").concat(k==null?void 0:k.endAngle,"-").concat(k.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},zp(v,k,E),{onMouseEnter:N(k,E),onMouseLeave:j(k,E),onClick:_(k,E)}),g.createElement(zN,xi({option:o??I,index:E,shapeType:"sector",isActive:S},L)))}))}function wZ(e){var t,{pieSettings:a,displayedData:n,cells:i,offset:o}=e,{cornerRadius:d,startAngle:h,endAngle:m,dataKey:u,nameKey:f,tooltipType:x}=a,b=Math.abs(a.minAngle),v=bZ(h,m),N=Math.abs(v),j=n.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,_=n.filter(I=>pr(I,u,0)!==0).length,k=(N>=360?_:_-1)*j,E=N-_*b-k,C=n.reduce((I,L)=>{var te=pr(L,u,0);return I+(vt(te)?te:0)},0),S;if(C>0){var O;S=n.map((I,L)=>{var te=pr(I,u,0),H=pr(I,f,L),B=xZ(a,o,I),X=(vt(te)?te:0)/C,V,le=Vr(Vr({},I),i&&i[L]&&i[L].props);L?V=O.endAngle+Na(v)*j*(te!==0?1:0):V=h;var J=V+Na(v)*((te!==0?b:0)+X*E),Z=(V+J)/2,M=(B.innerRadius+B.outerRadius)/2,P=[{name:H,value:te,payload:le,dataKey:u,type:x,graphicalItemId:a.id}],W=oa(B.cx,B.cy,M,Z);return O=Vr(Vr(Vr(Vr({},a.presentationProps),{},{percent:X,cornerRadius:typeof d=="string"?parseFloat(d):d,name:H,tooltipPayload:P,midAngle:Z,middleRadius:M,tooltipPosition:W},le),B),{},{value:te,dataKey:u,startAngle:V,endAngle:J,payload:le,paddingAngle:Na(v)*j}),O})}return S}function _Z(e){var{showLabels:t,sectors:a,children:n}=e,i=g.useMemo(()=>!t||!a?[]:a.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[a,t]);return g.createElement(nJ,{value:t?i:void 0},n)}function kZ(e){var{props:t,previousSectorsRef:a,id:n}=e,{sectors:i,isAnimationActive:o,animationBegin:d,animationDuration:h,animationEasing:m,activeShape:u,inactiveShape:f,onAnimationStart:x,onAnimationEnd:b}=t,v=Pu(t,"recharts-pie-"),N=a.current,[j,_]=g.useState(!1),k=g.useCallback(()=>{typeof b=="function"&&b(),_(!1)},[b]),E=g.useCallback(()=>{typeof x=="function"&&x(),_(!0)},[x]);return g.createElement(_Z,{showLabels:!j,sectors:i},g.createElement(Iu,{animationId:v,begin:d,duration:h,isActive:o,easing:m,onAnimationStart:E,onAnimationEnd:k,key:v},C=>{var S,O=[],I=i&&i[0],L=(S=I==null?void 0:I.startAngle)!==null&&S!==void 0?S:0;return i==null||i.forEach((te,H)=>{var B=N&&N[H],X=H>0?fo(te,"paddingAngle",0):0;if(B){var V=Pr(B.endAngle-B.startAngle,te.endAngle-te.startAngle,C),le=Vr(Vr({},te),{},{startAngle:L+X,endAngle:L+V+X});O.push(le),L=le.endAngle}else{var{endAngle:J,startAngle:Z}=te,M=Pr(0,J-Z,C),P=Vr(Vr({},te),{},{startAngle:L+X,endAngle:L+M+X});O.push(P),L=P.endAngle}}),a.current=O,g.createElement(_a,null,g.createElement(NZ,{sectors:O,activeShape:u,inactiveShape:f,allOtherPieProps:t,shape:t.shape,id:n}))}),g.createElement(jZ,{showLabels:!j,sectors:i,props:t}),t.children)}var SZ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ca.area};function EZ(e){var{id:t}=e,a=Tx(e,lZ),{hide:n,className:i,rootTabIndex:o}=e,d=g.useMemo(()=>$N(e.children,_x),[e.children]),h=_t(f=>NJ(f,t,d)),m=g.useRef(null),u=nr("recharts-pie",i);return n||h==null?(m.current=null,g.createElement(_a,{tabIndex:o,className:u})):g.createElement(pn,{zIndex:e.zIndex},g.createElement(hZ,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:h,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),g.createElement(_a,{tabIndex:o,className:u},g.createElement(kZ,{props:Vr(Vr({},a),{},{sectors:h}),previousSectorsRef:m,id:t})))}function P6(e){var t=ka(e,SZ),{id:a}=t,n=Tx(t,iZ),i=Pn(n);return g.createElement(HN,{id:a,type:"pie"},o=>g.createElement(g.Fragment,null,g.createElement(aZ,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),g.createElement(fZ,xi({},n,{id:o})),g.createElement(EZ,xi({},n,{id:o}))))}P6.displayName="Pie";var TZ=["points"];function kC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function gv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(a),!0).forEach(function(n){CZ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function CZ(e,t,a){return(t=AZ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function AZ(e){var t=OZ(e,"string");return typeof t=="symbol"?t:t+""}function OZ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Np.apply(null,arguments)}function MZ(e,t){if(e==null)return{};var a,n,i=IZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function IZ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function PZ(e){var{option:t,dotProps:a,className:n}=e;if(g.isValidElement(t))return g.cloneElement(t,a);if(typeof t=="function")return t(a);var i=nr(n,typeof t!="boolean"?t.className:""),o=a??{},{points:d}=o,h=MZ(o,TZ);return g.createElement(w6,Np({},h,{className:i}))}function DZ(e,t){return e==null?!1:t?!0:e.length===1}function LZ(e){var{points:t,dot:a,className:n,dotClassName:i,dataKey:o,baseProps:d,needClip:h,clipPathId:m,zIndex:u=ca.scatter}=e;if(!DZ(t,a))return null;var f=A6(a),x=v8(a),b=t.map((N,j)=>{var _,k,E=gv(gv(gv({r:3},d),x),{},{index:j,cx:(_=N.x)!==null&&_!==void 0?_:void 0,cy:(k=N.y)!==null&&k!==void 0?k:void 0,dataKey:o,value:N.value,payload:N.payload,points:t});return g.createElement(PZ,{key:"dot-".concat(j),option:a,dotProps:E,className:i})}),v={};return h&&m!=null&&(v.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(m,")")),g.createElement(pn,{zIndex:u},g.createElement(_a,Np({className:n},v),b))}function SC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function EC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(a),!0).forEach(function(n){RZ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function RZ(e,t,a){return(t=$Z(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $Z(e){var t=zZ(e,"string");return typeof t=="symbol"?t:t+""}function zZ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D6=0,BZ={xAxis:{},yAxis:{},zAxis:{}},L6=mn({name:"cartesianAxis",initialState:BZ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ir()},replaceXAxis:{reducer(e,t){var{prev:a,next:n}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==n.id&&delete e.xAxis[a.id],e.xAxis[n.id]=n)},prepare:Ir()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ir()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ir()},replaceYAxis:{reducer(e,t){var{prev:a,next:n}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==n.id&&delete e.yAxis[a.id],e.yAxis[n.id]=n)},prepare:Ir()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ir()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ir()},replaceZAxis:{reducer(e,t){var{prev:a,next:n}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==n.id&&delete e.zAxis[a.id],e.zAxis[n.id]=n)},prepare:Ir()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ir()},updateYAxisWidth(e,t){var{id:a,width:n}=t.payload,i=e.yAxis[a];if(i){var o,d=i.widthHistory||[];if(d.length===3&&d[0]===d[2]&&n===d[1]&&n!==i.width&&Math.abs(n-((o=d[0])!==null&&o!==void 0?o:0))<=1)return;var h=[...d,n].slice(-3);e.yAxis[a]=EC(EC({},i),{},{width:n,widthHistory:h})}}}}),{addXAxis:UZ,replaceXAxis:qZ,removeXAxis:FZ,addYAxis:HZ,replaceYAxis:YZ,removeYAxis:KZ,addZAxis:gse,replaceZAxis:vse,removeZAxis:yse,updateYAxisWidth:VZ}=L6.actions,GZ=L6.reducer,XZ=Ie([pa],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),WZ=Ie([XZ,kl,Sl],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),YN=()=>_t(WZ),JZ=()=>_t(LG);function TC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function vv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(a),!0).forEach(function(n){ZZ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function ZZ(e,t,a){return(t=QZ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QZ(e){var t=eQ(e,"string");return typeof t=="symbol"?t:t+""}function eQ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tQ=e=>{var{point:t,childIndex:a,mainColor:n,activeDot:i,dataKey:o,clipPath:d}=e;if(i===!1||t.x==null||t.y==null)return null;var h={index:a,dataKey:o,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=vv(vv(vv({},h),co(i)),ij(i)),u;return g.isValidElement(i)?u=g.cloneElement(i,m):typeof i=="function"?u=i(m):u=g.createElement(w6,m),g.createElement(_a,{className:"recharts-active-dot",clipPath:d},u)};function rQ(e){var{points:t,mainColor:a,activeDot:n,itemDataKey:i,clipPath:o,zIndex:d=ca.activeDot}=e,h=_t(pi),m=JZ();if(t==null||m==null)return null;var u=t.find(f=>m.includes(f.payload));return Br(u)?null:g.createElement(pn,{zIndex:d},g.createElement(tQ,{point:u,childIndex:Number(h),mainColor:a,dataKey:i,activeDot:n,clipPath:o}))}var CC=(e,t,a)=>{var n=a??e;if(!Br(n))return Fa(n,t,0)},aQ=(e,t,a)=>{var n={},i=e.filter(px),o=e.filter(u=>u.stackId==null),d=i.reduce((u,f)=>{var x=u[f.stackId];return x==null&&(x=[]),x.push(f),u[f.stackId]=x,u},n),h=Object.entries(d).map(u=>{var f,[x,b]=u,v=b.map(j=>j.dataKey),N=CC(t,a,(f=b[0])===null||f===void 0?void 0:f.barSize);return{stackId:x,dataKeys:v,barSize:N}}),m=o.map(u=>{var f=[u.dataKey].filter(b=>b!=null),x=CC(t,a,u.barSize);return{stackId:void 0,dataKeys:f,barSize:x}});return[...h,...m]};function AC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function vh(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(a),!0).forEach(function(n){nQ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):AC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function nQ(e,t,a){return(t=sQ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sQ(e){var t=lQ(e,"string");return typeof t=="symbol"?t:t+""}function lQ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iQ(e,t,a,n,i){var o,d=n.length;if(!(d<1)){var h=Fa(e,a,0,!0),m,u=[];if(Gt((o=n[0])===null||o===void 0?void 0:o.barSize)){var f=!1,x=a/d,b=n.reduce((E,C)=>E+(C.barSize||0),0);b+=(d-1)*h,b>=a&&(b-=(d-1)*h,h=0),b>=a&&x>0&&(f=!0,x*=.9,b=d*x);var v=(a-b)/2>>0,N={offset:v-h,size:0};m=n.reduce((E,C)=>{var S,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:N.offset+N.size+h,size:f?x:(S=C.barSize)!==null&&S!==void 0?S:0}},I=[...E,O];return N=O.position,I},u)}else{var j=Fa(t,a,0,!0);a-2*j-(d-1)*h<=0&&(h=0);var _=(a-2*j-(d-1)*h)/d;_>1&&(_>>=0);var k=Gt(i)?Math.min(_,i):_;m=n.reduce((E,C,S)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:j+(_+h)*S+(_-k)/2,size:k}}],u)}return m}}var oQ=(e,t,a,n,i,o,d)=>{var h=Br(d)?t:d,m=iQ(a,n,i!==o?i:o,e,h);return i!==o&&m!=null&&(m=m.map(u=>vh(vh({},u),{},{position:vh(vh({},u.position),{},{offset:u.position.offset-i/2})}))),m},cQ=(e,t)=>{var a=tN(t);if(!(!e||a==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:o}=i;if(o)return o.find(d=>d.key===a)}}}},dQ=(e,t)=>{if(!(e==null||t==null)){var a=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(a!=null)return a.position}};function uQ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Gt(e.zIndex)?e.zIndex:t}var R6=e=>{var{chartData:t}=e,a=Lr(),n=Ya();return g.useEffect(()=>n?()=>{}:(a(LT(t)),()=>{a(LT(void 0))}),[t,a,n]),null},OC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$6=mn({name:"brush",initialState:OC,reducers:{setBrushSettings(e,t){return t.payload==null?OC:t.payload}}}),{setBrushSettings:jse}=$6.actions,fQ=$6.reducer;function hQ(e){return(e%180+180)%180}var mQ=function(t){var{width:a,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=hQ(i),d=o*Math.PI/180,h=Math.atan(n/a),m=d>h&&d<Math.PI-h?n/Math.sin(d):a/Math.cos(d);return Math.abs(m)},pQ={dots:[],areas:[],lines:[]},z6=mn({name:"referenceElements",initialState:pQ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=us(e).dots.findIndex(n=>n===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=us(e).areas.findIndex(n=>n===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=us(e).lines.findIndex(n=>n===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:Nse,removeDot:wse,addArea:_se,removeArea:kse,addLine:Sse,removeLine:Ese}=z6.actions,xQ=z6.reducer,bQ=g.createContext(void 0),gQ=e=>{var{children:t}=e,[a]=g.useState("".concat(su("recharts"),"-clip")),n=YN();if(n==null)return null;var{x:i,y:o,width:d,height:h}=n;return g.createElement(bQ.Provider,{value:a},g.createElement("defs",null,g.createElement("clipPath",{id:a},g.createElement("rect",{x:i,y:o,height:h,width:d}))),t)};function B6(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&a.push(i)}return a}function vQ(e,t,a){var n={width:e.width+t.width,height:e.height+t.height};return mQ(n,a)}function yQ(e,t,a){var n=a==="width",{x:i,y:o,width:d,height:h}=e;return t===1?{start:n?i:o,end:n?i+d:o+h}:{start:n?i+d:o+h,end:n?i:o}}function vu(e,t,a,n,i){if(e*t<e*n||e*t>e*i)return!1;var o=a();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-i)<=0}function jQ(e,t){return B6(e,t+1)}function NQ(e,t,a,n,i){for(var o=(n||[]).slice(),{start:d,end:h}=t,m=0,u=1,f=d,x=function(){var N=n==null?void 0:n[m];if(N===void 0)return{v:B6(n,u)};var j=m,_,k=()=>(_===void 0&&(_=a(N,j)),_),E=N.coordinate,C=m===0||vu(e,E,k,f,h);C||(m=0,f=d,u+=1),C&&(f=E+e*(k()/2+i),m+=u)},b;u<=o.length;)if(b=x(),b)return b.v;return[]}function wQ(e,t,a,n,i){var o=(n||[]).slice(),d=o.length;if(d===0)return[];for(var{start:h,end:m}=t,u=1;u<=d;u++){for(var f=(d-1)%u,x=h,b=!0,v=function(){var S=n[j];if(S==null)return 0;var O=j,I,L=()=>(I===void 0&&(I=a(S,O)),I),te=S.coordinate,H=j===f||vu(e,te,L,x,m);if(!H)return b=!1,1;H&&(x=te+e*(L()/2+i))},N,j=f;j<d&&(N=v(),!(N!==0&&N===1));j+=u);if(b){for(var _=[],k=f;k<d;k+=u){var E=n[k];E!=null&&_.push(E)}return _}}return[]}function MC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Ua(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(a),!0).forEach(function(n){_Q(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):MC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function _Q(e,t,a){return(t=kQ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kQ(e){var t=SQ(e,"string");return typeof t=="symbol"?t:t+""}function SQ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EQ(e,t,a,n,i){for(var o=(n||[]).slice(),d=o.length,{start:h}=t,{end:m}=t,u=function(b){var v=o[b];if(v==null)return 1;var N=v,j,_=()=>(j===void 0&&(j=a(v,b)),j);if(b===d-1){var k=e*(N.coordinate+e*_()/2-m);o[b]=N=Ua(Ua({},N),{},{tickCoord:k>0?N.coordinate-k*e:N.coordinate})}else o[b]=N=Ua(Ua({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var E=vu(e,N.tickCoord,_,h,m);E&&(m=N.tickCoord-e*(_()/2+i),o[b]=Ua(Ua({},N),{},{isShow:!0}))}},f=d-1;f>=0;f--)u(f);return o}function TQ(e,t,a,n,i,o){var d=(n||[]).slice(),h=d.length,{start:m,end:u}=t;if(o){var f=n[h-1];if(f!=null){var x=a(f,h-1),b=e*(f.coordinate+e*x/2-u);if(d[h-1]=f=Ua(Ua({},f),{},{tickCoord:b>0?f.coordinate-b*e:f.coordinate}),f.tickCoord!=null){var v=vu(e,f.tickCoord,()=>x,m,u);v&&(u=f.tickCoord-e*(x/2+i),d[h-1]=Ua(Ua({},f),{},{isShow:!0}))}}}for(var N=o?h-1:h,j=function(E){var C=d[E];if(C==null)return 1;var S=C,O,I=()=>(O===void 0&&(O=a(C,E)),O);if(E===0){var L=e*(S.coordinate-e*I()/2-m);d[E]=S=Ua(Ua({},S),{},{tickCoord:L<0?S.coordinate-L*e:S.coordinate})}else d[E]=S=Ua(Ua({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var te=vu(e,S.tickCoord,I,m,u);te&&(m=S.tickCoord+e*(I()/2+i),d[E]=Ua(Ua({},S),{},{isShow:!0}))}},_=0;_<N;_++)j(_);return d}function KN(e,t,a){var{tick:n,ticks:i,viewBox:o,minTickGap:d,orientation:h,interval:m,tickFormatter:u,unit:f,angle:x}=e;if(!i||!i.length||!n)return[];if(vt(m)||nx.isSsr){var b;return(b=jQ(i,vt(m)?m:0))!==null&&b!==void 0?b:[]}var v=[],N=h==="top"||h==="bottom"?"width":"height",j=f&&N==="width"?ru(f,{fontSize:t,letterSpacing:a}):{width:0,height:0},_=(O,I)=>{var L=typeof u=="function"?u(O.value,I):O.value;return N==="width"?vQ(ru(L,{fontSize:t,letterSpacing:a}),j,x):ru(L,{fontSize:t,letterSpacing:a})[N]},k=i[0],E=i[1],C=i.length>=2&&k!=null&&E!=null?Na(E.coordinate-k.coordinate):1,S=yQ(o,C,N);return m==="equidistantPreserveStart"?NQ(C,S,_,i,d):m==="equidistantPreserveEnd"?wQ(C,S,_,i,d):(m==="preserveStart"||m==="preserveStartEnd"?v=TQ(C,S,_,i,d,m==="preserveStartEnd"):v=EQ(C,S,_,i,d),v.filter(O=>O.isShow))}var CQ=e=>{var{ticks:t,label:a,labelGapWithTick:n=5,tickSize:i=0,tickMargin:o=0}=e,d=0;if(t){Array.from(t).forEach(f=>{if(f){var x=f.getBoundingClientRect();x.width>d&&(d=x.width)}});var h=a?a.getBoundingClientRect().width:0,m=i+o,u=d+m+h+(a?n:0);return Math.round(u)}return 0},AQ=["axisLine","width","height","className","hide","ticks","axisType"];function OQ(e,t){if(e==null)return{};var a,n,i=MQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function MQ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},go.apply(null,arguments)}function IC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Yr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(a),!0).forEach(function(n){IQ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function IQ(e,t,a){return(t=PQ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PQ(e){var t=DQ(e,"string");return typeof t=="symbol"?t:t+""}function DQ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ca.axis};function LQ(e){var{x:t,y:a,width:n,height:i,orientation:o,mirror:d,axisLine:h,otherSvgProps:m}=e;if(!h)return null;var u=Yr(Yr(Yr({},m),Pn(h)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!d||o==="bottom"&&d);u=Yr(Yr({},u),{},{x1:t,y1:a+f*i,x2:t+n,y2:a+f*i})}else{var x=+(o==="left"&&!d||o==="right"&&d);u=Yr(Yr({},u),{},{x1:t+x*n,y1:a,x2:t+x*n,y2:a+i})}return g.createElement("line",go({},u,{className:nr("recharts-cartesian-axis-line",fo(h,"className"))}))}function RQ(e,t,a,n,i,o,d,h,m){var u,f,x,b,v,N,j=h?-1:1,_=e.tickSize||d,k=vt(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":u=f=e.coordinate,b=a+ +!h*i,x=b-j*_,N=x-j*m,v=k;break;case"left":x=b=e.coordinate,f=t+ +!h*n,u=f-j*_,v=u-j*m,N=k;break;case"right":x=b=e.coordinate,f=t+ +h*n,u=f+j*_,v=u+j*m,N=k;break;default:u=f=e.coordinate,b=a+ +h*i,x=b+j*_,N=x+j*m,v=k;break}return{line:{x1:u,y1:x,x2:f,y2:b},tick:{x:v,y:N}}}function $Q(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function zQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function BQ(e){var{option:t,tickProps:a,value:n}=e,i,o=nr(a.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))i=g.cloneElement(t,Yr(Yr({},a),{},{className:o}));else if(typeof t=="function")i=t(Yr(Yr({},a),{},{className:o}));else{var d="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(d=nr(d,E6(t))),i=g.createElement(kx,go({},a,{className:d}),n)}return i}var UQ=g.forwardRef((e,t)=>{var{ticks:a=[],tick:n,tickLine:i,stroke:o,tickFormatter:d,unit:h,padding:m,tickTextProps:u,orientation:f,mirror:x,x:b,y:v,width:N,height:j,tickSize:_,tickMargin:k,fontSize:E,letterSpacing:C,getTicksConfig:S,events:O,axisType:I}=e,L=KN(Yr(Yr({},S),{},{ticks:a}),E,C),te=$Q(f,x),H=zQ(f,x),B=Pn(S),X=co(n),V={};typeof i=="object"&&(V=i);var le=Yr(Yr({},B),{},{fill:"none"},V),J=L.map(P=>Yr({entry:P},RQ(P,b,v,N,j,f,_,x,k))),Z=J.map(P=>{var{entry:W,line:se}=P;return g.createElement(_a,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},i&&g.createElement("line",go({},le,se,{className:nr("recharts-cartesian-axis-tick-line",fo(i,"className"))})))}),M=J.map((P,W)=>{var se,ue,{entry:D,tick:U}=P,re=Yr(Yr(Yr(Yr({verticalAnchor:H},B),{},{textAnchor:te,stroke:"none",fill:o},U),{},{index:W,payload:D,visibleTicksCount:L.length,tickFormatter:d,padding:m},u),{},{angle:(se=(ue=u==null?void 0:u.angle)!==null&&ue!==void 0?ue:B.angle)!==null&&se!==void 0?se:0}),he=Yr(Yr({},re),X);return g.createElement(_a,go({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},zp(O,D,W)),n&&g.createElement(BQ,{option:n,tickProps:he,value:"".concat(typeof d=="function"?d(D.value,W):D.value).concat(h||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},M.length>0&&g.createElement(pn,{zIndex:ca.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:t},M)),Z.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},Z))}),qQ=g.forwardRef((e,t)=>{var{axisLine:a,width:n,height:i,className:o,hide:d,ticks:h,axisType:m}=e,u=OQ(e,AQ),[f,x]=g.useState(""),[b,v]=g.useState(""),N=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return CQ({ticks:N.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=g.useCallback(_=>{if(_){var k=_.getElementsByClassName("recharts-cartesian-axis-tick-value");N.current=k;var E=k[0];if(E){var C=window.getComputedStyle(E),S=C.fontSize,O=C.letterSpacing;(S!==f||O!==b)&&(x(S),v(O))}}},[f,b]);return d||n!=null&&n<=0||i!=null&&i<=0?null:g.createElement(pn,{zIndex:e.zIndex},g.createElement(_a,{className:nr("recharts-cartesian-axis",o)},g.createElement(LQ,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Pn(e)}),g.createElement(UQ,{ref:j,axisType:m,events:u,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:h,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(RW,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(VW,{label:e.label,labelRef:e.labelRef}),e.children)))}),VN=g.forwardRef((e,t)=>{var a=ka(e,xl);return g.createElement(qQ,go({},a,{ref:t}))});VN.displayName="CartesianAxis";var FQ=["x1","y1","x2","y2","key"],HQ=["offset"],YQ=["xAxisId","yAxisId"],KQ=["xAxisId","yAxisId"];function PC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function qa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(a),!0).forEach(function(n){VQ(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function VQ(e,t,a){return(t=GQ(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GQ(e){var t=XQ(e,"string");return typeof t=="symbol"?t:t+""}function XQ(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},to.apply(null,arguments)}function wp(e,t){if(e==null)return{};var a,n,i=WQ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function WQ(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var JQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:n,y:i,width:o,height:d,ry:h}=e;return g.createElement("rect",{x:n,y:i,ry:h,width:o,height:d,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function U6(e){var{option:t,lineItemProps:a}=e,n;if(g.isValidElement(t))n=g.cloneElement(t,a);else if(typeof t=="function")n=t(a);else{var i,{x1:o,y1:d,x2:h,y2:m,key:u}=a,f=wp(a,FQ),x=(i=Pn(f))!==null&&i!==void 0?i:{},{offset:b}=x,v=wp(x,HQ);n=g.createElement("line",to({},v,{x1:o,y1:d,x2:h,y2:m,fill:"none",key:u}))}return n}function ZQ(e){var{x:t,width:a,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:o,yAxisId:d}=e,h=wp(e,YQ),m=i.map((u,f)=>{var x=qa(qa({},h),{},{x1:t,y1:u,x2:t+a,y2:u,key:"line-".concat(f),index:f});return g.createElement(U6,{key:"line-".concat(f),option:n,lineItemProps:x})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function QQ(e){var{y:t,height:a,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:o,yAxisId:d}=e,h=wp(e,KQ),m=i.map((u,f)=>{var x=qa(qa({},h),{},{x1:u,y1:t,x2:u,y2:t+a,key:"line-".concat(f),index:f});return g.createElement(U6,{option:n,lineItemProps:x,key:"line-".concat(f)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function eee(e){var{horizontalFill:t,fillOpacity:a,x:n,y:i,width:o,height:d,horizontalPoints:h,horizontal:m=!0}=e;if(!m||!t||!t.length||h==null)return null;var u=h.map(x=>Math.round(x+i-i)).sort((x,b)=>x-b);i!==u[0]&&u.unshift(0);var f=u.map((x,b)=>{var v=u[b+1],N=v==null,j=N?i+d-x:v-x;if(j<=0)return null;var _=b%t.length;return g.createElement("rect",{key:"react-".concat(b),y:x,x:n,height:j,width:o,stroke:"none",fill:t[_],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function tee(e){var{vertical:t=!0,verticalFill:a,fillOpacity:n,x:i,y:o,width:d,height:h,verticalPoints:m}=e;if(!t||!a||!a.length)return null;var u=m.map(x=>Math.round(x+i-i)).sort((x,b)=>x-b);i!==u[0]&&u.unshift(0);var f=u.map((x,b)=>{var v=u[b+1],N=v==null,j=N?i+d-x:v-x;if(j<=0)return null;var _=b%a.length;return g.createElement("rect",{key:"react-".concat(b),x,y:o,width:j,height:h,stroke:"none",fill:a[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var ree=(e,t)=>{var{xAxis:a,width:n,height:i,offset:o}=e;return A4(KN(qa(qa(qa({},xl),a),{},{ticks:O4(a),viewBox:{x:0,y:0,width:n,height:i}})),o.left,o.left+o.width,t)},aee=(e,t)=>{var{yAxis:a,width:n,height:i,offset:o}=e;return A4(KN(qa(qa(qa({},xl),a),{},{ticks:O4(a),viewBox:{x:0,y:0,width:n,height:i}})),o.top,o.top+o.height,t)},nee={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ca.grid};function Es(e){var t=z4(),a=B4(),n=$4(),i=qa(qa({},ka(e,nee)),{},{x:vt(e.x)?e.x:n.left,y:vt(e.y)?e.y:n.top,width:vt(e.width)?e.width:n.width,height:vt(e.height)?e.height:n.height}),{xAxisId:o,yAxisId:d,x:h,y:m,width:u,height:f,syncWithTicks:x,horizontalValues:b,verticalValues:v}=i,N=Ya(),j=_t(H=>_T(H,"xAxis",o,N)),_=_t(H=>_T(H,"yAxis",d,N));if(!$s(u)||!$s(f)||!vt(h)||!vt(m))return null;var k=i.verticalCoordinatesGenerator||ree,E=i.horizontalCoordinatesGenerator||aee,{horizontalPoints:C,verticalPoints:S}=i;if((!C||!C.length)&&typeof E=="function"){var O=b&&b.length,I=E({yAxis:_?qa(qa({},_),{},{ticks:O?b:_.ticks}):void 0,width:t??u,height:a??f,offset:n},O?!0:x);Xm(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(C=I)}if((!S||!S.length)&&typeof k=="function"){var L=v&&v.length,te=k({xAxis:j?qa(qa({},j),{},{ticks:L?v:j.ticks}):void 0,width:t??u,height:a??f,offset:n},L?!0:x);Xm(Array.isArray(te),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof te,"]")),Array.isArray(te)&&(S=te)}return g.createElement(pn,{zIndex:i.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(JQ,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),g.createElement(eee,to({},i,{horizontalPoints:C})),g.createElement(tee,to({},i,{verticalPoints:S})),g.createElement(ZQ,to({},i,{offset:n,horizontalPoints:C,xAxis:j,yAxis:_})),g.createElement(QQ,to({},i,{offset:n,verticalPoints:S,xAxis:j,yAxis:_}))))}Es.displayName="CartesianGrid";var see={},q6=mn({name:"errorBars",initialState:see,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:n}=t.payload;e[a]||(e[a]=[]),e[a].push(n)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:n,next:i}=t.payload;e[a]&&(e[a]=e[a].map(o=>o.dataKey===n.dataKey&&o.direction===n.direction?i:o))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:n}=t.payload;e[a]&&(e[a]=e[a].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:Tse,replaceErrorBar:Cse,removeErrorBar:Ase}=q6.actions,lee=q6.reducer,iee=["children"];function oee(e,t){if(e==null)return{};var a,n,i=cee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function cee(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var dee={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},uee=g.createContext(dee);function F6(e){var{children:t}=e,a=oee(e,iee);return g.createElement(uee.Provider,{value:a},t)}function GN(e,t){var a,n,i=_t(u=>Cl(u,e)),o=_t(u=>Al(u,t)),d=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:va.allowDataOverflow,h=(n=o==null?void 0:o.allowDataOverflow)!==null&&n!==void 0?n:ya.allowDataOverflow,m=d||h;return{needClip:m,needClipX:d,needClipY:h}}function H6(e){var{xAxisId:t,yAxisId:a,clipPathId:n}=e,i=YN(),{needClipX:o,needClipY:d,needClip:h}=GN(t,a);if(!h||!i)return null;var{x:m,y:u,width:f,height:x}=i;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:o?m:m-f/2,y:d?u:u-x/2,width:o?f:f*2,height:d?x:x*2}))}var Y6=(e,t,a,n)=>mi(e,"xAxis",t,n),K6=(e,t,a,n)=>hi(e,"xAxis",t,n),V6=(e,t,a,n)=>mi(e,"yAxis",a,n),G6=(e,t,a,n)=>hi(e,"yAxis",a,n),fee=Ie([er,Y6,V6,K6,G6],(e,t,a,n,i)=>_l(e,"xAxis")?Ac(t,n,!1):Ac(a,i,!1)),hee=(e,t,a,n,i)=>i;function mee(e){return e.type==="line"}var pee=Ie([gx,hee],(e,t)=>e.filter(mee).find(a=>a.id===t)),xee=Ie([er,Y6,V6,K6,G6,pee,fee,Kj],(e,t,a,n,i,o,d,h)=>{var{chartData:m,dataStartIndex:u,dataEndIndex:f}=h;if(!(o==null||t==null||a==null||n==null||i==null||n.length===0||i.length===0||d==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:x,data:b}=o,v;if(b!=null&&b.length>0?v=b:v=m==null?void 0:m.slice(u,f+1),v!=null)return tte({layout:e,xAxis:t,yAxis:a,xAxisTicks:n,yAxisTicks:i,dataKey:x,bandSize:d,displayedData:v})}});function bee(e){var t=co(e),a=3,n=2;if(t!=null){var{r:i,strokeWidth:o}=t,d=Number(i),h=Number(o);return(Number.isNaN(d)||d<0)&&(d=a),(Number.isNaN(h)||h<0)&&(h=n),{r:d,strokeWidth:h}}return{r:a,strokeWidth:n}}var yv={exports:{}},jv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function gee(){if(DC)return jv;DC=1;var e=Dc();function t(m,u){return m===u&&(m!==0||1/m===1/u)||m!==m&&u!==u}var a=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,d=e.useMemo,h=e.useDebugValue;return jv.useSyncExternalStoreWithSelector=function(m,u,f,x,b){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=d(function(){function _(O){if(!k){if(k=!0,E=O,O=x(O),b!==void 0&&N.hasValue){var I=N.value;if(b(I,O))return C=I}return C=O}if(I=C,a(E,O))return I;var L=x(O);return b!==void 0&&b(I,L)?(E=O,I):(E=O,C=L)}var k=!1,E,C,S=f===void 0?null:f;return[function(){return _(u())},S===null?void 0:function(){return _(S())}]},[u,f,x,b]);var j=n(m,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=j},[j]),h(j),j},jv}var LC;function vee(){return LC||(LC=1,yv.exports=gee()),yv.exports}vee();function yee(e){e()}function jee(){let e=null,t=null;return{clear(){e=null,t=null},notify(){yee(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let n=e;for(;n;)a.push(n),n=n.next;return a},subscribe(a){let n=!0;const i=t={callback:a,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var RC={notify(){},get:()=>[]};function Nee(e,t){let a,n=RC,i=0,o=!1;function d(j){f();const _=n.subscribe(j);let k=!1;return()=>{k||(k=!0,_(),x())}}function h(){n.notify()}function m(){N.onStateChange&&N.onStateChange()}function u(){return o}function f(){i++,a||(a=e.subscribe(m),n=jee())}function x(){i--,a&&i===0&&(a(),a=void 0,n.clear(),n=RC)}function b(){o||(o=!0,f())}function v(){o&&(o=!1,x())}const N={addNestedSub:d,notifyNestedSubs:h,handleChangeWrapper:m,isSubscribed:u,trySubscribe:b,tryUnsubscribe:v,getListeners:()=>n};return N}var wee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_ee=wee(),kee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",See=kee(),Eee=()=>_ee||See?g.useLayoutEffect:g.useEffect,Tee=Eee();function $C(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Cee(e,t){if($C(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(let i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(t,a[i])||!$C(e[a[i]],t[a[i]]))return!1;return!0}var Nv=Symbol.for("react-redux-context"),wv=typeof globalThis<"u"?globalThis:{};function Aee(){if(!g.createContext)return{};const e=wv[Nv]??(wv[Nv]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var Oee=Aee();function Mee(e){const{children:t,context:a,serverState:n,store:i}=e,o=g.useMemo(()=>{const m=Nee(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),d=g.useMemo(()=>i.getState(),[i]);Tee(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),d!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,d]);const h=a||Oee;return g.createElement(h.Provider,{value:o},t)}var Iee=Mee,Pee=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Dee(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Cx(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of a)if(Pee.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Cee(e[n],t[n]))return!1}else if(!Dee(e[n],t[n]))return!1;return!0}var Lee=["id"],Ree=["type","layout","connectNulls","needClip","shape"],$ee=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},yu.apply(null,arguments)}function zC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function As(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(a),!0).forEach(function(n){zee(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function zee(e,t,a){return(t=Bee(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Bee(e){var t=Uee(e,"string");return typeof t=="symbol"?t:t+""}function Uee(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XN(e,t){if(e==null)return{};var a,n,i=qee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function qee(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var Fee=e=>{var{dataKey:t,name:a,stroke:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:n,value:Bc(a,t),payload:e}]},Hee=g.memo(e=>{var{dataKey:t,data:a,stroke:n,strokeWidth:i,fill:o,name:d,hide:h,unit:m,tooltipType:u,id:f}=e,x={dataDefinedOnItem:a,getPosition:jo,settings:{stroke:n,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Bc(d,t),hide:h,type:u,color:n,unit:m,graphicalItemId:f}};return g.createElement(FN,{tooltipEntrySettings:x})}),X6=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Yee(e,t){for(var a=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...a];return n}var Kee=(e,t,a)=>{var n=a.reduce((v,N)=>v+N);if(!n)return X6(t,e);for(var i=Math.floor(e/n),o=e%n,d=t-e,h=[],m=0,u=0;m<a.length;u+=(f=a[m])!==null&&f!==void 0?f:0,++m){var f,x=a[m];if(x!=null&&u+x>o){h=[...a.slice(0,m),o-u];break}}var b=h.length%2===0?[0,d]:[d];return[...Yee(a,i),...h,...b].map(v=>"".concat(v,"px")).join(", ")};function Vee(e){var{clipPathId:t,points:a,props:n}=e,{dot:i,dataKey:o,needClip:d}=n,{id:h}=n,m=XN(n,Lee),u=Pn(m);return g.createElement(LZ,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:u,needClip:d,clipPathId:t})}function Gee(e){var{showLabels:t,children:a,points:n}=e,i=g.useMemo(()=>n==null?void 0:n.map(o=>{var d,h,m={x:(d=o.x)!==null&&d!==void 0?d:0,y:(h=o.y)!==null&&h!==void 0?h:0,width:0,lowerWidth:0,upperWidth:0,height:0};return As(As({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return g.createElement(j6,{value:t?i:void 0},a)}function BC(e){var{clipPathId:t,pathRef:a,points:n,strokeDasharray:i,props:o}=e,{type:d,layout:h,connectNulls:m,needClip:u,shape:f}=o,x=XN(o,Ree),b=As(As({},Za(x)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:d,layout:h,connectNulls:m,strokeDasharray:i??o.strokeDasharray});return g.createElement(g.Fragment,null,(n==null?void 0:n.length)>1&&g.createElement(zN,yu({shapeType:"curve",option:f},b,{pathRef:a})),g.createElement(Vee,{points:n,clipPathId:t,props:o}))}function Xee(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Wee(e){var{clipPathId:t,props:a,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:d,strokeDasharray:h,isAnimationActive:m,animationBegin:u,animationDuration:f,animationEasing:x,animateNewValues:b,width:v,height:N,onAnimationEnd:j,onAnimationStart:_}=a,k=i.current,E=Pu(d,"recharts-line-"),C=g.useRef(E),[S,O]=g.useState(!1),I=!S,L=g.useCallback(()=>{typeof j=="function"&&j(),O(!1)},[j]),te=g.useCallback(()=>{typeof _=="function"&&_(),O(!0)},[_]),H=Xee(n.current),B=g.useRef(0);C.current!==E&&(B.current=o.current,C.current=E);var X=B.current;return g.createElement(Gee,{points:d,showLabels:I},a.children,g.createElement(Iu,{animationId:E,begin:u,duration:f,isActive:m,easing:x,onAnimationEnd:L,onAnimationStart:te,key:E},V=>{var le=Pr(X,H+X,V),J=Math.min(le,H),Z;if(m)if(h){var M="".concat(h).split(/[,\s]+/gim).map(se=>parseFloat(se));Z=Kee(J,H,M)}else Z=X6(H,J);else Z=h==null?void 0:String(h);if(V>0&&H>0&&(i.current=d,o.current=Math.max(o.current,J)),k){var P=k.length/d.length,W=V===1?d:d.map((se,ue)=>{var D=Math.floor(ue*P);if(k[D]){var U=k[D];return As(As({},se),{},{x:Pr(U.x,se.x,V),y:Pr(U.y,se.y,V)})}return b?As(As({},se),{},{x:Pr(v*2,se.x,V),y:Pr(N/2,se.y,V)}):As(As({},se),{},{x:se.x,y:se.y})});return i.current=W,g.createElement(BC,{props:a,points:W,clipPathId:t,pathRef:n,strokeDasharray:Z})}return g.createElement(BC,{props:a,points:d,clipPathId:t,pathRef:n,strokeDasharray:Z})}),g.createElement(DN,{label:a.label}))}function Jee(e){var{clipPathId:t,props:a}=e,n=g.useRef(null),i=g.useRef(0),o=g.useRef(null);return g.createElement(Wee,{props:a,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:o})}var Zee=(e,t)=>{var a,n;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:pr(e.payload,t)}};class Qee extends g.Component{render(){var{hide:t,dot:a,points:n,className:i,xAxisId:o,yAxisId:d,top:h,left:m,width:u,height:f,id:x,needClip:b,zIndex:v}=this.props;if(t)return null;var N=nr("recharts-line",i),j=x,{r:_,strokeWidth:k}=bee(a),E=A6(a),C=_*2+k,S=b?"url(#clipPath-".concat(E?"":"dots-").concat(j,")"):void 0;return g.createElement(pn,{zIndex:v},g.createElement(_a,{className:N},b&&g.createElement("defs",null,g.createElement(H6,{clipPathId:j,xAxisId:o,yAxisId:d}),!E&&g.createElement("clipPath",{id:"clipPath-dots-".concat(j)},g.createElement("rect",{x:m-C/2,y:h-C/2,width:u+C,height:f+C}))),g.createElement(F6,{xAxisId:o,yAxisId:d,data:n,dataPointFormatter:Zee,errorBarOffset:0},g.createElement(Jee,{props:this.props,clipPathId:j}))),g.createElement(rQ,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:S}))}}var W6={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ca.line,type:"linear"};function ete(e){var t=ka(e,W6),{activeDot:a,animateNewValues:n,animationBegin:i,animationDuration:o,animationEasing:d,connectNulls:h,dot:m,hide:u,isAnimationActive:f,label:x,legendType:b,xAxisId:v,yAxisId:N,id:j}=t,_=XN(t,$ee),{needClip:k}=GN(v,N),E=YN(),C=No(),S=Ya(),O=_t(B=>xee(B,v,N,S,j));if(C!=="horizontal"&&C!=="vertical"||O==null||E==null)return null;var{height:I,width:L,x:te,y:H}=E;return g.createElement(Qee,yu({},_,{id:j,connectNulls:h,dot:m,activeDot:a,animateNewValues:n,animationBegin:i,animationDuration:o,animationEasing:d,isAnimationActive:f,hide:u,label:x,legendType:b,xAxisId:v,yAxisId:N,points:O,layout:C,height:I,width:L,left:te,top:H,needClip:k}))}function tte(e){var{layout:t,xAxis:a,yAxis:n,xAxisTicks:i,yAxisTicks:o,dataKey:d,bandSize:h,displayedData:m}=e;return m.map((u,f)=>{var x=pr(u,d);if(t==="horizontal"){var b=wS({axis:a,ticks:i,bandSize:h,entry:u,index:f}),v=Br(x)?null:n.scale.map(x);return{x:b,y:v??null,value:x,payload:u}}var N=Br(x)?null:a.scale.map(x),j=wS({axis:n,ticks:o,bandSize:h,entry:u,index:f});return N==null||j==null?null:{x:N,y:j,value:x,payload:u}}).filter(Boolean)}function rte(e){var t=ka(e,W6),a=Ya();return g.createElement(HN,{id:t.id,type:"line"},n=>g.createElement(g.Fragment,null,g.createElement(O6,{legendPayload:Fee(t)}),g.createElement(Hee,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),g.createElement(I6,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),g.createElement(ete,yu({},t,{id:n}))))}var Wi=g.memo(rte,Cx);Wi.displayName="Line";function ko(e,t){var a,n;return(a=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&a!==void 0?a:D6}function So(e,t){var a,n;return(a=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&a!==void 0?a:D6}var ate="Invariant failed";function nte(e,t){throw new Error(ate)}function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sy.apply(null,arguments)}function _p(e){return g.createElement(zN,Sy({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var ste=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(vt(t))return t;var o=vt(n)||Br(n);return o?t(n,i):(o||nte(),a)}},lte=(e,t,a)=>a,ite=(e,t)=>t,Ku=Ie([gx,ite],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),ote=Ie([Ku],e=>e==null?void 0:e.maxBarSize),cte=(e,t,a,n)=>n,dte=Ie([er,gx,ko,So,lte],(e,t,a,n,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===a:o.yAxisId===n).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),ute=(e,t,a)=>{var n=er(e),i=ko(e,t),o=So(e,t);if(!(i==null||o==null))return n==="horizontal"?vy(e,"yAxis",o,a):vy(e,"xAxis",i,a)},fte=(e,t)=>{var a=er(e),n=ko(e,t),i=So(e,t);if(!(n==null||i==null))return a==="horizontal"?wT(e,"xAxis",n):wT(e,"yAxis",i)},hte=Ie([dte,OK,fte],aQ),mte=(e,t,a)=>{var n,i,o=Ku(e,t);if(o==null)return 0;var d=ko(e,t),h=So(e,t);if(d==null||h==null)return 0;var m=er(e),u=eM(e),{maxBarSize:f}=o,x=Br(f)?u:f,b,v;return m==="horizontal"?(b=mi(e,"xAxis",d,a),v=hi(e,"xAxis",d,a)):(b=mi(e,"yAxis",h,a),v=hi(e,"yAxis",h,a)),(n=(i=Ac(b,v,!0))!==null&&i!==void 0?i:x)!==null&&n!==void 0?n:0},J6=(e,t,a)=>{var n=er(e),i=ko(e,t),o=So(e,t);if(!(i==null||o==null)){var d,h;return n==="horizontal"?(d=mi(e,"xAxis",i,a),h=hi(e,"xAxis",i,a)):(d=mi(e,"yAxis",o,a),h=hi(e,"yAxis",o,a)),Ac(d,h)}},pte=Ie([hte,eM,AK,tM,mte,J6,ote],oQ),xte=(e,t,a)=>{var n=ko(e,t);if(n!=null)return mi(e,"xAxis",n,a)},bte=(e,t,a)=>{var n=So(e,t);if(n!=null)return mi(e,"yAxis",n,a)},gte=(e,t,a)=>{var n=ko(e,t);if(n!=null)return hi(e,"xAxis",n,a)},vte=(e,t,a)=>{var n=So(e,t);if(n!=null)return hi(e,"yAxis",n,a)},yte=Ie([pte,Ku],dQ),jte=Ie([ute,Ku],cQ),Nte=Ie([pa,bj,xte,bte,gte,vte,yte,er,NK,J6,jte,Ku,cte],(e,t,a,n,i,o,d,h,m,u,f,x,b)=>{var{chartData:v,dataStartIndex:N,dataEndIndex:j}=m;if(!(x==null||d==null||t==null||h!=="horizontal"&&h!=="vertical"||a==null||n==null||i==null||o==null||u==null)){var{data:_}=x,k;if(_!=null&&_.length>0?k=_:k=v==null?void 0:v.slice(N,j+1),k!=null)return Wte({layout:h,barSettings:x,pos:d,parentViewBox:t,bandSize:u,xAxis:a,yAxis:n,xAxisTicks:i,yAxisTicks:o,stackedData:f,displayedData:k,offset:e,cells:b,dataStartIndex:N})}}),wte=["index"];function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ey.apply(null,arguments)}function _te(e,t){if(e==null)return{};var a,n,i=kte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function kte(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var Z6=g.createContext(void 0),Ste=e=>{var t=g.useContext(Z6);if(t!=null)return t.stackId;if(e!=null)return OU(e)},Ete=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Tte=e=>{var t=g.useContext(Z6);if(t!=null){var{stackId:a}=t;return"url(#".concat(Ete(a,e),")")}},Q6=e=>{var{index:t}=e,a=_te(e,wte),n=Tte(t);return g.createElement(_a,Ey({className:"recharts-bar-stack-layer",clipPath:n},a))},Cte=["onMouseEnter","onMouseLeave","onClick"],Ate=["value","background","tooltipPosition"],Ote=["id"],Mte=["onMouseEnter","onClick","onMouseLeave"];function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},wl.apply(null,arguments)}function UC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Xa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(a),!0).forEach(function(n){Ite(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Ite(e,t,a){return(t=Pte(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pte(e){var t=Dte(e,"string");return typeof t=="symbol"?t:t+""}function Dte(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kp(e,t){if(e==null)return{};var a,n,i=Lte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Lte(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var Rte=e=>{var{dataKey:t,name:a,fill:n,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:n,value:Bc(a,t),payload:e}]},$te=g.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:n,fill:i,name:o,hide:d,unit:h,tooltipType:m,id:u}=e,f={dataDefinedOnItem:void 0,getPosition:jo,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Bc(o,t),hide:d,type:m,color:i,unit:h,graphicalItemId:u}};return g.createElement(FN,{tooltipEntrySettings:f})});function zte(e){var t=_t(pi),{data:a,dataKey:n,background:i,allOtherBarProps:o}=e,{onMouseEnter:d,onMouseLeave:h,onClick:m}=o,u=kp(o,Cte),f=BN(d,n,o.id),x=UN(h),b=qN(m,n,o.id);if(!i||a==null)return null;var v=co(i);return g.createElement(pn,{zIndex:uQ(i,ca.barBackground)},a.map((N,j)=>{var{value:_,background:k,tooltipPosition:E}=N,C=kp(N,Ate);if(!k)return null;var S=f(N,j),O=x(N,j),I=b(N,j),L=Xa(Xa(Xa(Xa(Xa({option:i,isActive:String(j)===t},C),{},{fill:"#eee"},k),v),zp(u,N,j)),{},{onMouseEnter:S,onMouseLeave:O,onClick:I,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return g.createElement(_p,wl({key:"background-bar-".concat(j)},L))}))}function Bte(e){var{showLabels:t,children:a,rects:n}=e,i=n==null?void 0:n.map(o=>{var d={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Xa(Xa({},d),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:d,fill:o.fill})});return g.createElement(j6,{value:t?i:void 0},a)}function Ute(e){var{shape:t,activeBar:a,baseProps:n,entry:i,index:o,dataKey:d}=e,h=_t(pi),m=_t(TN),u=a&&String(o)===h&&(m==null||d===m),f=u?a:t;return u?g.createElement(pn,{zIndex:ca.activeBar},g.createElement(Q6,{index:o},g.createElement(_p,wl({},n,{name:String(n.name)},i,{isActive:u,option:f,index:o,dataKey:d})))):g.createElement(_p,wl({},n,{name:String(n.name)},i,{isActive:u,option:f,index:o,dataKey:d}))}function qte(e){var{shape:t,baseProps:a,entry:n,index:i,dataKey:o}=e;return g.createElement(_p,wl({},a,{name:String(a.name)},n,{isActive:!1,option:t,index:i,dataKey:o}))}function Fte(e){var t,{data:a,props:n}=e,i=(t=Pn(n))!==null&&t!==void 0?t:{},{id:o}=i,d=kp(i,Ote),{shape:h,dataKey:m,activeBar:u}=n,{onMouseEnter:f,onClick:x,onMouseLeave:b}=n,v=kp(n,Mte),N=BN(f,m,o),j=UN(b),_=qN(x,m,o);return a?g.createElement(g.Fragment,null,a.map((k,E)=>g.createElement(Q6,wl({index:E,key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(E),className:"recharts-bar-rectangle"},zp(v,k,E),{onMouseEnter:N(k,E),onMouseLeave:j(k,E),onClick:_(k,E)}),u?g.createElement(Ute,{shape:h,activeBar:u,baseProps:d,entry:k,index:E,dataKey:m}):g.createElement(qte,{shape:h,baseProps:d,entry:k,index:E,dataKey:m})))):null}function Hte(e){var{props:t,previousRectanglesRef:a}=e,{data:n,layout:i,isAnimationActive:o,animationBegin:d,animationDuration:h,animationEasing:m,onAnimationEnd:u,onAnimationStart:f}=t,x=a.current,b=Pu(t,"recharts-bar-"),[v,N]=g.useState(!1),j=!v,_=g.useCallback(()=>{typeof u=="function"&&u(),N(!1)},[u]),k=g.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return g.createElement(Bte,{showLabels:j,rects:n},g.createElement(Iu,{animationId:b,begin:d,duration:h,isActive:o,easing:m,onAnimationEnd:_,onAnimationStart:k,key:b},E=>{var C=E===1?n:n==null?void 0:n.map((S,O)=>{var I=x&&x[O];if(I)return Xa(Xa({},S),{},{x:Pr(I.x,S.x,E),y:Pr(I.y,S.y,E),width:Pr(I.width,S.width,E),height:Pr(I.height,S.height,E)});if(i==="horizontal"){var L=Pr(0,S.height,E),te=Pr(S.stackedBarStart,S.y,E);return Xa(Xa({},S),{},{y:te,height:L})}var H=Pr(0,S.width,E),B=Pr(S.stackedBarStart,S.x,E);return Xa(Xa({},S),{},{width:H,x:B})});return E>0&&(a.current=C??null),C==null?null:g.createElement(_a,null,g.createElement(Fte,{props:t,data:C}))}),g.createElement(DN,{label:t.label}),t.children)}function Yte(e){var t=g.useRef(null);return g.createElement(Hte,{previousRectanglesRef:t,props:e})}var eI=0,Kte=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:pr(e,t)}};class Vte extends g.PureComponent{render(){var{hide:t,data:a,dataKey:n,className:i,xAxisId:o,yAxisId:d,needClip:h,background:m,id:u}=this.props;if(t||a==null)return null;var f=nr("recharts-bar",i),x=u;return g.createElement(_a,{className:f,id:u},h&&g.createElement("defs",null,g.createElement(H6,{clipPathId:x,xAxisId:o,yAxisId:d})),g.createElement(_a,{className:"recharts-bar-rectangles",clipPath:h?"url(#clipPath-".concat(x,")"):void 0},g.createElement(zte,{data:a,dataKey:n,background:m,allOtherBarProps:this.props}),g.createElement(Yte,this.props)))}}var Gte={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:eI,xAxisId:0,yAxisId:0,zIndex:ca.bar};function Xte(e){var{xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:o,activeBar:d,animationBegin:h,animationDuration:m,animationEasing:u,isAnimationActive:f}=e,{needClip:x}=GN(t,a),b=No(),v=Ya(),N=$N(e.children,_x),j=_t(E=>Nte(E,e.id,v,N));if(b!=="vertical"&&b!=="horizontal")return null;var _,k=j==null?void 0:j[0];return k==null||k.height==null||k.width==null?_=0:_=b==="vertical"?k.height/2:k.width/2,g.createElement(F6,{xAxisId:t,yAxisId:a,data:j,dataPointFormatter:Kte,errorBarOffset:_},g.createElement(Vte,wl({},e,{layout:b,needClip:x,data:j,xAxisId:t,yAxisId:a,hide:n,legendType:i,minPointSize:o,activeBar:d,animationBegin:h,animationDuration:m,animationEasing:u,isAnimationActive:f})))}function Wte(e){var{layout:t,barSettings:{dataKey:a,minPointSize:n},pos:i,bandSize:o,xAxis:d,yAxis:h,xAxisTicks:m,yAxisTicks:u,stackedData:f,displayedData:x,offset:b,cells:v,parentViewBox:N,dataStartIndex:j}=e,_=t==="horizontal"?h:d,k=f?_.scale.domain():null,E=MU({numericAxis:_}),C=_.scale.map(E);return x.map((S,O)=>{var I,L,te,H,B,X;if(f){var V=f[O+j];if(V==null)return null;I=SU(V,k)}else I=pr(S,a),Array.isArray(I)||(I=[E,I]);var le=ste(n,eI)(I[1],O);if(t==="horizontal"){var J,Z=h.scale.map(I[0]),M=h.scale.map(I[1]);if(Z==null||M==null)return null;L=_S({axis:d,ticks:m,bandSize:o,offset:i.offset,entry:S,index:O}),te=(J=M??Z)!==null&&J!==void 0?J:void 0,H=i.size;var P=Z-M;if(B=Ls(P)?0:P,X={x:L,y:b.top,width:H,height:b.height},Math.abs(le)>0&&Math.abs(B)<Math.abs(le)){var W=Na(B||le)*(Math.abs(le)-Math.abs(B));te-=W,B+=W}}else{var se=d.scale.map(I[0]),ue=d.scale.map(I[1]);if(se==null||ue==null)return null;if(L=se,te=_S({axis:h,ticks:u,bandSize:o,offset:i.offset,entry:S,index:O}),H=ue-se,B=i.size,X={x:b.left,y:te,width:b.width,height:B},Math.abs(le)>0&&Math.abs(H)<Math.abs(le)){var D=Na(H||le)*(Math.abs(le)-Math.abs(H));H+=D}}if(L==null||te==null||H==null||B==null)return null;var U=Xa(Xa({},S),{},{stackedBarStart:C,x:L,y:te,width:H,height:B,value:f?I:I[1],payload:S,background:X,tooltipPosition:{x:L+H/2,y:te+B/2},parentViewBox:N},v&&v[O]&&v[O].props);return U}).filter(Boolean)}function Jte(e){var t=ka(e,Gte),a=Ste(t.stackId),n=Ya();return g.createElement(HN,{id:t.id,type:"bar"},i=>g.createElement(g.Fragment,null,g.createElement(O6,{legendPayload:Rte(t)}),g.createElement($te,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),g.createElement(I6,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),g.createElement(pn,{zIndex:t.zIndex},g.createElement(Xte,wl({},t,{id:i})))))}var ro=g.memo(Jte,Cx);ro.displayName="Bar";var Zte=["domain","range"],Qte=["domain","range"];function qC(e,t){if(e==null)return{};var a,n,i=ere(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ere(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function FC(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function tI(e,t){if(e===t)return!0;var{domain:a,range:n}=e,i=qC(e,Zte),{domain:o,range:d}=t,h=qC(t,Qte);return!FC(a,o)||!FC(n,d)?!1:Cx(i,h)}var tre=["type"],rre=["dangerouslySetInnerHTML","ticks","scale"],are=["id","scale"];function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ty.apply(null,arguments)}function HC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function YC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(a),!0).forEach(function(n){nre(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function nre(e,t,a){return(t=sre(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sre(e){var t=lre(e,"string");return typeof t=="symbol"?t:t+""}function lre(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cy(e,t){if(e==null)return{};var a,n,i=ire(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ire(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function ore(e){var t=Lr(),a=g.useRef(null),n=U4(),{type:i}=e,o=Cy(e,tre),d=hx(n,"xAxis",i),h=g.useMemo(()=>{if(d!=null)return YC(YC({},o),{},{type:d})},[o,d]);return g.useLayoutEffect(()=>{h!=null&&(a.current===null?t(UZ(h)):a.current!==h&&t(qZ({prev:a.current,next:h})),a.current=h)},[h,t]),g.useLayoutEffect(()=>()=>{a.current&&(t(FZ(a.current)),a.current=null)},[t]),null}var cre=e=>{var{xAxisId:t,className:a}=e,n=_t(bj),i=Ya(),o="xAxis",d=_t(k=>PM(k,o,t,i)),h=_t(k=>AM(k,t)),m=_t(k=>OV(k,t)),u=_t(k=>uM(k,t));if(h==null||m==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:x,scale:b}=e,v=Cy(e,rre),{id:N,scale:j}=u,_=Cy(u,are);return g.createElement(VN,Ty({},v,_,{x:m.x,y:m.y,width:h.width,height:h.height,className:nr("recharts-".concat(o," ").concat(o),a),viewBox:n,ticks:d,axisType:o}))},dre={allowDataOverflow:va.allowDataOverflow,allowDecimals:va.allowDecimals,allowDuplicatedCategory:va.allowDuplicatedCategory,angle:va.angle,axisLine:xl.axisLine,height:va.height,hide:!1,includeHidden:va.includeHidden,interval:va.interval,label:!1,minTickGap:va.minTickGap,mirror:va.mirror,orientation:va.orientation,padding:va.padding,reversed:va.reversed,scale:va.scale,tick:va.tick,tickCount:va.tickCount,tickLine:xl.tickLine,tickSize:xl.tickSize,type:va.type,xAxisId:0},ure=e=>{var t=ka(e,dre);return g.createElement(g.Fragment,null,g.createElement(ore,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(cre,t))},Ts=g.memo(ure,tI);Ts.displayName="XAxis";var fre=["type"],hre=["dangerouslySetInnerHTML","ticks","scale"],mre=["id","scale"];function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ay.apply(null,arguments)}function KC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function VC(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(a),!0).forEach(function(n){pre(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function pre(e,t,a){return(t=xre(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xre(e){var t=bre(e,"string");return typeof t=="symbol"?t:t+""}function bre(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oy(e,t){if(e==null)return{};var a,n,i=gre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function gre(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function vre(e){var t=Lr(),a=g.useRef(null),n=U4(),{type:i}=e,o=Oy(e,fre),d=hx(n,"yAxis",i),h=g.useMemo(()=>{if(d!=null)return VC(VC({},o),{},{type:d})},[d,o]);return g.useLayoutEffect(()=>{h!=null&&(a.current===null?t(HZ(h)):a.current!==h&&t(YZ({prev:a.current,next:h})),a.current=h)},[h,t]),g.useLayoutEffect(()=>()=>{a.current&&(t(KZ(a.current)),a.current=null)},[t]),null}function yre(e){var{yAxisId:t,className:a,width:n,label:i}=e,o=g.useRef(null),d=g.useRef(null),h=_t(bj),m=Ya(),u=Lr(),f="yAxis",x=_t(I=>OM(I,t)),b=_t(I=>IV(I,t)),v=_t(I=>PM(I,f,t,m)),N=_t(I=>fM(I,t));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!x||PN(i)||g.isValidElement(i)||N==null)){var I=o.current;if(I){var L=I.getCalculatedWidth();Math.round(x.width)!==Math.round(L)&&u(VZ({id:t,width:L}))}}},[v,x,u,i,t,n,N]),x==null||b==null||N==null)return null;var{dangerouslySetInnerHTML:j,ticks:_,scale:k}=e,E=Oy(e,hre),{id:C,scale:S}=N,O=Oy(N,mre);return g.createElement(VN,Ay({},E,O,{ref:o,labelRef:d,x:b.x,y:b.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:x.width,height:x.height,className:nr("recharts-".concat(f," ").concat(f),a),viewBox:h,ticks:v,axisType:f}))}var jre={allowDataOverflow:ya.allowDataOverflow,allowDecimals:ya.allowDecimals,allowDuplicatedCategory:ya.allowDuplicatedCategory,angle:ya.angle,axisLine:xl.axisLine,hide:!1,includeHidden:ya.includeHidden,interval:ya.interval,label:!1,minTickGap:ya.minTickGap,mirror:ya.mirror,orientation:ya.orientation,padding:ya.padding,reversed:ya.reversed,scale:ya.scale,tick:ya.tick,tickCount:ya.tickCount,tickLine:xl.tickLine,tickSize:xl.tickSize,type:ya.type,width:ya.width,yAxisId:0},Nre=e=>{var t=ka(e,jre);return g.createElement(g.Fragment,null,g.createElement(vre,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(yre,t))},Cs=g.memo(Nre,tI);Cs.displayName="YAxis";var wre=(e,t)=>t,WN=Ie([wre,er,oM,Ea,JM,Ol,XG,pa],rX),JN=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/n)}},rI=Qn("mouseClick"),aI=Cu();aI.startListening({actionCreator:rI,effect:(e,t)=>{var a=e.payload,n=WN(t.getState(),JN(a));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(VV({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var My=Qn("mouseMove"),nI=Cu(),yh=null;nI.startListening({actionCreator:My,effect:(e,t)=>{var a=e.payload;yh!==null&&cancelAnimationFrame(yh);var n=JN(a);yh=requestAnimationFrame(()=>{var i=t.getState(),o=NN(i,i.tooltip.settings.shared);if(o==="axis"){var d=WN(i,n);(d==null?void 0:d.activeIndex)!=null?t.dispatch(qM({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(UM())}yh=null})}});function _re(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var GC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},sI=mn({name:"rootProps",initialState:GC,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:GC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),kre=sI.reducer,{updateOptions:Sre}=sI.actions,Ere=null,Tre={updatePolarOptions:(e,t)=>t.payload},lI=mn({name:"polarOptions",initialState:Ere,reducers:Tre}),{updatePolarOptions:Cre}=lI.actions,Are=lI.reducer,iI=Qn("keyDown"),oI=Qn("focus"),ZN=Cu();ZN.startListening({actionCreator:iI,effect:(e,t)=>{var a=t.getState(),n=a.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=a.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var d=wN(i,Xc(a),qu(a),Hu(a)),h=d==null?-1:Number(d);if(!(!Number.isFinite(h)||h<0)){var m=Ol(a);if(o==="Enter"){var u=gp(a,"axis","hover",String(i.index));t.dispatch(jy({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=RV(a),x=f==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,v=h+b*x;if(!(m==null||v>=m.length||v<0)){var N=gp(a,"axis","hover",String(v));t.dispatch(jy({active:!0,activeIndex:v.toString(),activeCoordinate:N}))}}}}}});ZN.startListening({actionCreator:oI,effect:(e,t)=>{var a=t.getState(),n=a.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=a.tooltip;if(!i.active&&i.index==null){var o="0",d=gp(a,"axis","hover",String(o));t.dispatch(jy({active:!0,activeIndex:o,activeCoordinate:d}))}}}});var Wn=Qn("externalEvent"),cI=Cu(),_v=new Map;cI.startListening({actionCreator:Wn,effect:(e,t)=>{var{handler:a,reactEvent:n}=e.payload;if(a!=null){n.persist();var i=n.type,o=_v.get(i);o!==void 0&&cancelAnimationFrame(o);var d=requestAnimationFrame(()=>{try{var h=t.getState(),m={activeCoordinate:IG(h),activeDataKey:TN(h),activeIndex:pi(h),activeLabel:e6(h),activeTooltipIndex:pi(h),isTooltipActive:PG(h)};a(m,n)}finally{_v.delete(i)}});_v.set(i,d)}}});var Ore=Ie([Vc],e=>e.tooltipItemPayloads),Mre=Ie([Ore,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{if(t!=null){var n=e.find(o=>o.settings.graphicalItemId===a);if(n!=null){var{getPosition:i}=n;if(i!=null)return i(t)}}}),dI=Qn("touchMove"),uI=Cu();uI.startListening({actionCreator:dI,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var n=t.getState(),i=NN(n,n.tooltip.settings.shared);if(i==="axis"){var o=a.touches[0];if(o==null)return;var d=WN(n,JN({clientX:o.clientX,clientY:o.clientY,currentTarget:a.currentTarget}));(d==null?void 0:d.activeIndex)!=null&&t.dispatch(qM({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}else if(i==="item"){var h,m=a.touches[0];if(document.elementFromPoint==null||m==null)return;var u=document.elementFromPoint(m.clientX,m.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(I4),x=(h=u.getAttribute(P4))!==null&&h!==void 0?h:void 0,b=Gc(n).find(j=>j.id===x);if(f==null||b==null||x==null)return;var{dataKey:v}=b,N=Mre(n,f,x);t.dispatch(BM({activeDataKey:v,activeIndex:f,activeCoordinate:N,activeGraphicalItemId:x}))}}}});var Ire=t4({brush:fQ,cartesianAxis:GZ,chartData:IX,errorBars:lee,graphicalItems:tZ,layout:jU,legend:Sq,options:TX,polarAxis:pJ,polarOptions:Are,referenceElements:xQ,rootProps:kre,tooltip:GV,zIndex:xX}),Pre=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return KB({reducer:Ire,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([aI.middleware,nI.middleware,ZN.middleware,cI.middleware,uI.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(x4({type:"raf"}))},devTools:{serialize:{replacer:_re},name:"recharts-".concat(a)}})};function fI(e){var{preloadedState:t,children:a,reduxStoreName:n}=e,i=Ya(),o=g.useRef(null);if(i)return a;o.current==null&&(o.current=Pre(t,n));var d=dj;return g.createElement(Iee,{context:d,store:o.current},a)}function Dre(e){var{layout:t,margin:a}=e,n=Lr(),i=Ya();return g.useEffect(()=>{i||(n(gU(t)),n(bU(a)))},[n,i,t,a]),null}var hI=g.memo(Dre,Cx);function mI(e){var t=Lr();return g.useEffect(()=>{t(Sre(e))},[t,e]),null}function XC(e){var{zIndex:t,isPanorama:a}=e,n=g.useRef(null),i=Lr();return g.useLayoutEffect(()=>(n.current&&i(mX({zIndex:t,element:n.current,isPanorama:a})),()=>{i(pX({zIndex:t,isPanorama:a}))}),[i,t,a]),g.createElement("g",{tabIndex:-1,ref:n})}function WC(e){var{children:t,isPanorama:a}=e,n=_t(nX);if(!n||n.length===0)return t;var i=n.filter(d=>d<0),o=n.filter(d=>d>0);return g.createElement(g.Fragment,null,i.map(d=>g.createElement(XC,{key:d,zIndex:d,isPanorama:a})),t,o.map(d=>g.createElement(XC,{key:d,zIndex:d,isPanorama:a})))}var Lre=["children"];function Rre(e,t){if(e==null)return{};var a,n,i=$re(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function $re(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sp.apply(null,arguments)}var zre={width:"100%",height:"100%",display:"block"},Bre=g.forwardRef((e,t)=>{var a=z4(),n=B4(),i=Q4();if(!$s(a)||!$s(n))return null;var{children:o,otherAttributes:d,title:h,desc:m}=e,u,f;return d!=null&&(typeof d.tabIndex=="number"?u=d.tabIndex:u=i?0:void 0,typeof d.role=="string"?f=d.role:f=i?"application":void 0),g.createElement(g5,Sp({},d,{title:h,desc:m,role:f,tabIndex:u,width:a,height:n,style:zre,ref:t}),o)}),Ure=e=>{var{children:t}=e,a=_t(Qp);if(!a)return null;var{width:n,height:i,y:o,x:d}=a;return g.createElement(g5,{width:n,height:i,x:d,y:o},t)},JC=g.forwardRef((e,t)=>{var{children:a}=e,n=Rre(e,Lre),i=Ya();return i?g.createElement(Ure,null,g.createElement(WC,{isPanorama:!0},a)):g.createElement(Bre,Sp({ref:t},n),g.createElement(WC,{isPanorama:!1},a))});function qre(){var e=Lr(),[t,a]=g.useState(null),n=_t($U);return g.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),o=i.width/t.offsetWidth;Gt(o)&&o!==n&&e(yU(o))}},[t,e,n]),a}function ZC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function Fre(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(a),!0).forEach(function(n){Hre(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ZC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function Hre(e,t,a){return(t=Yre(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Yre(e){var t=Kre(e,"string");return typeof t=="symbol"?t:t+""}function Kre(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ui.apply(null,arguments)}var Vre=()=>(qX(),null);function Ep(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Gre=g.forwardRef((e,t)=>{var a,n,i=g.useRef(null),[o,d]=g.useState({containerWidth:Ep((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:Ep((n=e.style)===null||n===void 0?void 0:n.height)}),h=g.useCallback((u,f)=>{d(x=>{var b=Math.round(u),v=Math.round(f);return x.containerWidth===b&&x.containerHeight===v?x:{containerWidth:b,containerHeight:v}})},[]),m=g.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:x}=u.getBoundingClientRect();h(f,x);var b=N=>{var j=N[0];if(j!=null){var{width:_,height:k}=j.contentRect;h(_,k)}},v=new ResizeObserver(b);v.observe(u),i.current=v}},[t,h]);return g.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[h]),g.createElement(g.Fragment,null,g.createElement(Ou,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",ui({ref:m},e)))}),Xre=g.forwardRef((e,t)=>{var{width:a,height:n}=e,[i,o]=g.useState({containerWidth:Ep(a),containerHeight:Ep(n)}),d=g.useCallback((m,u)=>{o(f=>{var x=Math.round(m),b=Math.round(u);return f.containerWidth===x&&f.containerHeight===b?f:{containerWidth:x,containerHeight:b}})},[]),h=g.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:u,height:f}=m.getBoundingClientRect();d(u,f)}},[t,d]);return g.createElement(g.Fragment,null,g.createElement(Ou,{width:i.containerWidth,height:i.containerHeight}),g.createElement("div",ui({ref:h},e)))}),Wre=g.forwardRef((e,t)=>{var{width:a,height:n}=e;return g.createElement(g.Fragment,null,g.createElement(Ou,{width:a,height:n}),g.createElement("div",ui({ref:t},e)))}),Jre=g.forwardRef((e,t)=>{var{width:a,height:n}=e;return typeof a=="string"||typeof n=="string"?g.createElement(Xre,ui({},e,{ref:t})):typeof a=="number"&&typeof n=="number"?g.createElement(Wre,ui({},e,{width:a,height:n,ref:t})):g.createElement(g.Fragment,null,g.createElement(Ou,{width:a,height:n}),g.createElement("div",ui({ref:t},e)))});function Zre(e){return e?Gre:Jre}var Qre=g.forwardRef((e,t)=>{var{children:a,className:n,height:i,onClick:o,onContextMenu:d,onDoubleClick:h,onMouseDown:m,onMouseEnter:u,onMouseLeave:f,onMouseMove:x,onMouseUp:b,onTouchEnd:v,onTouchMove:N,onTouchStart:j,style:_,width:k,responsive:E,dispatchTouchEvents:C=!0}=e,S=g.useRef(null),O=Lr(),[I,L]=g.useState(null),[te,H]=g.useState(null),B=qre(),X=gj(),V=(X==null?void 0:X.width)>0?X.width:k,le=(X==null?void 0:X.height)>0?X.height:i,J=g.useCallback(F=>{B(F),typeof t=="function"&&t(F),L(F),H(F),F!=null&&(S.current=F)},[B,t,L,H]),Z=g.useCallback(F=>{O(rI(F)),O(Wn({handler:o,reactEvent:F}))},[O,o]),M=g.useCallback(F=>{O(My(F)),O(Wn({handler:u,reactEvent:F}))},[O,u]),P=g.useCallback(F=>{O(UM()),O(Wn({handler:f,reactEvent:F}))},[O,f]),W=g.useCallback(F=>{O(My(F)),O(Wn({handler:x,reactEvent:F}))},[O,x]),se=g.useCallback(()=>{O(oI())},[O]),ue=g.useCallback(F=>{O(iI(F.key))},[O]),D=g.useCallback(F=>{O(Wn({handler:d,reactEvent:F}))},[O,d]),U=g.useCallback(F=>{O(Wn({handler:h,reactEvent:F}))},[O,h]),re=g.useCallback(F=>{O(Wn({handler:m,reactEvent:F}))},[O,m]),he=g.useCallback(F=>{O(Wn({handler:b,reactEvent:F}))},[O,b]),Ne=g.useCallback(F=>{O(Wn({handler:j,reactEvent:F}))},[O,j]),Y=g.useCallback(F=>{C&&O(dI(F)),O(Wn({handler:N,reactEvent:F}))},[O,C,N]),me=g.useCallback(F=>{O(Wn({handler:v,reactEvent:F}))},[O,v]),z=Zre(E);return g.createElement(i6.Provider,{value:I},g.createElement(S8.Provider,{value:te},g.createElement(z,{width:V??(_==null?void 0:_.width),height:le??(_==null?void 0:_.height),className:nr("recharts-wrapper",n),style:Fre({position:"relative",cursor:"default",width:V,height:le},_),onClick:Z,onContextMenu:D,onDoubleClick:U,onFocus:se,onKeyDown:ue,onMouseDown:re,onMouseEnter:M,onMouseLeave:P,onMouseMove:W,onMouseUp:he,onTouchEnd:me,onTouchMove:Y,onTouchStart:Ne,ref:J},g.createElement(Vre,null),a)))}),eae=["width","height","responsive","children","className","style","compact","title","desc"];function tae(e,t){if(e==null)return{};var a,n,i=rae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function rae(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var pI=g.forwardRef((e,t)=>{var{width:a,height:n,responsive:i,children:o,className:d,style:h,compact:m,title:u,desc:f}=e,x=tae(e,eae),b=Pn(x);return m?g.createElement(g.Fragment,null,g.createElement(Ou,{width:a,height:n}),g.createElement(JC,{otherAttributes:b,title:u,desc:f},o)):g.createElement(Qre,{className:d,style:h,width:a,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(JC,{otherAttributes:b,title:u,desc:f,ref:t},g.createElement(gQ,null,o)))});function Iy(){return Iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Iy.apply(null,arguments)}var aae={top:5,right:5,bottom:5,left:5},nae={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:aae,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},xI=g.forwardRef(function(t,a){var n,i=ka(t.categoricalChartProps,nae),{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,categoricalChartProps:u}=t,f={chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:h,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(fI,{preloadedState:{options:f},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:o},g.createElement(R6,{chartData:u.data}),g.createElement(hI,{layout:i.layout,margin:i.margin}),g.createElement(mI,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),g.createElement(pI,Iy({},i,{ref:a})))}),sae=["axis"],eu=g.forwardRef((e,t)=>g.createElement(xI,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sae,tooltipPayloadSearcher:IN,categoricalChartProps:e,ref:t})),lae=["axis","item"],pm=g.forwardRef((e,t)=>g.createElement(xI,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lae,tooltipPayloadSearcher:IN,categoricalChartProps:e,ref:t}));function iae(e){var t=Lr();return g.useEffect(()=>{t(Cre(e))},[t,e]),null}var oae=["layout"];function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Py.apply(null,arguments)}function cae(e,t){if(e==null)return{};var a,n,i=dae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function dae(e,t){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;a[n]=e[n]}return a}var uae={top:5,right:5,bottom:5,left:5},bI={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:uae,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},fae=g.forwardRef(function(t,a){var n,i=ka(t.categoricalChartProps,bI),{layout:o}=i,d=cae(i,oae),{chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=t,x={chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return g.createElement(fI,{preloadedState:{options:x},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:h},g.createElement(R6,{chartData:i.data}),g.createElement(hI,{layout:o,margin:i.margin}),g.createElement(mI,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),g.createElement(iae,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),g.createElement(pI,Py({},d,{ref:a})))});function QC(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,n)}return a}function eA(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(a),!0).forEach(function(n){hae(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QC(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function hae(e,t,a){return(t=mae(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mae(e){var t=pae(e,"string");return typeof t=="symbol"?t:t+""}function pae(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xae=["item"],bae=eA(eA({},bI),{},{layout:"centric",startAngle:0,endAngle:360}),gae=g.forwardRef((e,t)=>{var a=ka(e,bae);return g.createElement(fae,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:xae,tooltipPayloadSearcher:IN,categoricalChartProps:a,ref:t})});const jh=({title:e,value:t,change:a,isPositive:n,icon:i,color:o})=>r.jsxs("div",{className:"card p-6 rounded-2xl shadow-md border border-card flex items-center justify-between transition-all hover:shadow-xl hover:scale-[1.02] hover:-translate-y-1 duration-300 group",children:[r.jsxs("div",{className:"text-right flex-1",children:[r.jsx("p",{className:"text-[11px] text-muted mb-2 font-semibold tracking-widest uppercase",children:e}),r.jsx("h3",{className:"text-2xl font-black tracking-tight bg-gradient-to-l from-slate-900 to-slate-700 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent leading-tight",children:t}),r.jsxs("div",{className:`flex items-center gap-1.5 mt-3 text-[11px] font-bold px-2.5 py-1 rounded-full w-fit ${n?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30":"text-rose-600 dark:text-rose-400 bg-rose-50 dark:bg-rose-900/30"}`,children:[n?r.jsx(xm,{size:14}):r.jsx(rL,{size:14}),r.jsx("span",{children:a})]})]}),r.jsx("div",{className:`p-4 rounded-xl ${o} shadow-xl shadow-current/20 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300`,children:r.jsx(i,{className:"text-white w-7 h-7"})})]}),Nh=({label:e,value:t})=>r.jsxs("div",{className:"px-4 py-2 rounded-full bg-white/70 dark:bg-slate-800/70 border border-white/40 dark:border-slate-700/60 text-[11px] font-bold",children:[r.jsx("span",{className:"text-muted",children:e})," ",r.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:t})]}),kv=({level:e,text:t})=>{const a={high:"bg-rose-100 text-rose-700 border-rose-200",medium:"bg-amber-100 text-amber-700 border-amber-200",low:"bg-emerald-100 text-emerald-700 border-emerald-200"};return r.jsx("span",{className:`px-3 py-1 rounded-full text-[11px] font-black border ${a[e]}`,children:t})},tA=()=>{var J,Z,M;const{isDark:e}=$y(),t=".",[a,n]=g.useState(!0),[i,o]=g.useState(null),d=new Date,h=new Date(d.getFullYear(),d.getMonth(),1),[m,u]=g.useState(h.toISOString().split("T")[0]),[f,x]=g.useState(d.toISOString().split("T")[0]);g.useEffect(()=>{(async()=>{try{const W=`&start_date=${encodeURIComponent(m)}&end_date=${encodeURIComponent(f)}`,ue=await(await fetch(`${G}/api.php?module=dashboard&action=overview${W}`)).json();ue.success&&o(ue.data)}catch{}finally{n(!1)}})()},[m,f]);const b=g.useMemo(()=>!i||!Array.isArray(i.trend)?[]:i.trend.map(P=>{var W;return{name:((W=P.date)==null?void 0:W.slice(5))||"",sales:Number(P.sales||0),profit:Number(P.profit||0)}}),[i]),v=Number((i==null?void 0:i.revenue_month)||0),N=Number((i==null?void 0:i.profit_month)||0),j=Number((i==null?void 0:i.prev_revenue)||0),_=Number((i==null?void 0:i.prev_profit)||0),k=v>0?N/v*100:0,E=typeof(i==null?void 0:i.revenue_change_pct)=="number"?i.revenue_change_pct:null,C=g.useMemo(()=>b.length?b.reduce((P,W)=>W.sales>P.sales?W:P,b[0]):null,[b]),S=localStorage.getItem("Dragon_company_logo")||ia("Dragon.png"),O=localStorage.getItem("Dragon_company_name")||"Dragon Pro",L=`${(()=>{try{const P=JSON.parse(localStorage.getItem("Dragon_user")||"{}");return(P==null?void 0:P.name)||"System"}catch{return"System"}})()}  ${new Date().toLocaleDateString("ar-EG")} ${new Date().toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}`,te=Number((i==null?void 0:i.low_stock_count)||0),H=Number((i==null?void 0:i.orders_pending)||0),B=Number(((J=i==null?void 0:i.attendance_today)==null?void 0:J.absent)||0),X=(P,W,se)=>P>=W?"high":P>=se?"medium":"low",V=()=>{window.print()},le=()=>{var re,he;const P=[["",`${(i==null?void 0:i.range_start)||m} -> ${(i==null?void 0:i.range_end)||f}`],[" ",v.toString()],[" ",N.toString()],[" ",k.toFixed(2)],[" ",Number((i==null?void 0:i.orders_month)||0).toString()],[" ",Number((i==null?void 0:i.orders_pending)||0).toString()],["",Number((i==null?void 0:i.customers_count)||0).toString()],[" ()",Number((i==null?void 0:i.stock_units)||0).toString()],[" ",Number((i==null?void 0:i.low_stock_count)||0).toString()],[" ",Number(((re=i==null?void 0:i.attendance_today)==null?void 0:re.present)||0).toString()],[" ",Number(((he=i==null?void 0:i.attendance_today)==null?void 0:he.absent)||0).toString()],["  ",j.toString()],["  ",_.toString()]],W=(b||[]).map(Ne=>{var Y,me;return[Ne.name,((Y=Ne.sales)==null?void 0:Y.toString())||"0",((me=Ne.profit)==null?void 0:me.toString())||"0"]}),se=["section,metric,value",...P.map(Ne=>`kpi,${Ne[0]},${Ne[1]}`),"trend,date,sales,profit",...W.map(Ne=>`trend,${Ne[0]},${Ne[1]},${Ne[2]}`)],ue=new Blob([se.join(`
`)],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(ue),U=document.createElement("a");U.href=D,U.download=`dashboard_${m}_to_${f}.csv`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(D)};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 transition-colors",children:[r.jsx("div",{className:"print-only",children:r.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl border border-slate-200 overflow-hidden",children:r.jsx("img",{src:S,alt:"logo",className:"w-full h-full object-cover",onError:P=>{P.target.src=ia("Dragon.png")}})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-muted",children:""}),r.jsx("div",{className:"text-lg font-black",children:O})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-muted",children:" "}),r.jsx("div",{className:"text-xl font-black",children:" "}),r.jsx("div",{className:"text-xs text-muted mt-1",children:L}),r.jsxs("div",{className:"text-[11px] text-muted mt-2",children:[": ",(i==null?void 0:i.range_start)||m,"  ",(i==null?void 0:i.range_end)||f]})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:" "}),r.jsx("strong",{children:a?"...":`${v.toLocaleString()} ${t}`})]}),r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:""}),r.jsx("strong",{children:a?"...":`${N.toLocaleString()} ${t}`})]}),r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:" "}),r.jsx("strong",{children:a?"...":`${k.toFixed(1)}%`})]}),r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:" "}),r.jsx("strong",{children:a?"...":H.toLocaleString()})]}),r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:" "}),r.jsx("strong",{children:a?"...":te.toLocaleString()})]}),r.jsxs("div",{className:"flex items-center justify-between border border-slate-200 rounded-xl px-4 py-3",children:[r.jsx("span",{children:" "}),r.jsx("strong",{children:a?"...":B.toLocaleString()})]})]})]})}),r.jsxs("div",{className:"no-print space-y-6",children:[r.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-blue-200/40 dark:border-blue-900/40 bg-gradient-to-l from-blue-50 via-white to-white dark:from-blue-900/20 dark:via-slate-900 dark:to-slate-900 p-8",children:[r.jsx("div",{className:"absolute -top-24 -right-16 w-64 h-64 bg-blue-200/40 dark:bg-blue-600/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute -bottom-24 -left-12 w-64 h-64 bg-amber-200/30 dark:bg-amber-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/80 dark:bg-slate-800/70 border border-white/60 dark:border-slate-700/60 shadow-lg flex items-center justify-center overflow-hidden",children:r.jsx("img",{src:S,alt:"logo",className:"w-full h-full object-cover",onError:P=>{P.target.src=ia("Dragon.png")}})}),r.jsxs("div",{className:"hidden lg:block",children:[r.jsx("div",{className:"text-xs text-muted",children:""}),r.jsx("div",{className:"text-lg font-black",children:O})]})]}),r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("div",{className:"flex items-center gap-3 justify-end",children:r.jsx("span",{className:"px-3 py-1 rounded-full text-[11px] font-black bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",children:" "})}),r.jsx("h1",{className:"text-4xl font-black mt-4 tracking-tight bg-gradient-to-l from-slate-900 via-blue-700 to-slate-900 dark:from-slate-100 dark:via-blue-300 dark:to-slate-100 bg-clip-text text-transparent",children:" "}),r.jsx("p",{className:"text-sm mt-3 font-medium text-muted",children:"           ."}),r.jsxs("div",{className:"mt-5 flex flex-wrap justify-end gap-2",children:[r.jsx(Nh,{label:" ",value:a?"...":`${v.toLocaleString()} ${t}`}),r.jsx(Nh,{label:" ",value:a?"...":`${k.toFixed(1)}%`}),r.jsx(Nh,{label:" ",value:C?C.name:""}),r.jsx(Nh,{label:" ",value:i!=null&&i.prev_range_start?`${i.prev_range_start}  ${i.prev_range_end}`:""})]})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("button",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border border-slate-200 dark:border-slate-700 px-6 py-3 rounded-2xl text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-all shadow-md hover:shadow-lg hover:scale-105 active:scale-95",onClick:V,children:"  "}),r.jsx("button",{className:"bg-slate-900/90 text-white px-6 py-3 rounded-2xl text-sm font-bold hover:bg-slate-900 transition-all shadow-md hover:shadow-lg hover:scale-105 active:scale-95",onClick:le,children:"  CSV"}),r.jsxs("div",{className:"px-4 py-3 rounded-2xl bg-white/70 dark:bg-slate-800/70 border border-white/60 dark:border-slate-700/60 text-[11px] font-bold text-right",children:[r.jsx("div",{className:"text-muted",children:" "}),r.jsx("div",{className:"mt-1",children:L})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsx("p",{className:"text-xs text-muted",children:"    "})]}),r.jsx($b,{className:"w-5 h-5 text-amber-500"})]}),r.jsx("div",{className:"card p-4 rounded-2xl border border-card shadow-sm",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 items-center justify-between",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-black",children:" "}),r.jsx("div",{className:"text-[11px] text-muted",children:"    "})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsx("input",{type:"date",value:m,onChange:P=>u(P.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white"}),r.jsx("input",{type:"date",value:f,onChange:P=>x(P.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white"}),r.jsxs("div",{className:"text-[11px] font-bold px-3 py-2 rounded-2xl bg-slate-100 dark:bg-slate-800 text-muted",children:[" : ",i!=null&&i.prev_range_start?`${i.prev_range_start}  ${i.prev_range_end}`:""]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(jh,{title:" ",value:a?"...":`${v.toLocaleString()} ${t}`,change:E===null?"":`${Math.abs(E).toFixed(1)}% ${E>=0?"":""}`,isPositive:E===null?!0:E>=0,icon:WL,color:"bg-gradient-to-br from-blue-700 to-blue-500"}),r.jsx(jh,{title:"",value:a?"...":`${Number((i==null?void 0:i.customers_count)||0).toLocaleString()} `,change:a?"":" ",isPositive:!0,icon:Sc,color:"bg-gradient-to-br from-slate-900 to-slate-700"}),r.jsx(jh,{title:"",value:a?"...":`${Number((i==null?void 0:i.stock_units)||0).toLocaleString()} `,change:a?"":`: ${Number((i==null?void 0:i.low_stock_count)||0)}`,isPositive:Number((i==null?void 0:i.low_stock_count)||0)===0,icon:nu,color:"bg-gradient-to-br from-amber-600 to-orange-500"}),r.jsx(jh,{title:" ",value:a?"...":`${k.toFixed(1)}%`,change:a?"":`${N.toLocaleString()} ${t}`,isPositive:k>=0,icon:d$,color:"bg-gradient-to-br from-emerald-600 to-teal-600"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"card p-6 rounded-2xl shadow-md border border-card",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-[11px] text-muted font-semibold tracking-widest uppercase",children:" "}),r.jsx(dl,{className:"w-5 h-5 text-blue-500"})]}),r.jsx("div",{className:"text-3xl font-black mt-4",children:a?"...":Number((i==null?void 0:i.orders_month)||0).toLocaleString()}),r.jsxs("p",{className:"text-[11px] text-muted mt-2",children:[" : ",a?"...":Number((i==null?void 0:i.orders_pending)||0).toLocaleString()]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl shadow-md border border-card",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-[11px] text-muted font-semibold tracking-widest uppercase",children:" "}),r.jsx(zL,{className:"w-5 h-5 text-emerald-500"})]}),r.jsx("div",{className:"text-3xl font-black mt-4",children:a?"...":Number(((Z=i==null?void 0:i.attendance_today)==null?void 0:Z.present)||0)}),r.jsxs("p",{className:"text-[11px] text-muted mt-2",children:[" : ",a?"...":Number(((M=i==null?void 0:i.attendance_today)==null?void 0:M.absent)||0)]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl shadow-md border border-card",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-[11px] text-muted font-semibold tracking-widest uppercase",children:""}),r.jsx(Y_,{className:"w-5 h-5 text-rose-500"})]}),r.jsx("div",{className:"text-3xl font-black mt-4",children:a?"...":Number((i==null?void 0:i.employees_count)||0).toLocaleString()}),r.jsx("p",{className:"text-[11px] text-muted mt-2",children:"  "})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx($b,{className:"w-5 h-5 text-amber-500"}),r.jsx("h3",{className:"font-black text-lg",children:"  "})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-slate-50/80 dark:bg-slate-900/40 border border-slate-200/60 dark:border-slate-700/60",children:["  : ",r.jsx("strong",{children:C?C.name:""})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-50/80 dark:bg-slate-900/40 border border-slate-200/60 dark:border-slate-700/60",children:["  : ",r.jsx("strong",{children:Number((i==null?void 0:i.low_stock_count)||0)})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-50/80 dark:bg-slate-900/40 border border-slate-200/60 dark:border-slate-700/60",children:["  : ",r.jsxs("strong",{children:[k.toFixed(1),"%"]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-xl font-black",children:"  "}),r.jsx("p",{className:"text-xs text-muted",children:"    "})]}),r.jsx(Y_,{className:"w-5 h-5 text-rose-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card backdrop-blur-sm p-6 rounded-2xl shadow-md border border-card transition-all hover:shadow-xl",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"font-black text-lg",children:"  "}),r.jsx("span",{className:"text-[11px] text-muted font-medium px-3 py-1 bg-slate-100 dark:bg-slate-700/50 rounded-full",children:" "})]}),r.jsx("div",{className:"h-72",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(pm,{data:b,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:e?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:11,tick:{fill:e?"#94a3b8":"#64748b",fontWeight:600}}),r.jsx(Cs,{axisLine:!1,tickLine:!1,fontSize:11,orientation:"right",tick:{fill:e?"#94a3b8":"#64748b",fontWeight:600}}),r.jsx(ks,{cursor:{fill:e?"rgba(255, 255, 255, 0.05)":"rgba(59, 130, 246, 0.05)"},contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",textAlign:"right",backgroundColor:e?"#0f172a":"rgba(255, 255, 255, 0.98)",color:e?"#f1f5f9":"#0f172a"},itemStyle:{fontWeight:700}}),r.jsx(ro,{dataKey:"sales",name:"",fill:"#1d4ed8",radius:[6,6,0,0],barSize:24}),r.jsx(ro,{dataKey:"profit",name:"",fill:"#10b981",radius:[6,6,0,0],barSize:24})]})})})]}),r.jsxs("div",{className:"card backdrop-blur-sm p-6 rounded-2xl shadow-md border border-card transition-all hover:shadow-xl",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"font-black text-lg",children:" "}),r.jsx("span",{className:"text-[11px] text-muted font-medium px-3 py-1 bg-slate-100 dark:bg-slate-700/50 rounded-full",children:""})]}),r.jsx("div",{className:"h-72",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(eu,{data:b,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:e?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:11,tick:{fill:e?"#94a3b8":"#64748b",fontWeight:600}}),r.jsx(Cs,{axisLine:!1,tickLine:!1,fontSize:11,orientation:"right",tick:{fill:e?"#94a3b8":"#64748b",fontWeight:600}}),r.jsx(ks,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgb(0 0 0 / 0.1)",textAlign:"right",backgroundColor:e?"#0f172a":"rgba(255, 255, 255, 0.98)",color:e?"#f1f5f9":"#0f172a"}}),r.jsx(Wi,{type:"monotone",dataKey:"sales",name:"",stroke:"#1d4ed8",strokeWidth:4,dot:{r:5,fill:"#1d4ed8",strokeWidth:2,stroke:e?"#0f172a":"#fff"},activeDot:{r:8,strokeWidth:0}})]})})})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-black text-lg",children:"  "}),r.jsx($b,{className:"w-5 h-5 text-amber-500"})]}),r.jsxs("div",{className:"space-y-4 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:" "}),r.jsx("div",{className:"text-[11px] text-muted",children:"   "})]}),r.jsx(kv,{level:X(te,12,4),text:te>0?"":""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:" "}),r.jsx("div",{className:"text-[11px] text-muted",children:" "})]}),r.jsx(kv,{level:X(H,20,6),text:H>=20?"":H>=6?"":""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:" "}),r.jsx("div",{className:"text-[11px] text-muted",children:"  "})]}),r.jsx(kv,{level:X(B,6,2),text:B>=6?"":B>=2?"":""})]})]})]})]})]})]})},vae=({onLogin:e})=>{const[t,a]=g.useState(!1),[n,i]=g.useState(""),[o,d]=g.useState(""),[h,m]=g.useState(""),u=ia("Dragon.png"),f=localStorage.getItem("Dragon_company_name")||" ",x=async b=>{b.preventDefault(),a(!0),m("");try{const v=await fetch(`${G}/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:o})}),N=await v.json();if(!v.ok||!N.success)throw new Error(N.message||"Login failed.");localStorage.setItem("Dragon_user",JSON.stringify(N.user)),e()}catch(v){m(v.message)}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen bg-app flex items-center justify-center p-4 font-['Cairo'] transition-colors duration-300",dir:"rtl",children:r.jsxs("div",{className:"card w-full max-w-md rounded-3xl shadow-2xl shadow-blue-500/12 p-8 md:p-12 relative overflow-hidden border border-card",children:[r.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full -mr-20 -mt-20 blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full -ml-20 -mb-20 blur-3xl"}),r.jsxs("div",{className:"text-center mb-10 relative z-10",children:[r.jsx("div",{className:"mb-6 flex justify-center",children:r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl blur-xl opacity-30 group-hover:opacity-50 transition-opacity"}),r.jsx("img",{src:u,className:"relative h-20 w-20 rounded-2xl object-cover border-4 border-white dark:border-slate-700 shadow-xl p-1.5",alt:"Logo",onError:b=>{b.target.src=ia("Dragon.png")}})]})}),r.jsx("h1",{className:"text-3xl font-black bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(90deg, rgba(15,23,42,1) 0%, rgba(37,99,235,1) 50%)"},children:f}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-3 font-medium",children:"      "})]}),r.jsxs("form",{onSubmit:x,className:"space-y-6 relative z-10",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 mr-2 flex items-center gap-2",children:[r.jsx(fi,{size:15,className:"text-blue-600 dark:text-blue-400"}),"  "]}),r.jsx("div",{className:"relative group",children:r.jsx("input",{type:"text",required:!0,className:"w-full bg-slate-100/80 dark:bg-slate-900/80 backdrop-blur-sm border-2 border-transparent focus:border-blue-500/50 dark:focus:border-blue-400/50 rounded-xl py-4 px-6 text-sm focus:ring-4 ring-blue-500/10 dark:ring-blue-400/10 transition-all text-right text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-inner",placeholder:"Username",value:n,onChange:b=>i(b.target.value)})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-600 dark:text-slate-400 mr-2 flex items-center gap-2",children:[r.jsx(NR,{size:15,className:"text-blue-600 dark:text-blue-400"}),"  "]}),r.jsx("div",{className:"relative group",children:r.jsx("input",{type:"password",required:!0,className:"w-full bg-slate-100/80 dark:bg-slate-900/80 backdrop-blur-sm border-2 border-transparent focus:border-blue-500/50 dark:focus:border-blue-400/50 rounded-xl py-4 px-6 text-sm focus:ring-4 ring-blue-500/10 dark:ring-blue-400/10 transition-all text-right text-slate-900 dark:text-white placeholder:text-slate-400 dark:placeholder:text-slate-500 shadow-inner",placeholder:"",value:o,onChange:b=>d(b.target.value)})})]}),h&&r.jsxs("div",{className:"bg-gradient-to-l from-rose-50 to-red-50 dark:from-rose-900/30 dark:to-red-900/30 text-rose-700 dark:text-rose-400 text-xs font-bold p-4 rounded-xl text-center border border-rose-200/50 dark:border-rose-800/50 shadow-lg",children:[" ",h]}),r.jsxs("div",{className:"flex items-center justify-between px-2",children:[r.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-slate-300 dark:border-slate-600 cursor-pointer"}),r.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:""})]}),r.jsx("button",{type:"button",className:"text-xs font-bold text-blue-600 dark:text-blue-400 hover:underline transition-colors",children:"  "})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-l from-blue-600 to-blue-500 text-white py-4 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-blue-600 transition-all shadow-xl shadow-blue-500/40 dark:shadow-blue-900/40 flex items-center justify-center gap-2.5 disabled:opacity-70 hover:scale-[1.02] active:scale-95 disabled:hover:scale-100",children:t?r.jsx("div",{className:"w-6 h-6 border-4 border-white border-t-transparent rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(_R,{size:22}),"  "]})})]}),r.jsx("div",{className:"mt-10 pt-8 border-t border-gradient-to-r from-transparent via-slate-200 dark:via-slate-700 to-transparent text-center relative z-10",children:r.jsxs("div",{className:"inline-flex items-center gap-2.5 bg-gradient-to-l from-emerald-50 to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 text-emerald-700 dark:text-emerald-400 px-5 py-2 rounded-full text-[11px] font-bold border border-emerald-200/50 dark:border-emerald-800/50 shadow-md",children:[r.jsx(Is,{size:16}),"    "]})})]})})},yae=`
-- ERP Database Schema for Dragon ERP Pro
-- Updated: Full Inventory Tracking (Variants + Movement History)

-- 1. Users & Permissions
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    username VARCHAR(255) UNIQUE NOT NULL,
    phone VARCHAR(50),
    password VARCHAR(255) NOT NULL,
    role ENUM('admin', 'manager', 'representative', 'accountant') DEFAULT 'representative',
    restricted_treasury_id INT DEFAULT NULL,
    restricted_warehouse_id INT DEFAULT NULL,
    avatar VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS user_page_permissions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    page_slug VARCHAR(100) NOT NULL,
    can_access BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    UNIQUE(user_id, page_slug)
);

-- 2. Infrastructure
CREATE TABLE IF NOT EXISTS warehouses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    location TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS treasuries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    current_balance DECIMAL(15, 2) DEFAULT 0.00,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 3. CRM & SRM
CREATE TABLE IF NOT EXISTS customers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    phone1 VARCHAR(20),
    phone2 VARCHAR(20),
    address TEXT,
    governorate VARCHAR(100),
    landmark TEXT,
    total_debit DECIMAL(15, 2) DEFAULT 0,
    total_credit DECIMAL(15, 2) DEFAULT 0,
    is_archived TINYINT(1) DEFAULT 0,
    archived_at DATETIME NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS suppliers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    address TEXT,
    total_debit DECIMAL(15, 2) DEFAULT 0,
    total_credit DECIMAL(15, 2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Sales Offices: used by the Sales module to assign orders to offices
CREATE TABLE IF NOT EXISTS sales_offices (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    phones TEXT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS customer_interactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT NOT NULL,
    interaction_type VARCHAR(50) NOT NULL,
    note TEXT NOT NULL,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX(customer_id),
    INDEX(created_at),
    FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 4. Inventory & Products (Updated with Variants)
CREATE TABLE IF NOT EXISTS products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    barcode VARCHAR(100) UNIQUE,
    color VARCHAR(50),           -- New: Color
    size VARCHAR(50),            -- New: Size
    cost_price DECIMAL(10, 2) DEFAULT 0,
    sale_price DECIMAL(10, 2) DEFAULT 0,
    reorder_level INT DEFAULT 5, -- Alert Quantity
    category VARCHAR(100),
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Stock: Quantity per warehouse for each Product/Variant
CREATE TABLE IF NOT EXISTS stock (
    product_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    quantity INT DEFAULT 0,
    PRIMARY KEY (product_id, warehouse_id),
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id) ON DELETE CASCADE
);

-- Product Movements: Tracking Table ( )
CREATE TABLE IF NOT EXISTS product_movements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    movement_type ENUM('purchase', 'sale', 'return_in', 'return_out', 'transfer_in', 'transfer_out', 'adjustment', 'initial_balance') NOT NULL,
    quantity_change INT NOT NULL, -- (+ for In, - for Out)
    previous_quantity INT NOT NULL, 
    new_quantity INT NOT NULL,      
    reference_id INT, -- Order ID / Transaction ID
    reference_type VARCHAR(50), -- 'order', 'purchase_invoice'
    notes TEXT,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id)
);

CREATE TABLE IF NOT EXISTS inventory_audits (
    id INT AUTO_INCREMENT PRIMARY KEY,
    warehouse_id INT NOT NULL,
    status ENUM('draft','pending','approved','rejected') DEFAULT 'draft',
    notes TEXT,
    rejection_reason TEXT,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    submitted_at DATETIME NULL,
    approved_by INT NULL,
    approved_at DATETIME NULL,
    INDEX (warehouse_id),
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id)
);

CREATE TABLE IF NOT EXISTS inventory_audit_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    audit_id INT NOT NULL,
    product_id INT NOT NULL,
    system_qty INT NOT NULL DEFAULT 0,
    counted_qty INT NOT NULL DEFAULT 0,
    diff_qty INT NOT NULL DEFAULT 0,
    notes TEXT,
    UNIQUE KEY ux_audit_product (audit_id, product_id),
    INDEX (audit_id),
    INDEX (product_id),
    FOREIGN KEY (audit_id) REFERENCES inventory_audits(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- 5. Orders & Sales
CREATE TABLE IF NOT EXISTS orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_number VARCHAR(50) UNIQUE NOT NULL,
    customer_id INT NOT NULL,
    rep_id INT,
    sales_office_id INT NULL,
    status ENUM('pending', 'with_rep', 'delivered', 'returned', 'partial', 'postponed') DEFAULT 'pending',
    total_amount DECIMAL(15, 2) NOT NULL,
    shipping_fees DECIMAL(10, 2) DEFAULT 0,
    discount_type VARCHAR(20),
    discount_value DECIMAL(10, 2) DEFAULT 0,
    discount_amount DECIMAL(10, 2) DEFAULT 0,
    tax_type VARCHAR(20),
    tax_value DECIMAL(10, 2) DEFAULT 0,
    tax_amount DECIMAL(10, 2) DEFAULT 0,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_orders_sales_office_id (sales_office_id),
    FOREIGN KEY (customer_id) REFERENCES customers(id),
    FOREIGN KEY (rep_id) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS order_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    price_per_unit DECIMAL(10, 2) NOT NULL,
    total_price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id)
);

CREATE TABLE IF NOT EXISTS order_status_history (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    status VARCHAR(50) NOT NULL,
    action VARCHAR(50) NOT NULL,
    notes TEXT,
    rep_id INT NULL,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (order_id),
    INDEX (status),
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS order_documents (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    doc_type VARCHAR(50) NOT NULL,
    doc_url TEXT NOT NULL,
    notes TEXT,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (order_id),
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE
);

-- 6. Transactions (Ledger)
CREATE TABLE IF NOT EXISTS transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    type ENUM('sale', 'purchase', 'return_in', 'return_out', 'payment_in', 'payment_out', 'expense', 'transfer') NOT NULL,
    warehouse_id INT,
    treasury_id INT,
    related_to_type ENUM('customer', 'supplier', 'employee', 'none'),
    related_to_id INT,
    amount DECIMAL(15, 2) NOT NULL,
    transaction_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    details TEXT, -- JSON details for invoices
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),
    FOREIGN KEY (treasury_id) REFERENCES treasuries(id)
);

-- 6.1 Finance Chart & Journal
CREATE TABLE IF NOT EXISTS accounts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(30) NOT NULL,
    name VARCHAR(255) NOT NULL,
    type ENUM('asset','liability','equity','income','expense') NOT NULL,
    parent_id INT NULL,
    is_active TINYINT(1) DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(code),
    INDEX(parent_id),
    FOREIGN KEY (parent_id) REFERENCES accounts(id) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS journal_entries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    entry_date DATE NOT NULL,
    memo TEXT,
    source_type VARCHAR(50) NULL,
    source_id INT NULL,
    posted TINYINT(1) DEFAULT 0,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX(source_type, source_id),
    INDEX(entry_date)
);

CREATE TABLE IF NOT EXISTS journal_lines (
    id INT AUTO_INCREMENT PRIMARY KEY,
    entry_id INT NOT NULL,
    account_id INT NOT NULL,
    debit DECIMAL(15, 2) DEFAULT 0,
    credit DECIMAL(15, 2) DEFAULT 0,
    line_memo TEXT,
    FOREIGN KEY (entry_id) REFERENCES journal_entries(id) ON DELETE CASCADE,
    FOREIGN KEY (account_id) REFERENCES accounts(id) ON DELETE RESTRICT
);

-- 7. Settings
CREATE TABLE IF NOT EXISTS settings (
    config_key VARCHAR(100) PRIMARY KEY,
    config_value TEXT
);

-- 8. Representatives Custody
CREATE TABLE IF NOT EXISTS rep_stock_custody (
    id INT AUTO_INCREMENT PRIMARY KEY,
    rep_id INT NOT NULL, 
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (rep_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS rep_cash_custody (
    id INT AUTO_INCREMENT PRIMARY KEY,
    rep_id INT NOT NULL, 
    amount DECIMAL(15, 2) NOT NULL,
    treasury_id INT NOT NULL, 
    notes TEXT,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    settled BOOLEAN DEFAULT FALSE,
    settled_at TIMESTAMP NULL,
    FOREIGN KEY (rep_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (treasury_id) REFERENCES treasuries(id) ON DELETE CASCADE
);

-- 9. Human Resources Management (HRM)
CREATE TABLE IF NOT EXISTS employees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    job_title VARCHAR(255),
    salary DECIMAL(10, 2) NOT NULL DEFAULT 0.00,
    hire_date DATE,
    phone VARCHAR(20),
    status ENUM('active', 'inactive', 'on_leave') DEFAULT 'active',
    attendance_enabled TINYINT(1) DEFAULT 1,
    default_shift_id INT DEFAULT NULL,
    fingerprint_device_id INT DEFAULT NULL,
    fingerprint_user_id VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS employee_transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NOT NULL,
    treasury_id INT,
    amount DECIMAL(10, 2) NOT NULL,
    type ENUM('advance', 'bonus', 'penalty', 'salary') NOT NULL,
    date DATE NOT NULL,
    notes TEXT,
    status ENUM('pending', 'paid', 'deducted') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    FOREIGN KEY (treasury_id) REFERENCES treasuries(id) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS employee_salaries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NOT NULL,
    month VARCHAR(7) NOT NULL, -- e.g., '2024-07'
    base_salary DECIMAL(10, 2) NOT NULL,
    deductions DECIMAL(10, 2) DEFAULT 0.00,
    bonuses DECIMAL(10, 2) DEFAULT 0.00,
    net_salary DECIMAL(10, 2) NOT NULL,
    status ENUM('pending', 'paid') DEFAULT 'pending',
    paid_at TIMESTAMP NULL,
    notes TEXT,
    UNIQUE(employee_id, month),
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE
);

-- 9.1 Attendance (Devices + Shifts + Logs)
CREATE TABLE IF NOT EXISTS attendance_devices (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    vendor ENUM('hikvision', 'zkteco', 'adms', 'other') DEFAULT 'other',
    protocol VARCHAR(50) DEFAULT 'http',
    ip VARCHAR(100),
    port INT DEFAULT 80,
    serial_number VARCHAR(100),
    username VARCHAR(255),
    password VARCHAR(255),
    location VARCHAR(255),
    enabled TINYINT(1) DEFAULT 1,
    last_sync_at DATETIME NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS attendance_device_users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    device_id INT NOT NULL,
    employee_id INT NOT NULL,
    device_user_id VARCHAR(100) NOT NULL,
    driver VARCHAR(50) DEFAULT NULL,
    driver_config TEXT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(device_id, device_user_id),
    UNIQUE(device_id, employee_id),
    FOREIGN KEY (device_id) REFERENCES attendance_devices(id) ON DELETE CASCADE,
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS attendance_shifts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    break_minutes INT DEFAULT 0,
    grace_in_minutes INT DEFAULT 0,
    grace_out_minutes INT DEFAULT 0,
    late_penalty_per_minute DECIMAL(10, 2) DEFAULT 0.00,
    early_leave_penalty_per_minute DECIMAL(10, 2) DEFAULT 0.00,
    absence_penalty_per_day DECIMAL(10, 2) DEFAULT 0.00,
    overtime_rate_per_hour DECIMAL(10, 2) DEFAULT 0.00,
    is_night_shift TINYINT(1) DEFAULT 0,
    weekly_off_days VARCHAR(50) DEFAULT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS attendance_schedules (
    id INT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NOT NULL,
    shift_id INT NOT NULL,
    day_of_week TINYINT NOT NULL,
    valid_from DATE NULL,
    valid_to DATE NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    FOREIGN KEY (shift_id) REFERENCES attendance_shifts(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS attendance_holidays (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    holiday_date DATE NOT NULL,
    is_paid TINYINT(1) DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(holiday_date)
);

CREATE TABLE IF NOT EXISTS attendance_logs (
    id INT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NULL,
    device_id INT NULL,
    device_user_id VARCHAR(100) NULL,
    check_time DATETIME NOT NULL,
    direction ENUM('in', 'out', 'unknown') DEFAULT 'unknown',
    source VARCHAR(50) DEFAULT 'manual',
    raw_payload TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX(employee_id),
    INDEX(device_id),
    INDEX(check_time),
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE SET NULL,
    FOREIGN KEY (device_id) REFERENCES attendance_devices(id) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS attendance_daily_summary (
    id INT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NOT NULL,
    shift_id INT NULL,
    work_date DATE NOT NULL,
    first_in DATETIME NULL,
    last_out DATETIME NULL,
    late_minutes INT DEFAULT 0,
    early_leave_minutes INT DEFAULT 0,
    overtime_minutes INT DEFAULT 0,
    is_absent TINYINT(1) DEFAULT 0,
    status ENUM('present', 'late', 'absent', 'leave', 'holiday') DEFAULT 'present',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL,
    UNIQUE(employee_id, work_date),
    INDEX(work_date),
    FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
    FOREIGN KEY (shift_id) REFERENCES attendance_shifts(id) ON DELETE SET NULL
);

-- 10. Permissions (Per-user, per-module, per-action)
CREATE TABLE IF NOT EXISTS permission_modules (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(191) NOT NULL,
    UNIQUE KEY ux_permission_modules_name (name),
    parent_id INT DEFAULT NULL,
    \`order\` INT DEFAULT 0,
    INDEX(parent_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS attendance_device_workers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    device_id INT NOT NULL,
    worker_id INT NOT NULL,
    device_user_id VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(device_id, device_user_id),
    UNIQUE(device_id, worker_id),
    INDEX(worker_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS attendance_worker_daily_summary (
    id INT AUTO_INCREMENT PRIMARY KEY,
    worker_id INT NOT NULL,
    shift_id INT NULL,
    work_date DATE NOT NULL,
    first_in DATETIME NULL,
    last_out DATETIME NULL,
    late_minutes INT DEFAULT 0,
    early_leave_minutes INT DEFAULT 0,
    overtime_minutes INT DEFAULT 0,
    is_absent TINYINT(1) DEFAULT 0,
    status ENUM('present', 'late', 'absent', 'leave', 'holiday') DEFAULT 'present',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL,
    UNIQUE(worker_id, work_date),
    INDEX(work_date),
    INDEX(worker_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS permission_actions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(191) NOT NULL,
    code VARCHAR(100) NOT NULL,
    UNIQUE(code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS user_permissions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    module_id INT NOT NULL,
    action_id INT NOT NULL,
    allowed TINYINT(1) DEFAULT 0,
    UNIQUE KEY ux_user_module_action (user_id, module_id, action_id),
    INDEX(user_id),
    INDEX(module_id),
    INDEX(action_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE IF NOT EXISTS user_defaults (
    user_id INT PRIMARY KEY,
    default_warehouse_id INT DEFAULT NULL,
    default_treasury_id INT DEFAULT NULL,
    default_sales_office_id INT DEFAULT NULL,
    can_change_warehouse TINYINT(1) DEFAULT 0,
    can_change_treasury TINYINT(1) DEFAULT 0,
    can_change_sales_office TINYINT(1) DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Seed common actions
INSERT IGNORE INTO permission_actions (name, code) VALUES
    ('', 'view'),
    ('', 'add'),
    ('', 'edit'),
    ('', 'delete'),
    ('', 'print'),
    ('', 'export');

-- Seed common modules (use english slugs as keys; UI will translate labels)
INSERT IGNORE INTO permission_modules (name, parent_id, \`order\`) VALUES
    ('users', NULL, 0),
    ('customers', NULL, 0),
    ('suppliers', NULL, 0),
    ('treasuries', NULL, 0),
    ('warehouses', NULL, 0),
    ('sales_offices', NULL, 0),
    ('products', NULL, 0),
    ('orders', NULL, 0),
    ('transactions', NULL, 0),
    ('sales', NULL, 0),
    ('employees', NULL, 0),
    ('stock', NULL, 0),
    ('product_movements', NULL, 0),
    ('reports', NULL, 0),
    ('finance', NULL, 0),
    ('inventory', NULL, 0),
    ('settings', NULL, 0),
    ('permissions', NULL, 0);

-- Grant all actions on all modules to the initial super-admin (user_id = 1)
-- This will create rows for user_id=1; if the admin user is created later with id=1,
-- they will already have permissions. Adjust your setup flow if you create the admin with
-- a different id.
INSERT IGNORE INTO user_permissions (user_id, module_id, action_id, allowed)
SELECT 1 AS user_id, m.id AS module_id, a.id AS action_id, 1 AS allowed
FROM permission_modules m
CROSS JOIN permission_actions a;

-- Give user_id=1 unrestricted treasury/warehouse scope (can change all)
INSERT IGNORE INTO user_defaults (user_id, default_warehouse_id, default_treasury_id, default_sales_office_id, can_change_warehouse, can_change_treasury, can_change_sales_office)
VALUES (1, NULL, NULL, NULL, 1, 1, 1);
-- 11. Factory & Manufacturing

-- Fabrics ()
CREATE TABLE IF NOT EXISTS fabrics (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    code VARCHAR(50) UNIQUE,
    color VARCHAR(50),
    size VARCHAR(50),
    material VARCHAR(100),
    quantity INT DEFAULT 0,
    min_stock INT DEFAULT 0,
    unit VARCHAR(20) DEFAULT '',
    cost_price DECIMAL(10,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Accessories ()
CREATE TABLE IF NOT EXISTS accessories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    code VARCHAR(50) UNIQUE,
    type VARCHAR(50),
    color VARCHAR(50),
    size VARCHAR(50),
    quantity INT DEFAULT 0,
    min_stock INT DEFAULT 0,
    unit VARCHAR(20) DEFAULT '',
    cost_price DECIMAL(10,2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Fabric Stock: Quantity per warehouse for each Fabric
CREATE TABLE IF NOT EXISTS fabric_stock (
    fabric_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    quantity DECIMAL(10,4) DEFAULT 0,
    PRIMARY KEY (fabric_id, warehouse_id),
    FOREIGN KEY (fabric_id) REFERENCES fabrics(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id) ON DELETE CASCADE
);

-- Fabric Movements: Tracking Table ( )
CREATE TABLE IF NOT EXISTS fabric_movements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    fabric_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    movement_type VARCHAR(50) NOT NULL,
    quantity_change DECIMAL(10,4) NOT NULL,
    previous_quantity DECIMAL(10,4) NOT NULL,
    new_quantity DECIMAL(10,4) NOT NULL,
    reference_id INT,
    reference_type VARCHAR(50),
    notes TEXT,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (fabric_id),
    INDEX (warehouse_id),
    INDEX (created_at),
    FOREIGN KEY (fabric_id) REFERENCES fabrics(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- Accessory Stock: Quantity per warehouse for each Accessory
CREATE TABLE IF NOT EXISTS accessory_stock (
    accessory_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    quantity INT DEFAULT 0,
    PRIMARY KEY (accessory_id, warehouse_id),
    FOREIGN KEY (accessory_id) REFERENCES accessories(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id) ON DELETE CASCADE
);

-- Accessory Movements: Tracking Table ( )
CREATE TABLE IF NOT EXISTS accessory_movements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    accessory_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    movement_type VARCHAR(50) NOT NULL,
    quantity_change INT NOT NULL,
    previous_quantity INT NOT NULL,
    new_quantity INT NOT NULL,
    reference_id INT,
    reference_type VARCHAR(50),
    notes TEXT,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (accessory_id),
    INDEX (warehouse_id),
    INDEX (created_at),
    FOREIGN KEY (accessory_id) REFERENCES accessories(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- Colors ()
CREATE TABLE IF NOT EXISTS colors (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    code VARCHAR(50) UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Sizes ()
CREATE TABLE IF NOT EXISTS sizes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    code VARCHAR(50) UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Factory Products ( )
CREATE TABLE IF NOT EXISTS factory_products (
    attendance_enabled TINYINT(1) DEFAULT 0,
    default_shift_id INT DEFAULT NULL,
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    code VARCHAR(50) UNIQUE,
    type ENUM('individual','composite') NOT NULL,
    sale_price DECIMAL(10,2) DEFAULT 0,
    min_stock INT DEFAULT 0,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Factory Stock: Quantity per warehouse for each Factory Product
CREATE TABLE IF NOT EXISTS factory_stock (
    factory_product_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    quantity INT DEFAULT 0,
    PRIMARY KEY (factory_product_id, warehouse_id),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id) ON DELETE CASCADE
);

-- Factory Product Movements: Tracking Table (  )
CREATE TABLE IF NOT EXISTS factory_product_movements (
    id INT AUTO_INCREMENT PRIMARY KEY,
    factory_product_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    movement_type VARCHAR(50) NOT NULL,
    quantity_change INT NOT NULL,
    previous_quantity INT NOT NULL,
    new_quantity INT NOT NULL,
    reference_id INT,
    reference_type VARCHAR(50),
    notes TEXT,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (factory_product_id),
    INDEX (warehouse_id),
    INDEX (created_at),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- Dispatches (Send Factory Products to Sales)
CREATE TABLE IF NOT EXISTS dispatches (
    id INT AUTO_INCREMENT PRIMARY KEY,
    factory_product_id INT NOT NULL,
    warehouse_id INT NOT NULL,
    quantity INT NOT NULL,
    notes TEXT NULL,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
    INDEX (factory_product_id),
    INDEX (warehouse_id),
    INDEX (created_at),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (warehouse_id) REFERENCES warehouses(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- Factory Product Sizes (   )
CREATE TABLE IF NOT EXISTS factory_product_sizes (
    factory_product_id INT NOT NULL,
    size_id INT NOT NULL,
    PRIMARY KEY (factory_product_id, size_id),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (size_id) REFERENCES sizes(id) ON DELETE CASCADE
);

-- Production Stages ( )
CREATE TABLE IF NOT EXISTS production_stages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    order_num INT DEFAULT 1,
    description TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Factory Product Stages (   )
CREATE TABLE IF NOT EXISTS factory_product_stages (
    factory_product_id INT NOT NULL,
    stage_id INT NOT NULL,
    PRIMARY KEY (factory_product_id, stage_id),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (stage_id) REFERENCES production_stages(id) ON DELETE CASCADE
);

-- Accessories used per Stage for a Factory Product
CREATE TABLE IF NOT EXISTS factory_product_stage_accessories (
    factory_product_id INT NOT NULL,
    stage_id INT NOT NULL,
    accessory_id INT NOT NULL,
    quantity INT NOT NULL DEFAULT 1,
    PRIMARY KEY (factory_product_id, stage_id, accessory_id),
    FOREIGN KEY (factory_product_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (stage_id) REFERENCES production_stages(id) ON DELETE CASCADE,
    FOREIGN KEY (accessory_id) REFERENCES accessories(id) ON DELETE CASCADE
);

-- Composite Product Items (  )
CREATE TABLE IF NOT EXISTS composite_product_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    composite_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT DEFAULT 1,
    FOREIGN KEY (composite_id) REFERENCES factory_products(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES factory_products(id) ON DELETE CASCADE
);

-- Workers ()
CREATE TABLE IF NOT EXISTS workers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    job_title VARCHAR(100),
    salary_type ENUM('daily','weekly','monthly','piecework') DEFAULT 'daily',
    salary_amount DECIMAL(10,2) DEFAULT 0.00,
    hire_date DATE,
    phone VARCHAR(20),
    fingerprint_no VARCHAR(50) NULL,
    status ENUM('active','inactive','on_leave') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (fingerprint_no)
);

-- Cutting Orders ( )
CREATE TABLE IF NOT EXISTS cutting_orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    code VARCHAR(50) UNIQUE NOT NULL,
    warehouse_id INT NOT NULL,
    fabric_id INT NOT NULL,
    factory_product_id INT NOT NULL,
    cut_quantity INT NOT NULL,
    consumption_per_piece DECIMAL(10,4) NOT NULL DEFAULT 0,
    total_consumption DECIMAL(10,4) NOT NULL DEFAULT 0,
    available_qty INT NOT NULL DEFAULT 0,
    in_production_qty INT NOT NULL DEFAULT 0,
    ready_qty INT NOT NULL DEFAULT 0,
    created_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX (warehouse_id),
    INDEX (fabric_id),
    INDEX (factory_product_id),
    INDEX (created_at)
);

-- Manufacturing Orders ( )
CREATE TABLE IF NOT EXISTS manufacturing_orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    cutting_order_id INT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    status ENUM('draft','in_progress','completed','cancelled') DEFAULT 'draft',
    notes TEXT,
    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES factory_products(id)
);

-- Manufacturing Order Stages (    )
CREATE TABLE IF NOT EXISTS manufacturing_order_stages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    stage_id INT NOT NULL,
    started_at DATETIME,
    finished_at DATETIME,
    worker_id INT,
    notes TEXT,
    FOREIGN KEY (order_id) REFERENCES manufacturing_orders(id) ON DELETE CASCADE,
    FOREIGN KEY (stage_id) REFERENCES production_stages(id),
    FOREIGN KEY (worker_id) REFERENCES workers(id)
);

-- Factory Receiving (  )
CREATE TABLE IF NOT EXISTS factory_receiving (
    id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT NOT NULL,
    received_by INT,
    received_at DATETIME,
    notes TEXT,
    FOREIGN KEY (order_id) REFERENCES manufacturing_orders(id)
);

-- Worker Salaries ( )
CREATE TABLE IF NOT EXISTS worker_salaries (
    id INT AUTO_INCREMENT PRIMARY KEY,
    worker_id INT NOT NULL,
    period_type ENUM('day','week','month','piecework') NOT NULL,
    period_value VARCHAR(20) NOT NULL,
    base_salary DECIMAL(10,2) NOT NULL,
    deductions DECIMAL(10,2) DEFAULT 0.00,
    bonuses DECIMAL(10,2) DEFAULT 0.00,
    net_salary DECIMAL(10,2) NOT NULL,
    status ENUM('pending','paid') DEFAULT 'pending',
    paid_at TIMESTAMP NULL,
    notes TEXT,
    UNIQUE(worker_id, period_type, period_value),
    FOREIGN KEY (worker_id) REFERENCES workers(id) ON DELETE CASCADE
);

-- Worker Transactions ( )
CREATE TABLE IF NOT EXISTS worker_transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    worker_id INT NOT NULL,
    amount DECIMAL(10,2) NOT NULL,
    type ENUM('advance','bonus','penalty','piecework','salary') NOT NULL,
    date DATE NOT NULL,
    notes TEXT,
    status ENUM('pending','paid','deducted') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (worker_id) REFERENCES workers(id) ON DELETE CASCADE
);

-- Product Tracking (    )
CREATE TABLE IF NOT EXISTS product_tracking (
    id INT AUTO_INCREMENT PRIMARY KEY,
    manufacturing_order_id INT NOT NULL,
    product_id INT NOT NULL,
    stage_id INT NOT NULL,
    worker_id INT,
    size_id INT NULL,
    piece_uid VARCHAR(32) NULL,
    is_paid TINYINT(1) NOT NULL DEFAULT 0,
    piece_rate DECIMAL(10,2) NOT NULL DEFAULT 0.00,
    started_at DATETIME,
    finished_at DATETIME,
    notes TEXT,
    customer_id INT,
    delivered_at DATETIME,
    FOREIGN KEY (manufacturing_order_id) REFERENCES manufacturing_orders(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES factory_products(id),
    FOREIGN KEY (stage_id) REFERENCES production_stages(id),
    FOREIGN KEY (worker_id) REFERENCES workers(id),
    FOREIGN KEY (size_id) REFERENCES sizes(id),
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);

-- Update purchase invoice to support fabrics/accessories
-- (You may need to update purchase logic in backend)

`,jae=({onComplete:e})=>{const[t,a]=g.useState(1),[n,i]=g.useState(!1),[o,d]=g.useState(null),[h,m]=g.useState(null),[u,f]=g.useState(!1),[x,b]=g.useState({dbHost:"localhost",dbPort:"3306",dbUser:"root",dbPass:"",dbName:"Dragon_erp",companyName:"",companyPhone:"",companyAddress:"",companyTerms:"",adminName:"",adminUsername:"",adminPass:""}),v=(S,O,I)=>I===!0||I==="true"?"":(O||"").toLowerCase()==="blocked"?"":(S||"").toLowerCase()==="trial"?"":S?"":" ",N=()=>a(S=>S+1),j=()=>a(S=>S-1),_=S=>{var I;const O=(I=S.target.files)==null?void 0:I[0];if(O){const L=new FileReader;L.onloadend=()=>{d(L.result)},L.readAsDataURL(O)}},k=async()=>{f(!0),m(null);try{const O=await(await fetch(`${G}/test_db.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:x.dbHost,port:x.dbPort,user:x.dbUser,pass:x.dbPass,name:x.dbName})})).json();m(O),T.fire({icon:O.success?"success":"error",title:O.success?"":"",text:O.message})}catch(S){const O=S.message.includes("JSON.parse")?"         PHP.":S.message;m({success:!1,message:O}),T.fire({icon:"error",title:" ",text:O})}finally{f(!1)}},E=async()=>{i(!0);try{const S=await fetch(`${G}/setup.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,companyLogo:o,sql_schema:yae})}),O=await S.json();if(!S.ok||!O.success)throw S.status===409?new Error(O.message||"   "):new Error(O.message||"An unknown error occurred during setup.");localStorage.setItem("Dragon_installed","true"),localStorage.setItem("Dragon_company_name",x.companyName),localStorage.setItem("Dragon_company_logo",o||""),O.activation&&localStorage.setItem("Dragon_activation",JSON.stringify({status:v(O.activation.type,O.activation.account_status,O.activation.is_expired),expiry:O.activation.expiry||" ",account_status:O.activation.account_status||"Active",is_expired:O.activation.is_expired||"false"})),e()}catch(S){T.fire({icon:"error",title:" ",text:S.message})}finally{i(!1)}},C=[{title:"",icon:r.jsx(B_,{})},{title:" ",icon:r.jsx(Av,{})},{title:"",icon:r.jsx(bm,{})},{title:"",icon:r.jsx(_m,{})},{title:"",icon:r.jsx(Is,{})},{title:"",icon:r.jsx(yc,{})}];return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 font-['Cairo']",dir:"rtl",children:r.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-[2.5rem] shadow-2xl shadow-blue-500/10 overflow-hidden flex flex-col md:flex-row",children:[r.jsxs("div",{className:"bg-slate-800 md:w-80 p-8 text-white",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-12",children:[r.jsx("div",{className:"bg-white/10 p-2 rounded-xl backdrop-blur-md",children:r.jsx("img",{src:ia("Dragon.png"),alt:"Dragon Pro Logo",className:"w-8 h-8",onError:S=>{S.target.src=ia("Dragon.png")}})}),r.jsx("h2",{className:"text-xl font-bold",children:" "})]}),r.jsx("div",{className:"space-y-6",children:C.map((S,O)=>r.jsxs("div",{className:`flex items-center gap-4 transition-all duration-300 ${t===O+1?"opacity-100":"opacity-40"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${t>=O+1?"bg-blue-500 text-white border-blue-500":"border-white/30 text-white"}`,children:t>O+1?r.jsx(yc,{size:20}):S.icon}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-[10px] uppercase tracking-wider opacity-60",children:[" ",O+1]}),r.jsx("p",{className:"text-sm font-bold",children:S.title})]})]},O))})]}),r.jsxs("div",{className:"flex-1 p-8 md:p-12 relative overflow-y-auto max-h-screen md:max-h-[700px]",children:[t===1&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[r.jsx("div",{className:"bg-blue-50 w-20 h-20 rounded-3xl flex items-center justify-center mb-6",children:r.jsx(B_,{className:"text-blue-600 w-10 h-10"})}),r.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-4",children:"    "}),r.jsx("p",{className:"text-slate-500 leading-relaxed mb-8",children:"        .             ."}),r.jsxs("button",{onClick:N,className:"group flex items-center gap-3 bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/20",children:["  ",r.jsx(xO,{className:"group-hover:-translate-x-1 transition-transform"})]})]}),t===2&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx(WR,{className:"text-blue-600"}),"   "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  (Host)"}),r.jsx("input",{type:"text",value:x.dbHost,onChange:S=>b({...x,dbHost:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" (Port)"}),r.jsx("input",{type:"text",value:x.dbPort,onChange:S=>b({...x,dbPort:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:x.dbUser,onChange:S=>b({...x,dbUser:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"password",value:x.dbPass,onChange:S=>b({...x,dbPass:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"text",value:x.dbName,onChange:S=>b({...x,dbName:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]})]}),h&&!h.success&&r.jsx("div",{className:"mt-4 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300 p-3 rounded-xl text-sm font-bold text-center",children:h.message}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{type:"button",onClick:k,disabled:u,className:"w-full flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-5 py-3 rounded-2xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition-all disabled:opacity-50",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"  ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Av,{size:16}),"    "]})})})]}),t===3&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx(bm,{className:"text-blue-600"}),"   "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{className:"md:col-span-2 flex justify-center mb-4",children:r.jsxs("label",{className:"relative cursor-pointer group",children:[r.jsx("div",{className:"w-24 h-24 rounded-3xl bg-slate-100 border-2 border-dashed border-slate-300 flex flex-col items-center justify-center overflow-hidden group-hover:border-blue-500 transition-colors",children:o?r.jsx("img",{src:o,className:"w-full h-full object-cover",alt:"Logo"}):r.jsxs(r.Fragment,{children:[r.jsx(wm,{className:"text-slate-400 group-hover:text-blue-500",size:24}),r.jsx("span",{className:"text-[10px] text-slate-400 mt-1",children:" "})]})}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_})]})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  / "}),r.jsx("input",{type:"text",value:x.companyName,onChange:S=>b({...x,companyName:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:x.companyPhone,onChange:S=>b({...x,companyPhone:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:x.companyAddress,onChange:S=>b({...x,companyAddress:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 mr-2 flex items-center gap-2",children:[r.jsx(On,{size:14,className:"text-blue-500"}),"   /  "]}),r.jsx("textarea",{rows:4,value:x.companyTerms,onChange:S=>b({...x,companyTerms:S.target.value}),placeholder:"      ...",className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 resize-none"})]})]})]}),t===4&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx(_m,{className:"text-blue-600"}),"    (Full Access)"]}),r.jsxs("div",{className:"space-y-4 max-w-md",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"text",value:x.adminName,onChange:S=>b({...x,adminName:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"text",value:x.adminUsername,onChange:S=>b({...x,adminUsername:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"password",value:x.adminPass,onChange:S=>b({...x,adminPass:S.target.value}),className:"w-full bg-slate-50 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]})]})]}),t===5&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx(Is,{className:"text-emerald-600"}),"   "]}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border-2 border-dashed border-slate-200 text-center mb-6",children:[r.jsx(Is,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),r.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"       ."}),r.jsx("p",{className:"text-xs text-slate-500",children:"      ."})]})]}),t===6&&r.jsxs("div",{className:"text-center animate-in zoom-in duration-500",children:[r.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-[2rem] flex items-center justify-center mx-auto mb-8",children:r.jsx(mO,{className:"text-blue-600 w-12 h-12 animate-pulse"})}),r.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-4",children:" !"}),n?r.jsxs("div",{className:"w-full max-w-xs mx-auto",children:[r.jsx("div",{className:"h-2 w-full bg-slate-100 rounded-full overflow-hidden mb-2",children:r.jsx("div",{className:"h-full bg-blue-600 animate-progress"})}),r.jsx("p",{className:"text-xs font-bold text-blue-600 animate-pulse",children:"   ..."})]}):r.jsx("button",{onClick:E,className:"bg-blue-600 text-white px-12 py-4 rounded-2xl font-bold hover:bg-blue-700 transition-all shadow-xl shadow-blue-500/30",children:"  "})]}),t>1&&t<6&&r.jsxs("div",{className:"mt-12 flex justify-between items-center pt-8 border-t border-slate-100",children:[r.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-slate-400 font-bold hover:text-slate-900 transition-colors",children:[r.jsx(TL,{size:20})," "]}),r.jsx("button",{onClick:N,disabled:t===2&&!(h&&h.success),className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-bold hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/10 disabled:bg-slate-300 disabled:shadow-none disabled:cursor-not-allowed",children:""})]})]})]})})};let cn=null,Sv=null;async function Nae(){try{const t=JSON.parse(localStorage.getItem("Dragon_user")||"null");if(!t||!t.id)return[];Sv!==null&&Sv!==t.id&&(cn=null);const a=t.id,i=await(await fetch(`${G}/api.php?module=permissions&action=getUserPermissions&user_id=${a}`)).json();if(i&&i.success){Sv=a,cn=i.data||[];try{sessionStorage.setItem("Dragon_user_permissions",JSON.stringify(cn))}catch{}return cn}}catch(t){console.error("Failed to load permissions",t)}const e=sessionStorage.getItem("Dragon_user_permissions");if(e)try{return cn=JSON.parse(e),cn}catch{}return cn=[],cn}function wae(){if(cn)return cn;const e=sessionStorage.getItem("Dragon_user_permissions");if(e)try{return cn=JSON.parse(e),cn}catch{}return[]}function Fi(e,t){const a=wae(),n=(e||"").toString().toLowerCase(),i=(t||"").toString().toLowerCase();if(!a||a.length===0)return!1;const o=a.find(d=>{const h=(d.module_name||d.name||"").toString().toLowerCase(),m=(d.action_code||d.code||"").toString().toLowerCase();return(h===n||String(d.module_id)===n)&&(m===i||String(d.action_id)===i)});return o?!!o.allowed:!1}async function _ae(){cn&&Array.isArray(cn)||await Nae()}const kae=({initialView:e})=>{const[t,a]=g.useState(e==="ledger"?"ledger":"list"),[n,i]=g.useState(""),[o,d]=g.useState(!1),[h,m]=g.useState(!1),[u,f]=g.useState(null),[x,b]=g.useState(null),[v,N]=g.useState([]),[j,_]=g.useState(!1),[k,E]=g.useState(!1),[C,S]=g.useState([]),[O,I]=g.useState("note"),[L,te]=g.useState(""),[H,B]=g.useState(!1),[X,V]=g.useState(""),[le,J]=g.useState(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),[Z,M]=g.useState(new Date().toISOString().split("T")[0]),[P,W]=g.useState(0),[se,ue]=g.useState([]),[D,U]=g.useState(!1),re=".",he=je=>{switch(je){case"pending":return r.jsx("span",{className:"bg-amber-100 text-amber-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"with_rep":return r.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"delivered":return r.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"returned":return r.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:""});default:return r.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded-lg text-[10px] font-bold",children:je})}},[Ne,Y]=g.useState([]),[me,z]=g.useState({name:"",phone1:"",phone2:"",governorate:"",address:"",landmark:""});g.useEffect(()=>{(e==="ledger"||e==="list")&&a(e),(async()=>(await _ae(),await F()))()},[e]),g.useEffect(()=>{F()},[k]);const F=async()=>{try{const lt=await(await fetch(`${G}/api.php?module=customers&action=getAll&include_archived=${k?"1":"0"}`)).json();lt.success?Y(lt.data):console.error("Failed to fetch customers:",lt.message)}catch(je){console.error(je)}},ye=(je=null)=>{je?(f(je),z({name:je.name,phone1:je.phone1,phone2:je.phone2||"",governorate:je.governorate||"",address:je.address||"",landmark:je.landmark||""})):(f(null),z({name:"",phone1:"",phone2:"",governorate:"",address:"",landmark:""})),d(!0)},Ae=async je=>{if(je.preventDefault(),!me.name)return;if(!Fi("customers",u?"edit":"add")){T.fire("","     .","error");return}const lt=`${G}/api.php?module=customers&action=${u?"update":"create"}`,pt=JSON.stringify(u?{...me,id:u.id}:me);try{const tt=await(await fetch(lt,{method:"POST",headers:{"Content-Type":"application/json"},body:pt})).json();if(!tt.success)throw new Error(tt.message);Y(u?Ne.map(ne=>ne.id===u.id?{...ne,...me,balance:ne.balance}:ne):[tt.data,...Ne]),d(!1),T.fire("",` ${u?"":""}  .`,"success")}catch(ae){T.fire("",ae.message,"error")}},be=je=>{const lt=Ne.find(pt=>pt.id===je);if(lt){if(Math.abs(parseFloat(lt.balance||0))>.01){T.fire({icon:"error",title:" ",text:`    "${lt.name}"     .  : ${lt.balance.toLocaleString()} ${re}`,confirmButtonText:""});return}T.fire({title:" ",text:`      "${lt.name}"      .`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async pt=>{if(pt.isConfirmed){if(!Fi("customers","delete")){T.fire("","    .","error");return}try{const tt=await(await fetch(`${G}/api.php?module=customers&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:je})})).json();if(!tt.success)throw new Error(tt.message);Y(Ne.filter(ne=>ne.id!==je)),T.fire(" !","    .","success")}catch(ae){T.fire("",ae.message,"error")}}})}},Me=async je=>{if(!Fi("customers","edit")){T.fire("","     .","error");return}const lt=je.is_archived===1||je.is_archived==="1",pt=lt?"unarchive":"archive";try{const tt=await(await fetch(`${G}/api.php?module=customers&action=${pt}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:je.id})})).json();if(!tt.success)throw new Error(tt.message||"   ");await F(),T.fire("",lt?"   .":"  .","success")}catch(ae){T.fire("",ae.message||"  .","error")}},Oe=async je=>{b(je),m(!0),_(!0),N([]),S([]),te(""),I("note");try{const pt=await(await fetch(`${G}/api.php?module=orders&action=getCustomerOrders&customerId=${je.id}`)).json();pt.success?N(pt.data||[]):(T.fire("","   .","error"),console.error("Failed to fetch customer orders:",pt.message))}catch(lt){T.fire("","    .","error"),console.error("Error fetching customer orders:",lt)}finally{_(!1)}ve(je.id)},ve=async je=>{B(!0);try{const pt=await(await fetch(`${G}/api.php?module=customers&action=getInteractions&customer_id=${je}`)).json();pt.success?S(pt.data||[]):S([])}catch{S([])}finally{B(!1)}},$=async()=>{if(x){if(!L.trim()){T.fire("","   .","warning");return}try{const lt=await(await fetch(`${G}/api.php?module=customers&action=addInteraction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:x.id,interaction_type:O,note:L.trim()})})).json();if(!lt.success)throw new Error(lt.message||"  ");te(""),ve(x.id)}catch(je){T.fire("",je.message||"  .","error")}}},ce=async je=>{try{const pt=await(await fetch(`${G}/api.php?module=customers&action=deleteInteraction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:je})})).json();if(!pt.success)throw new Error(pt.message||"  ");x&&ve(x.id)}catch(lt){T.fire("",lt.message||"  .","error")}},ie=async()=>{if(!X){T.fire("","  .","warning");return}U(!0);try{const je=`${G}/api.php?module=customers&action=getLedger&customer_id=${X}&start_date=${le}&end_date=${Z}`,pt=await(await fetch(je)).json();pt.success?(W(Number(pt.data.opening_balance||0)),ue(pt.data.entries||[])):(W(0),ue([]),T.fire("","      .","info"))}catch{W(0),ue([]),T.fire("","   .","error")}finally{U(!1)}},oe=Ne.filter(je=>je.name.toLowerCase().includes(n.toLowerCase())||je.phone1.includes(n)),$e=Fi("customers","add"),Xe=Fi("customers","edit"),et=Fi("customers","delete"),nt=Fi("customers","view");return r.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("div",{className:"flex gap-1 p-1 rounded-2xl border border-card shadow-sm",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${t==="list"?"bg-accent text-white shadow-md":"hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("ledger"),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all ${t==="ledger"?"bg-accent text-white shadow-md":"hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"  "})]})]}),t==="list"?r.jsxs("div",{className:"bg-dark dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[r.jsx("div",{className:"rounded-3xl shadow-sm border border-card overflow-hidden",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full py-6",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"    ...",className:"w-auto pr-10 pl-4 py-2.5 border-none rounded-2xl text-sm focus:ring-2 ring-blue-500/20 text-right",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},value:n,onChange:je=>i(je.target.value)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>E(!k),className:"px-4 py-2.5 rounded-2xl text-xs font-bold border border-card shadow-sm",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:k?" ":" "}),$e?r.jsxs("button",{onClick:()=>ye(),className:"w-full md:w-auto flex-shrink-0 flex items-center justify-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",style:{minWidth:160},children:[r.jsx(_m,{size:18}),"   "]}):r.jsx("button",{disabled:!0,className:"opacity-60 cursor-not-allowed w-full md:w-auto flex-shrink-0 flex items-center justify-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",style:{minWidth:160},children:" "})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:"  "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:oe.length>0?oe.map(je=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:je.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-medium",children:je.phone1}),r.jsx("td",{className:"px-6 py-4 text-xs text-muted",children:je.address}),r.jsxs("td",{className:`px-6 py-4 font-black ${je.balance>0?"text-emerald-500":je.balance<0?"text-rose-500":""}`,children:[Math.abs(je.balance).toLocaleString()," ",re,r.jsx("span",{className:"text-[10px] mr-1 font-bold opacity-60",children:je.balance>=0?"()":"()"})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>Me(je),className:"p-2 hover:text-slate-700 hover:bg-slate-100 dark:hover:bg-slate-900/30 rounded-xl transition-all",title:je.is_archived?" ":"",children:r.jsx(ZD,{size:16})}),et?r.jsx("button",{onClick:()=>be(je.id),className:"p-2 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-xl transition-all",title:"",children:r.jsx(Gr,{size:16})}):null,Xe?r.jsx("button",{onClick:()=>ye(je),className:"p-2 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:"",children:r.jsx(ma,{size:16})}):null,nt?r.jsx("button",{onClick:()=>Oe(je),className:"p-2 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",title:" ",children:r.jsx(ha,{size:16})}):null]})})]},je.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-muted font-bold",children:"    "})})})]})})]}):r.jsxs("div",{className:"rounded-3xl p-6 border border-card card shadow-sm",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 rounded-2xl",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsx(vL,{className:"w-6 h-6 opacity-50 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black",children:"  "}),r.jsx("p",{className:"text-xs text-muted",children:"   "})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("select",{value:X,onChange:je=>V(je.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),Ne.map(je=>r.jsx("option",{value:je.id,children:je.name},je.id))]}),r.jsx("input",{type:"date",value:le,onChange:je=>J(je.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm"}),r.jsx("input",{type:"date",value:Z,onChange:je=>M(je.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm"}),r.jsx("button",{onClick:ie,className:"px-4 py-2 bg-blue-600 text-white rounded-2xl text-sm font-bold",children:""})]})]}),r.jsxs("div",{className:"mb-4 text-sm",children:[r.jsx("span",{className:"text-muted",children:" :"})," ",r.jsxs("span",{className:"font-black",children:[P.toLocaleString()," ",re]})]}),D?r.jsx("div",{className:"text-center text-muted",children:"   ..."}):se.length===0?r.jsx("div",{className:"text-center text-muted",children:"     ."}):r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:se.map(je=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-xs",children:new Date(je.date).toLocaleString("ar-EG")}),r.jsx("td",{className:"px-4 py-3 text-xs",children:je.description}),r.jsx("td",{className:"px-4 py-3 font-bold text-rose-600",children:Number(je.debit||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 font-bold text-emerald-600",children:Number(je.credit||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 font-black",children:Number(je.balance||0).toLocaleString()})]},je.id))})]})})]}),h&&x&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"text-lg font-black flex items-center gap-2",children:[r.jsx(On,{className:"text-blue-500"}),"  : ",x.name]}),r.jsx("button",{onClick:()=>m(!1),className:"hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 text-right space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-2xl",children:[r.jsx("p",{className:"text-[10px] font-bold uppercase text-muted",children:" "}),r.jsx("p",{className:"font-bold",children:x.phone1})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-2xl",children:[r.jsx("p",{className:"text-[10px] font-bold uppercase text-muted",children:" "}),r.jsxs("p",{className:`font-black ${x.balance>=0?"text-emerald-500":"text-rose-500"}`,children:[x.balance.toLocaleString()," ",re]})]})]}),r.jsxs("div",{className:"pt-4 border-t dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold mb-3",children:" "}),j?r.jsx("div",{className:"text-center p-8",children:"  ..."}):v.length>0?r.jsx("div",{className:"overflow-auto max-h-96",children:r.jsxs("table",{className:"w-full text-sm text-right",children:[r.jsx("thead",{className:"bg-slate-100 dark:bg-slate-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3",children:" "}),r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:v.map(je=>r.jsxs("tr",{children:[r.jsx("td",{className:"p-3 font-mono",children:je.orderNumber}),r.jsx("td",{className:"p-3",children:new Date(je.created_at).toLocaleDateString("ar-EG")}),r.jsxs("td",{className:"p-3 font-bold",children:[Number(je.total).toLocaleString()," ",re]}),r.jsx("td",{className:"p-3",children:he(je.status)}),r.jsx("td",{className:"p-3",children:je.repName||"-"})]},je.id))})]})}):r.jsx("div",{className:"text-center p-8 text-muted",children:"    ."})]}),r.jsxs("div",{className:"pt-4 border-t dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold mb-3",children:" "}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-4",children:[r.jsxs("select",{value:O,onChange:je=>I(je.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-xs",children:[r.jsx("option",{value:"note",children:""}),r.jsx("option",{value:"call",children:""}),r.jsx("option",{value:"visit",children:""}),r.jsx("option",{value:"email",children:""})]}),r.jsx("input",{type:"text",value:L,onChange:je=>te(je.target.value),placeholder:"  ...",className:"flex-1 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-xs"}),r.jsx("button",{onClick:$,className:"px-3 py-2 bg-blue-600 text-white rounded-2xl text-xs font-bold",children:""})]}),H?r.jsx("div",{className:"text-center text-muted",children:"  ..."}):C.length===0?r.jsx("div",{className:"text-center text-muted",children:"   ."}):r.jsx("div",{className:"space-y-2",children:C.map(je=>r.jsxs("div",{className:"p-3 rounded-2xl bg-slate-50 dark:bg-slate-900/50 border dark:border-slate-700 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-xs font-bold",children:[je.interaction_type,"  ",je.created_by_name||""]}),r.jsx("div",{className:"text-[11px] text-muted mt-1",children:je.note})]}),r.jsx("button",{onClick:()=>ce(je.id),className:"text-rose-500 text-xs",children:""})]},je.id))})]})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black",children:u?"  ":"  "}),r.jsx("button",{onClick:()=>d(!1),className:"hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:Ae,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"  / "}),r.jsx("input",{type:"text",required:!0,value:me.name,onChange:je=>z({...me,name:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"  1"}),r.jsx("input",{type:"text",required:!0,value:me.phone1,onChange:je=>z({...me,phone1:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"  2 ()"}),r.jsx("input",{type:"text",value:me.phone2,onChange:je=>z({...me,phone2:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"text",value:me.governorate,onChange:je=>z({...me,governorate:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",value:me.landmark,onChange:je=>z({...me,landmark:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"text",value:me.address,onChange:je=>z({...me,address:je.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("button",{type:"submit",className:"w-full bg-accent text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2 mt-6",children:[r.jsx(yr,{size:18})," ",u?" ":"  "]})]})]})})]})},Tp=e=>{if(typeof window>"u")return e;try{return new URL(e,window.location.href).toString()}catch{return e}},Sae=()=>{const[e,t]=g.useState(""),[a,n]=g.useState(!1),[i,o]=g.useState(!1),[d,h]=g.useState(!1),[m,u]=g.useState(!1),[f,x]=g.useState(!1),[b,v]=g.useState(null),[N,j]=g.useState(null),[_,k]=g.useState(null),[E,C]=g.useState(null),S=".",[O,I]=g.useState([]),[L,te]=g.useState([]),[H,B]=g.useState(0),[X,V]=g.useState(""),[le,J]=g.useState(""),[Z,M]=g.useState([]),[P,W]=g.useState([]),[se,ue]=g.useState([]),[D,U]=g.useState(""),[re,he]=g.useState(""),[Ne,Y]=g.useState(""),[me,z]=g.useState(""),[F,ye]=g.useState(""),[Ae,be]=g.useState(""),[Me,Oe]=g.useState(""),[ve,$]=g.useState(""),[ce,ie]=g.useState([{productId:"",name:"",qty:1,costPrice:"",sellingPrice:""}]),[oe,$e]=g.useState({name:"",phone:"",address:""}),[Xe,et]=g.useState(null),nt=async()=>{try{const Be=await(await fetch(`${G}/api.php?module=suppliers&action=getAll`)).json();Be.success?I(Be.data||[]):console.error("Failed to fetch suppliers:",Be.message)}catch(we){console.error("Error fetching suppliers:",we)}},je=async()=>{try{const[we,Be,gt]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`),fetch(`${G}/api.php?module=warehouses&action=getAll`),fetch(`${G}/api.php?module=products&action=getAll`)]),wt=await we.json(),xt=await Be.json(),St=await gt.json();wt.success&&M(wt.data||[]),xt.success&&W(xt.data||[]),St.success&&ue(St.data||[])}catch(we){console.error("Error fetching lookups:",we)}},lt=async()=>{try{const Be=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults`)).json();Be&&Be.success&&et(Be.data||null)}catch(we){console.error("Error fetching user defaults:",we)}};g.useEffect(()=>{nt(),je(),lt()},[]),g.useEffect(()=>{Xe&&(Xe.default_treasury_id&&!Xe.can_change_treasury&&(Me||Oe(String(Xe.default_treasury_id))),Xe.default_warehouse_id&&!Xe.can_change_warehouse&&(F||ye(String(Xe.default_warehouse_id))))},[Xe,Me,F]);const pt=(we=null)=>{we?(k(we),$e({name:we.name,phone:we.phone,address:we.address})):(k(null),$e({name:"",phone:"",address:""})),n(!0)},ae=we=>{we.preventDefault(),oe.name&&(async()=>{try{if(_){const gt=await(await fetch(`${G}/api.php?module=suppliers&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...oe,id:_.id})})).json();gt.success?(I(wt=>wt.map(xt=>xt.id===_.id?{...xt,...oe}:xt)),n(!1),T.fire(" ","    ","success")):T.fire(" ",gt.message||"  ","error")}else{const gt=await(await fetch(`${G}/api.php?module=suppliers&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)})).json();gt.success?(I(wt=>[...wt,gt.data]),n(!1),T.fire(" ","    ","success")):T.fire(" ",gt.message||"  ","error")}}catch(Be){console.error("Supplier save error:",Be),T.fire("  ","  .    .","error")}})()},tt=we=>we?Array.isArray(we)?we:typeof we=="object"&&Array.isArray(we.items)?we.items:[]:[],ne=async(we,Be,gt)=>{var wt,xt;try{const $t=await(await fetch(`${G}/api.php?module=suppliers&action=getLedger&supplier_id=${we}&start_date=${Be}&end_date=${gt}`)).json();$t.success?(B(Number(((wt=$t.data)==null?void 0:wt.opening_balance)||0)),te(((xt=$t.data)==null?void 0:xt.entries)||[])):console.error("Failed to fetch ledger entries:",$t.message)}catch(St){console.error("Error fetching ledger entries:",St)}},Ee=we=>{const Be=new Date,wt=new Date(Be.getFullYear(),Be.getMonth(),1).toISOString().slice(0,10),xt=Be.toISOString().slice(0,10);C(we),te([]),B(0),V(wt),J(xt),ne(we.id,wt,xt),o(!0)},rt=()=>{if(!E)return;const we=X||new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().slice(0,10),Be=le||new Date().toISOString().slice(0,10);ne(E.id,we,Be)},Je=async()=>{if(!E)return;const we=Number(D||0),Be=Number(re||0);if(!we||!Be){T.fire(" ","    .","warning");return}try{const wt=await(await fetch(`${G}/api.php?module=suppliers&action=recordPayment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({supplier_id:E.id,amount:we,treasury_id:Be,notes:Ne})})).json();wt.success?(T.fire(" ","   .","success"),h(!1),U(""),Y(""),rt(),nt()):T.fire(" ",wt.message||"  .","error")}catch(gt){console.error("Payment error:",gt),T.fire("  ","  .","error")}},st=(we,Be)=>{ie(gt=>gt.map((wt,xt)=>xt===we?{...wt,...Be}:wt))},Ze=()=>{ie(we=>[...we,{productId:"",name:"",qty:1,costPrice:"",sellingPrice:""}])},ct=we=>{ie(Be=>Be.filter((gt,wt)=>wt!==we))},ht=async()=>{const we=Number(me||0),Be=Number(F||0);if(!we||!Be||ce.length===0){T.fire(" ","        .","warning");return}const gt=ce.map(St=>({productId:St.productId?Number(St.productId):0,name:St.name||void 0,qty:Number(St.qty||0),costPrice:Number(St.costPrice||0),sellingPrice:Number(St.sellingPrice||0)})).filter(St=>St.qty>0&&(St.productId||St.name));if(gt.length===0){T.fire(" ","    .","warning");return}const wt=Number(Ae||0),xt=Number(Me||0);try{const $t=await(await fetch(`${G}/api.php?module=receivings&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({supplierId:we,warehouseId:Be,items:gt,paidAmount:wt,treasuryId:xt,notes:ve})})).json();if($t.success){let Rr="";Array.isArray($t.new_barcodes)&&$t.new_barcodes.length>0&&(Rr=`

  :
`+$t.new_barcodes.map(kr=>`${kr.name} (${kr.type}): ${kr.barcode}`).join(`
`)),T.fire(" ","     ."+Rr,"success"),u(!1),z(""),ye(""),be(""),Oe(""),$(""),ie([{productId:"",name:"",qty:1,costPrice:"",sellingPrice:""}]),nt()}else T.fire(" ",$t.message||"   .","error")}catch(St){console.error("Receiving error:",St),T.fire("  ","  .","error")}},Re=()=>{if(!E)return;const we=[[""," "," ","","",""],[X||""," ","-","","",H.toFixed(2)]];L.forEach(St=>{we.push([St.date||"",St.type==="purchase"?" ":St.type==="return_out"?" ":" ",`#${St.id}`,St.debit?St.debit.toFixed(2):"",St.credit?St.credit.toFixed(2):"",St.balance?Number(St.balance).toFixed(2):""])}),we.push(["","","",ft.toFixed(2),jt.toFixed(2),mt.toFixed(2)]);const Be=we.map(St=>St.map($t=>`"${String($t??"").replace(/"/g,'""')}"`).join(",")).join(`
`),gt=new Blob(["\uFEFF"+Be],{type:"text/csv;charset=utf-8;"}),wt=URL.createObjectURL(gt),xt=document.createElement("a");xt.href=wt,xt.download=`supplier_ledger_${E.id}_${X||""}_${le||""}.csv`,xt.click(),URL.revokeObjectURL(wt)},xe=()=>{if(!E)return;const we=[`<tr><td>${X||""}</td><td> </td><td>-</td><td>-</td><td>-</td><td>${H.toLocaleString()}</td></tr>`,...L.map(wt=>`
                        <tr>
                            <td>${wt.date||""}</td>
                            <td>${wt.type==="purchase"?" ":wt.type==="return_out"?" ":" "}</td>
                            <td>#${wt.id}</td>
                            <td style="text-align:right">${wt.debit?Number(wt.debit).toLocaleString():"-"}</td>
                            <td style="text-align:right">${wt.credit?Number(wt.credit).toLocaleString():"-"}</td>
                            <td style="text-align:right">${Number(wt.balance||0).toLocaleString()}</td>
                        </tr>
                    `)].join(""),Be=`<!doctype html><html><head><meta charset="utf-8"><title>  </title>
            <style>
                body{font-family:Arial,Helvetica,sans-serif;direction:rtl;color:#111}
                table{width:100%;border-collapse:collapse;margin-top:12px}
                th,td{border:1px solid #ddd;padding:8px;font-size:12px}
                th{background:#f3f4f6}
            </style>
            </head><body>
            <h3>  : ${E.name}</h3>
            <div>: ${X||""}  ${le||""}</div>
            <table>
                <thead><tr><th></th><th> </th><th> </th><th></th><th></th><th></th></tr></thead>
                <tbody>${we}</tbody>
                <tfoot><tr><td colspan="3"></td><td>${ft.toLocaleString()}</td><td>${jt.toLocaleString()}</td><td>${mt.toLocaleString()}</td></tr></tfoot>
            </table>
            </body></html>`,gt=window.open("","_blank");if(!gt){T.fire(" ","     .","error");return}gt.document.write(Be),gt.document.close(),gt.focus(),setTimeout(()=>{gt.print()},400)},de=we=>{let Be=[];try{if(we.details){const xt=JSON.parse(we.details);Be=tt(xt)}}catch{Be=[]}const gt=(Be||[]).map(xt=>{const St=Number(xt.qty??xt.quantity??xt.qtyOrdered??0),$t=Number(xt.costPrice??xt.cost??xt.cost_price??xt.unitPrice??xt.purchasePrice??xt.price??0),Rr=Number(xt.sellingPrice??xt.selling_price??xt.price??xt.sale_price??$t),kr=Number(St*($t||Rr||0));return{...xt,qty:St,costPrice:$t,price:Rr,total:kr}}),wt={id:we.id,number:we.reference_id||`INV-${we.id}`,date:we.transaction_date||we.date,supplierName:E==null?void 0:E.name,items:gt,total:Number(we.amount||we.total||0),supplierPhone:(E==null?void 0:E.phone)||"",supplierAddress:(E==null?void 0:E.address)||"",type:we.type||"",userName:we.created_by||typeof window<"u"&&(()=>{try{const xt=JSON.parse(localStorage.getItem("Dragon_user")||"null");return xt&&(xt.name||xt.username)?xt.name||xt.username:"-"}catch{return"-"}})()||"-"};v(wt),x(!0)},it=we=>{let Be=[];try{if(we&&Array.isArray(we.items))Be=we.items;else if(we&&we.details){const at=JSON.parse(we.details);Be=tt(at)}}catch{Be=[]}const gt=(Be||[]).map(at=>{const Mt=Number(at.qty??at.quantity??at.qtyOrdered??0),qt=Number(at.costPrice??at.cost??at.cost_price??at.unitPrice??at.purchasePrice??at.price??0),ta=Number(at.sellingPrice??at.selling_price??at.price??at.sale_price??qt),sr=Number(Mt*(qt||ta||0));return{...at,qty:Mt,costPrice:qt,price:ta,total:sr}}),wt=we.reference_id||`INV-${we.id}`,xt=we.transaction_date||we.date||new Date().toLocaleString(),St=(E==null?void 0:E.name)||"",$t=(E==null?void 0:E.phone)||"",Rr=(E==null?void 0:E.address)||"",kr=Number(we.amount||we.total||(we.credit>0?we.credit:we.debit)||0),pe=Tp(ia("Dragon.png")),ut=typeof window<"u"?Tp(localStorage.getItem("Dragon_company_logo")||pe):pe,ee=at=>at?at==="purchase"||at==="sale"?at==="purchase"?" ":" ":at==="return_out"||at==="return_in"?at==="return_out"?" ":"  ":at:"",ke=typeof window<"u"&&localStorage.getItem("Dragon_company_name")||"",Ce=typeof window<"u"&&localStorage.getItem("Dragon_company_address")||"",He=typeof window<"u"&&localStorage.getItem("Dragon_company_phone")||"",Ge=`<!doctype html><html><head><meta charset="utf-8"><title>${wt}</title>
                <style>@media print{@page{size:A4;margin:18mm}} body{font-family:Arial,Helvetica,sans-serif;color:#111;direction:rtl}
                .top-row{display:flex;justify-content:space-between;align-items:center}
                .company-name{font-size:22px;font-weight:800}
                .small{font-size:12px;color:#374151}
                table{width:100%;border-collapse:collapse;margin-top:12px}
                th,td{border:1px solid #ddd;padding:8px}
                </style>
                </head><body>
                <div class="top-row">
                    <div style="text-align:left">
                        <img src="${ut}" alt="logo" style="max-width:120px;" onerror="this.src='${pe}'" />
                    </div>
                    <div style="text-align:right">
                        <div class="company-name">${ke||""}</div>
                        <div class="small">${Ce||""}</div>
                        <div class="small">${He||""}</div>
                    </div>
                </div>

                <div style="text-align:center;margin-top:12px;font-size:18px;font-weight:800">${ee(we.type)}</div>

                <div style="display:flex;justify-content:space-between;margin-top:12px">
                    <div style="text-align:left">
                        <div><strong>:</strong> ${we.created_by||(typeof window<"u"?(()=>{try{const at=JSON.parse(localStorage.getItem("Dragon_user")||"null");return at&&(at.name||at.username)?at.name||at.username:"-"}catch{return"-"}})():"-")}</div>
                        <div><strong>:</strong> ${xt}</div>
                        <div><strong> :</strong> ${wt}</div>
                    </div>
                    <div style="text-align:right">
                        <div><strong>:</strong> ${St}</div>
                        <div><strong>:</strong> ${$t}</div>
                        <div><strong>:</strong> ${Rr}</div>
                    </div>
                </div>

                <table>
                    <thead><tr style="background:#f3f4f6"><th style="width:40px"></th><th></th><th style="width:90px"></th><th style="width:90px"></th><th style="width:80px"></th><th style="width:120px"> </th><th style="width:120px"></th></tr></thead>
                    <tbody>${gt.length===0?'<tr><td colspan="7" style="text-align:center;color:#6b7280;padding:12px">   </td></tr>':gt.map((at,Mt)=>`<tr><td style="text-align:center">${Mt+1}</td><td>${at.name||""}</td><td style="text-align:center">${at.color||""}</td><td style="text-align:center">${at.size||""}</td><td style="text-align:center">${at.qty||""}</td><td style="text-align:right">${Number(at.costPrice||at.price||0).toLocaleString()}</td><td style="text-align:right">${Number(at.total||(at.qty||0)*(at.costPrice||at.price||0)).toLocaleString()}</td></tr>`).join("")}
                    </tbody>
                    <tfoot><tr><td colspan="6" style="text-align:left;font-weight:800"></td><td style="text-align:right;font-weight:800">${kr.toLocaleString()}</td></tr></tfoot>
                </table>

                <div style="margin-top:30px;display:flex;justify-content:space-between;font-size:12px">
                    <div style="text-align:left"> : ____________________</div>
                    <div style="text-align:right"> : ____________________</div>
                </div>

                </body></html>`,ot=window.open("","_blank");if(!ot){T.fire(" ","     .","error");return}ot.document.write(Ge),ot.document.close(),ot.focus(),setTimeout(()=>{ot.print()},500)};g.useEffect(()=>{if(N){const we=setTimeout(()=>{window.print(),j(null)},500);return()=>clearTimeout(we)}},[N]);const ft=L.reduce((we,Be)=>we+(Be.debit||0),0),jt=L.reduce((we,Be)=>we+(Be.credit||0),0),mt=H+jt-ft;return r.jsxs("div",{className:"space-y-6 dir-rtl",children:[N&&r.jsx("div",{id:"print-invoice-container",children:r.jsx(Eae,{invoice:N})}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(Ji,{className:"text-blue-600"}),"  "]}),r.jsx("p",{className:"text-sm text-muted font-medium",children:"    "})]}),r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[r.jsxs("div",{className:"relative flex-1 md:w-64",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"  ...",value:e,onChange:we=>t(we.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 dark:bg-slate-900 border-none rounded-xl text-sm"})]}),r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-emerald-600 text-white px-4 py-2.5 rounded-xl text-sm font-black hover:bg-emerald-700 transition-all",children:[r.jsx(Or,{size:18}),"  "]}),r.jsxs("button",{onClick:()=>pt(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2.5 rounded-xl text-sm font-black hover:bg-blue-700 transition-all",children:[r.jsx(Or,{size:18}),"  "]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.length===0?r.jsxs("div",{className:"col-span-full text-center py-20 rounded-3xl border border-dashed card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)",borderColor:"var(--border)"},children:[r.jsx(Ji,{className:"w-16 h-16 mx-auto text-slate-200 mb-4"}),r.jsx("p",{className:"text-muted font-bold",children:"   .    ."})]}):O.filter(we=>we.name.includes(e)).map(we=>{var Be;return r.jsxs("div",{className:"p-5 rounded-3xl border border-card shadow-sm hover:shadow-md transition-all group relative card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center text-muted font-black text-lg",children:we.name.charAt(0)}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Ee(we),className:"p-2 text-muted hover:text-blue-600 hover:bg-blue-50 rounded-xl",title:" ",children:r.jsx(ha,{size:18})}),r.jsx("button",{onClick:()=>pt(we),className:"p-2 text-muted hover:text-amber-600 hover:bg-amber-50 rounded-xl",title:"",children:r.jsx(ma,{size:18})})]})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-1",children:we.name}),r.jsxs("div",{className:"space-y-2 text-sm text-muted mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ly,{size:14})," ",we.phone]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jm,{size:14})," ",we.address]})]}),r.jsxs("div",{className:"pt-4 border-t dark:border-slate-700 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold text-muted",children:" "}),r.jsxs("span",{className:`text-lg font-black ${we.balance>0?"text-rose-600":"text-emerald-600"}`,children:[((Be=we.balance)==null?void 0:Be.toLocaleString())||0," ",S]})]})]},we.id)})}),i&&E&&r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in zoom-in",children:r.jsxs("div",{className:"w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card flex flex-col h-[85vh] card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(On,{className:"text-blue-500"}),"   "]}),r.jsx("p",{className:"text-sm text-muted",children:E.name})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"date",value:X,onChange:we=>V(we.target.value),className:"bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm"}),r.jsx("input",{type:"date",value:le,onChange:we=>J(we.target.value),className:"bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm"}),r.jsx("button",{onClick:rt,className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm font-bold",children:""})]}),r.jsx("button",{onClick:Re,className:"bg-slate-700 text-white px-3 py-2 rounded-lg text-sm font-bold",children:" CSV"}),r.jsx("button",{onClick:xe,className:"bg-slate-800 text-white px-3 py-2 rounded-lg text-sm font-bold",children:" / PDF"}),r.jsxs("button",{onClick:()=>h(!0),className:"bg-emerald-600 text-white px-3 py-2 rounded-lg text-sm font-bold flex items-center gap-1",children:[r.jsx(Ap,{size:16})," "]}),r.jsx("button",{onClick:()=>o(!1),className:"bg-white p-2 rounded-full shadow-sm hover:bg-rose-50 hover:text-rose-500 transition-all",children:r.jsx(It,{size:20})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("table",{className:"w-full text-right text-sm border-collapse",children:[r.jsx("thead",{className:"bg-slate-100 dark:bg-slate-900/50 text-slate-600 dark:text-slate-400 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:""}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:" "}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:" "}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center bg-rose-50/50 text-rose-700",children:" ()"}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center bg-emerald-50/50 text-emerald-700",children:" ()"}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center",children:""}),r.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center",children:""})]})}),r.jsxs("tbody",{className:"text-slate-700 dark:text-slate-300 divide-y dark:divide-slate-700",children:[r.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/30",children:[r.jsx("td",{className:"p-3 font-mono text-xs",children:X}),r.jsx("td",{className:"p-3",children:" "}),r.jsx("td",{className:"p-3 font-mono text-sm",children:"-"}),r.jsx("td",{className:"p-3 text-center font-bold text-rose-600",children:"-"}),r.jsx("td",{className:"p-3 text-center font-bold text-emerald-600",children:"-"}),r.jsx("td",{className:"p-3 text-center font-bold",children:H.toLocaleString()}),r.jsx("td",{className:"p-3"})]}),L.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center py-10 text-muted",children:"     ."})}):L.map((we,Be)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[r.jsx("td",{className:"p-3 font-mono text-xs",children:we.date}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${we.type==="purchase"?"bg-blue-100 text-blue-700":we.type==="return_out"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:we.type==="purchase"?" ":we.type==="return_out"?" ":" "})}),r.jsxs("td",{className:"p-3 font-mono text-sm",children:["#",we.id]}),r.jsx("td",{className:"p-3 text-center font-bold text-rose-600",children:we.debit>0?we.debit.toLocaleString():"-"}),r.jsx("td",{className:"p-3 text-center font-bold text-emerald-600",children:we.credit>0?we.credit.toLocaleString():"-"}),r.jsx("td",{className:"p-3 text-center font-bold",children:Number(we.balance||0).toLocaleString()}),r.jsx("td",{className:"p-3 text-center",children:(we.type==="purchase"||we.type==="return_out")&&r.jsxs("div",{className:"flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>de(we),className:"p-1.5 bg-slate-100 text-slate-600 rounded-lg hover:bg-blue-100 hover:text-blue-600",title:" ",children:r.jsx(ha,{size:14})}),r.jsx("button",{onClick:()=>it(we),className:"p-1.5 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200",title:"",children:r.jsx(fn,{size:14})})]})})]},Be))]}),r.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-900 border-t-2 border-slate-200 dark:border-slate-600 sticky bottom-0 z-10",children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:3,className:"p-4 font-black text-left",children:""}),r.jsx("td",{className:"p-4 text-center font-black text-rose-600",children:ft.toLocaleString()}),r.jsx("td",{className:"p-4 text-center font-black text-emerald-600",children:jt.toLocaleString()}),r.jsx("td",{className:"p-4 text-center font-black",children:mt.toLocaleString()}),r.jsx("td",{})]})})]})}),r.jsxs("div",{className:"p-6 bg-slate-800 text-white flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-muted",children:" "}),r.jsxs("p",{className:`text-2xl font-black ${mt>0?"text-red-400":"text-emerald-400"}`,children:[mt.toLocaleString()," ",S," ",mt>0?"()":"()"]})]}),r.jsxs("button",{onClick:xe,className:"flex items-center gap-2 bg-white text-slate-900 px-6 py-3 rounded-xl font-bold hover:bg-slate-200 transition-all",children:[r.jsx(fn,{size:18}),"  "]})]})]})}),f&&b&&r.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black text-slate-800",children:" "}),r.jsxs("p",{className:"text-sm text-slate-500",children:[": ",b.number]})]}),r.jsx("button",{onClick:()=>x(!1),className:"text-slate-400 hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between mb-4 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",b.supplierName]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",b.date]})]}),r.jsxs("table",{className:"w-full text-right text-sm border",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-2 border",children:""}),r.jsx("th",{className:"p-2 border",children:""}),r.jsx("th",{className:"p-2 border",children:""}),r.jsx("th",{className:"p-2 border",children:""})]})}),r.jsx("tbody",{children:b.items.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-4 text-center text-slate-400",children:"  ..."})}):b.items.map((we,Be)=>r.jsxs("tr",{children:[r.jsx("td",{className:"p-2 border",children:we.name}),r.jsx("td",{className:"p-2 border",children:we.qty}),r.jsx("td",{className:"p-2 border",children:we.price}),r.jsx("td",{className:"p-2 border",children:we.total})]},Be))})]}),r.jsx("div",{className:"mt-4 text-left",children:r.jsxs("p",{className:"text-lg font-black",children:[": ",b.total.toLocaleString()," ",S]})})]}),r.jsx("div",{className:"p-4 bg-slate-50 flex justify-end",children:r.jsxs("button",{onClick:()=>{x(!1),it(b)},className:"bg-slate-900 text-white px-6 py-2 rounded-xl flex items-center gap-2",children:[r.jsx(fn,{size:16})," "]})})]})}),a&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:_?"  ":"  "}),r.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ae,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  / "}),r.jsx("input",{type:"text",required:!0,value:oe.name,onChange:we=>$e({...oe,name:we.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:oe.phone,onChange:we=>$e({...oe,phone:we.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" / "}),r.jsx("input",{type:"text",value:oe.address,onChange:we=>$e({...oe,address:we.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",_?" ":" "]})]})]})}),d&&E&&r.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{type:"number",min:"0",value:D,onChange:we=>U(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:re,onChange:we=>he(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),Z.map(we=>r.jsx("option",{value:we.id,children:we.name},we.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{type:"text",value:Ne,onChange:we=>Y(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsx("button",{onClick:Je,className:"w-full bg-emerald-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-emerald-500/30 hover:bg-emerald-700 transition-all",children:" "})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 z-[85] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:me,onChange:we=>z(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),O.map(we=>r.jsx("option",{value:we.id,children:we.name},we.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:F,onChange:we=>ye(we.target.value),disabled:Xe&&Xe.default_warehouse_id&&!Xe.can_change_warehouse,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),(Xe&&Xe.default_warehouse_id&&!Xe.can_change_warehouse?P.filter(we=>Number(we.id)===Number(Xe.default_warehouse_id)):P).map(we=>r.jsx("option",{value:we.id,children:we.name},we.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{type:"number",min:"0",value:Ae,onChange:we=>be(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:Me,onChange:we=>Oe(we.target.value),disabled:Xe&&Xe.default_treasury_id&&!Xe.can_change_treasury,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),(Xe&&Xe.default_treasury_id&&!Xe.can_change_treasury?Z.filter(we=>Number(we.id)===Number(Xe.default_treasury_id)):Z).map(we=>r.jsx("option",{value:we.id,children:we.name},we.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{type:"text",value:ve,onChange:we=>$(we.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]})]}),r.jsx("div",{className:"border rounded-2xl overflow-hidden",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-100",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:""}),r.jsx("th",{className:"p-3",children:" "}),r.jsx("th",{className:"p-3",children:" "}),r.jsx("th",{className:"p-3"})]})}),r.jsx("tbody",{children:ce.map((we,Be)=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"p-3",children:r.jsxs("select",{value:we.productId,onChange:gt=>{const wt=gt.target.value,xt=se.find(St=>String(St.id)===String(wt));st(Be,{productId:wt,name:(xt==null?void 0:xt.name)||""})},className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs",children:[r.jsx("option",{value:"",children:""}),se.map(gt=>r.jsx("option",{value:gt.id,children:gt.name},gt.id))]})}),r.jsx("td",{className:"p-3",children:r.jsx("input",{type:"text",value:we.name,onChange:gt=>st(Be,{name:gt.target.value}),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs",placeholder:" "})}),r.jsx("td",{className:"p-3",children:r.jsx("input",{type:"number",min:"1",value:we.qty,onChange:gt=>st(Be,{qty:gt.target.value}),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs"})}),r.jsx("td",{className:"p-3",children:r.jsx("input",{type:"number",min:"0",value:we.costPrice,onChange:gt=>st(Be,{costPrice:gt.target.value}),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs"})}),r.jsx("td",{className:"p-3",children:r.jsx("input",{type:"number",min:"0",value:we.sellingPrice,onChange:gt=>st(Be,{sellingPrice:gt.target.value}),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-2 text-xs"})}),r.jsx("td",{className:"p-3 text-center",children:ce.length>1&&r.jsx("button",{onClick:()=>ct(Be),className:"text-rose-500 hover:text-rose-700 text-xs",children:""})})]},Be))})]})}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:Ze,className:"text-blue-600 font-bold",children:"+  "}),r.jsx("button",{onClick:ht,className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-bold",children:" "})]})]})]})})]})},Eae=({invoice:e})=>{const t=typeof window<"u"?localStorage.getItem("Dragon_company_logo"):null,a=Tp(ia("Dragon.png")),n={name:(typeof window<"u"?localStorage.getItem("Dragon_company_name"):null)||"  ",phone:(typeof window<"u"?localStorage.getItem("Dragon_company_phone"):null)||"+20 100 000 0000",address:(typeof window<"u"?localStorage.getItem("Dragon_company_address"):null)||":  - ",logo_url:t&&t.length?Tp(t):a},i=o=>o?o==="purchase"||o==="sale"?o==="purchase"?" ":" ":o==="return_out"||o==="return_in"?o==="return_out"?" ":"  ":o:"";return r.jsxs("div",{className:"hidden",children:[r.jsx("style",{children:`
                @media print {
                    body { visibility: hidden; }
                    #print-invoice-container { visibility: visible !important; position: absolute; top: 0; left: 0; width: 100%; }
                    @page { size: A4; margin: 18mm; }
                }
                `}),r.jsxs("div",{id:"print-invoice-container",className:"p-6 bg-white text-black dir-rtl",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("div",{style:{textAlign:"left"},children:r.jsx("img",{src:n.logo_url,alt:"logo",onError:o=>{o.target.src=a},style:{maxWidth:120}})}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:22,fontWeight:800},children:n.name}),r.jsx("div",{style:{fontSize:12,color:"#374151"},children:n.address}),r.jsx("div",{style:{fontSize:12,color:"#374151"},children:n.phone})]})]}),r.jsx("div",{style:{textAlign:"center",marginTop:12,fontSize:18,fontWeight:800},children:i(e.type)}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:12},children:[r.jsxs("div",{style:{textAlign:"left"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",e.userName||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",e.date]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",e.number]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",e.supplierName]}),r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",e.supplierPhone]}),r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",e.supplierAddress]})]})]}),r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:12},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{background:"#f3f4f6"},children:[r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:40},children:""}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8},children:""}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:90},children:""}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:90},children:""}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:80},children:""}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:120},children:" "}),r.jsx("th",{style:{border:"1px solid #ddd",padding:8,width:120},children:""})]})}),r.jsx("tbody",{children:!e.items||e.items.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,style:{padding:12,textAlign:"center",color:"#6b7280"},children:"   "})}):e.items.map((o,d)=>r.jsxs("tr",{children:[r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"center"},children:d+1}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8},children:o.name}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"center"},children:o.color||"-"}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"center"},children:o.size||"-"}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"center"},children:o.qty}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"right"},children:Number(o.costPrice||o.price||0).toLocaleString()}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"right"},children:Number((o.qty||0)*(o.costPrice||o.price||0)).toLocaleString()})]},d))}),r.jsx("tfoot",{children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:6,style:{border:"1px solid #ddd",padding:8,fontWeight:800,textAlign:"left"},children:""}),r.jsx("td",{style:{border:"1px solid #ddd",padding:8,textAlign:"right",fontWeight:800},children:Number(e.total||0).toLocaleString()})]})})]}),r.jsxs("div",{style:{marginTop:30,display:"flex",justifyContent:"space-between",fontSize:12},children:[r.jsx("div",{children:" : ____________________"}),r.jsx("div",{children:" : ____________________"})]})]})]})},Tae=({initialView:e})=>{var Io,_i;const[t,a]=g.useState(e==="receiving"?"receiving":e==="returns"?"returns":"stock"),[n,i]=g.useState(!1),[o,d]=g.useState(null),[h,m]=g.useState(" "),u=".",f=(localStorage.getItem("Dragon_product_source")||"both").toString(),x=f==="suppliers"?"product_new":"fabric_new",[b,v]=g.useState([]),[N,j]=g.useState([]),[_,k]=g.useState([]),[E,C]=g.useState(null),[S,O]=g.useState([]),[I,L]=g.useState([]),[te,H]=g.useState([]),[B,X]=g.useState([]),[V,le]=g.useState({}),[J,Z]=g.useState({}),[M,P]=g.useState({}),[W,se]=g.useState([]),[ue,D]=g.useState(!1),[U,re]=g.useState(null);g.useRef("");const[he,Ne]=g.useState({name:"",location:""}),[Y,me]=g.useState({from:"",to:"",items:[{productId:"",qty:1}]}),[z,F]=g.useState(!1),[ye,Ae]=g.useState([]),[be,Me]=g.useState(!1),[Oe,ve]=g.useState("all"),[$,ce]=g.useState(""),[ie,oe]=g.useState(null),[$e,Xe]=g.useState([]),[et,nt]=g.useState(""),[je,lt]=g.useState(""),[pt,ae]=g.useState(!1),[tt,ne]=g.useState(!1),[Ee,rt]=g.useState(null),[Je,st]=g.useState(null),[Ze,ct]=g.useState({id:null,name:"",barcode:"",color:"",size:"",cost:0,price:0,quantity:0,reorderLevel:5,warehouseId:""}),ht=async()=>{try{const[R,fe]=await Promise.all([fetch(`${G}/api.php?module=warehouses&action=getAll`).then(Q=>Q.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(Q=>Q.json()).catch(()=>({success:!1}))]),Ue=R&&R.success?R.data||[]:[],q=fe&&fe.success&&fe.data||null;if(q&&q.default_warehouse_id&&!q.can_change_warehouse){const Q=Ue.filter(Se=>Number(Se.id)===Number(q.default_warehouse_id));v(Q),Q.length>0&&m(Q[0].name||"")}else v(Ue);if(q&&(C(q),q.default_warehouse_id)){const Q=q.default_warehouse_id;de.warehouseId||it(Se=>({...Se,warehouseId:String(Q)})),Re.warehouseId||xe(Se=>({...Se,warehouseId:String(Q)}))}return{list:Ue,defaults:q}}catch(R){return console.error("Failed to fetch warehouses:",R),{list:[],defaults:null}}},[Re,xe]=g.useState({supplierId:"",warehouseId:"",items:[{id:Date.now(),productId:"",qty:1,costPrice:0,name:""}],receivedAmount:0,treasuryId:""}),[de,it]=g.useState({supplierId:"",warehouseId:"",items:[{id:Date.now(),itemType:(localStorage.getItem("Dragon_product_source")||"both").toString()==="suppliers"?"product_new":"fabric_new",isNew:!0,name:"",color:"",size:"",costPrice:0,sellingPrice:0,qty:1,barcode:"",productId:""}],paidAmount:0,treasuryId:""}),ft=g.useMemo(()=>N.find(R=>R.id===parseInt(de.supplierId))||null,[de.supplierId,N]),jt=g.useMemo(()=>de.items.reduce((R,fe)=>R+Number(fe.costPrice)*Number(fe.qty),0),[de.items]),mt=g.useMemo(()=>N.find(R=>R.id===parseInt(Re.supplierId))||null,[Re.supplierId,N]),we=g.useMemo(()=>Re.items.reduce((R,fe)=>R+Number(fe.costPrice)*Number(fe.qty),0),[Re.items]);g.useEffect(()=>{["stock","receiving","returns","warehouses","transfer","audit"].includes(e||"")&&a(e);const R=async()=>{try{const Q=await(await fetch(`${G}/api.php?module=suppliers&action=getAll`)).json();Q.success&&j(Q.data)}catch(q){console.error("Failed to fetch suppliers:",q)}},fe=async()=>{try{const[q,Q]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then(qe=>qe.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(qe=>qe.json()).catch(()=>({success:!1}))]),Se=q&&q.success?q.data||[]:[],De=Q&&Q.success&&Q.data||null;if(De&&De.default_treasury_id&&!De.can_change_treasury){const qe=Se.filter(Ke=>Number(Ke.id)===Number(De.default_treasury_id));k(qe)}else k(Se);if(De&&De.default_treasury_id){const qe=De.default_treasury_id||null;qe&&!de.treasuryId&&it(Ke=>({...Ke,treasuryId:String(qe)})),qe&&!Re.treasuryId&&xe(Ke=>({...Ke,treasuryId:String(qe)})),C(De)}}catch(q){console.error("Failed to fetch treasuries:",q)}},Ue=async()=>{try{const Q=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults`)).json();if(Q.success&&(C(Q.data||null),Q.data)){const Se=Q.data.default_warehouse_id||null,De=Q.data.default_treasury_id||null;Se&&!de.warehouseId&&it(qe=>({...qe,warehouseId:String(Se)})),Se&&!Re.warehouseId&&xe(qe=>({...qe,warehouseId:String(Se)})),De&&!de.treasuryId&&it(qe=>({...qe,treasuryId:String(De)})),De&&!Re.treasuryId&&xe(qe=>({...qe,treasuryId:String(De)}))}}catch(q){console.error("Failed to fetch user defaults",q)}};ht(),R(),fe(),Ue(),Be(),(async()=>{try{const[q,Q]=await Promise.all([fetch(`${G}/api.php?module=fabrics&action=getAll`).then(Se=>Se.json()).catch(()=>({success:!1})),fetch(`${G}/api.php?module=accessories&action=getAll`).then(Se=>Se.json()).catch(()=>({success:!1}))]);q&&q.success&&L(q.data||[]),Q&&Q.success&&H(Q.data||[])}catch(q){console.error("Failed to fetch fabrics/accessories:",q)}})()},[e]);const Be=async()=>{try{const fe=await(await fetch(`${G}/api.php?module=products&action=getAll`)).json();fe.success&&O(fe.data||[])}catch(R){console.error("Failed to fetch products:",R)}},gt=async()=>{try{if(!h||h===" "){const Q=await fetch(`${G}/api.php?module=stock&action=getAllSummary`).then(De=>De.json()).catch(()=>({success:!1})),Se=(Q&&Q.success?Q.data||[]:[]).map(De=>({id:De.product_id,name:De.name,barcode:De.barcode,color:De.color,size:De.size,cost:Number(De.cost||0),price:Number(De.price||0),stock:Number(De.quantity||0),reorderLevel:Number(De.reorderLevel||0),itemType:"store"}));X(Se);return}const R=b.find(Q=>Q.name===h),fe=R?Number(R.id):0;if(!fe){X([]);return}const Ue=await fetch(`${G}/api.php?module=stock&action=getByWarehouse&warehouse_id=${fe}`).then(Q=>Q.json()).catch(()=>({success:!1})),q=(Ue&&Ue.success?Ue.data||[]:[]).map(Q=>({id:Q.product_id,name:Q.name,barcode:Q.barcode,color:Q.color,size:Q.size,cost:Number(Q.cost||0),price:Number(Q.price||0),stock:Number(Q.quantity||0),reorderLevel:Number(Q.reorderLevel||0),itemType:"store"}));X(q)}catch(R){console.error("Failed to fetch stock rows:",R),X([])}},wt=async R=>{const fe=String(R||"").trim();if(fe&&!V[fe])try{const q=await(await fetch(`${G}/api.php?module=stock&action=getByWarehouse&warehouse_id=${encodeURIComponent(fe)}`)).json();q&&q.success&&le(Q=>({...Q,[fe]:q.data||[]}))}catch(Ue){console.error("Failed to fetch warehouse stock:",Ue)}},xt=async R=>{const fe=String(R||"").trim();if(fe&&!J[fe])try{const q=await(await fetch(`${G}/api.php?module=fabrics&action=getByWarehouse&warehouse_id=${encodeURIComponent(fe)}`)).json();q&&q.success&&Z(Q=>({...Q,[fe]:q.data||[]}))}catch(Ue){console.error("Failed to fetch warehouse fabrics:",Ue)}},St=async R=>{const fe=String(R||"").trim();if(fe&&!M[fe])try{const q=await(await fetch(`${G}/api.php?module=accessories&action=getByWarehouse&warehouse_id=${encodeURIComponent(fe)}`)).json();q&&q.success&&P(Q=>({...Q,[fe]:q.data||[]}))}catch(Ue){console.error("Failed to fetch warehouse accessories:",Ue)}},$t=R=>{const fe=String(R||"").trim();fe&&le(Ue=>{if(!Ue[fe])return Ue;const q={...Ue};return delete q[fe],q})},Rr=R=>{const fe=String(R||"").trim();fe&&Z(Ue=>{if(!Ue[fe])return Ue;const q={...Ue};return delete q[fe],q})},kr=R=>{const fe=String(R||"").trim();fe&&P(Ue=>{if(!Ue[fe])return Ue;const q={...Ue};return delete q[fe],q})},pe=R=>{const fe=String(R||"").trim();return fe&&V[fe]?V[fe]:[]},ut=R=>{const fe=String(R||"").trim();return fe&&J[fe]?J[fe]:[]},ee=R=>{const fe=String(R||"").trim();return fe&&M[fe]?M[fe]:[]},ke=async R=>{const fe=await R.text();if(!fe)return{success:!1,message:`HTTP ${R.status}`};try{return JSON.parse(fe)}catch{return{success:!1,message:fe}}};g.useEffect(()=>{Re.warehouseId&&(wt(String(Re.warehouseId)),xt(String(Re.warehouseId)),St(String(Re.warehouseId)))},[Re.warehouseId]),g.useEffect(()=>{Y.from&&(wt(String(Y.from)),xt(String(Y.from)),St(String(Y.from)))},[Y.from]);const Ce=R=>{const fe=Number((R==null?void 0:R.stock)||0),Ue=String((R==null?void 0:R.barcode)||"").trim();if(!fe||fe<=0){T.fire({icon:"warning",title:"  ",text:"     ."});return}if(!Ue||Ue==="-"){T.fire({icon:"warning",title:"  ",text:"      ."});return}re(R),D(!0)},He=()=>{const R=U;if(!R)return;const fe=Number((R==null?void 0:R.stock)||0),Ue=String((R==null?void 0:R.barcode)||"").trim();if(!fe||fe<=0||!Ue||Ue==="-")return;const q=`${String((R==null?void 0:R.name)||"")} - ${String((R==null?void 0:R.color)||"-")} - ${String((R==null?void 0:R.size)||"-")}`;try{localStorage.setItem("Nexus_barcode_print_prefill_v1",JSON.stringify({items:[{code:Ue,title:q,qty:fe}]}))}catch{}try{window.dispatchEvent(new CustomEvent("nexus:navigate",{detail:{slug:"barcode-print",subSlug:""}}))}catch{}D(!1)};g.useEffect(()=>{Be()},[h,b]),g.useEffect(()=>{gt()},[h,b,S]),g.useEffect(()=>{t==="returns"&&Re.warehouseId&&wt(String(Re.warehouseId))},[t,Re.warehouseId]),g.useEffect(()=>{t==="transfer"&&Y.from&&wt(String(Y.from))},[t,Y.from]);const Ge=(R=null)=>{R?(d(R),Ne({name:R.name,location:R.location})):(d(null),Ne({name:"",location:""})),i(!0)},ot=async R=>{if(R.preventDefault(),!!he.name)try{const fe=o?`${G}/api.php?module=warehouses&action=update`:`${G}/api.php?module=warehouses&action=create`,Ue=JSON.stringify(o?{...he,id:o.id}:he),Q=await(await fetch(fe,{method:"POST",headers:{"Content-Type":"application/json"},body:Ue})).json();Q.success?(await ht(),i(!1),T.fire(" ","    ","success")):T.fire({icon:"error",title:" ",text:Q.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}},at=async R=>{const fe=b.find(Ue=>Ue.id===R);if(fe){if(fe.stockCount>0){T.fire({icon:"error",title:" ",text:`    "${fe.name}"    .      .`,confirmButtonText:""});return}T.fire({title:" ",text:`      "${fe.name}"`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async Ue=>{if(Ue.isConfirmed)try{const Q=await(await fetch(`${G}/api.php?module=warehouses&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:R})})).json();Q.success?(await ht(),T.fire(" !",`   "${fe.name}" .`,"success")):T.fire({icon:"error",title:" ",text:Q.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}})}},Mt=R=>{m(R),a("stock")},qt=(R=null)=>{R?(rt(R),ct({id:R.id,name:R.name,barcode:R.barcode,color:R.color,size:R.size,cost:R.cost,price:R.price,quantity:R.stock,reorderLevel:R.reorderLevel,warehouseId:""})):(rt(null),ct({id:null,name:"",barcode:"",color:"",size:"",cost:0,price:0,quantity:0,reorderLevel:5,warehouseId:b.length>0?b[0].id:""})),ae(!0)},ta=()=>{const R=Math.floor(1e11+Math.random()*9e11).toString();ct(fe=>({...fe,barcode:R}))},sr=async R=>{if(R.preventDefault(),!!Ze.name)try{const fe=Ee?`${G}/api.php?module=products&action=update`:`${G}/api.php?module=products&action=create`,Ue=JSON.stringify(Ee?{...Ze,id:Ee.id}:Ze),Q=await(await fetch(fe,{method:"POST",headers:{"Content-Type":"application/json"},body:Ue})).json();Q.success?(await Be(),ae(!1),T.fire(" ","    ","success")):T.fire({icon:"error",title:" ",text:Q.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}},jr=R=>{if(R.stock>0){T.fire({icon:"error",title:" ",text:`    "${R.name}"    (${R.stock})   .`});return}T.fire({title:" ",text:`      "${R.name} - ${R.color} - ${R.size}" `,icon:"warning",showCancelButton:!0,confirmButtonText:" ",cancelButtonText:""}).then(async fe=>{if(fe.isConfirmed)try{const q=await(await fetch(`${G}/api.php?module=products&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:R.id})})).json();q.success?(await Be(),T.fire(" !",`   "${R.name}" .`,"success")):T.fire({icon:"error",title:" ",text:q.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}})},xr=R=>{st(R),se([]),(async()=>{try{const Ue=await(await fetch(`${G}/api.php?module=product_movements&action=getByProduct&product_id=${R.id}`)).json();if(Ue.success){const q=(Ue.data||[]).map(Q=>({id:Q.id,date:Q.created_at||Q.date||"",type:Q.movement_type,details:Q.notes||Q.reference_type||"",qty:Number(Q.quantity_change||0),balance:Number(Q.new_quantity||0)}));se(q)}}catch(fe){console.error("Failed to fetch product movements",fe)}})(),ne(!0)},Ft=(R,fe,Ue)=>{const q=de.items.map(Q=>{if(Q.id===R){let Se={...Q,[fe]:Ue};return fe==="itemType"&&(Ue.endsWith("_new")?(Se.isNew=!0,Se.productId="",Se.barcode="",Se.name="",Se.color="",Se.size="",Se.costPrice=0,Se.sellingPrice=0,Se.qty=1,Se.barcode=Math.floor(1e11+Math.random()*9e11).toString()):(Se.isNew=!1,Se.name="",Se.costPrice=0,Se.sellingPrice=0,Se.color="",Se.size="",Se.qty=1,Se.barcode="",Se.productId="")),fe==="isNew"&&(Ue===!0?(Se.productId="",Se.barcode=Math.floor(1e11+Math.random()*9e11).toString()):(Se.name="",Se.costPrice=0,Se.sellingPrice=0,Se.barcode="")),Se}return Q});it({...de,items:q})},cr=()=>{it(R=>({...R,items:[...R.items,{id:Date.now(),itemType:x,isNew:!0,name:"",color:"",size:"",costPrice:0,sellingPrice:0,qty:1,barcode:"",productId:""}]}))},br=R=>{it(fe=>({...fe,items:fe.items.filter(Ue=>Ue.id!==R)}))},Ta=(R,fe)=>{const Ue=de.items.find(qe=>qe.id===R),q=String((Ue==null?void 0:Ue.itemType)||"").trim(),Q=parseInt(fe);let Se=null;if(q==="fabric_existing"){const qe=I.find(Ke=>Number(Ke.id)===Q);qe&&(Se={productId:fe,name:qe.name,costPrice:Number(qe.cost_price??qe.costPrice??0),sellingPrice:0,color:qe.color||"",size:qe.size||"",barcode:qe.code||qe.barcode||""})}else if(q==="accessory_existing"){const qe=te.find(Ke=>Number(Ke.id)===Q);qe&&(Se={productId:fe,name:qe.name,costPrice:Number(qe.cost_price??qe.costPrice??0),sellingPrice:0,color:qe.color||"",size:qe.size||"",barcode:qe.code||qe.barcode||""})}else{const qe=S.find(Ke=>Number(Ke.id)===Q);qe&&(Se={productId:fe,name:qe.name,costPrice:Number(qe.cost??0),sellingPrice:Number(qe.price??0),color:qe.color||"",size:qe.size||"",barcode:qe.barcode||""})}if(!Se)return;const De=de.items.map(qe=>qe.id===R?{...qe,...Se,isNew:!1}:qe);it({...de,items:De})},Sr=R=>{R.preventDefault(),(async()=>{try{const fe=await fetch(`${G}/api.php?module=receivings&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(de)}),Ue=await ke(fe);if(Ue.success){if(Ue.purchase_id)try{const Q=await(await fetch(`${G}/api.php?module=transactions&action=getById&id=${Ue.purchase_id}`)).json();if(Q.success&&Q.data){const Se=Q.data;let De=[];try{De=JSON.parse(Se.details||"[]")}catch{De=[]}const qe=(De||[]).map(Ke=>{const bt=Number(Ke.qty??Ke.quantity??Ke.qtyOrdered??0),$r=Number(Ke.costPrice??Ke.cost??Ke.cost_price??Ke.unitPrice??Ke.purchasePrice??Ke.price??0),Dt=Number(Ke.sellingPrice??Ke.selling_price??Ke.price??Ke.sale_price??$r);return{...Ke,qty:bt,costPrice:$r,price:Dt}});zn({id:Se.id,number:Se.reference_id||`INV-${Se.id}`,date:Se.transaction_date||Se.date,items:qe,total:Number(Se.amount||0),supplierName:(ft==null?void 0:ft.name)||"",supplierPhone:(ft==null?void 0:ft.phone)||"",supplierAddress:(ft==null?void 0:ft.address)||"",type:Se.type||"purchase",userName:Se.created_by||"-"}),bn(!0)}}catch(q){console.error("Failed to fetch created transaction",q)}await Be(),$t(String(de.warehouseId||"")),Rr(String(de.warehouseId||"")),kr(String(de.warehouseId||""));try{const Q=await(await fetch(`${G}/api.php?module=suppliers&action=getAll`)).json();Q.success&&j(Q.data||[])}catch(q){console.error("Failed refresh suppliers",q)}try{await ht()}catch(q){console.error("Failed refresh warehouses",q)}it({supplierId:"",warehouseId:"",items:[{id:Date.now(),itemType:x,isNew:!0,name:"",color:"",size:"",costPrice:0,sellingPrice:0,qty:1,barcode:"",productId:""}],paidAmount:0,treasuryId:""}),T.fire(" ","    .","success")}else T.fire("",Ue.message||"  ","error")}catch(fe){console.error("Receive error",fe),T.fire("  ",(fe==null?void 0:fe.message)||"  .     .","error")}})()},[Xt,zn]=g.useState(null),[xn,bn]=g.useState(!1),[Eo,To]=g.useState(!0),Co=(R=!0)=>{if(!Xt)return;const fe=Xt.items||[],Ue=window.open("","_blank");if(!Ue)return;let q=`<!doctype html><html><head><meta charset="utf-8"><title> </title>
    <style>@media print{@page{size:A4;margin:18mm}} body{font-family:Arial,Helvetica,sans-serif;color:#111}</style>
    </head><body>
    <div style="text-align:center;margin-bottom:8px">
      <h2 style="margin:0">  </h2>
      <div style="font-size:12px"> - </div>
    </div>
    <h3>   ${Xt.number||Xt.id}</h3>
    <div>: ${Xt.date}</div>
    <div>: ${Xt.supplierName||""}</div>`;R?q+=`<table style="width:100%;border-collapse:collapse;margin-top:10px" border="1">
      <thead><tr style="background:#f3f4f6"><th></th><th></th><th></th><th></th><th></th><th> </th><th></th></tr></thead>
      <tbody>${fe.map((Q,Se)=>`<tr><td style="text-align:center">${Se+1}</td><td>${Q.name||""}</td><td style="text-align:center">${Q.color||""}</td><td style="text-align:center">${Q.size||""}</td><td style="text-align:center">${Q.qty||""}</td><td style="text-align:right">${Number(Q.costPrice||Q.price||0).toLocaleString()}</td><td style="text-align:right">${Number((Q.qty||0)*(Q.costPrice||Q.price||0)).toLocaleString()}</td></tr>`).join("")}</tbody>
      <tfoot><tr><td colspan="6" style="text-align:left;font-weight:800"></td><td style="text-align:right;font-weight:800">${Number(Xt.total||Xt.amount||0).toLocaleString()}</td></tr></tfoot>
      </table>`:q+=`<div style="margin-top:20px;font-size:18px;font-weight:800;text-align:right">: ${Number(Xt.total||Xt.amount||0).toLocaleString()} ${u}</div>`,q+=`<div style="margin-top:30px;display:flex;justify-content:space-between;font-size:12px"><div> : __________</div><div> : __________</div></div>
    </body></html>`,Ue.document.write(q),Ue.document.close(),Ue.focus(),setTimeout(()=>{Ue.print()},500)},tn=(R,fe,Ue)=>{const q=Re.items.map(Q=>Q.id===R?{...Q,[fe]:Ue}:Q);xe({...Re,items:q})},Bs=()=>{xe(R=>({...R,items:[...R.items,{id:Date.now(),productId:"",qty:1,costPrice:0,name:""}]}))},Us=R=>{xe(fe=>({...fe,items:fe.items.filter(Ue=>Ue.id!==R)}))},gn=(R,fe)=>{const Ue=parseInt(fe),q=Re.items.find(De=>De.id===R),Q=String((q==null?void 0:q.returnType)||"").trim();let Se=null;if(Q==="fabric"){const De=ut(String(Re.warehouseId||"")).find(qe=>Number(qe.id)===Ue||Number(qe.fabric_id)===Ue);De&&(Se={id:De.id??De.fabric_id,name:De.name,color:De.color,size:De.size,cost:Number(De.cost_price??De.costPrice??0),barcode:De.code||De.barcode||""})}else if(Q==="accessory"){const De=ee(String(Re.warehouseId||"")).find(qe=>Number(qe.id)===Ue||Number(qe.accessory_id)===Ue);De&&(Se={id:De.id??De.accessory_id,name:De.name,color:De.color,size:De.size,cost:Number(De.cost_price??De.costPrice??0),barcode:De.code||De.barcode||""})}else{const De=S.find(Ke=>Number(Ke.id)===Ue),qe=pe(String(Re.warehouseId||"")).find(Ke=>Number(Ke.product_id)===Ue);Se=De||(qe?{id:qe.product_id,name:qe.name,color:qe.color,size:qe.size,cost:Number(qe.cost||0)}:null)}if(Se){const De=Re.items.map(qe=>{if(qe.id===R){const Ke=qe.qty||1;return{...qe,productId:fe,name:`${Se.name} (${Se.color||"-"}-${Se.size||"-"})`,costPrice:Number(Se.cost||0),total:Number(Se.cost||0)*Ke}}return qe});xe({...Re,items:De})}},Ra=R=>{R.preventDefault(),(async()=>{try{const fe=await fetch(`${G}/api.php?module=returns&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Re)}),Ue=await ke(fe);if(Ue.success){if(Ue.return_id)try{const Q=await(await fetch(`${G}/api.php?module=transactions&action=getById&id=${Ue.return_id}`)).json();if(Q.success&&Q.data){const Se=Q.data;let De=[];try{De=JSON.parse(Se.details||"[]")}catch{De=[]}const qe=(De||[]).map(Ke=>{const bt=Number(Ke.qty??Ke.quantity??Ke.qtyOrdered??Ke.quantity_returned??0),$r=Number(Ke.costPrice??Ke.cost??Ke.cost_price??Ke.unitPrice??Ke.purchasePrice??Ke.price??0),Dt=Number(Ke.sellingPrice??Ke.selling_price??Ke.price??Ke.sale_price??$r);return{...Ke,qty:bt,costPrice:$r,price:Dt}});zn({id:Se.id,number:Se.reference_id||`INV-${Se.id}`,date:Se.transaction_date||Se.date,items:qe,total:Number(Se.amount||0),supplierName:(mt==null?void 0:mt.name)||"",supplierPhone:(mt==null?void 0:mt.phone)||"",supplierAddress:(mt==null?void 0:mt.address)||"",type:Se.type||"return_out",userName:Se.created_by||"-"}),bn(!0)}}catch(q){console.error("Failed to fetch created return transaction",q)}await Be(),$t(String(Re.warehouseId||"")),Rr(String(Re.warehouseId||"")),kr(String(Re.warehouseId||""));try{const Q=await(await fetch(`${G}/api.php?module=suppliers&action=getAll`)).json();Q.success&&j(Q.data||[])}catch(q){console.error("Failed refresh suppliers",q)}try{await ht()}catch(q){console.error("Failed refresh warehouses",q)}xe({supplierId:"",warehouseId:"",items:[{id:Date.now(),productId:"",qty:1,costPrice:0,name:""}],receivedAmount:0,treasuryId:""}),T.fire(" ","    .","success")}else T.fire("",Ue.message||"  ","error")}catch(fe){console.error("Return error",fe),T.fire("  ",(fe==null?void 0:fe.message)||"  .     .","error")}})()},Ao=R=>{R.preventDefault(),(async()=>{try{const fe=await fetch(`${G}/api.php?module=transfers&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Y)}),Ue=await ke(fe);if(Ue.success){if(Ue.transfer_id)try{const Q=await(await fetch(`${G}/api.php?module=transactions&action=getById&id=${Ue.transfer_id}`)).json();if(Q.success&&Q.data){const Se=Q.data;let De=[];try{De=JSON.parse(Se.details||"[]")}catch{De=[]}const qe=(De||[]).map(Ct=>{const Wt=Number(Ct.qty??Ct.quantity??Ct.qtyOrdered??0),dr=Number(Ct.costPrice??Ct.cost??Ct.cost_price??Ct.unitPrice??Ct.purchasePrice??Ct.price??0),Kt=Number(Ct.sellingPrice??Ct.selling_price??Ct.price??Ct.sale_price??dr);return{...Ct,qty:Wt,costPrice:dr,price:Kt}}),Ke=(Y.items||[]).map(Ct=>{const Wt=Number(Ct.qty??Ct.quantity??Ct.qtyOrdered??0),dr=Number(Ct.costPrice??Ct.cost??Ct.cost_price??Ct.unitPrice??Ct.purchasePrice??Ct.price??0),Kt=Number(Ct.sellingPrice??Ct.selling_price??Ct.price??Ct.sale_price??dr);return{...Ct,qty:Wt,costPrice:dr,price:Kt}}),bt=Ke&&Ke.length?Ke:qe,$r=(b.find(Ct=>String(Ct.id)===Y.from)||{name:Y.from}).name,Dt=(b.find(Ct=>String(Ct.id)===Y.to)||{name:Y.to}).name;zn({id:Se.id,number:Se.reference_id||`INV-${Se.id}`,date:Se.transaction_date||Se.date,items:bt,total:Number(Se.amount||0),supplierName:`: ${$r}  : ${Dt}`,supplierPhone:"",supplierAddress:"",type:"transfer",userName:Se.created_by||"-"}),bn(!0)}}catch(q){console.error("Failed to fetch created transfer transaction",q)}await Be(),$t(String(Y.from||"")),$t(String(Y.to||"")),Rr(String(Y.from||"")),kr(String(Y.from||"")),Rr(String(Y.to||"")),kr(String(Y.to||""));try{await ht()}catch(q){console.error("Failed refresh warehouses",q)}F(!0),setTimeout(()=>F(!1),3e3),me({from:"",to:"",items:[{productId:"",qty:1}]}),T.fire(" ","    .","success")}else T.fire("",Ue.message||"  ","error")}catch(fe){console.error("Transfer error",fe),T.fire("  ",(fe==null?void 0:fe.message)||"  .     .","error")}})()},qs=(R,fe,Ue)=>{const q=[...Y.items];let Q={...q[R],[fe]:Ue};if(fe==="productId"){const Se=parseInt(String(Ue||"0")),De=String((Q==null?void 0:Q.transferType)||"").trim();let qe=null;if(De==="fabric")qe=ut(String(Y.from||"")).find(bt=>Number(bt.id)===Se||Number(bt.fabric_id)===Se)||null;else if(De==="accessory")qe=ee(String(Y.from||"")).find(bt=>Number(bt.id)===Se||Number(bt.accessory_id)===Se)||null;else{const bt=pe(String(Y.from||"")).find(Dt=>Number(Dt.product_id)===Se),$r=S.find(Dt=>Number(Dt.id)===Se);qe=bt||$r||null}qe&&(Q={...Q,name:qe.name,barcode:qe.barcode||qe.code||"",color:qe.color,size:qe.size,costPrice:Number(qe.cost||qe.cost_price||qe.costPrice||0),sellingPrice:Number(qe.price||qe.sellingPrice||0)})}q[R]=Q,me({...Y,items:q})},yi=()=>{me(R=>({...R,items:[...R.items,{productId:"",qty:1}]}))},Oo=R=>{me(fe=>({...fe,items:fe.items.filter((Ue,q)=>q!==R)}))},vn=async()=>{Me(!0);try{const R=new URLSearchParams;Oe&&Oe!=="all"&&R.append("status",Oe),$&&R.append("warehouse_id",$);const fe=R.toString(),q=await(await fetch(`${G}/api.php?module=inventory&action=getAudits${fe?`&${fe}`:""}`)).json();q.success?Ae(q.data||[]):console.error("Failed to fetch audits:",q.message)}catch(R){console.error("Fetch audits error:",R)}finally{Me(!1)}},Fs=async R=>{var fe,Ue;try{const Q=await(await fetch(`${G}/api.php?module=inventory&action=getAudit&id=${R}`)).json();Q.success?(oe(((fe=Q.data)==null?void 0:fe.audit)||null),Xe(((Ue=Q.data)==null?void 0:Ue.items)||[])):T.fire(" ",Q.message||"  .","error")}catch(q){console.error("Fetch audit details error:",q)}},$a=async()=>{var R;if(!et){T.fire(" ","  .","warning");return}try{const Ue=await(await fetch(`${G}/api.php?module=inventory&action=createAudit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({warehouse_id:Number(et),notes:je})})).json();Ue.success&&((R=Ue.data)!=null&&R.id)?(lt(""),await vn(),await Fs(Ue.data.id)):T.fire(" ",Ue.message||"  .","error")}catch(fe){console.error("Create audit error:",fe)}},Hs=(R,fe)=>{Xe(Ue=>Ue.map((q,Q)=>Q===R?{...q,...fe}:q))},Mo=()=>{Xe(R=>[...R,{product_id:"",counted_qty:0,notes:""}])},ji=R=>{Xe(fe=>fe.filter((Ue,q)=>q!==R))},Ka=async()=>{var R;if(ie)try{const fe=$e.filter(Q=>Q.product_id).map(Q=>({product_id:Number(Q.product_id),counted_qty:Number(Q.counted_qty||0),notes:Q.notes||""})),q=await(await fetch(`${G}/api.php?module=inventory&action=saveItems`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audit_id:Number(ie.id),items:fe})})).json();q.success?(Xe(((R=q.data)==null?void 0:R.items)||[]),T.fire(" ","   .","success")):T.fire(" ",q.message||"   .","error")}catch(fe){console.error("Save audit items error:",fe)}},Ni=async()=>{if(ie)try{const fe=await(await fetch(`${G}/api.php?module=inventory&action=submitAudit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Number(ie.id)})})).json();fe.success?(await Fs(ie.id),await vn(),T.fire(" ","   .","success")):T.fire(" ",fe.message||"  .","error")}catch(R){console.error("Submit audit error:",R)}},wi=async()=>{if(ie)try{const fe=await(await fetch(`${G}/api.php?module=inventory&action=approveAudit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Number(ie.id)})})).json();fe.success?(await Fs(ie.id),await vn(),await Be(),T.fire(" ","    .","success")):T.fire(" ",fe.message||"  .","error")}catch(R){console.error("Approve audit error:",R)}},xs=async()=>{if(!ie)return;const R=await T.fire({title:" ",input:"text",inputLabel:" ",inputPlaceholder:" ",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""});if(R.isConfirmed)try{const Ue=await(await fetch(`${G}/api.php?module=inventory&action=rejectAudit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Number(ie.id),reason:R.value||""})})).json();Ue.success?(await Fs(ie.id),await vn(),T.fire(" ","  .","success")):T.fire(" ",Ue.message||"  .","error")}catch(fe){console.error("Reject audit error:",fe)}};return g.useEffect(()=>{t==="audit"&&vn()},[t,Oe,$]),r.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[xn&&Xt&&r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-slate-900/60",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-2xl p-6 card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-lg font-black",children:["  #",Xt.id]}),r.jsxs("div",{children:[r.jsx("button",{onClick:()=>{Co(Eo)},className:"mr-2 px-4 py-2 bg-blue-600 text-white rounded-xl",children:""}),r.jsx("button",{onClick:()=>To(R=>!R),className:"mr-2 px-4 py-2 bg-amber-500 text-white rounded-xl",children:Eo?"  ":" "}),r.jsx("button",{onClick:()=>bn(!1),className:"px-4 py-2 bg-slate-200 rounded-xl",children:""})]})]}),r.jsxs("div",{className:"overflow-auto",children:[r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:""}),r.jsx("th",{children:" "}),r.jsx("th",{children:""})]})}),r.jsx("tbody",{children:(()=>{let R=[];if(Xt.items&&Array.isArray(Xt.items))R=Xt.items;else try{R=JSON.parse(Xt.details||"[]")}catch{R=[]}return R.map((fe,Ue)=>{const q=Number(fe.qty||fe.quantity||0),Q=Number(fe.costPrice??fe.cost??fe.price??0),Se=q*Q;return r.jsxs("tr",{children:[r.jsx("td",{children:fe.name||""}),r.jsx("td",{children:fe.color||""}),r.jsx("td",{children:fe.size||""}),r.jsx("td",{children:q}),r.jsx("td",{children:Q.toLocaleString()}),r.jsx("td",{children:Se.toLocaleString()})]},Ue)})})()})]}),r.jsxs("div",{className:"mt-4 font-bold",children:[": ",(Xt.total||Xt.amount||0).toLocaleString()]})]})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 text-right",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"    "})]}),r.jsxs("div",{className:"flex p-1.5 rounded-2xl border border-card shadow-sm overflow-x-auto max-w-full card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("button",{onClick:()=>a("stock"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="stock"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(au,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("warehouses"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="warehouses"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(jm,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("transfer"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="transfer"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(vc,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("receiving"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="receiving"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(eL,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("returns"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="returns"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(xm,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("audit"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="audit"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(yc,{size:16})," "]})]})]}),t==="stock"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"lg:col-span-4 rounded-3xl border border-card overflow-hidden shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(au,{className:"text-blue-600"}),r.jsx("span",{className:"font-black text-sm text-slate-800 dark:text-slate-100",children:" "})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[r.jsxs("select",{value:h,onChange:R=>m(R.target.value),className:"text-xs rounded-xl px-3 py-2 outline-none card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)",borderColor:"var(--border)"},children:[r.jsx("option",{value:" ",children:" "}),b.map(R=>r.jsx("option",{value:R.name,children:R.name},R.id))]}),r.jsxs("button",{onClick:()=>qt(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:B.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:"   ."})}):B.map(R=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{children:R.name})})}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:R.barcode||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:R.color||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:R.size||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black ${R.stock<=R.reorderLevel?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600"}`,children:R.stock})}),r.jsxs("td",{className:"px-6 py-4 text-xs",children:[R.cost," ",u]}),r.jsxs("td",{className:"px-6 py-4 text-xs font-bold",children:[R.price," ",u]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>Ce(R),className:"p-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 transition-colors",title:"  ",children:r.jsx(Nm,{size:14})}),r.jsx("button",{onClick:()=>xr(R),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:" ",children:r.jsx(ha,{size:14})}),r.jsx("button",{onClick:()=>qt(R),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>jr(R),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},R.id))})]})})]}),ue&&U&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("button",{onClick:()=>D(!1),className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-6 text-right",children:[r.jsx("div",{className:"text-sm font-black text-slate-900 dark:text-white",children:U.name}),r.jsxs("div",{className:"mt-1 text-xs text-muted",children:[": ",U.color||"-","  : ",U.size||"-","  : ",Number(U.stock||0)]}),r.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-2 max-h-[55vh] overflow-auto",children:Array.from({length:Math.max(0,Number(U.stock||0))}).map((R,fe)=>r.jsxs("div",{className:"p-3 rounded-2xl border border-card bg-slate-50 dark:bg-slate-900/30",children:[r.jsxs("div",{className:"text-[11px] text-muted",children:["#",fe+1]}),r.jsx("div",{className:"text-xs font-mono text-slate-800 dark:text-slate-100",children:U.barcode||"-"})]},fe))}),r.jsxs("div",{className:"mt-6 flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:He,className:"px-4 py-2 bg-accent text-white rounded-xl text-xs font-black",children:""}),r.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-slate-200 rounded-xl text-xs font-black",children:""})]})]})]})})]}),t==="audit"&&r.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[r.jsxs("div",{className:"rounded-3xl border border-card p-6 shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(yc,{className:"text-emerald-600"}),r.jsx("h3",{className:"font-black text-sm",children:"  "})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted",children:""}),r.jsxs("select",{value:et,onChange:R=>nt(R.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",children:[r.jsx("option",{value:"",children:" "}),b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted",children:""}),r.jsx("textarea",{value:je,onChange:R=>lt(R.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",rows:3})]}),r.jsx("button",{onClick:$a,className:"w-full bg-emerald-600 text-white py-2.5 rounded-xl text-sm font-black",children:" "})]})]}),r.jsxs("div",{className:"rounded-3xl border border-card p-6 shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-black text-sm",children:" "}),r.jsx("button",{onClick:vn,className:"text-xs text-blue-600",children:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[r.jsxs("select",{value:Oe,onChange:R=>ve(R.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-lg px-2 py-2 text-xs",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"draft",children:""}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"approved",children:""}),r.jsx("option",{value:"rejected",children:""})]}),r.jsxs("select",{value:$,onChange:R=>ce(R.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-lg px-2 py-2 text-xs",children:[r.jsx("option",{value:"",children:" "}),b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),be?r.jsx("div",{className:"text-xs text-muted",children:" ..."}):ye.length===0?r.jsx("div",{className:"text-xs text-muted",children:"   ."}):r.jsx("div",{className:"space-y-2 max-h-[320px] overflow-y-auto",children:ye.map(R=>r.jsxs("button",{onClick:()=>Fs(R.id),className:`w-full text-right p-3 rounded-xl border ${(ie==null?void 0:ie.id)===R.id?"border-blue-500 bg-blue-50/50":"border-slate-100 dark:border-slate-700"}`,children:[r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("span",{className:"font-black",children:["#",R.id]}),r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${R.status==="approved"?"bg-emerald-100 text-emerald-700":R.status==="pending"?"bg-amber-100 text-amber-700":R.status==="rejected"?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-700"}`,children:R.status==="approved"?"":R.status==="pending"?" ":R.status==="rejected"?"":""})]}),r.jsx("div",{className:"text-[11px] text-muted mt-1",children:R.warehouse_name||"-"})]},R.id))})]})]}),r.jsx("div",{className:"xl:col-span-2 space-y-6",children:ie?r.jsxs("div",{className:"rounded-3xl border border-card p-6 shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-black text-sm",children:[" #",ie.id]}),r.jsxs("p",{className:"text-xs text-muted",children:[": ",ie.warehouse_name||"-"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[ie.status==="draft"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Ka,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-xs font-bold",children:" "}),r.jsx("button",{onClick:Ni,className:"bg-amber-600 text-white px-4 py-2 rounded-lg text-xs font-bold",children:" "})]}),ie.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:wi,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg text-xs font-bold",children:""}),r.jsx("button",{onClick:xs,className:"bg-rose-600 text-white px-4 py-2 rounded-lg text-xs font-bold",children:""})]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2 text-center",children:" "}),r.jsx("th",{className:"px-3 py-2 text-center",children:" "}),r.jsx("th",{className:"px-3 py-2 text-center",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),ie.status==="draft"&&r.jsx("th",{className:"px-3 py-2"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:$e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:ie.status==="draft"?6:5,className:"text-center py-8 text-muted",children:"  ."})}):$e.map((R,fe)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-3 py-2",children:ie.status==="draft"?r.jsxs("select",{value:R.product_id||"",onChange:Ue=>{const q=Ue.target.value,Q=S.find(Se=>String(Se.id)===String(q));Hs(fe,{product_id:q,product_name:(Q==null?void 0:Q.name)||""})},className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg px-2 py-1 text-xs",children:[r.jsx("option",{value:"",children:" "}),S.map(Ue=>r.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]}):r.jsx("span",{className:"text-xs font-bold",children:R.product_name||R.name||"-"})}),r.jsx("td",{className:"px-3 py-2 text-center text-xs font-mono",children:Number(R.system_qty??0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2 text-center",children:ie.status==="draft"?r.jsx("input",{type:"number",min:"0",value:R.counted_qty??0,onChange:Ue=>Hs(fe,{counted_qty:Ue.target.value}),className:"w-24 bg-slate-50 dark:bg-slate-900 border-none rounded-lg px-2 py-1 text-xs text-center"}):r.jsx("span",{className:"text-xs font-mono",children:Number(R.counted_qty??0).toLocaleString()})}),r.jsx("td",{className:`px-3 py-2 text-center text-xs font-black ${Number(R.diff_qty||0)===0?"text-emerald-600":Number(R.diff_qty||0)>0?"text-amber-600":"text-rose-600"}`,children:Number(R.diff_qty||0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:ie.status==="draft"?r.jsx("input",{type:"text",value:R.notes||"",onChange:Ue=>Hs(fe,{notes:Ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg px-2 py-1 text-xs"}):r.jsx("span",{className:"text-xs text-muted",children:R.notes||"-"})}),ie.status==="draft"&&r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("button",{onClick:()=>ji(fe),className:"text-rose-500 text-xs",children:""})})]},fe))})]})}),ie.status==="draft"&&r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:Mo,className:"text-sm font-bold text-blue-600",children:"+  "})})]}):r.jsx("div",{className:"rounded-3xl border border-dashed border-card p-10 text-center text-muted card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:"     ."})})]})}),pt&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:Ee?"  ":"  "}),r.jsx("button",{onClick:()=>ae(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:sr,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"text",required:!0,value:Ze.name,onChange:R=>ct({...Ze,name:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:Ze.barcode,onChange:R=>ct({...Ze,barcode:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm font-mono focus:ring-2 ring-blue-500/20 dark:text-white",placeholder:"  "}),r.jsx("button",{type:"button",onClick:ta,className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 p-2 rounded-xl hover:bg-slate-300 transition-colors",title:" ",children:r.jsx(ul,{size:18})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"text",value:Ze.color,onChange:R=>ct({...Ze,color:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"text",value:Ze.size,onChange:R=>ct({...Ze,size:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"  ()"}),r.jsx("input",{type:"number",required:!0,disabled:!!Ee,value:Ze.cost,onChange:R=>ct({...Ze,cost:parseFloat(R.target.value)}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 disabled:opacity-50 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"number",required:!0,value:Ze.price,onChange:R=>ct({...Ze,price:parseFloat(R.target.value)}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"number",required:!0,disabled:!!Ee,value:Ze.quantity,onChange:R=>ct({...Ze,quantity:parseInt(R.target.value)}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 disabled:opacity-50 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"  "}),r.jsx("input",{type:"number",required:!0,value:Ze.reorderLevel,onChange:R=>ct({...Ze,reorderLevel:parseInt(R.target.value)}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white"})]})]}),!Ee&&Ze.quantity>0&&r.jsxs("div",{className:"space-y-1 bg-slate-50 dark:bg-slate-900 p-3 rounded-xl border dark:border-slate-700 animate-in fade-in",children:[r.jsx("label",{className:"text-xs font-bold text-blue-600",children:"   :"}),r.jsx("select",{required:!0,value:Ze.warehouseId,onChange:R=>ct({...Ze,warehouseId:R.target.value}),className:"w-full bg-white dark:bg-slate-800 border-none rounded-xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 dark:text-white",children:b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))})]}),r.jsx("div",{className:"pt-4 border-t dark:border-slate-700",children:r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-2xl font-black shadow-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",Ee?" ":" "]})})]})]})}),tt&&Je&&r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700 h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(io,{className:"text-blue-500"}),"   "]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Je.name," (",Je.color||" "," - ",Je.size||" ",")"]})]}),r.jsx("button",{onClick:()=>ne(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/20 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:W.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-8 text-slate-400",children:"     ."})}):W.map(R=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-500 dark:text-slate-400",children:R.date}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${R.type==="purchase"||R.type==="return_in"||R.type==="initial_balance"?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-rose-600"}`,children:R.type==="purchase"?"":R.type==="sale"?"":R.type==="return_in"?" ":R.type==="initial_balance"?" ":"/"})}),r.jsx("td",{className:"px-4 py-3 text-xs",children:R.details}),r.jsx("td",{className:"px-4 py-3 text-center font-bold dir-ltr",children:R.qty>0?`+${R.qty}`:R.qty}),r.jsx("td",{className:"px-4 py-3 text-center font-black",children:R.balance})]},R.id))})]})})]})}),t==="warehouses"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-800 p-6 rounded-3xl border dark:border-slate-700 shadow-sm",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"    "})]}),r.jsxs("button",{onClick:()=>Ge(),className:"flex items-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[r.jsx(Or,{size:18}),"   "]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(R=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] border dark:border-slate-700 shadow-sm hover:shadow-md transition-all group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 rounded-2xl text-blue-600",children:r.jsx(jm,{size:24})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>at(R.id),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-xl transition-all",title:" ",children:r.jsx(Gr,{size:16})}),r.jsx("button",{onClick:()=>Ge(R),className:"p-2 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:" ",children:r.jsx(ma,{size:16})}),r.jsx("button",{onClick:()=>Mt(R.name),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",title:"  ",children:r.jsx(ha,{size:16})})]})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsx("h4",{className:"font-black text-slate-900 dark:text-white text-lg",children:R.name}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold flex items-center gap-1 justify-end",children:R.location})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t dark:border-slate-700",children:[r.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase mb-2",children:[r.jsx("span",{children:" "}),r.jsx("span",{children:R.capacity})]}),r.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-900 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-1000",style:{width:R.capacity}})})]})]},R.id))})]}),n&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:o?"  ":"  "}),r.jsx("button",{onClick:()=>i(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ot,className:"p-8 space-y-6 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",required:!0,value:he.name,onChange:R=>Ne({...he,name:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:he.location,onChange:R=>Ne({...he,location:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",o?" ":" "]})]})]})}),t==="transfer"&&r.jsx("div",{className:"max-w-3xl mx-auto animate-in slide-in-from-top duration-500",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 md:p-12 rounded-[2.5rem] border border-slate-200 dark:border-slate-700 shadow-sm text-right relative overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-2xl text-indigo-600",children:r.jsx(vc,{size:32})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-black text-slate-900 dark:text-white",children:"   "}),r.jsx("p",{className:"text-sm text-slate-500",children:"      "})]})]}),z?r.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-12 rounded-3xl border border-emerald-100 dark:border-emerald-800/50 text-center animate-in zoom-in",children:[r.jsx(yc,{size:64,className:"text-emerald-500 mx-auto mb-4"}),r.jsx("h4",{className:"text-xl font-black text-emerald-700 dark:text-emerald-400 mb-2",children:"  !"}),r.jsx("p",{className:"text-sm text-emerald-600 opacity-80",children:"      ."})]}):r.jsxs("form",{onSubmit:Ao,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{required:!0,value:Y.from,onChange:R=>me({...Y,from:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-800 dark:text-slate-200 focus:ring-2 ring-indigo-500/20",children:[r.jsx("option",{value:"",children:"  ..."}),b.map(R=>r.jsx("option",{value:String(R.id),children:R.name},R.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{required:!0,value:Y.to,onChange:R=>me({...Y,to:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-800 dark:text-slate-200 focus:ring-2 ring-indigo-500/20",children:[r.jsx("option",{value:"",children:" ..."}),b.filter(R=>String(R.id)!==Y.from).map(R=>r.jsx("option",{value:String(R.id),children:R.name},R.id))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),Y.items.map((R,fe)=>r.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[r.jsx("div",{className:"col-span-4",children:r.jsxs("select",{required:!0,value:R.transferType||"",onChange:Ue=>qs(fe,"transferType",Ue.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm mb-1",children:[r.jsx("option",{value:"",children:" ..."}),f!=="suppliers"&&r.jsx("option",{value:"fabric",children:""}),f!=="suppliers"&&r.jsx("option",{value:"accessory",children:""}),r.jsx("option",{value:"product",children:""})]})}),r.jsx("div",{className:"col-span-4",children:r.jsxs("select",{required:!0,value:R.productId,onChange:Ue=>qs(fe,"productId",Ue.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",children:[r.jsx("option",{value:"",children:" ..."}),(()=>{const Ue=String(R.transferType||"").trim();return Ue==="fabric"?ut(String(Y.from||"")).map(Q=>r.jsxs("option",{value:Q.id??Q.fabric_id,children:[Q.name," (",Q.color||"-","-",Q.size||"-",")  ",Number(Q.quantity||0)]},Q.id??Q.fabric_id)):Ue==="accessory"?ee(String(Y.from||"")).map(Q=>r.jsxs("option",{value:Q.id??Q.accessory_id,children:[Q.name," (",Q.color||"-","-",Q.size||"-",")  ",Number(Q.quantity||0)]},Q.id??Q.accessory_id)):Ue==="product"?pe(String(Y.from||"")).filter(Se=>{const De=String(Se.category||"").trim();return!De||De==="product"}).map(Se=>r.jsxs("option",{value:Se.product_id,children:[Se.name," (",Se.color||"-","-",Se.size||"-",")  ",Number(Se.quantity||0)]},Se.product_id)):null})()]})}),r.jsx("div",{className:"col-span-3",children:r.jsx("input",{type:"number",placeholder:"",min:"1",required:!0,value:R.qty,onChange:Ue=>qs(fe,"qty",String(R.transferType||"").trim()==="fabric"?parseFloat(Ue.target.value):parseInt(Ue.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})}),r.jsx("div",{className:"col-span-1",children:Y.items.length>1&&r.jsx("button",{type:"button",onClick:()=>Oo(fe),className:"text-rose-500 hover:text-rose-700",children:r.jsx(Rb,{size:16})})})]},fe)),r.jsxs("button",{type:"button",onClick:yi,className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[r.jsx(tu,{size:16}),"   "]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-indigo-500/30 hover:bg-indigo-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(vc,{size:18}),"   "]})]})]})}),t==="receiving"&&r.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border border-slate-200 dark:border-slate-700 max-w-5xl mx-auto shadow-sm animate-in zoom-in duration-300",children:r.jsxs("form",{onSubmit:Sr,children:[r.jsxs("h3",{className:"text-xl font-black mb-6 text-slate-900 dark:text-white flex items-center gap-3",children:[r.jsx(eR,{size:24,className:"text-blue-500"}),"    "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:""}),r.jsxs("select",{required:!0,value:de.supplierId,onChange:R=>it({...de,supplierId:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 ring-blue-500/20",children:[r.jsx("option",{value:"",children:" ..."}),N.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsxs("select",{required:!0,value:de.warehouseId,onChange:R=>it({...de,warehouseId:R.target.value}),disabled:E&&E.default_warehouse_id&&!E.can_change_warehouse,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 ring-blue-500/20",children:[r.jsx("option",{value:"",children:" ..."}),b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),r.jsx("div",{className:"overflow-x-auto -mx-4",children:r.jsxs("table",{className:"w-full text-right text-sm min-w-[1000px]",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-3 font-bold w-40",children:" "}),r.jsx("th",{className:"px-2 py-3 font-bold",children:" /"}),r.jsx("th",{className:"px-2 py-3 font-bold",children:""}),r.jsx("th",{className:"px-2 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-2 py-3 font-bold",children:""}),r.jsx("th",{className:"px-2 py-3 font-bold",children:""}),r.jsx("th",{className:"px-2 py-3 font-bold"})]})}),r.jsx("tbody",{className:"text-slate-700 dark:text-slate-300",children:de.items.map(R=>r.jsxs("tr",{className:"border-b dark:border-slate-700",children:[r.jsx("td",{className:"px-2 py-2",children:r.jsxs("select",{value:R.itemType||"fabric_new",onChange:fe=>Ft(R.id,"itemType",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs",children:[f!=="suppliers"&&r.jsx("option",{value:"fabric_new",children:" "}),f!=="suppliers"&&r.jsx("option",{value:"fabric_existing",children:" "}),f!=="suppliers"&&r.jsx("option",{value:"accessory_new",children:" "}),f!=="suppliers"&&r.jsx("option",{value:"accessory_existing",children:" "}),f!=="factory"&&r.jsx("option",{value:"product_new",children:" "}),f!=="factory"&&r.jsx("option",{value:"product_existing",children:" "})]})}),r.jsx("td",{className:"px-2 py-2",children:R.itemType&&R.itemType.endsWith("_new")?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"  ",value:R.name,onChange:fe=>Ft(R.id,"name",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs mb-1"}),r.jsx("input",{type:"text",placeholder:" ",value:R.barcode,readOnly:!0,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs font-mono"})]}):r.jsxs("select",{required:!0,value:R.productId,onChange:fe=>Ta(R.id,fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs",children:[r.jsx("option",{value:"",children:"  ..."}),R.itemType==="fabric_existing"?I.map(fe=>r.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.code||fe.barcode||""]},fe.id)):R.itemType==="accessory_existing"?te.map(fe=>r.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.code||fe.barcode||""]},fe.id)):R.itemType==="product_existing"?S.filter(fe=>{const Ue=String(fe.category||"").trim();return!Ue||Ue==="product"}).map(fe=>r.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.barcode]},fe.id)):S.map(fe=>r.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.barcode]},fe.id))]})}),r.jsx("td",{className:"px-2 py-2",children:R.itemType==="product_new"?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"",value:R.color,onChange:fe=>Ft(R.id,"color",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs mb-1"}),r.jsx("input",{type:"text",placeholder:"",value:R.size,onChange:fe=>Ft(R.id,"size",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})]}):r.jsx("input",{type:"text",placeholder:"-",value:R.color,onChange:fe=>Ft(R.id,"color",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})}),r.jsx("td",{className:"px-2 py-2",children:R.itemType==="product_new"?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:" ",value:R.costPrice,onChange:fe=>Ft(R.id,"costPrice",parseFloat(fe.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs mb-1"}),r.jsx("input",{type:"number",placeholder:" ",value:R.sellingPrice,onChange:fe=>Ft(R.id,"sellingPrice",parseFloat(fe.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})]}):r.jsx("input",{type:"number",placeholder:"0",value:R.costPrice,onChange:fe=>Ft(R.id,"costPrice",parseFloat(fe.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})}),r.jsx("td",{className:"px-2 py-2",children:r.jsx("input",{type:"number",placeholder:"0",min:"1",value:R.qty,onChange:fe=>Ft(R.id,"qty",parseInt(fe.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})}),r.jsxs("td",{className:"px-2 py-2 font-bold text-xs",children:[(R.costPrice*R.qty).toLocaleString()," ",u]}),r.jsx("td",{className:"px-2 py-2 text-center",children:r.jsx("button",{type:"button",onClick:()=>br(R.id),className:"text-rose-500 hover:text-rose-700",children:r.jsx(Rb,{size:16})})})]},R.id))})]})}),r.jsxs("button",{type:"button",onClick:cr,className:"mt-4 text-sm font-bold text-blue-600 flex items-center gap-2",children:[r.jsx(tu,{size:16}),"    "]}),r.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-700 grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"  "}),r.jsxs("p",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:[((Io=ft==null?void 0:ft.balance)==null?void 0:Io.toLocaleString())||0," ",u]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:" "}),r.jsxs("p",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:[jt.toLocaleString()," ",u]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsx("input",{type:"number",value:de.paidAmount,onChange:R=>it({...de,paidAmount:parseFloat(R.target.value)||0}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsxs("select",{required:de.paidAmount>0,value:de.treasuryId,onChange:R=>it({...de,treasuryId:R.target.value}),disabled:E&&E.default_treasury_id&&!E.can_change_treasury,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",children:[r.jsx("option",{value:"",children:" ..."}),_.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),r.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 active:scale-95 transition-all",children:"   "})]})]})]})}),t==="returns"&&r.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] border border-slate-200 dark:border-slate-700 max-w-5xl mx-auto shadow-sm animate-in zoom-in duration-300",children:r.jsxs("form",{onSubmit:Ra,children:[r.jsxs("h3",{className:"text-xl font-black mb-6 text-slate-900 dark:text-white flex items-center gap-3",children:[r.jsx(xm,{size:24,className:"text-rose-500"}),"    "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:"  "}),r.jsxs("select",{required:!0,value:Re.supplierId,onChange:R=>xe({...Re,supplierId:R.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 ring-rose-500/20",children:[r.jsx("option",{value:"",children:" ..."}),N.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsxs("select",{required:!0,value:Re.warehouseId,onChange:R=>xe({...Re,warehouseId:R.target.value}),disabled:E&&E.default_warehouse_id&&!E.can_change_warehouse,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 ring-rose-500/20",children:[r.jsx("option",{value:"",children:" ..."}),b.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),r.jsx("div",{className:"overflow-x-auto -mx-4",children:r.jsxs("table",{className:"w-full text-right text-sm min-w-[700px]",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-3 font-bold w-2/5",children:" "}),r.jsx("th",{className:"px-2 py-3 font-bold",children:""}),r.jsx("th",{className:"px-2 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-2 py-3 font-bold",children:""}),r.jsx("th",{className:"px-2 py-3 font-bold"})]})}),r.jsx("tbody",{className:"text-slate-700 dark:text-slate-300",children:Re.items.map(R=>r.jsxs("tr",{className:"border-b dark:border-slate-700",children:[r.jsx("td",{className:"px-2 py-2",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("select",{required:!0,value:R.returnType||"",onChange:fe=>tn(R.id,"returnType",fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs mb-1",children:[r.jsx("option",{value:"",children:" ..."}),f!=="suppliers"&&r.jsx("option",{value:"fabric",children:""}),f!=="suppliers"&&r.jsx("option",{value:"accessory",children:""}),r.jsx("option",{value:"product",children:""})]}),r.jsxs("select",{required:!0,value:R.productId,onChange:fe=>gn(R.id,fe.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs",children:[r.jsxs("option",{value:"",children:["  ",R.returnType==="fabric"?"":R.returnType==="accessory"?"":"","..."]}),(()=>{const fe=String(R.returnType||"").trim();return fe==="fabric"?ut(String(Re.warehouseId||"")).map(q=>r.jsxs("option",{value:q.id??q.fabric_id,children:[q.name," (",q.color||"-","-",q.size||"-",")  ",Number(q.quantity||0)]},q.id??q.fabric_id)):fe==="accessory"?ee(String(Re.warehouseId||"")).map(q=>r.jsxs("option",{value:q.id??q.accessory_id,children:[q.name," (",q.color||"-","-",q.size||"-",")  ",Number(q.quantity||0)]},q.id??q.accessory_id)):fe==="product"?pe(String(Re.warehouseId||"")).filter(Q=>{const Se=String(Q.category||"").trim();return!Se||Se==="product"}).map(Q=>r.jsxs("option",{value:Q.product_id,children:[Q.name," (",Q.color||"-","-",Q.size||"-",")  ",Number(Q.quantity||0)]},Q.product_id)):null})()]})]})}),r.jsx("td",{className:"px-2 py-2",children:r.jsx("input",{type:"number",placeholder:"0",min:"1",value:R.qty,onChange:fe=>tn(R.id,"qty",String(R.returnType||"").trim()==="fabric"?parseFloat(fe.target.value):parseInt(fe.target.value)),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg py-2 px-2 text-xs"})}),r.jsxs("td",{className:"px-2 py-2 font-bold text-xs",children:[R.costPrice.toLocaleString()," ",u]}),r.jsxs("td",{className:"px-2 py-2 font-bold text-xs",children:[(R.costPrice*R.qty).toLocaleString()," ",u]}),r.jsx("td",{className:"px-2 py-2 text-center",children:r.jsx("button",{type:"button",onClick:()=>Us(R.id),className:"text-rose-500 hover:text-rose-700",children:r.jsx(Rb,{size:16})})})]},R.id))})]})}),r.jsxs("button",{type:"button",onClick:Bs,className:"mt-4 text-sm font-bold text-rose-600 flex items-center gap-2",children:[r.jsx(tu,{size:16}),"    "]}),r.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-700 grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:"  "}),r.jsxs("p",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:[((_i=mt==null?void 0:mt.balance)==null?void 0:_i.toLocaleString())||0," ",u]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400",children:" "}),r.jsxs("p",{className:"font-bold text-sm text-rose-500 dark:text-rose-400",children:["-",we.toLocaleString()," ",u]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsx("input",{type:"number",value:Re.receivedAmount,onChange:R=>xe({...Re,receivedAmount:parseFloat(R.target.value)||0}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsxs("select",{required:Re.receivedAmount>0,value:Re.treasuryId,onChange:R=>xe({...Re,treasuryId:R.target.value}),disabled:E&&E.default_treasury_id&&!E.can_change_treasury,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",children:[r.jsx("option",{value:"",children:" ..."}),_.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),r.jsx("button",{type:"submit",className:"w-full bg-rose-600 text-white py-3 rounded-2xl font-black shadow-xl shadow-rose-500/30 hover:bg-rose-700 active:scale-95 transition-all",children:"   "})]})]})]})})]})},Cae=e=>(e||"").toLowerCase().trim()==="sales_offices"?"sales_offices":"company",Aae=(e,t)=>{const a=(e||"").toString(),n=a.match(/\d{11}/);return n&&n[0]?n[0]:a.split(/\r?\n|,/).map(o=>o.trim()).filter(Boolean)[0]||t},Cp=e=>{const t=(e||"").toLowerCase().trim();return t==="percent"||t==="percentage"?"percent":t==="amount"||t==="fixed"||t==="value"?"amount":null},Dy=(e,t,a,n,i,o,d)=>{const h=Math.max(0,Number(e||0)),m=Math.max(0,Number(t||0)),u=Math.max(0,Number(n||0)),f=Math.max(0,Number(o||0));let x=0,b=0;if(d==="tax_then_discount"){i==="percent"?b=h*(f/100):i==="amount"&&(b=f);const N=Math.max(0,h+b);a==="percent"?x=N*(u/100):a==="amount"&&(x=u),x>N&&(x=N)}else{a==="percent"?x=h*(u/100):a==="amount"&&(x=u),x>h&&(x=h);const N=Math.max(0,h-x);i==="percent"?b=N*(f/100):i==="amount"&&(b=f)}const v=Math.max(0,h-x+b+m);return{subtotal:h,discountAmount:x,taxAmount:b,total:v}},Oae=({initialView:e})=>{const[t,a]=g.useState(e||"new-order"),[n,i]=g.useState([{id:1,productId:"",color:"",size:"",qty:1,price:0}]),[o,d]=g.useState(!0),[h,m]=g.useState(""),u=".",f=Number(localStorage.getItem("Dragon_tax_rate")||"0"),x=localStorage.getItem("Dragon_sales_calc_order")||"discount_then_tax",[b,v]=g.useState(""),[N,j]=g.useState([]),[_,k]=g.useState(!1),[E,C]=g.useState([]),[S,O]=g.useState(null),[I,L]=g.useState([]),[te,H]=g.useState([]),[B,X]=g.useState(""),[V,le]=g.useState({name:"",phone1:"",phone2:"",governorate:"",address:""}),[J,Z]=g.useState(""),[M,P]=g.useState(""),[W,se]=g.useState(""),[ue,D]=g.useState([]),[U,re]=g.useState(!1),[he,Ne]=g.useState(""),[Y,me]=g.useState("amount"),[z,F]=g.useState(0),[ye,Ae]=g.useState("percent"),[be,Me]=g.useState(isNaN(f)?0:f),[Oe,ve]=g.useState("amount"),[$,ce]=g.useState(0),[ie,oe]=g.useState("percent"),[$e,Xe]=g.useState(isNaN(f)?0:f),et=localStorage.getItem("Dragon_company_name")||" ",nt=localStorage.getItem("Dragon_company_phone")||"01000000000",je=localStorage.getItem("Dragon_company_terms")||"    .",lt=Cae(localStorage.getItem("Dragon_sales_display_method")),[pt,ae]=g.useState([]),[tt,ne]=g.useState(""),[Ee,rt]=g.useState(null),Je=lt==="sales_offices"&&tt&&pt.find(q=>Number(q.id)===Number(tt))||null,st=Ee&&Ee.default_sales_office_id!==void 0?Ee.default_sales_office_id:null,Ze=st===null||typeof st>"u"?null:Number(st),ct=Ee&&typeof Ee.can_change_sales_office<"u"?!!Ee.can_change_sales_office:!0,ht=Ze===-1&&!ct,Re=!ht&&(Je!=null&&Je.name)?Je.name:et,xe=!ht&&Je?Aae(Je.phones,nt):nt,[de,it]=g.useState([]),[ft,jt]=g.useState("all"),[mt,we]=g.useState(!1),[Be,gt]=g.useState(null),[wt,xt]=g.useState([]),[St,$t]=g.useState([]),[Rr,kr]=g.useState("delivery_note"),[pe,ut]=g.useState(""),[ee,ke]=g.useState(""),[Ce,He]=g.useState(""),[Ge,ot]=g.useState(""),[at,Mt]=g.useState(!1),[qt,ta]=g.useState(null),[sr,jr]=g.useState(""),[xr,Ft]=g.useState(""),[cr,br]=g.useState("none"),[Ta,Sr]=g.useState(""),Xt=de.filter(q=>{const Q=ft==="all"||(q.status||"")===ft,Se=q.phone||q.phone1||"",De=q.phone2||"",qe=h.toLowerCase(),Ke=(q.customerName||"").includes(h)||Se.includes(h)||De.includes(h)||(q.orderNumber||"").toLowerCase().includes(qe);return Q&&Ke}),zn=Be?(Be.products||[]).reduce((q,Q)=>q+Number(Q.price||0)*Number(Q.quantity||Q.qty||0),0):0,xn=Be?Number(Be.shipping||Be.shippingCost||0):0,bn=Cp((Be==null?void 0:Be.discountType)||(Be==null?void 0:Be.discount_type)),Eo=Number((Be==null?void 0:Be.discountValue)||(Be==null?void 0:Be.discount_value)||0),To=Cp((Be==null?void 0:Be.taxType)||(Be==null?void 0:Be.tax_type)),Co=Number((Be==null?void 0:Be.taxValue)||(Be==null?void 0:Be.tax_value)||0),tn=Be?Dy(zn,xn,bn,Eo,To,Co,x):null,Bs=Be&&(Number(Be.discountAmount||Be.discount_amount||0)||(tn==null?void 0:tn.discountAmount))||0,Us=Be&&(Number(Be.taxAmount||Be.tax_amount||0)||(tn==null?void 0:tn.taxAmount))||0,gn=Be&&(Number(Be.total||0)||(tn==null?void 0:tn.total))||0,Ra=q=>{switch(q){case"pending":return r.jsx("span",{className:"bg-amber-100 text-amber-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"with_rep":return r.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"in_delivery":return r.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"delivered":return r.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:" "});case"returned":return r.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:""});default:return r.jsx("span",{className:"bg-slate-100 text-slate-700 px-2 py-1 rounded-lg text-[10px] font-bold",children:q})}};g.useEffect(()=>{e&&a(e)},[e]),g.useEffect(()=>{(async()=>{try{const Q=await(await fetch(`${G}/api.php?module=products&action=getAll`)).json();Q.success&&L(Q.data||[])}catch(q){console.error("Failed to load products for import validation",q)}})(),(async()=>{try{const Q=await(await fetch(`${G}/api.php?module=warehouses&action=getAll`)).json();Q.success&&D(Q.data||[])}catch(q){console.error("Failed to load warehouses",q)}})(),(async()=>{try{const Q=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).text();let Se=null;try{Se=JSON.parse(Q)}catch(De){console.error("Failed to parse orders response as JSON:",De,"raw response:",Q),T.fire("","    .    .","error"),it([]);return}Se&&Se.success&&it(Se.data||[])}catch(q){console.error("Failed to load orders",q),T.fire("","    .")}})(),(async()=>{try{const Q=await(await fetch(`${G}/api.php?module=customers&action=getAll`)).json();Q.success&&H(Q.data||[])}catch(q){console.error("Failed to load customers",q)}})()},[]),g.useEffect(()=>{lt==="sales_offices"&&(async()=>{try{try{const Se=JSON.parse(localStorage.getItem("Dragon_user")||"null"),De=Se&&Se.id?Number(Se.id):0;if(De){const Ke=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${De}`)).json();Ke&&Ke.success&&rt(Ke.data||null)}}catch{}const Q=await(await fetch(`${G}/api.php?module=sales_offices&action=getAll`)).json();Q.success?ae(Q.data||[]):ae([])}catch(q){console.error("Failed to load sales offices",q),ae([])}})()},[lt]),g.useEffect(()=>{if(lt!=="sales_offices"||!Ee)return;const q=Ee.default_sales_office_id,Q=q===null||typeof q>"u"?null:Number(q),Se=typeof Ee.can_change_sales_office<"u"?!!Ee.can_change_sales_office:!0;!Se&&Q&&Q>0&&ne(Q),!Se&&Q===-1&&ne("")},[Ee,lt]);const Ao=()=>{i([...n,{id:Date.now(),productId:"",color:"",size:"",qty:1,price:0}])},qs=(q,Q,Se)=>{i(De=>De.map(qe=>{if(qe.id!==q)return qe;if(Q==="productId"){const Ke=Se?Number(Se):"",bt=I.find($r=>Number($r.id)===Number(Ke));return bt?{...qe,productId:bt.id,name:bt.name||"",price:Number(bt.sale_price||bt.price||bt.retail_price||0),color:bt.color||"",size:bt.size||""}:{...qe,productId:Ke}}return{...qe,[Q]:Se}}))},yi=async()=>{if(lt==="sales_offices"&&!ht&&!tt){T.fire("","   .","warning");return}const q=n.map(Wt=>({name:Wt.name||"",productId:Wt.productId||null,quantity:Number(Wt.qty||0),price:Number(Wt.price||0),color:Wt.color||"",size:Wt.size||""})),Q=B&&te.find(Wt=>Wt.id===B)||null,Se=Q?Q.name||"":V.name,De=Q?Q.phone1||"":V.phone1,qe=Q?Q.phone2||"":V.phone2,Ke=Q?Q.governorate||"":V.governorate,bt=Q?Q.address||"":V.address,$r=q.reduce((Wt,dr)=>Wt+Number(dr.quantity||0)*Number(dr.price||0),0),Dt=Dy($r,0,Y,z,ye,be,x),Ct={orderNumber:null,customerName:Se,phone:De,phone2:qe,governorate:Ke,address:bt,notes:J,employee:M,page:W,importedProducts:q,subTotal:Dt.subtotal,total:Dt.total,discount_type:Y,discount_value:z,tax_type:ye,tax_value:be,sales_office_id:lt==="sales_offices"&&!ht&&((Je==null?void 0:Je.id)||tt)||null};try{const dr=await(await fetch(`${G}/api.php?module=orders&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:[Ct]})})).json();if(dr.success){T.fire(" ","   .","success");const zt=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json();zt.success&&it(zt.data||[]),a("manage-orders")}else T.fire(" ",dr.message||"  ","error")}catch(Wt){console.error("Save manual order failed",Wt),T.fire("","     .","error")}},Oo=q=>{i(n.filter(Q=>Q.id!==q))},vn=()=>{E.length===Xt.length&&Xt.length>0?C([]):C(Xt.map(q=>q.id))},Fs=q=>{E.includes(q)?C(Q=>Q.filter(Se=>Se!==q)):C(Q=>[...Q,q])},$a=()=>{if(!b.trim()){T.fire("","    .","error");return}k(!0),setTimeout(()=>{const q=b.split(/:|:|:/).filter(De=>De.trim()!==""),Q=de.reduce((De,qe)=>{const Ke=parseInt(qe.orderNumber,10);return!isNaN(Ke)&&Ke>De?Ke:De},0),Se=q.map((De,qe)=>{const Ke={id:Date.now()+qe},bt=(Kt,zt,Ot=!1)=>{if(Ot){const zr=new RegExp(`${Kt}:\\s*`),Er=zt.match(zr);if(!Er)return"";const Wr=Er.index+Er[0].length,Ca=[":",":",":",":","","",""," "," ",":",":",":",":",":",":",":"];let Aa=zt.length;for(const rs of Ca){if(rs===`${Kt}:`)continue;const Nr=zt.indexOf(rs,Wr);Nr!==-1&&Nr<Aa&&Nr>Wr&&(Aa=Nr)}return zt.substring(Wr,Aa).trim()}else{const zr=new RegExp(`${Kt}:?\\s*([^\\n]*)`),Er=zt.match(zr);return Er?Er[1].trim():""}};Ke.name=De.split(`
`)[0].trim(),Ke.name.length>50&&(Ke.name=bt("",De)),Ke.governorate=bt("",De),Ke.address=bt("",De,!0);const Dt=(bt("",De)||bt("",De)||bt("",De)).match(/\d{11}/g)||[];Ke.phone1=Dt[0]||"",Ke.phone2=Dt[1]||"",Ke.price=bt("",De),Ke.shipping=bt("",De),Ke.total=bt("",De),Ke.employee=bt("",De)||bt("",De),Ke.page=bt("",De);const Wt=(bt(" ",De,!0)||bt("",De,!0)).split(`
`).filter(Kt=>Kt.trim()!=="");Ke.products=Wt.map(Kt=>{Kt=Kt.trim().replace(/^(?:-|\d+\.?\s*-?)\s*/,"");let zt;const Ot=/(?:^\d*?)\s+(\d+)\s+ \s+(.*?)\s+\s+(.*?)\s+\s+(.*)/,zr=Kt.match(Ot);if(zr)zt={quantity:parseInt(zr[1],10),name:zr[2].trim(),color:zr[3].trim(),size:zr[4].trim(),price:"0"};else{zt={name:"",color:"",size:"",quantity:1,price:""};const Er=Kt.match(/^(\d+)\s+/);Er&&(zt.quantity=parseInt(Er[1],10),Kt=Kt.substring(Er[0].length).trim());const Wr=Kt.match(/\s+(\d+(\.\d+)?)$/);Wr&&(zt.price=Wr[1],Kt=Kt.substring(0,Kt.length-Wr[0].length).trim());const Ca=Kt.match(/\s+([\w\s\d]+)/);Ca&&(zt.size=Ca[1].trim(),Kt=Kt.replace(Ca[0],"").trim());const Aa=["","","","","","","","","","","",""],rs=Kt.split(" "),Nr=[],ra=[];rs.forEach(rn=>{Aa.includes(rn)?Nr.push(rn):ra.push(rn)}),zt.name=ra.join(" ").trim(),zt.color=Nr.join(" ").trim(),!zt.name&&!zt.color&&(zt.name=Kt)}return{...zt,total:(Number(zt.price)*zt.quantity).toString()}});const dr=bt("",De,!0);return Ke.notes=dr,Ke.orderNumber=(Q+qe+1).toString(),Ke});j(Se),k(!1),T.fire(" ",`  ${Se.length}  .`,"success")},1e3)};g.useEffect(()=>{if(!N||N.length===0)return;const q=N.map(Q=>{const Se=(Q.products||[]).map(De=>{const qe=(De.name||"").trim(),Ke=qe.toLowerCase(),bt=(De.color||"").toString().trim().toLowerCase(),$r=(De.size||"").toString().trim().toLowerCase();let Dt=null;qe&&(Dt=I.find(Ot=>{if(!Ot.name)return!1;const zr=Ot.name.toString().trim().toLowerCase(),Er=(Ot.color||"").toString().trim().toLowerCase(),Wr=(Ot.size||"").toString().trim().toLowerCase();return zr===Ke&&(bt===""||Er===bt)&&($r===""||Wr===$r)})||null),!Dt&&qe&&(Dt=I.find(Ot=>Ot.name&&Ot.name.toString().trim().toLowerCase()===Ke)||null),!Dt&&qe&&(Dt=I.find(Ot=>(Ot.name||"").toLowerCase().includes(Ke)||Ke.includes((Ot.name||"").toLowerCase()))||null);const Ct=Dt?Dt.id:null,Wt=!Ct,dr=!!(Dt&&De.size&&Dt.size&&De.size.toString()!==Dt.size.toString()),Kt=!!(Dt&&De.color&&Dt.color&&De.color.toString()!==Dt.color.toString());let zt=Number(De.price)||0;if(Dt){const Ot=["sale_price","salePrice","sellingPrice","selling_price","price","cost","retail_price","retailPrice","default_price","amount","value"];let zr=zt;for(const Er of Ot)if(Dt[Er]!==void 0&&Dt[Er]!==null){const Wr=Number(String(Dt[Er]).replace(/,/g,""));if(!isNaN(Wr)&&Wr>0){zr=Wr;break}}if((!zr||Number(zr)===0)&&typeof Dt=="object")for(const Er of Object.keys(Dt))try{const Wr=Dt[Er],Ca=Number(String(Wr).replace(/,/g,""));if(!isNaN(Ca)&&Ca>0){zr=Ca;break}}catch{}zt=Number(zr)||0}return{...De,productId:Ct,missingProduct:Wt,missingSize:dr,missingColor:Kt,price:zt}});return{...Q,products:Se}});j(Q=>{try{const Se=JSON.stringify(Q||[]),De=JSON.stringify(q||[]);if(Se===De)return Q}catch{}return q})},[I,N]);const Hs=()=>{if(lt==="sales_offices"&&!ht&&!tt){T.fire("","     .","warning");return}const q=N.map(Q=>{const Se=Ke=>{if(!Ke)return 0;const bt=Ke.match(/(\d+(\.\d+)?)/);return bt?parseFloat(bt[0]):0},De={};(Q.products||[]).forEach(Ke=>{const bt=`${(Ke.name||"").trim().toLowerCase()}|${(Ke.size||"").trim().toLowerCase()}|${(Ke.color||"").trim().toLowerCase()}`;De[bt]||(De[bt]={name:Ke.name,size:Ke.size||"",color:Ke.color||"",quantity:0,productId:Ke.productId||null,missingProduct:!!Ke.missingProduct,missingSize:!!Ke.missingSize,missingColor:!!Ke.missingColor,price:Ke.price||0}),De[bt].quantity+=Number(Ke.quantity||0),De[bt].missingProduct=De[bt].missingProduct&&Ke.missingProduct?!0:De[bt].missingProduct||!!Ke.missingProduct,De[bt].missingSize=De[bt].missingSize||!!Ke.missingSize,De[bt].missingColor=De[bt].missingColor||!!Ke.missingColor,!De[bt].productId&&Ke.productId&&(De[bt].productId=Ke.productId)});const qe=Object.values(De);return{...Q,id:Q.id,orderNumber:Q.orderNumber,customerName:Q.name,phone:Q.phone1,phone2:Q.phone2||"",governorate:Q.governorate||"",address:Q.address||"",notes:Q.notes||"",employee:Q.employee||"",page:Q.page||"",status:"pending",total:Se(Q.total),shippingCost:Se(Q.shipping),subTotal:Se(Q.price),importedProducts:qe,discount_type:Oe,discount_value:$,tax_type:ie,tax_value:$e,sales_office_id:lt==="sales_offices"&&!ht&&((Je==null?void 0:Je.id)||tt)||null}});(async()=>{try{const Se=await(await fetch(`${G}/api.php?module=orders&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:q,create_sales:U?1:0,default_warehouse_id:he||null})})).json();Se.success?(it(De=>[...q,...De]),T.fire(" ",`  ${Se.created.length||q.length}  .`,"success"),j([]),v(""),a("manage-orders")):T.fire(" ",Se.message||"    .","error")}catch(Q){console.error("Import save failed",Q),T.fire("","   .    .","warning"),it(Se=>[...q,...Se]),j([]),v(""),a("manage-orders")}})()},Mo=q=>{j(Q=>Q.map(Se=>Se.id===q?{...Se,products:[...Se.products||[],{name:"",quantity:1,color:"",size:"",price:"0",productId:null,missingProduct:!0}]}:Se))},ji=(q,Q)=>{j(Se=>Se.map(De=>De.id===q?{...De,products:De.products.filter((qe,Ke)=>Ke!==Q)}:De))},Ka=(q,Q,Se,De)=>{j(qe=>qe.map(Ke=>{if(Ke.id!==q)return Ke;const bt=(Ke.products||[]).map(($r,Dt)=>{if(Dt!==Q)return $r;const Ct={...$r,[Se]:De},Wt=(Ct.name||"").toString().trim(),dr=(Ct.size||"").toString().trim(),Kt=(Ct.color||"").toString().trim();let zt=Ct.productId||null,Ot=null;zt?Ot=I.find(ra=>Number(ra.id)===Number(zt))||null:Wt&&(Ot=I.find(ra=>ra.name&&ra.name.toLowerCase()===Wt.toLowerCase())||null,Ot||(Ot=I.find(ra=>(ra.name||"").toLowerCase().includes(Wt.toLowerCase())||Wt.toLowerCase().includes((ra.name||"").toLowerCase()))||null)),zt=Ot?Ot.id:null;const zr=!zt,Er=!!(Ot&&dr&&Ot.size&&dr.toString()!==Ot.size.toString()),Wr=!!(Ot&&Kt&&Ot.color&&Kt.toString()!==Ot.color.toString());let Ca=(Ct.name||"").toString(),Aa=Ct.price,rs=(Ct.color||"").toString(),Nr=(Ct.size||"").toString();if(Ot){Ot.name&&(Ca=Ot.name);const ra=["sale_price","salePrice","sellingPrice","selling_price","price","cost","retail_price","retailPrice","default_price","amount","value"];let rn=Aa;for(const as of ra)if(Ot[as]!==void 0&&Ot[as]!==null){const Ml=Number(String(Ot[as]).replace(/,/g,""));if(!isNaN(Ml)&&Ml>0){rn=Ml;break}}if((!rn||Number(rn)===0)&&typeof Ot=="object")for(const as of Object.keys(Ot))try{const Ml=Ot[as],ki=Number(String(Ml).replace(/,/g,""));if(!isNaN(ki)&&ki>0){rn=ki;break}}catch{}Aa=Number(rn)||0,rs=Ot.color??rs,Nr=Ot.size??Nr,Aa===0&&console.debug("Matched product has no positive price field",Ot)}else Aa=Number(Aa)||0;return{...Ct,productId:zt,missingProduct:zr,missingSize:Er,missingColor:Wr,name:Ca,price:Aa,color:rs,size:Nr}});return{...Ke,products:bt}}))},Ni=q=>{O(q)};g.useEffect(()=>{if(S){const q=setTimeout(()=>{window.print(),setTimeout(()=>O(null),1e3)},500);return()=>clearTimeout(q)}},[S]);const wi=async()=>{try{const Q=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json();Q&&Q.success&&it(Q.data||[])}catch(q){console.error("Failed to refresh orders list",q)}},xs=async q=>{gt(q),we(!0),xt([]),$t([]),He(""),ot("");try{const[Q,Se]=await Promise.all([fetch(`${G}/api.php?module=orders&action=getTimeline&id=${q.id}`),fetch(`${G}/api.php?module=orders&action=getDocuments&id=${q.id}`)]),De=await Q.json(),qe=await Se.json();De.success&&xt(De.data||[]),qe.success&&$t(qe.data||[])}catch(Q){console.error("Failed to load order details",Q)}},Io=async()=>{if(!Be||!pe.trim()){T.fire(" ","   .","warning");return}try{const Q=await(await fetch(`${G}/api.php?module=orders&action=addDocument`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:Be.id,doc_type:Rr,doc_url:pe.trim(),notes:ee})})).json();if(Q.success){ut(""),ke("");const De=await(await fetch(`${G}/api.php?module=orders&action=getDocuments&id=${Be.id}`)).json();De.success&&$t(De.data||[])}else T.fire(" ",Q.message||"  .","error")}catch(q){console.error("Add order document failed",q)}},_i=async q=>{if(Be)try{const Se=await(await fetch(`${G}/api.php?module=orders&action=deleteDocument`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:q})})).json();if(Se.success){const qe=await(await fetch(`${G}/api.php?module=orders&action=getDocuments&id=${Be.id}`)).json();qe.success&&$t(qe.data||[])}else T.fire(" ",Se.message||"  .","error")}catch(Q){console.error("Delete order document failed",Q)}},R=async()=>{if(!(!Be||!Ce))try{const Q=await(await fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Be.id,status:Ce,status_note:Ge})})).json();if(Q.success){await wi();const De=await(await fetch(`${G}/api.php?module=orders&action=getTimeline&id=${Be.id}`)).json();De.success&&xt(De.data||[]),He(""),ot(""),T.fire(" ","   .","success")}else T.fire(" ",Q.message||"  .","error")}catch(q){console.error("Update order status failed",q)}},fe=q=>{ta(q),jr(q.status||""),Ft(""),br("none"),Sr(""),Mt(!0)},Ue=async q=>{if(q.preventDefault(),!qt||!sr){T.fire("","  .","warning");return}if(cr==="fine"){const Q=Number(Ta||0);if(!Q||isNaN(Q)||Q<=0){T.fire("","    .","warning");return}if(!qt.rep_id&&!qt.repId){T.fire("","       .","warning");return}}try{const Se=await(await fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:qt.id,status:sr,status_note:xr,penalty_apply:cr==="fine"?1:0,penalty_amount:cr==="fine"?Number(Ta||0):0})})).json();Se.success?(await wi(),Mt(!1),T.fire(" ","   .","success")):T.fire(" ",Se.message||"  .","error")}catch(Q){console.error("Update order status failed",Q),T.fire("","  .","error")}};return r.jsxs("div",{className:"space-y-6 dir-rtl",children:[S&&r.jsx("div",{id:"print-container",children:r.jsx(Iae,{orders:S,companyName:Re,companyPhone:xe,terms:je})}),mt&&Be&&r.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-3xl overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-800",children:["  #",Be.orderNumber]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[Be.customerName,"  ",Be.phone1||Be.phone]})]}),r.jsx("button",{onClick:()=>we(!1),className:"text-slate-400 hover:text-rose-500",children:""})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"border rounded-2xl p-4",children:[r.jsx("h4",{className:"text-sm font-black mb-3",children:" "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsxs("select",{value:Ce,onChange:q=>He(q.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"with_rep",children:" "}),r.jsx("option",{value:"in_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"returned",children:""})]}),r.jsx("input",{value:Ge,onChange:q=>ot(q.target.value),placeholder:" ",className:"border rounded-lg px-3 py-2 text-sm md:col-span-2"})]}),r.jsx("button",{onClick:R,className:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg text-xs font-bold",children:" "})]}),r.jsxs("div",{className:"border rounded-2xl p-4",children:[r.jsx("h4",{className:"text-sm font-black mb-3",children:" "}),r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"  "}),r.jsxs("span",{children:[zn.toLocaleString()," ",u]})]}),Bs>0&&r.jsxs("div",{className:"flex justify-between text-rose-600",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["-",Bs.toLocaleString()," ",u]})]}),Us>0&&r.jsxs("div",{className:"flex justify-between text-emerald-600",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["+",Us.toLocaleString()," ",u]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:[xn.toLocaleString()," ",u]})]}),r.jsxs("div",{className:"flex justify-between font-black pt-2 border-t",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:[gn.toLocaleString()," ",u]})]})]})]}),r.jsxs("div",{className:"border rounded-2xl p-4",children:[r.jsx("h4",{className:"text-sm font-black mb-3",children:" "}),wt.length===0?r.jsx("div",{className:"text-xs text-slate-400",children:"    ."}):r.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:wt.map(q=>r.jsxs("div",{className:"border rounded-xl p-3 text-xs",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold",children:q.status||q.action}),r.jsx("span",{className:"text-slate-400",children:q.created_at||q.createdAt})]}),r.jsx("div",{className:"text-slate-500 mt-1",children:q.notes||"-"})]},q.id))})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border rounded-2xl p-4",children:[r.jsx("h4",{className:"text-sm font-black mb-3",children:""}),r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsxs("select",{value:Rr,onChange:q=>kr(q.target.value),className:"border rounded-lg px-3 py-2 text-xs w-full",children:[r.jsx("option",{value:"delivery_note",children:" "}),r.jsx("option",{value:"invoice",children:""}),r.jsx("option",{value:"proof",children:""}),r.jsx("option",{value:"other",children:""})]}),r.jsx("input",{value:pe,onChange:q=>ut(q.target.value),placeholder:" ",className:"border rounded-lg px-3 py-2 text-xs w-full"}),r.jsx("input",{value:ee,onChange:q=>ke(q.target.value),placeholder:"",className:"border rounded-lg px-3 py-2 text-xs w-full"}),r.jsx("button",{onClick:Io,className:"w-full bg-emerald-600 text-white px-3 py-2 rounded-lg text-xs font-bold",children:" "})]}),St.length===0?r.jsx("div",{className:"text-xs text-slate-400",children:"  ."}):r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:St.map(q=>r.jsxs("div",{className:"border rounded-xl p-2 text-xs",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold",children:q.doc_type||q.type}),r.jsx("button",{onClick:()=>_i(q.id),className:"text-rose-500",children:""})]}),r.jsx("a",{href:q.doc_url||q.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 break-all",children:q.doc_url||q.url}),r.jsx("div",{className:"text-slate-500 mt-1",children:q.notes||"-"})]},q.id))})]})})]})]})}),at&&qt&&r.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-black text-slate-800",children:"  "}),r.jsxs("p",{className:"text-xs text-slate-500",children:["#",qt.orderNumber,"  ",qt.customerName]})]}),r.jsx("button",{onClick:()=>Mt(!1),className:"text-slate-400 hover:text-rose-500",children:""})]}),r.jsxs("form",{onSubmit:Ue,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsxs("select",{value:sr,onChange:q=>jr(q.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"with_rep",children:" "}),r.jsx("option",{value:"in_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"returned",children:""})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"  "}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-600",children:[r.jsx("input",{type:"radio",checked:cr==="none",onChange:()=>br("none")})," "]}),r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-600",children:[r.jsx("input",{type:"radio",checked:cr==="fine",onChange:()=>br("fine")}),""]})]}),cr==="fine"&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"number",min:"0",value:Ta,onChange:q=>Sr(q.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{value:xr,onChange:q=>Ft(q.target.value),placeholder:" ",className:"w-full border rounded-lg px-3 py-2 text-sm"})]}),r.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg text-sm font-bold",children:" "})]})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900",children:" "}),r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"   "})]}),r.jsxs("div",{className:"flex gap-1 bg-white p-1.5 rounded-2xl border border-slate-200 shadow-sm w-full md:w-auto overflow-x-auto",children:[r.jsxs("button",{onClick:()=>a("new-order"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${t==="new-order"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(tu,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("manage-orders"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${t==="manage-orders"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(On,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("import-orders"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all whitespace-nowrap ${t==="import-orders"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[r.jsx(FL,{size:16})," "]})]})]}),t==="new-order"&&r.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-black mb-3",children:"  "}),lt==="sales_offices"&&r.jsxs("div",{className:"mb-4 p-3 bg-slate-50 border border-slate-200 rounded-2xl",children:[r.jsx("div",{className:"text-xs font-black text-slate-600 mb-2",children:" "}),ht?r.jsx("div",{className:"text-xs text-slate-500",children:"     (      )."}):r.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center",children:[r.jsxs("select",{className:"border p-2 rounded-md bg-white",value:tt,onChange:q=>ne(q.target.value?Number(q.target.value):""),disabled:!ct&&Ze!==null&&Ze!==void 0,children:[r.jsx("option",{value:"",children:" "}),(ct?pt:pt.filter(q=>Number(q.id)===Number(Ze))).map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]}),r.jsx("div",{className:"text-xs text-slate-500",children:Je?Je.phones||"":" /    ."})]})]}),r.jsxs("div",{className:"flex gap-2 items-center mb-3",children:[r.jsxs("select",{className:"border p-2 rounded-md",value:B,onChange:q=>X(q.target.value?Number(q.target.value):""),children:[r.jsx("option",{value:"",children:"  "}),te.map(q=>r.jsxs("option",{value:q.id,children:[q.name," - ",q.phone1]},q.id))]}),r.jsx("button",{className:"btn",onClick:()=>{X(""),le({name:"",phone1:"",phone2:"",governorate:"",address:""})},children:" "})]}),B===""&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-3",children:[r.jsx("input",{placeholder:" ",className:"border p-2 rounded",value:V.name,onChange:q=>le({...V,name:q.target.value})}),r.jsx("input",{placeholder:" 1",className:"border p-2 rounded",value:V.phone1,onChange:q=>le({...V,phone1:q.target.value})}),r.jsx("input",{placeholder:" 2",className:"border p-2 rounded",value:V.phone2,onChange:q=>le({...V,phone2:q.target.value})}),r.jsx("input",{placeholder:"",className:"border p-2 rounded",value:V.governorate,onChange:q=>le({...V,governorate:q.target.value})}),r.jsx("input",{placeholder:"",className:"border p-2 rounded md:col-span-2",value:V.address,onChange:q=>le({...V,address:q.target.value})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-2",children:" "}),n.map(q=>r.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[r.jsxs("select",{className:"border p-2 rounded flex-1",value:q.productId||"",onChange:Q=>qs(q.id,"productId",Q.target.value),children:[r.jsx("option",{value:"",children:" "}),I.map(Q=>r.jsxs("option",{value:Q.id,children:[Q.name," ",Q.size?`- ${Q.size}`:""," ",Q.color?`- ${Q.color}`:""]},Q.id))]}),r.jsx("input",{className:"border p-2 rounded w-20 text-center",placeholder:"",value:q.qty,onChange:Q=>qs(q.id,"qty",Number(Q.target.value||0))}),r.jsx("input",{className:"border p-2 rounded w-28 text-center",placeholder:"",value:q.price,onChange:Q=>qs(q.id,"price",Number(Q.target.value||0))}),r.jsx("button",{className:"btn bg-rose-500 text-white px-3 py-1 rounded",onClick:()=>Oo(q.id),children:""})]},q.id)),r.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"       ."}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{className:"btn bg-blue-600 text-white px-4 py-2 rounded",onClick:Ao,children:" "}),r.jsx("button",{className:"btn bg-emerald-600 text-white px-4 py-2 rounded",onClick:yi,children:" "})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"border rounded p-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsxs("select",{value:Y,onChange:q=>me(q.target.value),className:"border rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:"amount",children:""}),r.jsx("option",{value:"percent",children:" %"})]}),r.jsx("input",{type:"number",min:0,value:z,onChange:q=>F(Number(q.target.value||0)),className:"border rounded px-2 py-1 text-sm w-full",placeholder:"0"})]})]}),r.jsxs("div",{className:"border rounded p-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsxs("div",{className:"flex gap-2 mt-1",children:[r.jsxs("select",{value:ye,onChange:q=>Ae(q.target.value),className:"border rounded px-2 py-1 text-sm",children:[r.jsx("option",{value:"percent",children:" %"}),r.jsx("option",{value:"amount",children:""})]}),r.jsx("input",{type:"number",min:0,value:be,onChange:q=>Me(Number(q.target.value||0)),className:"border rounded px-2 py-1 text-sm w-full",placeholder:"0"})]}),r.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:"    ."})]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsx("textarea",{placeholder:"",className:"border p-2 rounded md:col-span-2",value:J,onChange:q=>Z(q.target.value)}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx("input",{placeholder:"",className:"border p-2 rounded",value:M,onChange:q=>P(q.target.value)}),r.jsx("input",{placeholder:"",className:"border p-2 rounded",value:W,onChange:q=>se(q.target.value)})]})]})]})]}),t==="manage-orders"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-3xl shadow-sm border border-slate-200 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 w-full md:max-w-md",children:[r.jsx(fs,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"     ...",value:h,onChange:q=>m(q.target.value),className:"w-full pr-10 pl-4 py-3 bg-slate-50 border-none rounded-2xl text-sm focus:ring-2 focus:ring-blue-500 transition-all"})]}),r.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[r.jsxs("select",{value:ft,onChange:q=>jt(q.target.value),className:"bg-white border border-slate-200 px-3 py-3 rounded-2xl text-xs font-bold text-slate-600",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"with_rep",children:" "}),r.jsx("option",{value:"in_delivery",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"returned",children:""})]}),r.jsxs("button",{onClick:vn,className:"flex items-center gap-2 bg-slate-100 hover:bg-slate-200 border border-slate-200 px-4 py-3 rounded-2xl text-xs font-bold text-slate-600 transition-all",children:[E.length===Xt.length&&Xt.length>0?r.jsx(F_,{size:16,className:"text-blue-600"}):r.jsx(H_,{size:16}),E.length===Xt.length?" ":" "]}),r.jsxs("button",{onClick:()=>Ni(de.filter(q=>E.includes(q.id))),disabled:E.length===0,className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-slate-800 text-white px-6 py-3 rounded-2xl text-xs font-bold hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-slate-200 transition-all",children:[r.jsx(fn,{size:16}),"   (",E.length,")"]})]})]}),Xt.length===0?r.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-slate-300",children:[r.jsx(On,{className:"w-16 h-16 mx-auto text-slate-200 mb-4"}),r.jsx("p",{className:"text-slate-400 font-bold",children:"    "})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-5",children:Xt.map(q=>r.jsxs("div",{className:`relative group bg-white p-0 rounded-3xl border transition-all duration-300 hover:shadow-xl hover:-translate-y-1 ${E.includes(q.id)?"border-blue-500 ring-2 ring-blue-500/20 z-10":"border-slate-200 shadow-sm"}`,children:[r.jsx("div",{className:"absolute top-4 left-4 z-20",children:r.jsx("button",{onClick:()=>Fs(q.id),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${E.includes(q.id)?"bg-blue-600 text-white":"bg-slate-100 text-slate-300 hover:bg-slate-200"}`,children:E.includes(q.id)?r.jsx(F_,{size:16}):r.jsx(H_,{size:16})})}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4 pl-10",children:[r.jsxs("div",{children:[r.jsx("span",{className:"inline-block bg-slate-100 text-slate-600 font-mono text-[10px] px-2 py-1 rounded-lg mb-1",children:q.orderNumber}),r.jsx("h3",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:q.customerName})]}),Ra(q.status)]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[r.jsx(Ly,{size:14,className:"text-blue-500"}),r.jsx("span",{className:"font-mono dir-ltr",children:q.phone})]}),r.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-500",children:[r.jsx(jm,{size:14,className:"text-rose-500 mt-0.5 shrink-0"}),r.jsxs("span",{className:"line-clamp-2 leading-relaxed",children:[q.governorate," - ",q.address]})]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 border border-slate-100",children:[r.jsx("p",{className:"text-[10px] text-slate-400 font-bold mb-2",children:" :"}),r.jsxs("div",{className:"space-y-1",children:[q.products.slice(0,2).map((Q,Se)=>r.jsxs("div",{className:"flex justify-between text-[11px]",children:[r.jsx("span",{className:"text-slate-700 truncate max-w-[70%]",children:Q.name}),r.jsxs("span",{className:"text-slate-500 font-mono",children:["x",Q.quantity]})]},Se)),q.products.length>2&&r.jsxs("p",{className:"text-[10px] text-blue-500 font-bold pt-1",children:["+ ",q.products.length-2,"  "]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-100 bg-slate-50/50 rounded-b-3xl",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:""}),r.jsxs("span",{className:"font-black text-lg text-slate-800",children:[q.total.toLocaleString()," ",u]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Ni([q]),className:"w-10 h-10 flex items-center justify-center bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-blue-600 hover:border-blue-200 transition-colors shadow-sm",title:"",children:r.jsx(fn,{size:18})}),r.jsx("button",{onClick:()=>fe(q),className:"w-10 h-10 flex items-center justify-center bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-amber-600 hover:border-amber-200 transition-colors shadow-sm",title:" ",children:r.jsx(ma,{size:18})}),r.jsx("button",{onClick:()=>xs(q),className:"w-10 h-10 flex items-center justify-center bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-emerald-600 hover:border-emerald-200 transition-colors shadow-sm",title:"",children:r.jsx(ha,{size:18})})]})]})]},q.id))})]}),t==="import-orders"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-xl font-black mb-2 text-slate-900 flex items-center gap-3",children:[r.jsx(UL,{size:24,className:"text-blue-500"}),"  "]}),lt==="sales_offices"&&r.jsxs("div",{className:"mb-4 p-3 bg-slate-50 border border-slate-200 rounded-2xl",children:[r.jsx("div",{className:"text-xs font-black text-slate-600 mb-2",children:" "}),ht?r.jsx("div",{className:"text-xs text-slate-500",children:"     (      )."}):r.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center",children:[r.jsxs("select",{className:"border p-2 rounded-md bg-white",value:tt,onChange:q=>ne(q.target.value?Number(q.target.value):""),disabled:!ct&&Ze!==null&&Ze!==void 0,children:[r.jsx("option",{value:"",children:" "}),(ct?pt:pt.filter(q=>Number(q.id)===Number(Ze))).map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]}),r.jsx("div",{className:"text-xs text-slate-500",children:Je?Je.phones||"":" /    ."})]})]}),r.jsx("textarea",{value:b,onChange:q=>v(q.target.value),rows:8,placeholder:"   ...",className:"w-full bg-slate-50 border-2 border-dashed border-slate-200 rounded-2xl p-4 text-sm font-mono focus:border-blue-500 transition-all"}),r.jsxs("div",{className:"mt-4 flex justify-end",children:[r.jsxs("div",{className:"flex items-center gap-3 mr-auto",children:[r.jsx("label",{className:"text-xs",children:"  (/)"}),r.jsxs("select",{value:he,onChange:q=>Ne(q.target.value?Number(q.target.value):""),className:"bg-white border rounded-xl px-3 py-2 text-sm",children:[r.jsx("option",{value:"",children:""}),ue.map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:U,onChange:q=>re(q.target.checked)}),"   "]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-xs",children:""}),r.jsxs("select",{value:Oe,onChange:q=>ve(q.target.value),className:"bg-white border rounded-xl px-2 py-1 text-xs",children:[r.jsx("option",{value:"amount",children:""}),r.jsx("option",{value:"percent",children:"%"})]}),r.jsx("input",{type:"number",min:0,value:$,onChange:q=>ce(Number(q.target.value||0)),className:"bg-white border rounded-xl px-2 py-1 text-xs w-20"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-xs",children:""}),r.jsxs("select",{value:ie,onChange:q=>oe(q.target.value),className:"bg-white border rounded-xl px-2 py-1 text-xs",children:[r.jsx("option",{value:"percent",children:"%"}),r.jsx("option",{value:"amount",children:""})]}),r.jsx("input",{type:"number",min:0,value:$e,onChange:q=>Xe(Number(q.target.value||0)),className:"bg-white border rounded-xl px-2 py-1 text-xs w-20"})]})]}),r.jsxs("button",{onClick:$a,disabled:!b||_,className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black shadow-lg shadow-blue-500/20 disabled:opacity-50 flex gap-2",children:[_?r.jsx(gO,{className:"animate-spin",size:18}):r.jsx(On,{size:18}),"  "]})]})]}),N.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"font-bold",children:[" (",N.length,")"]}),r.jsx("button",{onClick:Hs,className:"bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold shadow-lg",children:" "})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(q=>r.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 text-xs shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2 border-b pb-2",children:[r.jsx("span",{className:"font-bold text-sm",children:q.name}),r.jsxs("span",{className:"bg-blue-50 text-blue-600 px-2 py-0.5 rounded-lg font-mono",children:[q.total," ."]})]}),r.jsxs("div",{className:"space-y-1 text-slate-500",children:[r.jsxs("p",{className:"truncate",children:[q.governorate," - ",q.address]}),r.jsx("p",{className:"font-mono",children:q.phone1})]}),r.jsxs("div",{className:"mt-2 pt-2 border-t border-dashed",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-bold",children:""}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>Mo(q.id),className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-xl text-xs",children:" "})})]}),q.products.map((Q,Se)=>{var De;return r.jsxs("div",{className:"flex justify-between items-center gap-2 mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{value:Q.name,onChange:qe=>Ka(q.id,Se,"name",qe.target.value),className:"w-2/3 bg-transparent text-sm"}),r.jsx("input",{value:Q.size||"",onChange:qe=>Ka(q.id,Se,"size",qe.target.value),placeholder:"",className:"w-1/6 bg-transparent text-sm text-center"}),r.jsx("input",{value:Q.color||"",onChange:qe=>Ka(q.id,Se,"color",qe.target.value),placeholder:"",className:"w-1/6 bg-transparent text-sm text-center"})]}),r.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[Q.missingProduct&&r.jsx("span",{className:"text-[11px] bg-rose-100 text-rose-700 px-2 py-0.5 rounded",children:" "}),Q.missingSize&&r.jsx("span",{className:"text-[11px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded",children:""}),Q.missingColor&&r.jsx("span",{className:"text-[11px] bg-violet-100 text-violet-700 px-2 py-0.5 rounded",children:""})]}),r.jsx("div",{className:"mt-1",children:Q.productId?r.jsxs("div",{className:"text-xs text-green-600",children:[": ",((De=I.find(qe=>qe.id===Q.productId))==null?void 0:De.name)||Q.productId]}):r.jsxs("select",{value:Q.productId||"",onChange:qe=>Ka(q.id,Se,"productId",qe.target.value?Number(qe.target.value):null),className:"mt-1 text-sm rounded-md border px-2 py-1",children:[r.jsx("option",{value:"",children:"  "}),I.map(qe=>r.jsx("option",{value:qe.id,children:qe.name},qe.id))]})})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1 w-40",children:[r.jsx("label",{className:"text-[11px] text-slate-500",children:""}),r.jsx("input",{type:"number",min:1,value:Q.quantity,onChange:qe=>Ka(q.id,Se,"quantity",Number(qe.target.value||0)),className:"w-full text-right font-mono px-2 py-1 rounded-md border"}),r.jsx("label",{className:"text-[11px] text-slate-500",children:" "}),r.jsx("input",{type:"number",step:"0.01",value:Q.price,onChange:qe=>Ka(q.id,Se,"price",qe.target.value),className:"w-full text-right font-mono px-2 py-1 rounded-md border"}),r.jsx("div",{className:"flex gap-2 mt-1",children:r.jsx("button",{onClick:()=>ji(q.id,Se),className:"text-rose-600 text-xs",children:""})})]})]},Se)})]})]},q.id))})]})]})]})},Mae=({order:e,companyName:t,companyPhone:a,terms:n})=>{const o=(e.products&&e.products.length>0?e.products:[{name:"",quantity:"",price:"",total:""}]).map(C=>{const S=Number(C.price||0),O=Number(C.quantity||C.qty||0),I=C.total!==void 0&&C.total!==null&&Number(C.total)!==0?Number(C.total):S*O;return{...C,price:S,quantity:O,lineTotal:I}}),d=o.reduce((C,S)=>C+(S.lineTotal||0),0),h=Number(e.shipping||e.shippingCost||0),m=Cp(e.discountType||e.discount_type),u=Number(e.discountValue||e.discount_value||0),f=Cp(e.taxType||e.tax_type),x=Number(e.taxValue||e.tax_value||0),b=localStorage.getItem("Dragon_sales_calc_order")||"discount_then_tax",v=Dy(d,h,m,u,f,x,b),N=Number(e.discountAmount||e.discount_amount||0)||v.discountAmount,j=Number(e.taxAmount||e.tax_amount||0)||v.taxAmount,_=e.total&&Number(e.total)>0?Number(e.total):v.total,k=Math.max(0,3-o.length),E=new Date().toISOString().split("T")[0];return r.jsxs("div",{className:"flex flex-col h-full bg-white text-black font-sans box-border relative p-1",style:{direction:"rtl"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("h1",{className:"font-black text-xl mb-1",children:t}),r.jsx("p",{className:"text-sm font-bold dir-ltr",children:a})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:`https://barcode.tec-it.com/barcode.ashx?data=${e.orderNumber}&code=Code128&dpi=96&thickness=2`,alt:"barcode",className:"h-10 mb-1"}),r.jsx("p",{className:"font-black text-sm",children:e.orderNumber})]})]}),r.jsx("div",{className:"text-right mb-1",children:r.jsxs("p",{className:"text-xs font-bold",children:[": ",E]})}),r.jsx("div",{className:"w-full border-b-2 border-black border-dashed my-1"}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("div",{className:"text-right flex-1",children:r.jsx("span",{className:"font-bold text-base",children:e.customerName||e.name})}),r.jsx("div",{className:"border-2 border-black p-1 px-3",children:r.jsx("span",{className:"font-black text-sm",children:e.governorate||" "})})]}),r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"font-bold text-sm font-mono",children:e.phone1||e.phone})}),r.jsx("div",{className:"text-left",children:r.jsx("span",{className:"font-bold text-sm font-mono",children:e.phone2})})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"font-bold text-xs leading-tight",children:e.address})})]}),r.jsx("div",{className:"border-2 border-black mb-1 flex-grow",children:r.jsxs("table",{className:"w-full text-center text-xs border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-200 border-b-2 border-black",children:[r.jsx("th",{className:"border-l border-black p-1",children:""}),r.jsx("th",{className:"border-l border-black p-1 w-16",children:""}),r.jsx("th",{className:"border-l border-black p-1 w-12",children:""}),r.jsx("th",{className:"p-1 w-16",children:""})]})}),r.jsxs("tbody",{children:[o.map((C,S)=>r.jsxs("tr",{className:"border-b border-black",children:[r.jsxs("td",{className:"border-l border-black p-1 text-right font-medium",children:[C.name," ",C.color!=="-"?`- ${C.color}`:""]}),r.jsx("td",{className:"border-l border-black p-1 font-bold",children:C.price.toLocaleString()}),r.jsx("td",{className:"border-l border-black p-1 font-bold",children:C.quantity}),r.jsx("td",{className:"p-1 font-bold",children:(C.lineTotal||0).toLocaleString()})]},S)),Array.from({length:k}).map((C,S)=>r.jsxs("tr",{className:"border-b border-black",children:[r.jsx("td",{className:"border-l border-black p-1 h-6"}),r.jsx("td",{className:"border-l border-black p-1"}),r.jsx("td",{className:"border-l border-black p-1"}),r.jsx("td",{className:"p-1"})]},`empty-${S}`))]})]})}),r.jsxs("div",{className:"flex justify-between text-xs mb-2 px-1",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-bold",children:":"})," ",e.employee||"Admin"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-bold",children:":"})," ",e.page||"-"]})]}),r.jsxs("div",{className:"border-2 border-black p-2 mb-2 text-center bg-slate-50",children:[r.jsx("p",{className:"font-black text-sm mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-black mb-1",children:[_.toLocaleString()," ."]}),r.jsxs("div",{className:"text-[10px] font-bold space-y-0.5",children:[r.jsxs("div",{children:["  : ",d.toLocaleString()," ."]}),N>0&&r.jsxs("div",{children:[": ",N.toLocaleString()," ."]}),j>0&&r.jsxs("div",{children:[": ",j.toLocaleString()," ."]}),r.jsxs("div",{children:[": ",h.toLocaleString()," ."]})]})]}),r.jsxs("div",{className:"border-2 border-black p-1 text-center mt-auto",children:[r.jsx("p",{className:"font-bold text-[10px] mb-0.5",children:" "}),r.jsx("p",{className:"text-[9px] font-medium leading-tight",children:n})]})]})},Iae=({orders:e,companyName:t,companyPhone:a,terms:n})=>{const i=[];for(let o=0;o<e.length;o+=4)i.push(e.slice(o,o+4));return r.jsxs("div",{children:[r.jsx("style",{children:`
        @media print {
          body { visibility: hidden; margin: 0; padding: 0; }
          #print-container { visibility: visible !important; position: absolute; top: 0; left: 0; width: 100%; }
          @page { size: A4; margin: 0.5cm; }
          .print-page { page-break-after: always; }
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
        `}),i.map((o,d)=>r.jsx("div",{className:"print-page",style:{padding:"0.3cm",height:"28.7cm"},children:r.jsx("div",{className:"grid grid-cols-2 gap-4",style:{height:"100%",gridTemplateRows:"1fr 1fr"},children:o.map(h=>r.jsx("div",{className:"break-inside-avoid border border-slate-300",style:{height:"100%"},children:r.jsx(Mae,{order:h,companyName:t,companyPhone:a,terms:n})},h.id))})},d))]})},Pae=()=>{var Z,M;const[e,t]=g.useState([]),[a,n]=g.useState([]),[i,o]=g.useState([]),[d,h]=g.useState(null),[m,u]=g.useState([]),[f,x]=g.useState([]),[b,v]=g.useState([]),[N,j]=g.useState(!1);g.useEffect(()=>{_()},[]);const _=async()=>{try{const[P,W,se]=await Promise.all([fetch(`${G}/api.php?module=users&action=getAll`).then(ue=>ue.json()),fetch(`${G}/api.php?module=permissions&action=getModules`).then(ue=>ue.json()),fetch(`${G}/api.php?module=permissions&action=getActions`).then(ue=>ue.json())]);if(P.success){const D=(P.data||[]).filter(U=>((U==null?void 0:U.role)||"").toString().toLowerCase()!=="representative");t(D)}W.success&&n(W.data||[]),se.success&&o(se.data||[])}catch(P){console.error(P)}},k=async(P,W)=>{try{const se={name:P,parent_id:W},D=await(await fetch(`${G}/api.php?module=permissions&action=createModule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();D.success?(T.fire("","  ","success"),_()):T.fire("",D.message||"","error")}catch(se){console.error(se),T.fire("","  ","error")}},E=async(P,W)=>{try{const se={name:P,code:W},D=await(await fetch(`${G}/api.php?module=permissions&action=createAction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();D.success?(T.fire("","  ","success"),_()):T.fire("",D.message||"","error")}catch(se){console.error(se),T.fire("","  ","error")}},C=async P=>{h(P);try{const se=await(await fetch(`${G}/api.php?module=permissions&action=getUserPermissions&user_id=${P}`)).json();se.success&&u(se.data||[]);try{const D=await(await fetch(`${G}/api.php?module=permissions&action=getUserPages&user_id=${P}`)).json();D.success?x(D.data||[]):x([])}catch{x([])}}catch(W){console.error(W)}},S=(P,W)=>{const se=m.find(ue=>ue.module_id==P&&ue.action_id==W);return se?!!se.allowed:!1},O=P=>{const W=(P.code||"").toString().toLowerCase();return{view:"",add:"",create:"",edit:"",update:"",delete:"",remove:"",approve:"",manage:"",list:"",print:"",export:""}[W]||P.name||W||""},I=P=>{const W=(P.slug||P.name||"").toString().toLowerCase();return{users:"",customers:"",suppliers:"",treasuries:"",warehouses:"",sales_offices:" ",products:"",orders:"",transactions:"",sales:"",employees:"",stock:"",product_movements:" ",reports:"",finance:"",inventory:"",settings:""}[W]||P.name||W||""},L=(P,W)=>{const se=m.find(D=>D.module_id==P&&D.action_id==W);let ue=[...m];se?ue=ue.map(D=>D.module_id==P&&D.action_id==W?{...D,allowed:se.allowed?0:1}:D):ue.push({user_id:d,module_id:P,action_id:W,allowed:1}),u(ue)},te=async()=>{if(d)try{const P={user_id:d,permissions:m},se=await(await fetch(`${G}/api.php?module=permissions&action=setUserPermissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).json();se.success?T.fire("","  ","success"):T.fire("",se.message||"","error")}catch(P){console.error(P),T.fire("","  ","error")}},H=async(P,W)=>{if(d)try{const se={user_id:d,pages:[{page_slug:P,can_access:W?1:0}]},D=await(await fetch(`${G}/api.php?module=permissions&action=setUserPages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)})).json();D.success?(x(U=>{const re=U.filter(he=>(he.page_slug||"").toString().toLowerCase()!==P.toLowerCase());return re.push({page_slug:P,can_access:W?1:0}),re}),T.fire("",` ${W?"":""} .`,"success")):T.fire("",D.message||"","error")}catch(se){console.error(se),T.fire("","   ","error")}},B=P=>{const W=(P.slug||P.name||"").toString().toLowerCase();return{customers:"crm",suppliers:"srm",treasuries:"finance",transactions:"finance",stock:"inventory",products:"inventory",warehouses:"inventory",product_movements:"inventory",employees:"hrm",users:"admin",permissions:"admin"}[W]||W},X=om.map(P=>({slug:String(P.slug||""),label:String(P.label||P.slug||"")})).filter(P=>P.slug),V=Array.from(new Set(X.map(P=>P.slug))),le=P=>{const W=(P||"").toString().toLowerCase(),se=f.find(ue=>(ue.page_slug||"").toString().toLowerCase()===W);return se?!!se.can_access:!0},J=async P=>{if(!d||!(await T.fire({title:P?"   ":"   ",text:P?"     .":"     .",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)return;const se=a.flatMap(ue=>i.map(D=>({user_id:d,module_id:ue.id,action_id:D.id,allowed:P?1:0})));try{const ue={user_id:d,permissions:se},U=await(await fetch(`${G}/api.php?module=permissions&action=setUserPermissions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)})).json();if(!U.success){T.fire("",U.message||"","error");return}u(se);const re=V.map(Y=>({page_slug:Y,can_access:P?1:0})),Ne=await(await fetch(`${G}/api.php?module=permissions&action=setUserPages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d,pages:re})})).json();Ne.success?x(re):T.fire("",Ne.message||"      ","warning"),T.fire("",P?"   .":"   .","success")}catch(ue){console.error(ue),T.fire("","  .","error")}};return r.jsxs("div",{className:"space-y-6 p-4",children:[r.jsx("h2",{className:"text-2xl font-extrabold",children:"  "}),r.jsxs("div",{className:"flex gap-6 flex-col lg:flex-row",children:[r.jsxs("aside",{className:"w-full lg:w-64 p-4 rounded-xl shadow-sm border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h4",{className:"font-bold mb-3",children:""}),r.jsx("div",{className:"space-y-2",children:e.filter(P=>((P==null?void 0:P.role)||"").toString().toLowerCase()!=="representative").map(P=>r.jsxs("div",{className:`p-3 rounded-lg hover:bg-slate-50 cursor-pointer transition ${d===P.id?"bg-slate-100 ring-1 ring-blue-200":""}`,onClick:()=>C(P.id),children:[r.jsx("div",{className:"font-semibold",children:P.name||P.username}),r.jsx("div",{className:"text-xs text-slate-500",children:P.role||""})]},P.id))})]}),r.jsx("main",{className:"flex-1 p-6 rounded-xl shadow-sm border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:d?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-lg font-bold",children:[" : ",((Z=e.find(P=>P.id===d))==null?void 0:Z.name)||((M=e.find(P=>P.id===d))==null?void 0:M.username)]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>J(!0),className:"px-3 py-1 bg-emerald-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>J(!1),className:"px-3 py-1 bg-rose-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>j(P=>!P),className:"px-3 py-1 bg-slate-200 rounded",children:N?"  ":"  "}),r.jsx("button",{onClick:te,className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow",children:" "})]})]}),r.jsxs("section",{children:[r.jsx("h5",{className:"font-semibold mb-2",children:"  "}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:X.map(P=>{const W=(P.slug||"").toString().toLowerCase(),se=le(W),ue=b.includes(W),D=re=>{v(he=>he.includes(re)?he.filter(Ne=>Ne!==re):[...he,re])},U=a.filter(re=>(B(re)||"").toString().toLowerCase()===W);return r.jsxs("div",{className:`rounded-lg shadow-sm border ${se?"ring-1 ring-green-300":"ring-1 ring-red-300"}`,children:[r.jsxs("div",{onClick:()=>D(W),className:`cursor-pointer p-3 flex items-center justify-between ${se?"bg-green-50":"bg-red-50"} rounded-t-lg`,children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:P.label}),r.jsx("div",{className:"text-xs text-slate-500",children:W})]}),r.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[r.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${se?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:se?"":""}),r.jsx("input",{type:"checkbox",checked:se,onChange:re=>H(W,re.target.checked)})]})]}),se&&ue&&r.jsx("div",{className:"p-3 bg-white dark:bg-slate-900 rounded-b-lg space-y-3",children:U.map(re=>r.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[r.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800",children:[r.jsx("div",{className:"font-medium",children:I(re)}),r.jsx("div",{className:"text-xs text-slate-500",children:re.slug||re.name})]}),r.jsx("div",{className:"p-3",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(he=>{const Ne=S(re.id,he.id);return r.jsx("button",{onClick:()=>L(re.id,he.id),className:`px-3 py-1 rounded-full text-sm font-medium transition ${Ne?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O(he)},he.id)})})})]},re.id))})]},W)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{children:r.jsx($ae,{selectedUser:d})}),r.jsx("div",{children:r.jsx(zae,{selectedUser:d})}),r.jsx("div",{children:r.jsx(Bae,{selectedUser:d})})]}),N&&r.jsxs("div",{className:"mt-6 p-4 rounded-lg border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h5",{className:"font-semibold mb-3",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{children:r.jsx(Dae,{modules:a,onCreate:k})}),r.jsx("div",{children:r.jsx(Lae,{onCreate:E})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("h6",{className:"font-semibold mb-2",children:" "}),r.jsx(Rae,{modules:a})]})]})]}):r.jsx("div",{className:"text-slate-500",children:"     ."})})]})]})},Dae=({modules:e,onCreate:t})=>{const[a,n]=g.useState(""),[i,o]=g.useState("");return r.jsxs("div",{children:[r.jsx("input",{className:"w-full p-2 border rounded mb-2",placeholder:" ",value:a,onChange:d=>n(d.target.value)}),r.jsxs("select",{className:"w-full p-2 border rounded mb-2",value:i,onChange:d=>o(d.target.value),children:[r.jsx("option",{value:"",children:" "}),e.filter(d=>!d.parent_id).map(d=>r.jsx("option",{value:d.id,children:d.name},d.id))]}),r.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>{a.trim()&&(t(a.trim(),i?Number(i):null),n(""),o(""))},children:""})]})},Lae=({onCreate:e})=>{const[t,a]=g.useState(""),[n,i]=g.useState("");return r.jsxs("div",{children:[r.jsx("input",{className:"w-full p-2 border rounded mb-2",placeholder:" ",value:t,onChange:o=>a(o.target.value)}),r.jsx("input",{className:"w-full p-2 border rounded mb-2",placeholder:" (: view)",value:n,onChange:o=>i(o.target.value)}),r.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded",onClick:()=>{t.trim()&&n.trim()&&(e(t.trim(),n.trim()),a(""),i(""))},children:""})]})},Rae=({modules:e})=>{const t=e.filter(n=>!n.parent_id),a={};return e.forEach(n=>{n.parent_id&&(a[n.parent_id]=a[n.parent_id]||[],a[n.parent_id].push(n))}),r.jsx("div",{className:"space-y-2",children:t.map(n=>r.jsxs("div",{className:"border p-2 rounded",children:[r.jsx("div",{className:"font-bold",children:n.name}),r.jsx("div",{className:"mt-2 pl-4 space-y-1",children:(a[n.id]||[]).map(i=>r.jsxs("div",{className:"text-sm",children:["- ",i.name]},i.id))})]},n.id))})},$ae=({selectedUser:e})=>{const[t,a]=g.useState([]),[n,i]=g.useState("all"),[o,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{const f=await(await fetch(`${G}/api.php?module=treasuries&action=getAll`)).json();f.success&&a(f.data||[])}catch(u){console.error("Failed to fetch treasuries",u)}})()},[]),g.useEffect(()=>{(async()=>{try{const f=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();if(f.success&&f.data){const x=f.data,b=x.default_treasury_id===null||typeof x.default_treasury_id>"u"?null:Number(x.default_treasury_id);b===-1?(i("none"),d(null)):b&&b>0?(i("specific"),d(b)):i("all")}}catch(u){console.error("Failed to load defaults",u)}})()},[e]);const h=async()=>{try{let m={};try{const v=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();v.success&&v.data&&(m=v.data)}catch(b){console.error("Failed to fetch current defaults",b)}const u={user_id:e,default_treasury_id:n==="specific"?o:n==="none"?-1:null,can_change_treasury:n==="all"?1:0,default_warehouse_id:m.default_warehouse_id??null,can_change_warehouse:typeof m.can_change_warehouse<"u"?m.can_change_warehouse:1,default_sales_office_id:m.default_sales_office_id??null,can_change_sales_office:typeof m.can_change_sales_office<"u"?m.can_change_sales_office:1},x=await(await fetch(`${G}/api.php?module=permissions&action=setUserDefaults`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();x.success?T.fire("","    ","success"):T.fire("",x.message||"","error")}catch(m){console.error(m),T.fire(""," ","error")}};return r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg",children:[r.jsx("h6",{className:"font-semibold mb-2",children:" "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`tre_scope_${e}`,checked:n==="all",onChange:()=>i("all")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`tre_scope_${e}`,checked:n==="specific",onChange:()=>i("specific")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`tre_scope_${e}`,checked:n==="none",onChange:()=>i("none")}),"  "]})]}),n==="specific"&&r.jsx("div",{className:"mb-3",children:r.jsxs("select",{className:"w-full p-2 border rounded bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-right",value:o||"",onChange:m=>d(m.target.value?Number(m.target.value):null),children:[r.jsx("option",{value:"",children:"--   --"}),t.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:h,className:"px-3 py-1 bg-green-600 text-white rounded",children:"  "})})]})},zae=({selectedUser:e})=>{const[t,a]=g.useState([]),[n,i]=g.useState("all"),[o,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{const f=await(await fetch(`${G}/api.php?module=warehouses&action=getAll`)).json();f.success&&a(f.data||[])}catch(u){console.error("Failed to fetch warehouses",u)}})()},[]),g.useEffect(()=>{(async()=>{try{const f=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();if(f.success&&f.data){const x=f.data,b=x.default_warehouse_id===null||typeof x.default_warehouse_id>"u"?null:Number(x.default_warehouse_id);b===-1?(i("none"),d(null)):b&&b>0?(i("specific"),d(b)):i("all")}}catch(u){console.error("Failed to load defaults",u)}})()},[e]);const h=async()=>{try{let m={};try{const v=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();v.success&&v.data&&(m=v.data)}catch(b){console.error("Failed to fetch current defaults",b)}const u={user_id:e,default_warehouse_id:n==="specific"?o:n==="none"?-1:null,can_change_warehouse:n==="all"?1:0,default_treasury_id:m.default_treasury_id??null,can_change_treasury:typeof m.can_change_treasury<"u"?m.can_change_treasury:1,default_sales_office_id:m.default_sales_office_id??null,can_change_sales_office:typeof m.can_change_sales_office<"u"?m.can_change_sales_office:1},x=await(await fetch(`${G}/api.php?module=permissions&action=setUserDefaults`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();x.success?T.fire("","    ","success"):T.fire("",x.message||"","error")}catch(m){console.error(m),T.fire(""," ","error")}};return r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg",children:[r.jsx("h6",{className:"font-semibold mb-2",children:" "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`wh_scope_${e}`,checked:n==="all",onChange:()=>i("all")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`wh_scope_${e}`,checked:n==="specific",onChange:()=>i("specific")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`wh_scope_${e}`,checked:n==="none",onChange:()=>i("none")}),"  "]})]}),n==="specific"&&r.jsx("div",{className:"mb-3",children:r.jsxs("select",{className:"w-full p-2 border rounded bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-right",value:o||"",onChange:m=>d(m.target.value?Number(m.target.value):null),children:[r.jsx("option",{value:"",children:"--   --"}),t.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:h,className:"px-3 py-1 bg-green-600 text-white rounded",children:"  "})})]})},Bae=({selectedUser:e})=>{const[t,a]=g.useState([]),[n,i]=g.useState("all"),[o,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{const u=await(await fetch(`${G}/api.php?module=sales_offices&action=getAll`)).json();u.success&&a(u.data||[])}catch(m){console.error("Failed to fetch sales offices",m)}})()},[]),g.useEffect(()=>{(async()=>{try{const u=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();if(u.success&&u.data){const f=u.data,x=f.default_sales_office_id===null||typeof f.default_sales_office_id>"u"?null:Number(f.default_sales_office_id);x===-1?(i("none"),d(null)):x&&x>0?(i("specific"),d(x)):i("all")}}catch(m){console.error("Failed to load sales office defaults",m)}})()},[e]);const h=async()=>{try{let m={};try{const v=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults&user_id=${e}`)).json();v.success&&v.data&&(m=v.data)}catch(b){console.error("Failed to fetch current defaults",b)}const u={user_id:e,default_sales_office_id:n==="specific"?o:n==="none"?-1:null,can_change_sales_office:n==="all"?1:0,default_warehouse_id:m.default_warehouse_id??null,can_change_warehouse:typeof m.can_change_warehouse<"u"?m.can_change_warehouse:1,default_treasury_id:m.default_treasury_id??null,can_change_treasury:typeof m.can_change_treasury<"u"?m.can_change_treasury:1},x=await(await fetch(`${G}/api.php?module=permissions&action=setUserDefaults`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();x.success?T.fire("","     ","success"):T.fire("",x.message||"","error")}catch(m){console.error(m),T.fire(""," ","error")}};return r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg",children:[r.jsx("h6",{className:"font-semibold mb-2",children:"  "}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`so_scope_${e}`,checked:n==="all",onChange:()=>i("all")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`so_scope_${e}`,checked:n==="specific",onChange:()=>i("specific")}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:`so_scope_${e}`,checked:n==="none",onChange:()=>i("none")}),"  "]})]}),n==="specific"&&r.jsx("div",{className:"mb-3",children:r.jsxs("select",{className:"w-full p-2 border rounded bg-white dark:bg-slate-900 text-slate-900 dark:text-white text-right",value:o||"",onChange:m=>d(m.target.value?Number(m.target.value):null),children:[r.jsx("option",{value:"",children:"--   --"}),t.map(m=>r.jsx("option",{value:m.id,children:m.name},m.id))]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:h,className:"px-3 py-1 bg-green-600 text-white rounded",children:"  "})})]})},Uae=({initialView:e})=>{const[t,a]=g.useState(e||"users"),[n,i]=g.useState(""),[o,d]=g.useState(!1),[h,m]=g.useState(null),[u,f]=g.useState([]),[x,b]=g.useState({name:"",username:"",role:"representative",phone:"",password:""}),[v,N]=g.useState({}),j=[{slug:"dashboard",label:" "},{slug:"crm",label:" "},{slug:"inventory",label:""},{slug:"sales",label:""},{slug:"hrm",label:" "},{slug:"finance",label:""}];g.useEffect(()=>{e&&a(e),(async()=>{try{const I=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json();if(I.success){f(I.data||[]);const L={};j.forEach(te=>L[te.slug]=!1),N(L)}}catch(O){console.error("Failed to fetch users:",O)}})()},[e]);const _=(S=null)=>{if(S){m(S),b({name:S.name,username:S.username,role:S.role===" "?"admin":S.role,phone:S.phone,password:""});try{const O=S.permissions?typeof S.permissions=="string"?JSON.parse(S.permissions):S.permissions:{},I={};j.forEach(L=>I[L.slug]=!!O[L.slug]),N(I)}catch{N({})}}else{m(null),b({name:"",username:"",role:"representative",phone:"",password:""});const O={};j.forEach(I=>O[I.slug]=!1),N(O)}d(!0)},k=async S=>{if(S.preventDefault(),!x.name)return;const O=x.role==="admin"?"admin":x.role==="accountant"?"accountant":"representative";try{const I=h?`${G}/api.php?module=users&action=update`:`${G}/api.php?module=users&action=create`,L=h?{...x,role:O,id:h.id}:{...x,role:O};L.password||delete L.password;const te={...L,permissions:JSON.stringify(v)},B=await(await fetch(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)})).json();B.success?((async()=>{const le=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json();le.success&&f(le.data)})(),d(!1)):T.fire({icon:"error",title:" ",text:B.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}},E=async S=>{const O=u.find(I=>I.id===S);O&&T.fire({title:" ",text:`        "${O.name}"`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async I=>{if(I.isConfirmed)try{const te=await(await fetch(`${G}/api.php?module=users&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:S})})).json();te.success?((async()=>{const X=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json();X.success&&f(X.data)})(),T.fire(" !",`   "${O.name}" .`,"success")):T.fire({icon:"error",title:" ",text:te.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}})},C=u.filter(S=>(S.name||"").toLowerCase().includes(n.toLowerCase())||((S.phone||"")+"").includes(n)||(S.username||"").toLowerCase().includes(n.toLowerCase()));return r.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:" "}),r.jsxs("div",{className:"flex gap-1 p-1.5 rounded-2xl border border-card shadow-sm",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("button",{onClick:()=>a("users"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="users"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("permissions"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="permissions"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("logs"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="logs"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "})]})]}),t==="users"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm overflow-hidden card",children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex flex-col md:flex-row items-center justify-between gap-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"relative flex-1 w-full max-w-md",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"     ...",className:"w-full pr-10 pl-4 py-2.5 border-none rounded-2xl text-xs font-bold focus:ring-2 ring-blue-500/20 shadow-sm text-right card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},value:n,onChange:S=>i(S.target.value)})]}),r.jsxs("button",{onClick:()=>_(),className:"w-full md:w-auto flex items-center justify-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[r.jsx(_m,{size:18}),"   "]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:C.length>0?C.map(S=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:S.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:S.username}),r.jsx("td",{className:"px-6 py-4 text-xs font-bold",children:S.role}),r.jsx("td",{className:"px-6 py-4 text-xs",children:S.phone}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 px-3 py-1 rounded-lg text-[10px] font-black",children:S.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>E(S.id),className:"p-2 text-muted hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-xl transition-all",children:r.jsx(Gr,{size:16})}),r.jsx("button",{onClick:()=>_(S),className:"p-2 text-muted hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",children:r.jsx(ma,{size:16})}),r.jsx("button",{className:"p-2 text-muted hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",children:r.jsx(ha,{size:16})})]})})]},S.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-muted font-bold",children:"    "})})})]})})]})}),t==="permissions"&&r.jsx("div",{className:"animate-in fade-in",children:r.jsx(Pae,{})}),t==="logs"&&r.jsxs("div",{className:"rounded-[3rem] p-24 border border-card card text-center animate-in slide-in-from-bottom duration-300 shadow-sm flex flex-col items-center justify-center",style:{color:"var(--text)"},children:[r.jsx("div",{className:"p-8 rounded-[3rem] mb-6",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsx(vO,{className:"w-16 h-16 opacity-20 text-blue-500"})}),r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-2",children:"   (Audit Log)"}),r.jsx("p",{className:"text-sm font-medium max-w-sm",children:"         (  )     ."})]}),o&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:h?"  ":"  "}),r.jsx("button",{onClick:()=>d(!1),className:"text-muted hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:k,className:"p-8 space-y-6 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",required:!0,value:x.name,onChange:S=>b({...x,name:S.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"text",value:x.phone,onChange:S=>b({...x,phone:S.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:x.role,onChange:S=>b({...x,role:S.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"representative",children:" "}),r.jsx("option",{value:"accountant",children:""}),r.jsx("option",{value:"admin",children:" "})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"text",required:!0,value:x.username,onChange:S=>b({...x,username:S.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("div",{})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"password",placeholder:h?"      ":"   (     )",value:x.password,onChange:S=>b({...x,password:S.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:j.map(S=>r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:!!v[S.slug],onChange:O=>N(I=>({...I,[S.slug]:O.target.checked}))})," ",S.label]},S.slug))})]}),r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",h?" ":"  "]})]})]})})]})},qae=({initialView:e="treasuries"})=>{const[t,a]=g.useState("treasuries"),[n,i]=g.useState(""),[o,d]=g.useState(!1),[h,m]=g.useState(!1),[u,f]=g.useState(null),[x,b]=g.useState({amount:"",treasury_id:"",notes:""}),[v,N]=g.useState({amount:"",treasury_id:"",notes:""}),[j,_]=g.useState({amount:"",treasury_id:"",supplier_id:"",notes:""}),[k,E]=g.useState({amount:"",from_treasury_id:"",to_treasury_id:"",notes:""}),[C,S]=g.useState(!1),[O,I]=g.useState(null),[L,te]=g.useState(null),H=".",[B,X]=g.useState([]),[V,le]=g.useState([]),[J,Z]=g.useState([]),[M,P]=g.useState(!1),[W,se]=g.useState([]),[ue,D]=g.useState(null),[U,re]=g.useState([]),[he,Ne]=g.useState([]),[Y,me]=g.useState(!1),[z,F]=g.useState(null),[ye,Ae]=g.useState({code:"",name:"",type:"asset",parent_id:""}),[be,Me]=g.useState(!1),[Oe,ve]=g.useState({entry_date:new Date().toISOString().slice(0,10),memo:"",posted:!0}),[$,ce]=g.useState([{account_id:"",debit:"",credit:"",memo:""}]),[ie,oe]=g.useState(!1),[$e,Xe]=g.useState(null),[et,nt]=g.useState([]),[je,lt]=g.useState({name:"",type:""});g.useEffect(()=>{(async()=>{try{const[ke,Ce]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then(ot=>ot.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(ot=>ot.json()).catch(()=>({success:!1}))]),He=ke&&ke.success?ke.data||[]:[],Ge=Ce&&Ce.success&&Ce.data||null;if(Ge&&Ge.default_treasury_id&&!Ge.can_change_treasury?X(He.filter(ot=>Number(ot.id)===Number(Ge.default_treasury_id))):X(He),Ge&&Ge.default_treasury_id){const ot=String(Ge.default_treasury_id);b(at=>({...at,treasury_id:at.treasury_id||ot})),N(at=>({...at,treasury_id:at.treasury_id||ot})),_(at=>({...at,treasury_id:at.treasury_id||ot})),E(at=>({...at,from_treasury_id:at.from_treasury_id||ot})),D(Ge)}}catch(ke){console.error("Failed to fetch treasuries:",ke)}})(),(async()=>{try{const Ce=await(await fetch(`${G}/api.php?module=suppliers&action=getAll`)).json();Ce.success&&se(Ce.data||[])}catch(ke){console.error("Failed to fetch suppliers:",ke)}})(),(async()=>{try{const Ce=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults`)).json();if(Ce&&Ce.success&&(D(Ce.data||null),Ce.data&&Ce.data.default_treasury_id)){const He=String(Ce.data.default_treasury_id);b(Ge=>({...Ge,treasury_id:Ge.treasury_id||He})),N(Ge=>({...Ge,treasury_id:Ge.treasury_id||He})),_(Ge=>({...Ge,treasury_id:Ge.treasury_id||He})),E(Ge=>({...Ge,from_treasury_id:Ge.from_treasury_id||He}))}}catch(ke){console.error("Failed to fetch user defaults",ke)}})()},[]),g.useEffect(()=>{a(e==="transactions"?"transactions":"treasuries")},[e]);const pt=async()=>{try{const[pe,ut]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then(Ce=>Ce.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(Ce=>Ce.json()).catch(()=>({success:!1}))]),ee=pe&&pe.success?pe.data||[]:[],ke=ut&&ut.success&&ut.data||null;ke&&ke.default_treasury_id&&!ke.can_change_treasury?X(ee.filter(Ce=>Number(Ce.id)===Number(ke.default_treasury_id))):X(ee)}catch(pe){console.error("Failed to fetch treasuries:",pe)}},ae=async()=>{try{const ut=await(await fetch(`${G}/api.php?module=accounts&action=getAll`)).json();ut.success&&re(ut.data||[])}catch(pe){console.error("Failed to fetch accounts",pe)}},tt=async()=>{try{const ut=await(await fetch(`${G}/api.php?module=journal&action=getAll`)).json();ut.success&&Ne(ut.data||[])}catch(pe){console.error("Failed to fetch journal entries",pe)}};g.useEffect(()=>{t==="accounts"&&ae(),t==="journal"&&tt()},[t]);const ne=pe=>{pe?(F(pe),Ae({code:pe.code||"",name:pe.name||"",type:pe.type||"asset",parent_id:pe.parent_id?String(pe.parent_id):""})):(F(null),Ae({code:"",name:"",type:"asset",parent_id:""})),me(!0)},Ee=async pe=>{pe.preventDefault();try{const ut=z?`${G}/api.php?module=accounts&action=update`:`${G}/api.php?module=accounts&action=create`,ee={code:ye.code,name:ye.name,type:ye.type,parent_id:ye.parent_id?Number(ye.parent_id):null};z&&(ee.id=z.id);const Ce=await(await fetch(ut,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).json();Ce.success?(me(!1),await ae()):T.fire("",Ce.message||"  .","error")}catch{T.fire("","  .","error")}},rt=async pe=>{T.fire({title:" ",text:"    ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(async ut=>{if(ut.isConfirmed)try{const ke=await(await fetch(`${G}/api.php?module=accounts&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:pe})})).json();ke.success?ae():T.fire("",ke.message||"  .","error")}catch{T.fire("","  .","error")}})},Je=()=>{ce(pe=>[...pe,{account_id:"",debit:"",credit:"",memo:""}])},st=(pe,ut,ee)=>{ce(ke=>ke.map((Ce,He)=>He===pe?{...Ce,[ut]:ee}:Ce))},Ze=pe=>{ce(ut=>ut.filter((ee,ke)=>ke!==pe))},ct=async pe=>{pe.preventDefault();const ut=$.filter(Ce=>Ce.account_id).map(Ce=>({account_id:Number(Ce.account_id),debit:Number(Ce.debit||0),credit:Number(Ce.credit||0),memo:Ce.memo||""})),ee=ut.reduce((Ce,He)=>Ce+Number(He.debit||0),0),ke=ut.reduce((Ce,He)=>Ce+Number(He.credit||0),0);if(ut.length<2||ee.toFixed(2)!==ke.toFixed(2)){T.fire("","     ( = ).","warning");return}try{const He=await(await fetch(`${G}/api.php?module=journal&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_date:Oe.entry_date,memo:Oe.memo,posted:Oe.posted?1:0,lines:ut})})).json();He.success?(Me(!1),ce([{account_id:"",debit:"",credit:"",memo:""}]),await tt()):T.fire("",He.message||"  .","error")}catch{T.fire("","  .","error")}},ht=async pe=>{try{const ee=await(await fetch(`${G}/api.php?module=journal&action=getById&id=${pe.id}`)).json();ee.success&&(Xe(ee.data.entry||pe),nt(ee.data.lines||[]),oe(!0))}catch(ut){console.error("Failed to load journal entry",ut)}},Re=async pe=>{try{(await(await fetch(`${G}/api.php?module=journal&action=post`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:pe})})).json()).success&&tt()}catch(ut){console.error("Failed to post journal entry",ut)}},xe=pe=>{f(pe),m(!0)},de=()=>{m(!1),f(null),b({amount:"",treasury_id:"",notes:""}),N({amount:"",treasury_id:"",notes:""}),_({amount:"",treasury_id:"",supplier_id:"",notes:""}),E({amount:"",from_treasury_id:"",to_treasury_id:"",notes:""})},it=(pe=null)=>{pe?(I(pe),lt({name:pe.name,type:pe.type})):(I(null),lt({name:"",type:""})),d(!0)},ft=async pe=>{if(pe.preventDefault(),!!je.name)try{const ut=O?`${G}/api.php?module=treasuries&action=update`:`${G}/api.php?module=treasuries&action=create`,ee=O?{...je,id:O.id}:je,Ce=await(await fetch(ut,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).json();Ce.success?(await pt(),d(!1)):T.fire({icon:"error",title:" ",text:Ce.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}},jt=async pe=>{const ut=B.find(ee=>ee.id===pe);if(ut){if(ut.balance!==0){T.fire({icon:"error",title:" ",text:`    "${ut.name}"    .  : ${ut.balance.toLocaleString()} ${H}`,confirmButtonText:""});return}T.fire({title:" ",text:`      "${ut.name}"     .`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async ee=>{if(ee.isConfirmed)try{const Ce=await(await fetch(`${G}/api.php?module=treasuries&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:pe})})).json();Ce.success?(await pt(),T.fire(" !",`   "${ut.name}" .`,"success")):T.fire({icon:"error",title:" ",text:Ce.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}})}},mt=async pe=>{te(pe),S(!0),P(!0),Z([]);try{const ee=await(await fetch(`${G}/api.php?module=transactions&action=getByTreasuryId&id=${pe.id}`)).json();ee.success?Z(ee.data||[]):(console.error("Failed to fetch treasury transactions:",ee.message),T.fire("","    .","error"))}catch(ut){console.error("Error fetching treasury transactions:",ut),T.fire("","  .","error")}finally{P(!1)}},we=(pe,ut)=>{const ee={deposit:" ",expense:"",supplier_payment:" ",transfer_out:" ",transfer_in:" ",salary:" ",advance:" ",rep_penalty:"  ",bonus:"",penalty:"",sale:" ",purchase:" ",payment_in:" ",payment_out:" ",return_in:" ",return_out:" ",rep_assignment:"  ",rep_payment_in:"  ",rep_payment_out:" ",rep_settlement:" "};if(ut)try{const ke=JSON.parse(ut);if(ke.subtype&&ee[ke.subtype])return ee[ke.subtype]}catch{}return ee[pe]||pe},Be=pe=>{if(!pe)return"";try{const ut=JSON.parse(pe);return ut.notes||ut.note||(typeof ut=="string"?ut:"")}catch{return pe}},gt=()=>{if(!L)return;const pe=window.open("","_blank");if(!pe){T.fire("","      .","warning");return}let ut="";J.length>0?ut=J.map(ke=>`
            <tr>
                <td>${new Date(ke.transaction_date).toLocaleString("ar-EG")}</td>
                <td>${we(ke.type,ke.details)}</td>
                <td>${Be(ke.details)}</td>
                <td style="color: ${ke.amount>=0?"green":"red"}; font-weight: bold; text-align: left; direction: ltr;">${parseFloat(ke.amount).toLocaleString()} ${H}</td>
            </tr>
        `).join(""):ut='<tr><td colspan="4" style="text-align: center;">   </td></tr>';const ee=`<html><head><title>  : ${L.name}</title><style>body { font-family: 'Cairo', sans-serif; direction: rtl; padding: 20px; } table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 12px; } th, td { border: 1px solid #ddd; padding: 8px; text-align: right; } th { background-color: #f2f2f2; } h1, h2 { text-align: center; color: #333; } .header-info { display: flex; justify-content: space-between; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #eee; } @media print { body { -webkit-print-color-adjust: exact; } }</style><link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet"></head><body><h1>  </h1><h2>${L.name}</h2><div class="header-info"><p><strong> :</strong> ${parseFloat(L.balance).toLocaleString()} ${H}</p><p><strong> :</strong> ${new Date().toLocaleString("ar-EG")}</p></div><table><thead><tr><th></th><th> </th><th></th><th></th></tr></thead><tbody>${ut}</tbody></table></body></html>`;pe.document.write(ee),pe.document.close(),pe.focus(),setTimeout(()=>{pe.print(),pe.close()},500)},wt=B.filter(pe=>pe.name.toLowerCase().includes(n.toLowerCase())),xt=U.filter(pe=>String(pe.name||"").toLowerCase().includes(n.toLowerCase())||String(pe.code||"").toLowerCase().includes(n.toLowerCase())),St=pe=>({asset:"",liability:"",equity:" ",income:"",expense:""})[pe]||pe,$t=$.reduce((pe,ut)=>(pe.debit+=Number(ut.debit||0),pe.credit+=Number(ut.credit||0),pe),{debit:0,credit:0}),Rr=async pe=>{pe.preventDefault();let ut=`${G}/api.php?module=transactions&action=create`,ee={},ke=null,Ce=0;switch(u){case"expense":ee={...x,type:"expense",amount:-Math.abs(parseFloat(x.amount))},ke=B.find(He=>He.id==x.treasury_id),Ce=parseFloat(x.amount);break;case"deposit":ee={...v,type:"deposit",amount:Math.abs(parseFloat(v.amount))};break;case"payment":ee={...j,type:"supplier_payment",amount:-Math.abs(parseFloat(j.amount)),related_to_type:"supplier",related_to_id:j.supplier_id},ke=B.find(He=>He.id==j.treasury_id),Ce=parseFloat(j.amount);break;case"transfer":if(ut=`${G}/api.php?module=transactions&action=createTransfer`,ee={...k,amount:Math.abs(parseFloat(k.amount))},ke=B.find(He=>He.id==k.from_treasury_id),Ce=parseFloat(k.amount),k.from_treasury_id===k.to_treasury_id){T.fire("","     .","error");return}break;default:return}if(u==="expense"){if(!x.treasury_id){T.fire(" ","   .","warning");return}if(!x.notes||String(x.notes).trim()===""){T.fire(" ","      .","warning");return}}if(u==="deposit"){if(!v.treasury_id){T.fire(" ","   .","warning");return}if(!v.notes||String(v.notes).trim()===""){T.fire(" ","      .","warning");return}}if(u==="payment"){if(!j.treasury_id){T.fire(" ","   .","warning");return}if(!j.notes||String(j.notes).trim()===""){T.fire(" ","      .","warning");return}}if(u==="transfer"){if(!k.from_treasury_id||!k.to_treasury_id){T.fire(" ","    .","warning");return}if(!k.notes||String(k.notes).trim()===""){T.fire(" ","      .","warning");return}}if(ke&&Ce>ke.balance){T.fire("  ",`   "${ke.name}"  .  : ${ke.balance.toLocaleString()} ${H}`,"error");return}try{const Ge=await(await fetch(ut,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)})).json();Ge.success?(T.fire("!","   .","success"),de(),await pt()):T.fire("",Ge.message||" .    .","error")}catch{T.fire("  ","  .","error")}},kr=({icon:pe,title:ut,description:ee,onClick:ke,colorClass:Ce})=>r.jsx("button",{onClick:ke,className:`text-right p-5 rounded-3xl border transition-all hover:shadow-lg hover:-translate-y-1 ${Ce}`,children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"bg-white/10 p-3 rounded-2xl",children:r.jsx(pe,{size:24,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-black text-white",children:ut}),r.jsx("p",{className:"text-xs text-white/70",children:ee})]})]})});return r.jsxs("div",{className:"space-y-6 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-center text-right",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold mt-1",children:"    "})]}),r.jsxs("div",{className:"flex gap-1 p-1.5 rounded-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("button",{onClick:()=>a("treasuries"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="treasuries"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("transactions"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="transactions"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("accounts"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="accounts"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "}),r.jsx("button",{onClick:()=>a("journal"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="journal"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:" "})]})]}),t==="treasuries"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm overflow-hidden card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 w-full max-w-md",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-2.5 bg-white dark:bg-slate-900 border-none rounded-2xl text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white text-right",value:n,onChange:pe=>i(pe.target.value)})]}),r.jsxs("button",{onClick:()=>it(),className:"w-full md:w-auto flex items-center justify-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[r.jsx(Or,{size:18}),"   "]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:wt.length>0?wt.map(pe=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:pe.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-bold text-slate-500",children:pe.type}),r.jsxs("td",{className:"px-6 py-4 font-black text-blue-600 dark:text-blue-400",children:[(Number(pe.balance)||0).toLocaleString()," ",H]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>jt(pe.id),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-xl transition-all",title:" ",children:r.jsx(Gr,{size:16})}),r.jsx("button",{onClick:()=>it(pe),className:"p-2 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:" ",children:r.jsx(ma,{size:16})}),r.jsx("button",{onClick:()=>mt(pe),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",title:" ",children:r.jsx(ha,{size:16})})]})})]},pe.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-6 py-10 text-center text-slate-400 font-bold",children:"    "})})})]})})]})}),t==="transactions"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(kr,{icon:nL,title:" ",description:"    ",onClick:()=>xe("deposit"),colorClass:"bg-gradient-to-br from-emerald-500 to-green-600 border-emerald-600"}),r.jsx(kr,{icon:dL,title:" ",description:"    ",onClick:()=>xe("expense"),colorClass:"bg-gradient-to-br from-rose-500 to-red-600 border-rose-600"}),r.jsx(kr,{icon:Ji,title:" ",description:"   ",onClick:()=>xe("payment"),colorClass:"bg-gradient-to-br from-amber-500 to-orange-600 border-amber-600"}),r.jsx(kr,{icon:vc,title:"  ",description:"    ",onClick:()=>xe("transfer"),colorClass:"bg-gradient-to-br from-blue-500 to-indigo-600 border-blue-600"})]})}),t==="accounts"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm overflow-hidden card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"relative flex-1 w-full max-w-md",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-2.5 bg-white dark:bg-slate-900 border-none rounded-2xl text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white text-right",value:n,onChange:pe=>i(pe.target.value)})]}),r.jsxs("button",{onClick:()=>ne(),className:"w-full md:w-auto flex items-center justify-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[r.jsx(Or,{size:18}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:xt.length>0?xt.map(pe=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:pe.code}),r.jsx("td",{className:"px-6 py-4",children:pe.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-bold text-slate-500",children:St(pe.type)}),r.jsx("td",{className:"px-6 py-4 text-xs text-slate-500",children:pe.parent_name||""}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>rt(pe.id),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded-xl transition-all",title:" ",children:r.jsx(Gr,{size:16})}),r.jsx("button",{onClick:()=>ne(pe),className:"p-2 text-slate-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:" ",children:r.jsx(ma,{size:16})})]})})]},pe.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-slate-400 font-bold",children:"   "})})})]})})]})}),t==="journal"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm overflow-hidden card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsx("div",{className:"text-sm text-slate-500 font-bold",children:"   "}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:async()=>{U.length===0&&await ae(),ve({entry_date:new Date().toISOString().slice(0,10),memo:"",posted:!0}),ce([{account_id:"",debit:"",credit:"",memo:""}]),Me(!0)},className:"flex items-center gap-2 bg-accent text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 active:scale-95 transition-all",children:[r.jsx(Or,{size:18}),"  "]}),r.jsx("button",{onClick:tt,className:"flex items-center gap-2 px-4 py-2.5 rounded-2xl text-sm font-black border border-card",children:""})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:he.length>0?he.map(pe=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:pe.id}),r.jsx("td",{className:"px-6 py-4 text-xs",children:pe.entry_date}),r.jsx("td",{className:"px-6 py-4",children:pe.memo||""}),r.jsx("td",{className:"px-6 py-4 text-xs font-bold",children:Number(pe.posted)===1?"":" "}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>ht(pe),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",title:" ",children:r.jsx(ha,{size:16})}),Number(pe.posted)!==1&&r.jsx("button",{onClick:()=>Re(pe.id),className:"p-2 text-slate-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-xl transition-all",title:" ",children:r.jsx(yr,{size:16})})]})})]},pe.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-10 text-center text-slate-400 font-bold",children:"   "})})})]})})]})}),C&&L&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(mR,{className:"text-blue-500"}),"   : ",L.name]}),r.jsxs("div",{children:[r.jsx("button",{onClick:gt,className:"text-slate-400 hover:text-blue-500 transition-colors p-2 rounded-full mr-2",title:" ",children:r.jsx(fn,{size:20})}),r.jsx("button",{onClick:()=>S(!1),className:"text-slate-400 hover:text-rose-500 transition-colors p-2 rounded-full",children:r.jsx(It,{size:24})})]})]}),r.jsxs("div",{className:"p-8 text-right space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-2xl flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-400",children:"  "}),r.jsxs("span",{className:"text-2xl font-black text-blue-600",children:[L.balance.toLocaleString()," ",H]})]}),r.jsx("div",{className:"border rounded-2xl overflow-hidden dark:border-slate-700 max-h-96 overflow-y-auto",children:M?r.jsx("div",{className:"p-10 text-center text-slate-400",children:"  ..."}):J.length>0?r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-4 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-4 py-3 font-bold",children:"/"}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:J.map(pe=>r.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/50",children:[r.jsx("td",{className:"px-4 py-3 text-xs",children:new Date(pe.transaction_date).toLocaleString("ar-EG")}),r.jsx("td",{className:"px-4 py-3 font-bold",children:we(pe.type,pe.details)}),r.jsx("td",{className:"px-4 py-3 text-xs",children:Be(pe.details)}),r.jsxs("td",{className:`px-4 py-3 font-black ${pe.amount>=0?"text-emerald-500":"text-rose-500"}`,children:[parseFloat(pe.amount).toLocaleString()," ",H]})]},pe.id))})]}):r.jsx("div",{className:"p-10 text-center text-slate-400 text-xs italic",children:"       ."})})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:O?"  ":"  "}),r.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ft,className:"p-8 space-y-6 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  /  "}),r.jsx("input",{type:"text",required:!0,value:je.name,onChange:pe=>lt({...je,name:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:je.type,onChange:pe=>lt({...je,type:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" ()"}),r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"",children:" "})]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",O?" ":" "]})]})]})}),h&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:[u==="deposit"&&"  ",u==="expense"&&"  ",u==="payment"&&"  ",u==="transfer"&&"  "]}),r.jsx("button",{onClick:de,className:"text-slate-400 hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:Rr,className:"p-8 space-y-4 text-right",children:[u==="deposit"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"number",required:!0,value:v.amount,onChange:pe=>N({...v,amount:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:v.treasury_id,onChange:pe=>N({...v,treasury_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),B.map(pe=>r.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"/"}),r.jsx("input",{type:"text",required:!0,value:v.notes,onChange:pe=>N({...v,notes:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]})]}),u==="expense"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"number",required:!0,value:x.amount,onChange:pe=>b({...x,amount:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:x.treasury_id,onChange:pe=>b({...x,treasury_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),B.map(pe=>r.jsxs("option",{value:pe.id,children:[pe.name," (: ",pe.balance.toLocaleString(),")"]},pe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"/"}),r.jsx("input",{type:"text",required:!0,value:x.notes,onChange:pe=>b({...x,notes:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]})]}),u==="payment"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"number",required:!0,value:j.amount,onChange:pe=>_({...j,amount:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:j.treasury_id,onChange:pe=>_({...j,treasury_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),B.map(pe=>r.jsxs("option",{value:pe.id,children:[pe.name," (: ",pe.balance.toLocaleString(),")"]},pe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:j.supplier_id,onChange:pe=>_({...j,supplier_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),W.map(pe=>{var ut;return r.jsxs("option",{value:pe.id,children:[pe.name," (: ",((ut=pe.balance)==null?void 0:ut.toLocaleString())||0,")"]},pe.id)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"text",value:j.notes,onChange:pe=>_({...j,notes:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]})]}),u==="transfer"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"number",required:!0,value:k.amount,onChange:pe=>E({...k,amount:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:k.from_treasury_id,onChange:pe=>E({...k,from_treasury_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),B.map(pe=>r.jsxs("option",{value:pe.id,children:[pe.name," (: ",pe.balance.toLocaleString(),")"]},pe.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsxs("select",{required:!0,value:k.to_treasury_id,onChange:pe=>E({...k,to_treasury_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:" "}),B.filter(pe=>pe.id!=k.from_treasury_id).map(pe=>r.jsx("option",{value:pe.id,children:pe.name},pe.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"/"}),r.jsx("input",{type:"text",required:!0,value:k.notes,onChange:pe=>E({...k,notes:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]})]}),r.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:" "})]})]})}),Y&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:z?" ":"  "}),r.jsx("button",{onClick:()=>me(!1),className:"text-slate-400 hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:Ee,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"text",required:!0,value:ye.code,onChange:pe=>Ae({...ye,code:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsxs("select",{value:ye.type,onChange:pe=>Ae({...ye,type:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"asset",children:""}),r.jsx("option",{value:"liability",children:""}),r.jsx("option",{value:"equity",children:" "}),r.jsx("option",{value:"income",children:""}),r.jsx("option",{value:"expense",children:""})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"text",required:!0,value:ye.name,onChange:pe=>Ae({...ye,name:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:"  ()"}),r.jsxs("select",{value:ye.parent_id,onChange:pe=>Ae({...ye,parent_id:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1",children:[r.jsx("option",{value:"",children:""}),U.filter(pe=>!z||pe.id!==z.id).map(pe=>r.jsxs("option",{value:pe.id,children:[pe.code," - ",pe.name]},pe.id))]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18}),"  "]})]})]})}),be&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"  "}),r.jsx("button",{onClick:()=>Me(!1),className:"text-slate-400 hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ct,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:" "}),r.jsx("input",{type:"date",required:!0,value:Oe.entry_date,onChange:pe=>ve({...Oe,entry_date:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500",children:""}),r.jsx("input",{type:"text",value:Oe.memo,onChange:pe=>ve({...Oe,memo:pe.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-3 px-4 text-sm mt-1"})]})]}),r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-500",children:[r.jsx("input",{type:"checkbox",checked:Oe.posted,onChange:pe=>ve({...Oe,posted:pe.target.checked})}),"   "]}),r.jsxs("div",{className:"border rounded-2xl overflow-hidden dark:border-slate-700",children:[r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:$.map((pe,ut)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("select",{value:pe.account_id,onChange:ee=>st(ut,"account_id",ee.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm",children:[r.jsx("option",{value:"",children:" "}),U.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.code," - ",ee.name]},ee.id))]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",value:pe.debit,onChange:ee=>st(ut,"debit",ee.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",value:pe.credit,onChange:ee=>st(ut,"credit",ee.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"text",value:pe.memo,onChange:ee=>st(ut,"memo",ee.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-xl py-2 px-3 text-sm"})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("button",{type:"button",onClick:()=>Ze(ut),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition-all",children:r.jsx(Gr,{size:16})})})]},ut))})]}),r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("button",{type:"button",onClick:Je,className:"flex items-center gap-2 px-4 py-2 rounded-2xl text-sm font-black border border-card",children:[r.jsx(Or,{size:16}),"  "]}),r.jsxs("div",{className:"text-xs text-slate-500 font-bold",children:[":  ",$t.debit.toLocaleString()," |  ",$t.credit.toLocaleString()]})]})]}),r.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:" "})]})]})}),ie&&$e&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:["  #",$e.id]}),r.jsx("button",{onClick:()=>oe(!1),className:"text-slate-400 hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs text-slate-500 font-bold",children:[r.jsxs("div",{children:[": ",r.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:$e.entry_date})]}),r.jsxs("div",{children:[": ",r.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:Number($e.posted)===1?"":" "})]}),r.jsxs("div",{children:[": ",r.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:$e.memo||""})]})]}),r.jsx("div",{className:"border rounded-2xl overflow-hidden dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""}),r.jsx("th",{className:"px-4 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:et.map(pe=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3",children:pe.account_code?`${pe.account_code} - ${pe.account_name}`:pe.account_name}),r.jsx("td",{className:"px-4 py-3",children:Number(pe.debit||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3",children:Number(pe.credit||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3",children:pe.memo||""})]},pe.id))})]})})]})]})})]})},wh=[{value:0,label:""},{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""},{value:6,label:""}],gI=({initialTab:e})=>{const[t,a]=g.useState("devices"),[n,i]=g.useState([]),[o,d]=g.useState([]),[h,m]=g.useState([]),[u,f]=g.useState([]),[x,b]=g.useState([]),[v,N]=g.useState([]),[j,_]=g.useState([]),[k,E]=g.useState([]),[C,S]=g.useState([]),[O,I]=g.useState([]),[L,te]=g.useState({name:"",vendor:"hikvision",protocol:"http",driver:"hikvision_isapi",driver_config:"",ip:"",port:"80",serial_number:"",username:"",password:"",location:"",enabled:!0}),[H,B]=g.useState({device_id:"",employee_id:"",device_user_id:""}),[X,V]=g.useState({device_id:"",worker_id:"",device_user_id:""}),[le,J]=g.useState({device_id:"",start_date:"",end_date:""}),[Z,M]=g.useState(!1),[P,W]=g.useState({name:"",start_time:"09:00",end_time:"17:00",break_minutes:"0",grace_in_minutes:"0",grace_out_minutes:"0",late_penalty_per_minute:"0",early_leave_penalty_per_minute:"0",absence_penalty_per_day:"0",overtime_rate_per_hour:"0",is_night_shift:!1,weekly_off_days:[]}),[se,ue]=g.useState({employee_id:"",shift_id:"",day_of_week:"0",valid_from:"",valid_to:""}),[D,U]=g.useState({name:"",holiday_date:"",is_paid:!0}),[re,he]=g.useState({start_date:"",end_date:""}),[Ne,Y]=g.useState({start_date:"",end_date:""}),[me,z]=g.useState(""),[F,ye]=g.useState({network:"192.168.1",start:"1",end:"254",ports:"80,8000,4370"}),[Ae,be]=g.useState([]),[Me,Oe]=g.useState(!1),ve=g.useMemo(()=>({hikvision:"Hikvision",zkteco:"ZKTeco",adms:"ADMS",other:""}),[]),$=g.useMemo(()=>({adms_push:"Push (ADMS/ZKTeco)",hikvision_isapi:"Hikvision ISAPI (Pull)",http_json_pull:"HTTP JSON (Pull)",manual:"Manual/CSV"}),[]),ce=ae=>ae==="hikvision"?"hikvision_isapi":ae==="adms"||ae==="zkteco"?"adms_push":"manual",ie=async()=>{try{const[ae,tt,ne,Ee,rt,Je,st,Ze]=await Promise.all([fetch(`${G}/api.php?module=employees&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=workers&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_devices&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_device_users&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_device_workers&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_shifts&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_schedules&action=getAll`).then(ct=>ct.json()),fetch(`${G}/api.php?module=attendance_holidays&action=getAll`).then(ct=>ct.json())]);i(ae.success?ae.data:[]),d(tt.success?tt.data:[]),m(ne.success?ne.data:[]),f(Ee.success?Ee.data:[]),b(rt.success?rt.data:[]),N(Je.success?Je.data:[]),_(st.success?st.data:[]),E(Ze.success?Ze.data:[])}catch{T.fire("","   .","error")}};g.useEffect(()=>{ie()},[]),g.useEffect(()=>{e&&["devices","shifts","schedules","holidays","logs","summary"].includes(e)&&a(e)},[e]);const oe=async(ae,tt,ne)=>{try{const rt=await(await fetch(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(tt)})).json();rt.success?ne():T.fire("",rt.message||" .","error")}catch{T.fire("","  .","error")}},$e=async ae=>{if(!me){T.fire("","   .","warning");return}const Ee=(await ae.text()).split(/\r?\n/).filter(rt=>rt.trim()).map(rt=>{var st,Ze,ct;const Je=rt.split(",");return{device_id:Number(me),device_user_id:(st=Je[0])==null?void 0:st.trim(),check_time:(Ze=Je[1])==null?void 0:Ze.trim(),direction:((ct=Je[2])==null?void 0:ct.trim())||"unknown",source:"csv"}}).filter(rt=>rt.device_user_id&&rt.check_time);if(Ee.length===0){T.fire("","     .","warning");return}await oe(`${G}/api.php?module=attendance_logs&action=bulkInsert`,{items:Ee},()=>T.fire("","   .","success"))},Xe=async()=>{if(!re.start_date||!re.end_date){T.fire("","   .","warning");return}try{const tt=await(await fetch(`${G}/api.php?module=attendance_logs&action=getByRange&start_date=${re.start_date}&end_date=${re.end_date}`)).json();S(tt.success?tt.data:[])}catch{T.fire("","  .","error")}},et=async()=>{if(!Ne.start_date||!Ne.end_date){T.fire("","   .","warning");return}await oe(`${G}/api.php?module=attendance_summary&action=generateForRange`,Ne,()=>T.fire("","   .","success")),nt()},nt=async()=>{if(!(!Ne.start_date||!Ne.end_date))try{const tt=await(await fetch(`${G}/api.php?module=attendance_summary&action=getForRange&start_date=${Ne.start_date}&end_date=${Ne.end_date}`)).json();I(tt.success?tt.data:[])}catch{T.fire("","  .","error")}},je=async()=>{if(!F.network){T.fire("","    .","warning");return}Oe(!0);try{const tt=await(await fetch(`${G}/attendance_scan.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({network:F.network,start:Number(F.start||1),end:Number(F.end||254),ports:F.ports})})).json();tt.success?be(tt.data||[]):T.fire("",tt.message||"   .","error")}catch{T.fire("","  .","error")}finally{Oe(!1)}},lt=ae=>{te(tt=>({...tt,ip:ae.ip||tt.ip,port:ae.port?String(ae.port):tt.port,vendor:ae.vendor||tt.vendor,protocol:"http"})),T.fire("","     .","success")},pt=async()=>{if(!le.device_id||!le.start_date||!le.end_date){T.fire("","    .","warning");return}M(!0);try{const tt=await(await fetch(`${G}/api.php?module=attendance_devices&action=pullLogs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:Number(le.device_id),start_date:le.start_date,end_date:le.end_date})})).json();if(tt.success){const ne=tt.message||" .",Ee=typeof tt.inserted=="number"?tt.inserted:null;T.fire("",Ee!==null?`${ne} ( : ${Ee})`:ne,"success"),ie()}else T.fire("",tt.message||" .","error")}catch{T.fire("","  .","error")}finally{M(!1)}};return r.jsxs("div",{className:"space-y-6",dir:"rtl",children:[r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{key:"devices",label:""},{key:"shifts",label:""},{key:"schedules",label:""},{key:"holidays",label:""},{key:"logs",label:""},{key:"summary",label:""}].map(ae=>r.jsx("button",{onClick:()=>a(ae.key),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${t===ae.key?"bg-accent text-white":"bg-slate-100 text-slate-600"}`,children:ae.label},ae.key))}),t==="devices"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card lg:col-span-2",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"font-black mb-4 flex items-center gap-2",children:[r.jsx(ym,{size:18}),"     "]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:" 192.168.1",value:F.network,onChange:ae=>ye({...F,network:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"1",value:F.start,onChange:ae=>ye({...F,start:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"254",value:F.end,onChange:ae=>ye({...F,end:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"80,8000,4370",value:F.ports,onChange:ae=>ye({...F,ports:ae.target.value})})]})]}),r.jsxs("button",{className:"mt-4 bg-emerald-600 text-white px-6 py-2 rounded-xl text-xs font-black flex items-center gap-2",onClick:je,disabled:Me,children:[r.jsx(ul,{size:14})," ",Me?" ...":"  "]}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:"IP"}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2"})]})}),r.jsxs("tbody",{children:[Ae.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"px-3 py-3 text-muted",colSpan:4,children:"   ."})}),Ae.map(ae=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:ae.ip}),r.jsx("td",{className:"px-3 py-2",children:ae.port}),r.jsx("td",{className:"px-3 py-2",children:ve[ae.vendor]||ae.vendor}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("button",{className:"px-3 py-1 bg-slate-200 rounded-lg",onClick:()=>lt(ae),children:""})})]},`${ae.ip}-${ae.port}`))]})]})})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"font-black mb-4 flex items-center gap-2",children:[r.jsx(ym,{size:18}),"   "]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:" ",value:L.name,onChange:ae=>te({...L,name:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:L.vendor,onChange:ae=>{const tt=ae.target.value;te(ne=>({...ne,vendor:tt,driver:ne.driver?ne.driver:ce(tt)}))},children:[r.jsx("option",{value:"hikvision",children:"Hikvision"}),r.jsx("option",{value:"zkteco",children:"ZKTeco"}),r.jsx("option",{value:"adms",children:"ADMS"}),r.jsx("option",{value:"other",children:""})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"Driver"}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:L.driver,onChange:ae=>te({...L,driver:ae.target.value}),children:[r.jsx("option",{value:"adms_push",children:$.adms_push}),r.jsx("option",{value:"hikvision_isapi",children:$.hikvision_isapi}),r.jsx("option",{value:"http_json_pull",children:$.http_json_pull}),r.jsx("option",{value:"manual",children:$.manual})]})]}),r.jsxs("div",{className:"space-y-1 col-span-2",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"Driver Config (JSON)"}),r.jsx("textarea",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2 min-h-[90px]",placeholder:': {"path":"/ISAPI/AccessControl/AcsEvent","max_results":50}   ',value:L.driver_config,onChange:ae=>te({...L,driver_config:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" IP"}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"IP",value:L.ip,onChange:ae=>te({...L,ip:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"Port",value:L.port,onChange:ae=>te({...L,port:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"Serial",value:L.serial_number,onChange:ae=>te({...L,serial_number:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"Location",value:L.location,onChange:ae=>te({...L,location:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"Username",value:L.username,onChange:ae=>te({...L,username:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"password",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"Password",value:L.password,onChange:ae=>te({...L,password:ae.target.value})})]})]}),r.jsxs("button",{className:"mt-4 w-full bg-accent text-white py-3 rounded-2xl text-xs font-black flex items-center justify-center gap-2",onClick:()=>oe(`${G}/api.php?module=attendance_devices&action=create`,{...L,port:Number(L.port),enabled:L.enabled?1:0},()=>{T.fire("","  .","success"),te({...L,name:"",ip:"",serial_number:"",location:"",driver_config:""}),ie()}),children:[r.jsx(yr,{size:16}),"  "]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:"  (Pull Sync)"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 text-xs",children:[r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:le.device_id,onChange:ae=>J({...le,device_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),h.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2 w-full",value:le.start_date,onChange:ae=>J({...le,start_date:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2 w-full",value:le.end_date,onChange:ae=>J({...le,end_date:ae.target.value})})]})]})]}),r.jsxs("button",{className:"mt-4 w-full bg-slate-700 text-white py-3 rounded-2xl text-xs font-black flex items-center justify-center gap-2",onClick:pt,disabled:Z,children:[r.jsx(ul,{size:16})," ",Z?" ...":" "]}),r.jsx("div",{className:"mt-3 text-xs text-muted",children:":    Push  (ADMS/ZKTeco)   Pull."})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 text-xs",children:[r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:H.device_id,onChange:ae=>B({...H,device_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),h.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:H.employee_id,onChange:ae=>B({...H,employee_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),n.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"   "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"   ",value:H.device_user_id,onChange:ae=>B({...H,device_user_id:ae.target.value})})]})]}),r.jsx("button",{className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-2xl text-xs font-black",onClick:()=>oe(`${G}/api.php?module=attendance_device_users&action=create`,{...H},()=>{T.fire("","  .","success"),B({device_id:"",employee_id:"",device_user_id:""}),ie()}),children:" "}),r.jsxs("div",{className:"mt-4 text-xs text-muted",children:["   (ZKTeco/ADMS):",r.jsx("br",{}),r.jsxs("span",{className:"font-mono",children:[window.location.origin,"/components/attendance_push.php"]})]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 text-xs",children:[r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:X.device_id,onChange:ae=>V({...X,device_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),h.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:X.worker_id,onChange:ae=>V({...X,worker_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),o.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"   "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"   ",value:X.device_user_id,onChange:ae=>V({...X,device_user_id:ae.target.value})})]})]}),r.jsx("button",{className:"mt-4 w-full bg-emerald-600 text-white py-3 rounded-2xl text-xs font-black",onClick:()=>oe(`${G}/api.php?module=attendance_device_workers&action=setForWorker`,{...X},()=>{T.fire("","   .","success"),V({device_id:"",worker_id:"",device_user_id:""}),ie()}),children:" "}),x.length>0&&r.jsxs("div",{className:"mt-4 text-xs text-muted",children:["  ",x.length," /."]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card lg:col-span-2",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:"Driver"}),r.jsx("th",{className:"px-3 py-2",children:"IP"}),r.jsx("th",{className:"px-3 py-2",children:"Serial"}),r.jsx("th",{className:"px-3 py-2",children:" "})]})}),r.jsx("tbody",{children:h.map(ae=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:ae.name}),r.jsx("td",{className:"px-3 py-2",children:ve[ae.vendor]||ae.vendor}),r.jsx("td",{className:"px-3 py-2",children:$[ae.driver]||ae.driver||"-"}),r.jsx("td",{className:"px-3 py-2",children:ae.ip||"-"}),r.jsx("td",{className:"px-3 py-2",children:ae.serial_number||"-"}),r.jsx("td",{className:"px-3 py-2",children:ae.last_sync_at||"-"})]},ae.id))})]})})]})]}),t==="shifts"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:" ",value:P.name,onChange:ae=>W({...P,name:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"time",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:P.start_time,onChange:ae=>W({...P,start_time:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"time",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:P.end_time,onChange:ae=>W({...P,end_time:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"  ()"}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.break_minutes,onChange:ae=>W({...P,break_minutes:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.grace_in_minutes,onChange:ae=>W({...P,grace_in_minutes:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.grace_out_minutes,onChange:ae=>W({...P,grace_out_minutes:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"  / "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.late_penalty_per_minute,onChange:ae=>W({...P,late_penalty_per_minute:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"   / "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.early_leave_penalty_per_minute,onChange:ae=>W({...P,early_leave_penalty_per_minute:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"  / "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.absence_penalty_per_day,onChange:ae=>W({...P,absence_penalty_per_day:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"  / "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:"0",value:P.overtime_rate_per_hour,onChange:ae=>W({...P,overtime_rate_per_hour:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1 col-span-2",children:[r.jsx("label",{className:"text-[11px] text-muted",children:"  "}),r.jsx("div",{className:"flex flex-wrap gap-2",children:wh.map(ae=>r.jsxs("label",{className:"flex items-center gap-2 text-xs bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2 border border-card",children:[r.jsx("input",{type:"checkbox",checked:P.weekly_off_days.includes(ae.value),onChange:tt=>{P.weekly_off_days.includes(ae.value);const ne=tt.target.checked?[...P.weekly_off_days,ae.value]:P.weekly_off_days.filter(Ee=>Ee!==ae.value);W({...P,weekly_off_days:ne})}}),ae.label]},ae.value))})]}),r.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[r.jsx("input",{type:"checkbox",checked:P.is_night_shift,onChange:ae=>W({...P,is_night_shift:ae.target.checked})})," "]})]}),r.jsxs("button",{className:"mt-4 w-full bg-accent text-white py-3 rounded-2xl text-xs font-black flex items-center justify-center gap-2",onClick:()=>oe(`${G}/api.php?module=attendance_shifts&action=create`,{...P,break_minutes:Number(P.break_minutes),grace_in_minutes:Number(P.grace_in_minutes),grace_out_minutes:Number(P.grace_out_minutes),late_penalty_per_minute:Number(P.late_penalty_per_minute),early_leave_penalty_per_minute:Number(P.early_leave_penalty_per_minute),absence_penalty_per_day:Number(P.absence_penalty_per_day),overtime_rate_per_hour:Number(P.overtime_rate_per_hour),is_night_shift:P.is_night_shift?1:0,weekly_off_days:P.weekly_off_days.join(",")},()=>{T.fire("","  .","success"),ie()}),children:[r.jsx(yr,{size:16}),"  "]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:" "})]})}),r.jsx("tbody",{children:v.map(ae=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:ae.name}),r.jsxs("td",{className:"px-3 py-2",children:[ae.start_time," - ",ae.end_time]}),r.jsxs("td",{className:"px-3 py-2",children:[ae.grace_in_minutes,"/",ae.grace_out_minutes]}),r.jsx("td",{className:"px-3 py-2",children:(ae.weekly_off_days||"").toString().split(",").filter(tt=>tt!=="").map(tt=>{var ne;return((ne=wh.find(Ee=>Ee.value===Number(tt)))==null?void 0:ne.label)||tt}).join(" ")||"-"})]},ae.id))})]})})]})]}),t==="schedules"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:se.employee_id,onChange:ae=>ue({...se,employee_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),n.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:se.shift_id,onChange:ae=>ue({...se,shift_id:ae.target.value}),children:[r.jsx("option",{value:"",children:" "}),v.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:se.day_of_week,onChange:ae=>ue({...se,day_of_week:ae.target.value}),children:wh.map(ae=>r.jsx("option",{value:ae.value,children:ae.label},ae.value))})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:se.valid_from,onChange:ae=>ue({...se,valid_from:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:se.valid_to,onChange:ae=>ue({...se,valid_to:ae.target.value})})]})]}),r.jsx("button",{className:"mt-4 w-full bg-accent text-white py-3 rounded-2xl text-xs font-black",onClick:()=>oe(`${G}/api.php?module=attendance_schedules&action=create`,{...se,employee_id:Number(se.employee_id),shift_id:Number(se.shift_id),day_of_week:Number(se.day_of_week)},()=>{T.fire("","  .","success"),ie()}),children:" "})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""})]})}),r.jsx("tbody",{children:j.map(ae=>{var tt,ne,Ee;return r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:((tt=n.find(rt=>rt.id===ae.employee_id))==null?void 0:tt.name)||ae.employee_id}),r.jsx("td",{className:"px-3 py-2",children:((ne=wh.find(rt=>rt.value===Number(ae.day_of_week)))==null?void 0:ne.label)||ae.day_of_week}),r.jsx("td",{className:"px-3 py-2",children:((Ee=v.find(rt=>rt.id===ae.shift_id))==null?void 0:Ee.name)||ae.shift_id})]},ae.id)})})]})})]})]}),t==="holidays"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",placeholder:" ",value:D.name,onChange:ae=>U({...D,name:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:" "}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:D.holiday_date,onChange:ae=>U({...D,holiday_date:ae.target.value})})]}),r.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[r.jsx("input",{type:"checkbox",checked:D.is_paid,onChange:ae=>U({...D,is_paid:ae.target.checked})})," "]})]}),r.jsx("button",{className:"mt-4 w-full bg-accent text-white py-3 rounded-2xl text-xs font-black",onClick:()=>oe(`${G}/api.php?module=attendance_holidays&action=create`,{...D,is_paid:D.is_paid?1:0},()=>{T.fire("","  .","success"),ie()}),children:" "})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""})]})}),r.jsx("tbody",{children:k.map(ae=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:ae.name}),r.jsx("td",{className:"px-3 py-2",children:ae.holiday_date}),r.jsx("td",{className:"px-3 py-2",children:Number(ae.is_paid)===1?"":""})]},ae.id))})]})})]})]}),t==="logs"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:"  CSV"}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2 text-xs w-full",value:me,onChange:ae=>z(ae.target.value),children:[r.jsx("option",{value:"",children:" "}),h.map(ae=>r.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),r.jsx("input",{type:"file",accept:".csv",className:"mt-3 text-xs",onChange:ae=>{var ne;const tt=(ne=ae.target.files)==null?void 0:ne[0];tt&&$e(tt)}}),r.jsx("p",{className:"text-[11px] text-muted mt-2",children:" CSV: device_user_id,check_time,direction"})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h3",{className:"font-black mb-4",children:" "}),r.jsxs("div",{className:"flex gap-2 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:re.start_date,onChange:ae=>he({...re,start_date:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:re.end_date,onChange:ae=>he({...re,end_date:ae.target.value})})]}),r.jsx("button",{className:"px-3 py-2 bg-slate-200 rounded-xl text-xs",onClick:Xe,children:r.jsx(ul,{size:14})})]}),r.jsx("div",{className:"mt-4 max-h-64 overflow-y-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""})]})}),r.jsx("tbody",{children:C.map(ae=>{var tt;return r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-2 py-1",children:((tt=n.find(ne=>ne.id===ae.employee_id))==null?void 0:tt.name)||ae.device_user_id||"-"}),r.jsx("td",{className:"px-2 py-1",children:ae.check_time}),r.jsx("td",{className:"px-2 py-1",children:ae.direction})]},ae.id)})})]})})]})]}),t==="summary"&&r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"font-black mb-4 flex items-center gap-2",children:[r.jsx(jL,{size:18}),"  "]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:Ne.start_date,onChange:ae=>Y({...Ne,start_date:ae.target.value})})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"date",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:Ne.end_date,onChange:ae=>Y({...Ne,end_date:ae.target.value})})]}),r.jsxs("button",{className:"px-3 py-2 bg-emerald-600 text-white rounded-xl text-xs font-black",onClick:et,children:[r.jsx(Or,{size:14}),"  "]}),r.jsxs("button",{className:"px-3 py-2 bg-slate-200 rounded-xl text-xs",onClick:nt,children:[r.jsx(wm,{size:14})," "]})]}),r.jsx("div",{className:"mt-4 overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:" "}),r.jsx("th",{className:"px-2 py-1",children:""})]})}),r.jsx("tbody",{children:O.map(ae=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-2 py-1",children:ae.employee_name}),r.jsx("td",{className:"px-2 py-1",children:ae.work_date}),r.jsx("td",{className:"px-2 py-1",children:ae.first_in||"-"}),r.jsx("td",{className:"px-2 py-1",children:ae.last_out||"-"}),r.jsx("td",{className:"px-2 py-1",children:ae.late_minutes}),r.jsx("td",{className:"px-2 py-1",children:ae.early_leave_minutes}),r.jsx("td",{className:"px-2 py-1",children:ae.status})]},ae.id))})]})})]})]})},Fae=({employees:e})=>{var _,k,E,C,S;const[t,a]=g.useState(""),[n,i]=g.useState(new Date().toISOString().slice(0,7)),[o,d]=g.useState(!1),[h,m]=g.useState(null),u=async()=>{if(!t){T.fire("","   .","warning");return}d(!0);try{const I=await(await fetch(`${G}/api.php?module=employee_salaries&action=getReport&employee_id=${t}&month=${n}`)).json();I.success?m(I.data):T.fire("",I.message||"  .","error")}catch{T.fire("","  .","error")}finally{d(!1)}},f=()=>{var J,Z,M,P,W;if(!h)return"";const O=h.employee||{},I=((J=h.attendance)==null?void 0:J.totals)||{},L=((Z=h.attendance)==null?void 0:Z.penalties)||{},te=((M=h.transactions)==null?void 0:M.totals)||{},H=h.computed||{},B=((P=h.attendance)==null?void 0:P.rows)||[],X=((W=h.transactions)==null?void 0:W.rows)||[],V=B.map(se=>`
      <tr>
        <td>${se.work_date||"-"}</td>
        <td>${se.shift_name||"-"}</td>
        <td>${se.first_in||"-"}</td>
        <td>${se.last_out||"-"}</td>
        <td>${se.late_minutes||0}</td>
        <td>${se.early_leave_minutes||0}</td>
        <td>${se.overtime_minutes||0}</td>
        <td>${se.status||"-"}</td>
      </tr>
    `).join(""),le=X.map(se=>`
      <tr>
        <td>${se.date||"-"}</td>
        <td>${se.type||"-"}</td>
        <td>${Number(se.amount||0).toLocaleString()}</td>
        <td>${se.notes||"-"}</td>
      </tr>
    `).join("");return`
      <!doctype html>
      <html lang="ar" dir="rtl">
      <head>
        <meta charset="utf-8" />
        <title> </title>
        <style>
          :root {
            --ink: #0f172a;
            --muted: #64748b;
            --border: #e2e8f0;
            --panel: #ffffff;
            --accent: #2563eb;
            --accent-soft: #dbeafe;
            --danger: #e11d48;
            --success: #16a34a;
          }
          * { box-sizing: border-box; }
          body { font-family: Arial, sans-serif; margin: 28px; color: var(--ink); background: #f8fafc; }
          h1, h2, h3 { margin: 0; }
          .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
          .badge { background: var(--accent-soft); color: var(--accent); padding: 6px 12px; border-radius: 999px; font-size: 12px; font-weight: bold; }
          .grid { display: grid; gap: 10px; }
          .grid-2 { grid-template-columns: repeat(2, 1fr); }
          .grid-4 { grid-template-columns: repeat(4, 1fr); }
          .card { background: var(--panel); border: 1px solid var(--border); padding: 14px; border-radius: 14px; margin-bottom: 12px; box-shadow: 0 1px 0 rgba(15, 23, 42, 0.04); }
          .meta { display: flex; flex-wrap: wrap; gap: 12px; font-size: 12px; color: var(--muted); }
          .meta strong { color: var(--ink); }
          .kpi { border: 1px solid var(--border); border-radius: 12px; padding: 10px; background: #f1f5f9; }
          .kpi .label { font-size: 11px; color: var(--muted); }
          .kpi .value { font-size: 16px; font-weight: bold; }
          .kpi.danger .value { color: var(--danger); }
          .kpi.success .value { color: var(--success); }
          table { width: 100%; border-collapse: collapse; margin-top: 8px; background: #fff; }
          th, td { border: 1px solid var(--border); padding: 7px; font-size: 11px; text-align: right; }
          th { background: #f8fafc; color: var(--muted); font-weight: bold; }
          .section-title { font-size: 13px; color: var(--accent); margin-bottom: 6px; }
          .two-col { display: grid; grid-template-columns: 1.3fr 1fr; gap: 12px; }
          .summary-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; font-size: 12px; }
          .summary-list div { background: #f8fafc; border: 1px dashed var(--border); padding: 6px 8px; border-radius: 10px; }
        </style>
      </head>
      <body>
        <div class="header">
          <div>
            <h1>  </h1>
            <div class="meta">
              <span>: <strong>${O.name||"-"}</strong></span>
              <span> : <strong>${O.job_title||"-"}</strong></span>
              <span>: <strong>${h.month||"-"}</strong></span>
            </div>
          </div>
          <span class="badge">Dragon HRM</span>
        </div>

        <div class="grid grid-4">
          <div class="kpi">
            <div class="label"> </div>
            <div class="value">${Number(H.base_salary||0).toLocaleString()}</div>
          </div>
          <div class="kpi danger">
            <div class="label"> </div>
            <div class="value">${Number(H.deductions||0).toLocaleString()}</div>
          </div>
          <div class="kpi success">
            <div class="label"> </div>
            <div class="value">${Number(H.bonuses||0).toLocaleString()}</div>
          </div>
          <div class="kpi">
            <div class="label"> </div>
            <div class="value">${Number(H.net_estimate||0).toLocaleString()}</div>
          </div>
        </div>

        <div class="two-col">
          <div class="card">
            <div class="section-title"> </div>
            <div class="summary-list">
              <div> : <strong>${I.present_days||0}</strong></div>
              <div> : <strong>${I.late_days||0}</strong></div>
              <div> : <strong>${I.absent_days||0}</strong></div>
              <div> : <strong>${I.holiday_days||0}</strong></div>
              <div> : <strong>${I.late_minutes||0}</strong></div>
              <div>  : <strong>${I.early_leave_minutes||0}</strong></div>
              <div> : <strong>${I.overtime_minutes||0}</strong></div>
            </div>
            <div class="summary-list" style="margin-top: 8px;">
              <div> : <strong>${Number(L.late_penalty||0).toLocaleString()}</strong></div>
              <div>  : <strong>${Number(L.early_penalty||0).toLocaleString()}</strong></div>
              <div> : <strong>${Number(L.absence_penalty||0).toLocaleString()}</strong></div>
              <div> : <strong>${Number(L.overtime_bonus||0).toLocaleString()}</strong></div>
            </div>
          </div>

          <div class="card">
            <div class="section-title"> </div>
            <div class="summary-list">
              <div>/: <strong>${Number(te.advances||0).toLocaleString()}</strong></div>
              <div> : <strong>${Number(te.manual_bonuses||0).toLocaleString()}</strong></div>
              <div> : <strong>${Number(te.manual_penalties||0).toLocaleString()}</strong></div>
              <div> : <strong>${Number(te.salary_paid||0).toLocaleString()}</strong></div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="section-title">  </div>
          <table>
            <thead>
              <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th> </th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>${V||""}</tbody>
          </table>
        </div>

        <div class="card">
          <div class="section-title">  </div>
          <table>
            <thead>
              <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>${le||""}</tbody>
          </table>
        </div>
      </body>
      </html>
    `},x=()=>{if(!h){T.fire("","   .","warning");return}const O=f(),I=window.open("","_blank");if(!I){T.fire("","   .","error");return}I.document.open(),I.document.write(O),I.document.close(),I.focus(),I.print()},b=((_=h==null?void 0:h.attendance)==null?void 0:_.totals)||{},v=((k=h==null?void 0:h.attendance)==null?void 0:k.penalties)||{},N=((E=h==null?void 0:h.transactions)==null?void 0:E.totals)||{},j=(h==null?void 0:h.computed)||{};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"font-black mb-4 flex items-center gap-2",children:[r.jsx(On,{size:18}),"   "]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 text-xs",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsxs("select",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:t,onChange:O=>a(O.target.value),children:[r.jsx("option",{value:"",children:" "}),e.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-muted",children:""}),r.jsx("input",{type:"month",className:"bg-slate-50 dark:bg-slate-900 rounded-xl px-3 py-2",value:n,onChange:O=>i(O.target.value)})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsxs("button",{className:"w-full bg-emerald-600 text-white py-3 rounded-2xl text-xs font-black flex items-center justify-center gap-2",onClick:u,disabled:o,children:[r.jsx(ul,{size:14})," ",o?" ...":" "]}),r.jsx("button",{className:"w-full bg-slate-200 py-3 rounded-2xl text-xs font-black",onClick:x,children:" PDF"})]})]})]}),h&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("p",{className:"text-[11px] text-muted",children:" "}),r.jsx("p",{className:"text-lg font-black",children:Number(j.base_salary||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("p",{className:"text-[11px] text-muted",children:" "}),r.jsx("p",{className:"text-lg font-black text-rose-500",children:Number(j.deductions||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("p",{className:"text-[11px] text-muted",children:" "}),r.jsx("p",{className:"text-lg font-black text-emerald-500",children:Number(j.bonuses||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("p",{className:"text-[11px] text-muted",children:" "}),r.jsx("p",{className:"text-lg font-black text-blue-600",children:Number(j.net_estimate||0).toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h4",{className:"font-black mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.present_days||0})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.late_days||0})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.absent_days||0})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.holiday_days||0})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.late_minutes||0})]}),r.jsxs("div",{children:["  : ",r.jsx("strong",{children:b.early_leave_minutes||0})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:b.overtime_minutes||0})]})]}),r.jsxs("div",{className:"mt-4 text-xs",children:[r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(v.late_penalty||0).toLocaleString()})]}),r.jsxs("div",{children:["  : ",r.jsx("strong",{children:Number(v.early_penalty||0).toLocaleString()})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(v.absence_penalty||0).toLocaleString()})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(v.overtime_bonus||0).toLocaleString()})]})]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h4",{className:"font-black mb-4",children:" "}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{children:["/: ",r.jsx("strong",{children:Number(N.advances||0).toLocaleString()})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(N.manual_bonuses||0).toLocaleString()})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(N.manual_penalties||0).toLocaleString()})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(N.salary_paid||0).toLocaleString()})]})]}),h.salary&&r.jsxs("div",{className:"mt-4 text-xs",children:[r.jsxs("div",{children:[" : ",r.jsx("strong",{children:h.salary.status==="paid"?"":""})]}),r.jsxs("div",{children:[" : ",r.jsx("strong",{children:Number(h.salary.net_salary||0).toLocaleString()})]})]})]})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h4",{className:"font-black mb-4",children:"  "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:" "}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""})]})}),r.jsx("tbody",{children:(((C=h.attendance)==null?void 0:C.rows)||[]).map(O=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-2 py-1",children:O.work_date}),r.jsx("td",{className:"px-2 py-1",children:O.shift_name||"-"}),r.jsx("td",{className:"px-2 py-1",children:O.first_in||"-"}),r.jsx("td",{className:"px-2 py-1",children:O.last_out||"-"}),r.jsx("td",{className:"px-2 py-1",children:O.late_minutes}),r.jsx("td",{className:"px-2 py-1",children:O.early_leave_minutes}),r.jsx("td",{className:"px-2 py-1",children:O.overtime_minutes}),r.jsx("td",{className:"px-2 py-1",children:O.status})]},O.id))})]})})]}),r.jsxs("div",{className:"p-6 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h4",{className:"font-black mb-4",children:"  "}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs text-right",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""}),r.jsx("th",{className:"px-2 py-1",children:""})]})}),r.jsx("tbody",{children:(((S=h.transactions)==null?void 0:S.rows)||[]).map(O=>r.jsxs("tr",{className:"border-t border-slate-200/50",children:[r.jsx("td",{className:"px-2 py-1",children:O.date}),r.jsxs("td",{className:"px-2 py-1",children:[O.type==="advance"&&"",O.type==="bonus"&&"",O.type==="penalty"&&"",O.type==="salary"&&""]}),r.jsx("td",{className:"px-2 py-1",children:Number(O.amount||0).toLocaleString()}),r.jsx("td",{className:"px-2 py-1",children:O.notes||"-"})]},O.id))})]})})]})]})]})},Hae=({initialView:e})=>{const[t,a]=g.useState(""),[n,i]=g.useState(!1),[o,d]=g.useState(!1),[h,m]=g.useState(null),[u,f]=g.useState(null),x=".",[b,v]=g.useState([]),[N,j]=g.useState([]),[_,k]=g.useState([]),[E,C]=g.useState({name:"",jobTitle:"",salary:"",phone:"",hireDate:"",fingerprintDeviceId:"",fingerprintUserId:""}),[S,O]=g.useState("list"),[I,L]=g.useState("devices");g.useEffect(()=>{H(),B(),te()},[]);const te=async()=>{try{const D=await(await fetch(`${G}/api.php?module=attendance_devices&action=getAll`)).json();D.success&&k(D.data||[])}catch(ue){console.error("Failed to fetch devices",ue)}};g.useEffect(()=>{if(e==="salaries")O("salaries");else if(e==="loans")O("transactions");else if(e==="salary-report")O("salary-report");else if(e&&e.startsWith("attendance")){O("attendance");const ue=e.split(":");L(ue[1]||"devices")}else O("list")},[e]);const H=async()=>{try{const D=await(await fetch(`${G}/api.php?module=employees&action=getAll`)).json();D.success?v(D.data):T.fire("","   : "+D.message,"error")}catch(ue){T.fire("","     .","error"),console.error("Fetch employees error:",ue)}},B=async()=>{try{const[ue,D]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then(he=>he.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(he=>he.json()).catch(()=>({success:!1}))]),U=ue&&ue.success?ue.data||[]:[],re=D&&D.success&&D.data||null;re&&re.default_treasury_id&&!re.can_change_treasury?j(U.filter(he=>Number(he.id)===Number(re.default_treasury_id))):j(U)}catch(ue){console.error("  ",ue)}},X=(ue=null)=>{ue?(m(ue),C({name:ue.name,jobTitle:ue.job_title,salary:ue.salary.toString(),phone:ue.phone,hireDate:ue.hire_date,fingerprintDeviceId:ue.fingerprint_device_id?String(ue.fingerprint_device_id):"",fingerprintUserId:ue.fingerprint_user_id||""})):(m(null),C({name:"",jobTitle:"",salary:"",phone:"",hireDate:new Date().toISOString().split("T")[0],fingerprintDeviceId:"",fingerprintUserId:""})),i(!0)},V=async ue=>{var z;if(ue.preventDefault(),!E.name)return;const D=h?`${G}/api.php?module=employees&action=update`:`${G}/api.php?module=employees&action=create`,{jobTitle:U,hireDate:re,fingerprintDeviceId:he,fingerprintUserId:Ne,...Y}=E,me={...Y,job_title:U,hire_date:re,fingerprint_device_id:he?Number(he):null,fingerprint_user_id:Ne||null,...h&&{id:h.id}};try{const ye=await(await fetch(D,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)})).json();if(ye.success){const Ae=h?h.id:(z=ye.data)==null?void 0:z.id;if(Ae&&he&&Ne)try{await fetch(`${G}/api.php?module=attendance_device_users&action=setForEmployee`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee_id:Ae,device_id:Number(he),device_user_id:Ne})})}catch{}T.fire("",h?"    ":"   ","success"),i(!1),H()}else T.fire("",` : ${ye.message}`,"error")}catch(F){T.fire("","   .","error"),console.error("Submit employee error:",F)}},le=ue=>{const D=b.find(U=>U.id===ue);D&&T.fire({title:" ",text:`      "${D.name}"   `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async U=>{if(U.isConfirmed)try{const he=await(await fetch(`${G}/api.php?module=employees&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ue})})).json();he.success?(T.fire(" !",`    "${D.name}" .`,"success"),H()):T.fire(" ",he.message||"  ","error")}catch(re){T.fire("  ","  .","error"),console.error("Delete employee error:",re)}})},J=ue=>{f(ue),d(!0)},Z=b.filter(ue=>{var D;return(((D=ue.name)==null?void 0:D.toLowerCase())||"").includes(t.toLowerCase())||(ue.phone||"").includes(t)}),M=()=>{switch(S){case"list":return r.jsx(P,{employees:Z,onEdit:X,onDelete:le,onViewDetails:J});case"salaries":return r.jsx(W,{treasuries:N});case"transactions":return r.jsx(se,{treasuries:N,employees:b});case"attendance":return r.jsx(gI,{initialTab:I});case"salary-report":return r.jsx(Fae,{employees:b});default:return r.jsx(P,{employees:Z,onEdit:X,onDelete:le,onViewDetails:J})}},P=({employees:ue,onEdit:D,onDelete:U,onViewDetails:re})=>r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx(fs,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted"}),r.jsx("input",{type:"text",placeholder:"  ...",value:t,onChange:he=>a(he.target.value),className:"w-64 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 pr-10 pl-4 text-sm focus:ring-2 ring-blue-500/20"})]}),r.jsxs("button",{onClick:()=>X(),className:"flex items-center gap-2 bg-accent text-white px-5 py-3 rounded-2xl text-xs font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:[r.jsx(Or,{size:16}),"   "]})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full text-right",children:[r.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700 text-xs text-muted uppercase font-black",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4"})]})}),r.jsx("tbody",{children:ue.map(he=>r.jsxs("tr",{className:"border-b border-slate-200/50 dark:border-slate-700/50 hover:bg-slate-50/50 dark:hover:bg-slate-900/20 transition-colors",children:[r.jsx("td",{className:"px-6 py-5 font-bold",children:he.name}),r.jsx("td",{className:"px-6 py-5 text-muted",children:he.job_title}),r.jsxs("td",{className:"px-6 py-5 font-mono text-emerald-500",children:[parseFloat(he.salary).toLocaleString()," ",x]}),r.jsx("td",{className:"px-6 py-5 text-muted",children:he.phone}),r.jsx("td",{className:"px-6 py-5 text-muted",children:he.hire_date}),r.jsx("td",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>re(he),className:"p-2 text-muted hover:text-blue-600 dark:hover:text-blue-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",children:r.jsx(ha,{size:16})}),r.jsx("button",{onClick:()=>D(he),className:"p-2 text-muted hover:text-amber-600 dark:hover:text-amber-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",children:r.jsx(ma,{size:16})}),r.jsx("button",{onClick:()=>U(he.id),className:"p-2 text-muted hover:text-rose-600 dark:hover:text-rose-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-all",children:r.jsx(Gr,{size:16})})]})})]},he.id))})]}),ue.length===0&&r.jsxs("div",{className:"text-center py-20",children:[r.jsx("p",{className:"font-bold text-muted",children:"   ."}),r.jsx("p",{className:"text-sm text-muted mt-2",children:"      ."})]})]})]}),W=({treasuries:ue})=>{const[D,U]=g.useState([]),[re,he]=g.useState(new Date().toISOString().slice(0,7)),[Ne,Y]=g.useState(!1),[me,z]=g.useState(!0),[F,ye]=g.useState(!0);g.useEffect(()=>{Ae(re)},[re]);const Ae=async Oe=>{Y(!0);try{const $=await(await fetch(`${G}/api.php?module=employee_salaries&action=getForMonth&month=${Oe}`)).json();$.success?U($.data):(T.fire("","   : "+$.message,"error"),U([]))}catch{T.fire("","     .","error")}finally{Y(!1)}},be=()=>{T.fire({title:`   ${re}`,text:"        .   ",icon:"info",showCancelButton:!0,confirmButtonText:"  ",cancelButtonText:""}).then(async Oe=>{if(Oe.isConfirmed)try{const $=await(await fetch(`${G}/api.php?module=employee_salaries&action=processPayroll`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:re,include_attendance:me?1:0,generate_attendance:me&&F?1:0})})).json();$.success?(T.fire("!","   .","success"),Ae(re)):T.fire("",$.message||"  .","error")}catch{T.fire("","  .","error")}})},Me=Oe=>{const ve=new Map(ue.map($=>[$.id,$.name]));T.fire({title:"  ",input:"select",inputOptions:ve,inputPlaceholder:" ",showCancelButton:!0,confirmButtonText:" ",cancelButtonText:"",inputValidator:$=>$?null:"  !"}).then(async $=>{if($.isConfirmed&&$.value){const ce=$.value;try{const oe=await(await fetch(`${G}/api.php?module=employee_salaries&action=pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Oe,treasury_id:ce})})).json();oe.success?(T.fire(" !","     .","success"),Ae(re)):T.fire("",oe.message||"  .","error")}catch{T.fire("","  .","error")}}})};return r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"month",value:re,onChange:Oe=>he(Oe.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-4 text-sm focus:ring-2 ring-blue-500/20"}),r.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[r.jsx("input",{type:"checkbox",checked:me,onChange:Oe=>z(Oe.target.checked)})," / "]}),r.jsxs("label",{className:`flex items-center gap-2 text-xs ${me?"":"opacity-50"}`,children:[r.jsx("input",{type:"checkbox",checked:F,disabled:!me,onChange:Oe=>ye(Oe.target.checked)}),"    "]}),r.jsx("button",{onClick:be,className:"flex items-center gap-2 bg-emerald-600 text-white px-5 py-3 rounded-2xl text-xs font-black shadow-xl shadow-emerald-500/30 hover:bg-emerald-700 transition-all",children:"  "})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right",children:[r.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700 text-xs text-muted uppercase font-black",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:" "}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4"})]})}),r.jsx("tbody",{children:Ne?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center p-8",children:"  ..."})}):D.length>0?D.map(Oe=>r.jsxs("tr",{className:"border-b border-slate-200/50 dark:border-slate-700/50 hover:bg-slate-50/50 dark:hover:bg-slate-900/20 transition-colors",children:[r.jsx("td",{className:"px-6 py-5 font-bold",children:Oe.employee_name}),r.jsxs("td",{className:"px-6 py-5",children:[parseFloat(Oe.base_salary).toLocaleString()," ",x]}),r.jsxs("td",{className:"px-6 py-5 text-rose-500",children:[parseFloat(Oe.deductions).toLocaleString()," ",x]}),r.jsxs("td",{className:"px-6 py-5 text-emerald-500",children:[parseFloat(Oe.bonuses).toLocaleString()," ",x]}),r.jsxs("td",{className:"px-6 py-5 font-black text-blue-500",children:[parseFloat(Oe.net_salary).toLocaleString()," ",x]}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${Oe.status==="paid"?"bg-emerald-100 dark:bg-emerald-900 text-emerald-600":"bg-amber-100 dark:bg-amber-900 text-amber-600"}`,children:Oe.status==="paid"?"":""})}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("button",{onClick:()=>Me(Oe.id),disabled:Oe.status==="paid",className:"bg-accent text-white px-4 py-2 rounded-lg text-xs font-bold disabled:bg-slate-300 dark:disabled:bg-slate-600",children:""})})]},Oe.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"text-center p-8",children:"     ."})})})]})})]})},se=({treasuries:ue,employees:D})=>{const[U,re]=g.useState([]),[he,Ne]=g.useState(!1),[Y,me]=g.useState({employee_id:"",amount:"",type:"advance",date:new Date().toISOString().split("T")[0],notes:"",treasury_id:""}),[z,F]=g.useState(null),[ye,Ae]=g.useState(!1),[be,Me]=g.useState(null);g.useEffect(()=>{ve()},[]);const Oe=ie=>{Me(ie),Ae(!0)},ve=async()=>{try{const oe=await(await fetch(`${G}/api.php?module=employee_transactions&action=getAll`)).json();if(oe.success){const $e=oe.data.map(Xe=>{const et=D.find(nt=>nt.id===Xe.employee_id);return{...Xe,employee_name:et?et.name:"  "}});re($e)}else T.fire("","   : "+oe.message,"error")}catch{T.fire("","     .","error")}},$=async ie=>{if(me({...Y,employee_id:ie}),ie)try{const $e=await(await fetch(`${G}/api.php?module=employees&action=getFinancialSummary&id=${ie}`)).json();$e.success?F($e.data):F(null)}catch(oe){console.error("   ",oe),F(null)}else F(null)},ce=async ie=>{if(ie.preventDefault(),Y.type==="advance"){if(!z){T.fire("","     .","error");return}if(parseFloat(Y.amount)>z.withdrawable_balance){T.fire({icon:"error",title:"  ",text:`        (${z.withdrawable_balance.toLocaleString()} ${x})`});return}}try{const $e=await(await fetch(`${G}/api.php?module=employee_transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)})).json();$e.success?(T.fire("","   .","success"),Ne(!1),F(null),ve()):T.fire("","  : "+$e.message,"error")}catch{T.fire("","     .","error")}};return r.jsxs("div",{className:"rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsxs("button",{onClick:()=>Ne(!0),className:"flex items-center gap-2 bg-accent text-white px-5 py-3 rounded-2xl text-xs font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right",children:[r.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700 text-xs text-muted uppercase font-black",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4",children:""}),r.jsx("th",{className:"px-6 py-4"})]})}),r.jsx("tbody",{children:U.map(ie=>r.jsxs("tr",{className:"border-b border-slate-200/50 dark:border-slate-700/50 hover:bg-slate-50/50 dark:hover:bg-slate-900/20 transition-colors",children:[r.jsx("td",{className:"px-6 py-5 font-bold",children:ie.employee_name}),r.jsxs("td",{className:"px-6 py-5",children:[parseFloat(ie.amount).toLocaleString()," ",x]}),r.jsxs("td",{className:"px-6 py-5",children:[ie.type==="advance"&&"",ie.type==="bonus"&&"",ie.type==="penalty"&&""]}),r.jsx("td",{className:"px-6 py-5",children:ie.date}),r.jsx("td",{className:"px-6 py-5",children:ie.notes}),r.jsx("td",{className:"px-6 py-5",children:r.jsx("button",{onClick:()=>Oe(ie),className:"p-2 text-muted hover:text-blue-600 rounded-full hover:bg-slate-100",children:r.jsx(ha,{size:16})})})]},ie.id))})]})}),ye&&be&&r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-3xl shadow-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("button",{onClick:()=>Ae(!1),className:"text-muted hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 space-y-4 text-right",children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",be.employee_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",parseFloat(be.amount).toLocaleString()," ",x]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",be.type==="advance"?"":be.type==="bonus"?"":""]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",be.date]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",be.notes||" "]})]})]})}),he&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"w-full max-w-lg rounded-3xl shadow-2xl border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"  "}),r.jsx("button",{onClick:()=>{Ne(!1),F(null)},className:"text-muted hover:text-rose-500",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ce,className:"p-8 space-y-4 text-right",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{required:!0,value:Y.employee_id,onChange:ie=>$(ie.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),D.map(ie=>r.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),z&&r.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm",children:r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[r.jsxs("div",{className:"border-l dark:border-slate-600",children:[r.jsx("span",{className:"text-xs text-muted",children:" "}),r.jsxs("p",{className:"font-bold text-base",children:[z.salary.toLocaleString()," ",x]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-muted",children:"  "}),r.jsxs("p",{className:"font-bold text-base",children:[z.projected_net_salary.toLocaleString()," ",x]})]}),r.jsxs("div",{className:"border-l dark:border-slate-600",children:[r.jsx("span",{className:"text-xs text-muted",children:" "}),r.jsxs("p",{className:"font-bold text-base text-emerald-500",children:[z.withdrawable_balance.toLocaleString()," ",x]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-muted",children:" "}),r.jsxs("p",{className:"font-bold text-base text-rose-500",children:[z.withdrawn_this_month.toLocaleString()," ",x]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"number",required:!0,value:Y.amount,onChange:ie=>me({...Y,amount:ie.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"date",required:!0,value:Y.date,onChange:ie=>me({...Y,date:ie.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{value:Y.type,onChange:ie=>me({...Y,type:ie.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"advance",children:""}),r.jsx("option",{value:"bonus",children:""}),r.jsx("option",{value:"penalty",children:""})]})]}),(Y.type==="advance"||Y.type==="bonus")&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{required:!0,value:Y.treasury_id,onChange:ie=>me({...Y,treasury_id:ie.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:" "}),ue.map(ie=>r.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("textarea",{value:Y.notes,onChange:ie=>me({...Y,notes:ie.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsx("button",{type:"submit",className:"w-full bg-accent text-white py-4 rounded-2xl font-black",children:""})]})]})})]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center text-right",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-xs text-muted font-bold mt-1",children:"  "})]}),r.jsxs("div",{className:"flex gap-1 p-1.5 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("button",{onClick:()=>O("list"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${S==="list"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(dl,{size:16})," "]}),r.jsxs("button",{onClick:()=>O("salaries"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${S==="salaries"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(bO,{size:16})," "]}),r.jsxs("button",{onClick:()=>O("transactions"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${S==="transactions"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Ry,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>O("salary-report"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${S==="salary-report"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(On,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>O("attendance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${S==="attendance"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(pO,{size:16})," "]})]})]}),M(),o&&u&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(fi,{className:"text-blue-500"}),"   "]}),r.jsx("button",{onClick:()=>d(!1),className:"text-muted hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 text-right space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-2xl flex flex-col items-center",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-blue-600 mb-4",children:r.jsx(fi,{size:40})}),r.jsx("h4",{className:"font-black text-xl",children:u.name}),r.jsx("p",{className:"text-muted font-bold",children:u.jobTitle})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-2xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-muted uppercase",children:" "}),r.jsx("p",{className:"font-bold",children:u.hireDate})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-2xl",children:[r.jsx("p",{className:"text-[10px] font-bold text-muted uppercase",children:" "}),r.jsxs("p",{className:"font-black text-emerald-500",children:[u.salary.toLocaleString()," ",x]})]})]})]})]})}),n&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:h?"  ":"  "}),r.jsx("button",{onClick:()=>i(!1),className:"text-muted hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:V,className:"p-8 space-y-6 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",required:!0,value:E.name,onChange:ue=>C({...E,name:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",required:!0,value:E.jobTitle,onChange:ue=>C({...E,jobTitle:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"text-xs font-bold text-muted mr-2",children:[" (",x,")"]}),r.jsx("input",{type:"number",required:!0,value:E.salary,onChange:ue=>C({...E,salary:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",value:E.phone,onChange:ue=>C({...E,phone:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"date",value:E.hireDate,onChange:ue=>C({...E,hireDate:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsxs("select",{value:E.fingerprintDeviceId,onChange:ue=>C({...E,fingerprintDeviceId:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),_.map(ue=>r.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"   "}),r.jsx("input",{type:"text",value:E.fingerprintUserId,onChange:ue=>C({...E,fingerprintUserId:ue.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"w-full bg-accent text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",h?" ":"  "]})]})]})})]})},_h=()=>new Date().toISOString().slice(0,7),Yae=({initialView:e})=>{var U,re,he,Ne,Y,me;const[t,a]=g.useState(e||"list"),[n,i]=g.useState([]),[o,d]=g.useState(!1),[h,m]=g.useState(_h()),[u,f]=g.useState([]),[x,b]=g.useState([]),[v,N]=g.useState(0),[j,_]=g.useState(_h()),[k,E]=g.useState(null);g.useEffect(()=>{e&&a(e)},[e]);const C=async()=>{try{d(!0);const F=await(await fetch(`${G}/api.php?module=workers&action=getAll&month=${encodeURIComponent(_h())}`)).json();if(F&&F.success)i(Array.isArray(F.data)?F.data:[]);else throw new Error((F==null?void 0:F.message)||"Failed to load workers")}catch(z){console.error("Fetch workers error",z),T.fire("",(z==null?void 0:z.message)||"   ","error")}finally{d(!1)}},S=async z=>{try{d(!0);const ye=await(await fetch(`${G}/api.php?module=worker_salaries&action=getForMonth&month=${encodeURIComponent(z)}`)).json();if(ye&&ye.success)f(Array.isArray(ye.data)?ye.data:[]);else throw new Error((ye==null?void 0:ye.message)||"Failed to load salaries")}catch(F){console.error("Fetch salaries error",F),T.fire("",(F==null?void 0:F.message)||"  ","error")}finally{d(!1)}},O=async()=>{try{d(!0);const F=await(await fetch(`${G}/api.php?module=worker_transactions&action=getAll`)).json();if(F&&F.success)b(Array.isArray(F.data)?F.data:[]);else throw new Error((F==null?void 0:F.message)||"Failed to load transactions")}catch(z){console.error("Fetch transactions error",z),T.fire("",(z==null?void 0:z.message)||"  ","error")}finally{d(!1)}};g.useEffect(()=>{C()},[]),g.useEffect(()=>{t==="salaries"&&S(h),t==="transactions"&&O()},[t]);const I=g.useMemo(()=>{const z=new Map;return n.forEach(F=>z.set(F.id,F.name)),z},[n]),L=z=>z==="daily"?"":z==="weekly"?"":z==="monthly"?"":z==="piecework"?"":"-",te=z=>z==="active"?"":z==="inactive"?" ":z==="on_leave"?"":"-",H=z=>z==="pending"?" ":z==="paid"?"":z||"-",B=z=>z==="advance"?"":z==="bonus"?"":z==="penalty"?"":z==="piecework"?" ()":z==="salary"?"":"-",X=z=>z==="pending"?" ":z==="paid"?"":z==="deducted"?" /":"-",V=z=>{if(!z)return"-";const F=String(z);try{const ye=JSON.parse(F);if(ye&&typeof ye=="object"){const Ae=String(ye.type||""),be=ye.cutting_order_id,Me=ye.product_id,Oe=ye.stage_id,ve=ye.qty;let $=Ae;Ae==="stage_complete_transfer"&&($="  ()"),Ae==="stage_complete_finish"&&($="  ()");const ce=[];return be!=null&&ce.push(` : ${be}`),Me!=null&&ce.push(`: ${Me}`),Oe!=null&&ce.push(`: ${Oe}`),ve!=null&&ce.push(`: ${ve}`),$&&ce.push(`: ${$}`),ce.join(" | ")}}catch{}return F},le=z=>{if(!z)return"";if(/^\d{4}-\d{2}-\d{2}/.test(z))return z.slice(0,10);const F=z.match(/^(\d{2})[-/](\d{2})[-/](\d{4})$/);return F?`${F[3]}-${F[2]}-${F[1]}`:z},J=async z=>{const F=!!(z!=null&&z.id),ye=le(z==null?void 0:z.hire_date),{value:Ae}=await T.fire({title:F?" ":" ",icon:F?"info":"question",html:`
				<div class="text-right">
					<div class="grid grid-cols-1 md:grid-cols-2 gap-3">
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<input id="w_name" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder=" " value="${(z==null?void 0:z.name)||""}">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"> </label>
							<input id="w_job" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder=":  / " value="${(z==null?void 0:z.job_title)||""}">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"> </label>
							<select id="w_type" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30">
								<option value="daily" ${(z==null?void 0:z.salary_type)==="daily"?"selected":""}></option>
								<option value="weekly" ${(z==null?void 0:z.salary_type)==="weekly"?"selected":""}></option>
								<option value="monthly" ${(z==null?void 0:z.salary_type)==="monthly"?"selected":""}></option>
								<option value="piecework" ${(z==null?void 0:z.salary_type)==="piecework"?"selected":""}></option>
							</select>
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"> </label>
							<input id="w_amount" type="number" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder="0" value="${(z==null?void 0:z.salary_amount)??0}">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"> </label>
							<input id="w_hire" type="date" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" value="${ye}">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<input id="w_phone" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder="01xxxxxxxxx" value="${(z==null?void 0:z.phone)||""}">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1">  ( )</label>
							<input id="w_fp" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder=": 12" value="${(z==null?void 0:z.fingerprint_no)||""}">
							<p class="mt-1 text-[11px] text-slate-400">    device_user_id    .</p>
						</div>
					</div>
					<div class="mt-3">
						<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
						<select id="w_status" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30">
							<option value="active" ${((z==null?void 0:z.status)||"active")==="active"?"selected":""}></option>
							<option value="inactive" ${(z==null?void 0:z.status)==="inactive"?"selected":""}> </option>
							<option value="on_leave" ${(z==null?void 0:z.status)==="on_leave"?"selected":""}></option>
						</select>
					</div>
					<p class="mt-3 text-[11px] text-slate-400">    .</p>
				</div>
			`,buttonsStyling:!1,customClass:{popup:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-xl",title:"text-right text-lg font-black text-slate-900 dark:text-white",htmlContainer:"p-0",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-xl text-sm font-black",cancelButton:"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 px-5 py-2 rounded-xl text-sm font-black mr-2"},didOpen:()=>{var be;try{(be=document.getElementById("w_name"))==null||be.focus()}catch{}},showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",preConfirm:()=>{const be=document.getElementById("w_name").value.trim(),Me=document.getElementById("w_job").value.trim(),Oe=document.getElementById("w_type").value,ve=parseFloat(document.getElementById("w_amount").value||"0"),$=document.getElementById("w_hire").value.trim(),ce=document.getElementById("w_phone").value.trim(),ie=document.getElementById("w_fp").value.trim(),oe=document.getElementById("w_status").value;return be?{name:be,job_title:Me,salary_type:Oe,salary_amount:ve,hire_date:$||null,phone:ce,fingerprint_no:ie||null,status:oe}:T.showValidationMessage(" ")}});if(Ae)try{d(!0);const be=`${G}/api.php?module=workers&action=${F?"update":"create"}`,Me={...Ae};F&&(Me.id=z.id);const ve=await(await fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)})).json();if(!(ve!=null&&ve.success))throw new Error((ve==null?void 0:ve.message)||"Save failed");await C(),T.fire("","   ","success")}catch(be){console.error("Save worker error",be),T.fire("",(be==null?void 0:be.message)||"  ","error")}finally{d(!1)}},Z=async z=>{if((await T.fire({title:" ",text:"    ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{d(!0);const Ae=await(await fetch(`${G}/api.php?module=workers&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z})})).json();if(!(Ae!=null&&Ae.success))throw new Error((Ae==null?void 0:Ae.message)||"Delete failed");await C(),T.fire("","  ","success")}catch(ye){console.error("Delete worker error",ye),T.fire("",(ye==null?void 0:ye.message)||"  ","error")}finally{d(!1)}},M=async z=>{var ye;const{value:F}=await T.fire({title:"  ",icon:"info",html:`
				<div class="text-right">
					<p class="text-sm font-black text-slate-900 dark:text-white mb-2">${z.name}</p>
					<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
					<input id="att_month" type="month" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm" value="${_h()}">
					<p class="mt-2 text-[11px] text-slate-400">      attendance_logs.</p>
				</div>
			`,buttonsStyling:!1,customClass:{popup:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-xl",title:"text-right text-lg font-black text-slate-900 dark:text-white",htmlContainer:"p-0",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-xl text-sm font-black",cancelButton:"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 px-5 py-2 rounded-xl text-sm font-black mr-2"},showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",preConfirm:()=>{const Ae=document.getElementById("att_month").value.trim();return Ae||T.showValidationMessage(" ")}});if(F)try{T.fire({title:" ...",allowOutsideClick:!1,didOpen:()=>T.showLoading()});const be=await(await fetch(`${G}/api.php?module=workers&action=getAttendanceSummary&worker_id=${encodeURIComponent(z.id)}&month=${encodeURIComponent(F)}`)).json();if(!(be!=null&&be.success))throw new Error((be==null?void 0:be.message)||"Failed to load attendance");const Me=be.data,Oe=Array.isArray(Me==null?void 0:Me.days)?Me.days:[],ve=Oe.length===0?'<div class="text-center text-slate-400 text-sm">    </div>':`
						<div class="overflow-auto max-h-[50vh]">
							<table class="min-w-full text-sm">
								<thead>
									<tr class="text-right text-slate-500">
										<th class="p-2"></th>
										<th class="p-2"> </th>
										<th class="p-2"> </th>
										<th class="p-2"></th>
									</tr>
								</thead>
								<tbody>
									${Oe.map($=>`
												<tr class="border-t border-slate-100 dark:border-slate-700/60">
													<td class="p-2 font-bold text-slate-800 dark:text-white">${$.day??""}</td>
													<td class="p-2">${($.first_in??"").toString().replace("T"," ")}</td>
													<td class="p-2">${($.last_out??"").toString().replace("T"," ")}</td>
													<td class="p-2">${$.punches??""}</td>
												</tr>
											`).join("")}
								</tbody>
							</table>
						</div>
					`;await T.fire({title:`: ${(Me==null?void 0:Me.present_days)??0} `,icon:"success",html:`
					<div class="text-right">
						<div class="text-xs text-slate-500 dark:text-slate-400 mb-2"> : ${((ye=Me==null?void 0:Me.worker)==null?void 0:ye.fingerprint_no)||"-"}</div>
						${ve}
					</div>
				`,buttonsStyling:!1,customClass:{popup:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-xl",title:"text-right text-lg font-black text-slate-900 dark:text-white",htmlContainer:"p-0",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-xl text-sm font-black"}})}catch(Ae){T.fire("",(Ae==null?void 0:Ae.message)||"  ","error")}},P=async()=>{try{d(!0);const F=await(await fetch(`${G}/api.php?module=worker_salaries&action=processPayroll`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:h})})).json();if(!(F!=null&&F.success))throw new Error((F==null?void 0:F.message)||"Payroll failed");await S(h),T.fire("",(F==null?void 0:F.message)||"  ","success")}catch(z){console.error("Process payroll error",z),T.fire("",(z==null?void 0:z.message)||"  ","error")}finally{d(!1)}},W=async z=>{if((await T.fire({title:" ",text:"  ",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{d(!0);const Ae=await(await fetch(`${G}/api.php?module=worker_salaries&action=pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z})})).json();if(!(Ae!=null&&Ae.success))throw new Error((Ae==null?void 0:Ae.message)||"Pay failed");await S(h),T.fire("","  ","success")}catch(ye){console.error("Pay salary error",ye),T.fire("",(ye==null?void 0:ye.message)||"  ","error")}finally{d(!1)}},se=async()=>{const{value:z}=await T.fire({title:" ",icon:"info",html:`
				<div class="text-right">
					<div class="grid grid-cols-1 md:grid-cols-2 gap-3">
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<select id="tx_worker" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30">
								<option value=""> </option>
								${n.map(F=>`<option value="${F.id}">${F.name}</option>`).join("")}
							</select>
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<select id="tx_type" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30">
								<option value="advance"></option>
								<option value="bonus"></option>
								<option value="penalty"></option>
							</select>
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<input id="tx_amount" type="number" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder="0" value="0">
						</div>
						<div>
							<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
							<input id="tx_date" type="date" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" value="${new Date().toISOString().slice(0,10)}">
						</div>
					</div>
					<div class="mt-3">
						<label class="block text-xs font-black text-slate-600 dark:text-slate-300 mb-1"></label>
						<input id="tx_notes" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30" placeholder="" value="">
					</div>
				</div>
			`,buttonsStyling:!1,customClass:{popup:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-xl",title:"text-right text-lg font-black text-slate-900 dark:text-white",htmlContainer:"p-0",confirmButton:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-xl text-sm font-black",cancelButton:"bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 px-5 py-2 rounded-xl text-sm font-black mr-2"},showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",preConfirm:()=>{const F=parseInt(document.getElementById("tx_worker").value||"0",10),ye=document.getElementById("tx_type").value,Ae=parseFloat(document.getElementById("tx_amount").value||"0"),be=document.getElementById("tx_date").value.trim(),Me=document.getElementById("tx_notes").value.trim();return F?!Ae||Ae<=0?T.showValidationMessage("      "):be?{worker_id:F,type:ye,amount:Ae,date:be,notes:Me,status:"pending"}:T.showValidationMessage(" "):T.showValidationMessage(" ")}});if(z)try{d(!0);const ye=await(await fetch(`${G}/api.php?module=worker_transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(!(ye!=null&&ye.success))throw new Error((ye==null?void 0:ye.message)||"Create failed");await O(),T.fire("","  ","success")}catch(F){console.error("Add tx error",F),T.fire("",(F==null?void 0:F.message)||"  ","error")}finally{d(!1)}},ue=async()=>{if(!v){T.fire("","  ","info");return}try{d(!0);const F=await(await fetch(`${G}/api.php?module=worker_salaries&action=getReport&worker_id=${v}&month=${encodeURIComponent(j)}`)).json();if(!(F!=null&&F.success))throw new Error((F==null?void 0:F.message)||"Report failed");E(F.data)}catch(z){console.error("Load report error",z),T.fire("",(z==null?void 0:z.message)||"  ","error")}finally{d(!1)}},D=[{key:"list",label:" ",Icon:yR},{key:"salaries",label:"",Icon:DL},{key:"transactions",label:" ",Icon:qR},{key:"salary-report",label:" ",Icon:On}];return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-11 h-11 rounded-2xl bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center",children:r.jsx(dl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white",children:""}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]})}),r.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:D.map(z=>r.jsx("button",{onClick:()=>{a(z.key),E(null)},className:`px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t===z.key?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx(z.Icon,{className:"w-4 h-4"}),z.label]})},z.key))}),o&&r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:" ..."}),t==="list"&&r.jsxs("div",{className:"card p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-black",children:""}),r.jsxs("button",{onClick:()=>J(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-xs font-black inline-flex items-center gap-2",children:[r.jsx(Or,{className:"w-4 h-4"})," "]})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-right text-slate-500",children:[r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:" "}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:" "}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""})]})}),r.jsxs("tbody",{children:[n.map(z=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/60",children:[r.jsx("td",{className:"p-2 font-bold text-slate-800 dark:text-white",children:z.name}),r.jsx("td",{className:"p-2",children:z.job_title||"-"}),r.jsx("td",{className:"p-2",children:L(z.salary_type)}),r.jsx("td",{className:"p-2",children:Number(z.salary_amount||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:z.fingerprint_no||"-"}),r.jsx("td",{className:"p-2",children:te(z.status)}),r.jsxs("td",{className:"p-2 flex gap-2",children:[r.jsxs("button",{onClick:()=>J(z),className:"px-3 py-1 rounded-lg text-xs font-bold bg-slate-100 dark:bg-slate-800 inline-flex items-center gap-1",children:[r.jsx(LR,{className:"w-3.5 h-3.5"}),""]}),r.jsxs("button",{onClick:()=>M(z),className:"px-3 py-1 rounded-lg text-xs font-bold bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 inline-flex items-center gap-1",children:[r.jsx(ym,{className:"w-3.5 h-3.5"}),""]}),r.jsxs("button",{onClick:()=>Z(z.id),className:"px-3 py-1 rounded-lg text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300 inline-flex items-center gap-1",children:[r.jsx(Gr,{className:"w-3.5 h-3.5"}),""]})]})]},z.id)),n.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-3 text-center text-slate-400",colSpan:7,children:"  "})})]})]})})]}),t==="salaries"&&r.jsxs("div",{className:"card p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"text-sm font-black",children:" "}),r.jsx("input",{value:h,onChange:z=>m(z.target.value),className:"border rounded-xl px-3 py-2 text-xs dark:bg-slate-900",placeholder:"YYYY-MM"}),r.jsx("button",{onClick:()=>S(h),className:"px-3 py-2 rounded-xl text-xs font-black bg-slate-100 dark:bg-slate-800",children:""})]}),r.jsx("button",{onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-xs font-black",children:" "})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-right text-slate-500",children:[r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:" "}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""})]})}),r.jsxs("tbody",{children:[u.map(z=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/60",children:[r.jsx("td",{className:"p-2 font-bold text-slate-800 dark:text-white",children:z.worker_name||I.get(z.worker_id)||z.worker_id}),r.jsx("td",{className:"p-2",children:Number(z.base_salary||0).toFixed(2)}),r.jsx("td",{className:"p-2 font-black",children:Number(z.manufacturing_extra||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:Number(z.deductions||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:Number(z.bonuses||0).toFixed(2)}),r.jsx("td",{className:"p-2 font-black",children:Number(z.net_salary||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:H(z.status)}),r.jsx("td",{className:"p-2",children:z.status==="pending"?r.jsx("button",{onClick:()=>W(z.id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg text-xs font-black",children:""}):r.jsx("span",{className:"text-xs text-slate-400",children:" "})})]},z.id)),u.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-3 text-center text-slate-400",colSpan:7,children:"  "})})]})]})})]}),t==="transactions"&&r.jsxs("div",{className:"card p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-black",children:" "}),r.jsx("button",{onClick:se,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-xs font-black",children:" "})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-right text-slate-500",children:[r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""})]})}),r.jsxs("tbody",{children:[x.map(z=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/60",children:[r.jsx("td",{className:"p-2 font-bold text-slate-800 dark:text-white",children:I.get(z.worker_id)||z.worker_id}),r.jsx("td",{className:"p-2",children:B(z.type)}),r.jsx("td",{className:"p-2",children:Number(z.amount||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:z.date}),r.jsx("td",{className:"p-2",children:X(z.status)}),r.jsx("td",{className:"p-2",children:V(z.notes)})]},z.id)),x.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-3 text-center text-slate-400",colSpan:6,children:"  "})})]})]})})]}),t==="salary-report"&&r.jsxs("div",{className:"card p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsxs("select",{value:v||"",onChange:z=>N(Number(z.target.value)),className:"border rounded-xl px-3 py-2 text-xs dark:bg-slate-900",children:[r.jsx("option",{value:"",children:" "}),n.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]}),r.jsx("input",{value:j,onChange:z=>_(z.target.value),className:"border rounded-xl px-3 py-2 text-xs dark:bg-slate-900",placeholder:"YYYY-MM"}),r.jsx("button",{onClick:ue,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl text-xs font-black",children:" "})]}),k&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800",children:[r.jsx("div",{className:"text-xs text-slate-500",children:" ()"}),r.jsx("div",{className:"text-lg font-black",children:Number(((U=k==null?void 0:k.computed)==null?void 0:U.base_salary)||0).toFixed(2)})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800",children:[r.jsx("div",{className:"text-xs text-slate-500",children:""}),r.jsx("div",{className:"text-lg font-black",children:Number(((re=k==null?void 0:k.computed)==null?void 0:re.bonuses)||0).toFixed(2)})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800",children:[r.jsx("div",{className:"text-xs text-slate-500",children:""}),r.jsx("div",{className:"text-lg font-black",children:Number(((he=k==null?void 0:k.computed)==null?void 0:he.deductions)||0).toFixed(2)})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-slate-50 dark:bg-slate-800",children:[r.jsx("div",{className:"text-xs text-slate-500",children:" ()"}),r.jsx("div",{className:"text-lg font-black",children:Number(((Ne=k==null?void 0:k.computed)==null?void 0:Ne.net_estimate)||0).toFixed(2)})]})]}),r.jsx("div",{className:"overflow-auto",children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-right text-slate-500",children:[r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""}),r.jsx("th",{className:"p-2",children:""})]})}),r.jsxs("tbody",{children:[(((Y=k==null?void 0:k.transactions)==null?void 0:Y.rows)||[]).map(z=>r.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700/60",children:[r.jsx("td",{className:"p-2",children:z.date}),r.jsx("td",{className:"p-2",children:B(z.type)}),r.jsx("td",{className:"p-2",children:Number(z.amount||0).toFixed(2)}),r.jsx("td",{className:"p-2",children:X(z.status)}),r.jsx("td",{className:"p-2",children:V(z.notes)})]},z.id)),(!((me=k==null?void 0:k.transactions)!=null&&me.rows)||k.transactions.rows.length===0)&&r.jsx("tr",{children:r.jsx("td",{className:"p-3 text-center text-slate-400",colSpan:5,children:"  "})})]})]})})]})]})]})},Kae=({initialView:e})=>{const[t,a]=g.useState(e==="custody"?"custody":e==="transactions"?"transactions":e==="rep-cycle"?"rep-cycle":e==="rep-performance"?"rep-performance":"list"),[n,i]=g.useState(""),[o,d]=g.useState(!1),[h,m]=g.useState(null),[u,f]=g.useState({name:"",phone:"",insurance_paid:!1,insurance_amount:""}),[x,b]=g.useState([]),[v,N]=g.useState([]),[j,_]=g.useState([]),[k,E]=g.useState(null),C=".",[S,O]=g.useState([]),[I,L]=g.useState({amount:"",type:"payment",direction:"in",treasuryId:"",note:""}),[te,H]=g.useState([]),[B,X]=g.useState(null),V=new Date().toISOString().split("T")[0],[le,J]=g.useState("month"),[Z,M]=g.useState(V),[P,W]=g.useState(V.slice(0,7)),[se,ue]=g.useState(String(new Date().getFullYear())),[D,U]=g.useState("all"),[re,he]=g.useState(!1),[Ne,Y]=g.useState([]),[me,z]=g.useState([]),F=ne=>{if(!ne)return{};if(typeof ne=="object")return ne;try{return JSON.parse(ne)}catch{return{}}},ye=(ne,Ee)=>{const rt={rep_assignment:"  ",rep_payment_in:"  ",rep_payment_out:" ",rep_settlement:" ",rep_penalty:"  ",payment_in:"",payment_out:""},Je=(Ee==null?void 0:Ee.subtype)||"";return Je&&rt[Je]?rt[Je]:rt[ne]||ne||"-"},Ae=async()=>{try{const Ee=await(await fetch(`${G}/api.php?module=users&action=getAllWithBalance`)).json();Ee.success&&Array.isArray(Ee.data)?b(Ee.data):b([])}catch(ne){console.error("Failed to fetch reps",ne),b([])}};g.useEffect(()=>{["list","custody","transactions","rep-cycle","rep-performance"].includes(e||"")&&a(e);const ne=async()=>{try{const st=await(await fetch(`${G}/api.php?module=orders&action=getAll&status=pending`)).json();st.success&&N(st.data||[])}catch(Je){console.error("Failed to fetch pending orders",Je)}},Ee=async()=>{try{const[Je,st]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then(ht=>ht.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(ht=>ht.json()).catch(()=>({success:!1}))]),Ze=Je&&Je.success?Je.data||[]:[],ct=st&&st.success&&st.data||null;ct&&ct.default_treasury_id&&!ct.can_change_treasury?H(Ze.filter(ht=>Number(ht.id)===Number(ct.default_treasury_id))):H(Ze),ct&&ct.default_treasury_id&&!I.treasuryId&&L(ht=>({...ht,treasuryId:String(ct.default_treasury_id)})),ct&&X(ct)}catch(Je){console.error("Failed to fetch treasuries",Je)}},rt=async()=>{try{const st=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults`)).json();st&&st.success&&(X(st.data||null),st.data&&st.data.default_treasury_id&&!I.treasuryId&&L(Ze=>({...Ze,treasuryId:String(st.data.default_treasury_id)})))}catch(Je){console.error("Failed to fetch user defaults",Je)}};Ae(),ne(),Ee(),rt()},[e]);const be=x.filter(ne=>(ne.name||"").toLowerCase().includes(n.toLowerCase())||String(ne.phone||"").includes(n)),Me=ne=>ne.toISOString().split("T")[0],Oe=()=>{const ne=st=>{const Ze=new Date(`${st}T00:00:00`);return isNaN(Ze.getTime())?new Date:Ze};if(le==="date"||le==="day"){const st=ne(Z),Ze=Me(st);return{startDate:Ze,endDate:Ze}}if(le==="week"){const st=ne(Z),ct=(st.getDay()+6)%7,ht=new Date(st);ht.setDate(st.getDate()-ct);const Re=new Date(ht);return Re.setDate(ht.getDate()+6),{startDate:Me(ht),endDate:Me(Re)}}if(le==="month"){const[st,Ze]=(P||"").split("-").map(de=>Number(de)),ct=st||new Date().getFullYear(),ht=Ze?Ze-1:new Date().getMonth(),Re=new Date(ct,ht,1),xe=new Date(ct,ht+1,0);return{startDate:Me(Re),endDate:Me(xe)}}const Ee=Number(se)||new Date().getFullYear(),rt=new Date(Ee,0,1),Je=new Date(Ee,11,31);return{startDate:Me(rt),endDate:Me(Je)}},ve=ne=>{const Ee=Array.isArray(ne)?ne:[],rt=de=>(de==null?void 0:de.status)||(de==null?void 0:de.order_status)||(de==null?void 0:de.state)||"",Je=Ee.filter(de=>rt(de)==="delivered"),st=Ee.filter(de=>rt(de)==="returned"),Ze=Ee.filter(de=>rt(de)==="with_rep"),ct=Ee.length,ht=Je.length+st.length,Re=ht>0?Math.round(st.length/ht*100):0,xe=de=>ct>0?Math.round(de/ct*100):0;return{total:ct,delivered:Je.length,returned:st.length,withRep:Ze.length,deliveredPct:xe(Je.length),returnedPct:xe(st.length),withRepPct:xe(Ze.length),returnRate:Re}},$=async()=>{if(!Array.isArray(x)||x.length===0){Y([]),z([]);return}const{startDate:ne,endDate:Ee}=Oe();he(!0);try{const rt=x.slice(),Je=await Promise.all(rt.map(async st=>{const Ze=Number(st.id);if(!Ze)return{repId:st.id,repName:st.name||"-",...ve([])};const ct=`${G}/api.php?module=orders&action=getByRep&rep_id=${Ze}&start_date=${ne}&end_date=${Ee}`;try{const Re=await(await fetch(ct)).json(),xe=Re&&Re.success?ve(Re.data||[]):ve([]);return{repId:Ze,repName:st.name||` ${Ze}`,...xe}}catch(ht){return console.error("Failed to fetch rep performance row",Ze,ht),{repId:Ze,repName:st.name||` ${Ze}`,...ve([])}}}));Je.sort((st,Ze)=>Ze.delivered-st.delivered||st.returnRate-Ze.returnRate),Y(Je),z(Je.slice(0,10))}finally{he(!1)}},ce=(ne=null)=>{ne?(m(ne),f({name:ne.name||"",phone:ne.phone||"",insurance_paid:!!ne.insurance_paid,insurance_amount:ne.insurance_amount?String(ne.insurance_amount):""})):(m(null),f({name:"",phone:"",insurance_paid:!1,insurance_amount:""})),d(!0)},ie=ne=>{ne.preventDefault(),(async()=>{var Ee;try{if(h){const Je=await(await fetch(`${G}/api.php?module=users&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,phone:u.phone,role:"representative",id:h.id,insurance_paid:h.insurance_paid?1:0,insurance_amount:Number(h.insurance_amount||0)})})).text();let st=null;try{st=JSON.parse(Je)}catch{console.error("Save rep raw response (update):",Je),T.fire("  ",Je.substring(0,1e3),"error");return}st.success?(await Ae(),d(!1),T.fire(" ","    .","success")):T.fire(" ",st.message||"  ","error")}else{const rt=JSON.stringify({update_order_status:!0}),Je={name:u.name,phone:u.phone,role:"representative",permissions:rt,insurance_paid:u.insurance_paid?1:0,insurance_amount:u.insurance_paid?Number(u.insurance_amount||0):0},Ze=await(await fetch(`${G}/api.php?module=users&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)})).text();let ct=null;try{ct=JSON.parse(Ze)}catch{console.error("Save rep raw response (create):",Ze),T.fire("  ",Ze.substring(0,1e3),"error");return}ct.success?(u.insurance_paid&&Number(u.insurance_amount)>0&&await Vae(((Ee=ct.data)==null?void 0:Ee.id)||ct.insert_id,Number(u.insurance_amount)),await Ae(),d(!1),T.fire(" ","   .","success")):T.fire(" ",ct.message||"  ","error")}}catch(rt){console.error("Save rep error",rt),T.fire("  ","  .","error")}})()},oe=ne=>{const Ee=x.find(Ze=>Ze.id===ne);if(!Ee)return;const rt=Number(Ee.insurance_amount??0);if(!!Ee.insurance_paid&&rt>0||rt>0){T.fire({icon:"error",title:" ",text:`    "${Ee.name}"     ${rt.toLocaleString()} ${C}.  /  .`,confirmButtonText:""});return}const st=Number(Ee.balance??0);if(!Number.isFinite(st)){T.fire({icon:"error",title:" ",text:`    "${Ee.name}"    .`,confirmButtonText:""});return}if(Math.abs(st)>1e-6){T.fire({icon:"error",title:" ",text:`    "${Ee.name}"    .  : ${st.toLocaleString()} ${C}.  /  .`,confirmButtonText:""});return}T.fire({title:" ",text:`      "${Ee.name}"`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:" ",cancelButtonText:""}).then(async Ze=>{if(Ze.isConfirmed)try{const ht=await(await fetch(`${G}/api.php?module=users&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ne})})).json();ht.success?(b(Re=>Re.filter(xe=>xe.id!==ne)),T.fire(" !",`   "${Ee.name}" .`,"success")):T.fire(" ",ht.message||"  ","error")}catch(ct){console.error("Delete rep error",ct),T.fire("  ","  .","error")}})},$e=ne=>{E(ne),a("transactions")},Xe=async()=>{try{const Ee=await(await fetch(`${G}/api.php?module=transactions&action=getByRelated&related_to_type=rep&related_to_id=${k}`)).json();if(Ee.success){const rt=Ee.data||[];O(rt);const Je=rt.reduce((st,Ze)=>st+Number(Ze.amount||0),0);b(st=>st.map(Ze=>Ze.id===k?{...Ze,balance:Number(Je)}:Ze))}}catch(ne){console.error("Failed to fetch rep transactions",ne)}},et=async ne=>{if(ne&&ne.preventDefault(),!k)return T.fire(" ","   .","warning");if(I.type==="settlement"){await nt();return}const Ee=Number(I.amount||0);if(!Ee||isNaN(Ee)||Ee<=0)return T.fire("  ","     .","error");if(!I.note||String(I.note).trim()==="")return T.fire(" ","  /    .","warning");if(I.type==="payment"&&!I.treasuryId)return T.fire(" ","     .","warning");const rt=I.type==="fine",Je=rt?"out":I.direction,Ze={type:rt?"rep_payment_out":Je==="in"?"rep_payment_in":"rep_payment_out",related_to_type:"rep",related_to_id:k,amount:Ee,treasuryId:rt?null:I.treasuryId||null,direction:Je,details:rt?{notes:I.note,subtype:"rep_penalty"}:{notes:I.note}};try{const ht=await(await fetch(`${G}/api.php?module=transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ze)})).json();ht.success?(T.fire(" ","   .","success"),await Xe(),L({amount:"",type:"payment",direction:"in",treasuryId:"",note:""})):T.fire(" ",ht.message||"   ","error")}catch(ct){console.error("Create tx error",ct),T.fire("  ","  .","error")}},nt=async()=>{if(!k)return T.fire(" ","   .","warning");const ne=Number(tt||0);if(isNaN(ne))return T.fire("","    .","error");const Ee=x.find(de=>Number(de.id)===Number(k)),rt=Ee&&Ee.insurance_paid?Number(Ee.insurance_amount||0):0,Je=ne+(rt>0?rt:0);if((!rt||rt<=0)&&(!ne||ne===0))return T.fire("  ","    .","info");if(Je!==0&&!I.treasuryId)return T.fire(" ","     .","warning");const Ze=I.note&&String(I.note).trim()!==""?I.note:" /   ",ct=ne===0?"0":`${Math.abs(ne).toLocaleString()} ${C} ${ne>0?"":""}`,ht=Je===0?"0":`${Math.abs(Je).toLocaleString()} ${C} ${Je>0?"":""}`,Re=`  .
: ${ct}
: ${rt.toLocaleString()} ${C}
  : ${ht}`;if((await T.fire({title:" ",text:Re,icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{if(Je!==0){const de=Math.abs(Je),it=Je<0?"in":"out",ft={type:"rep_settlement",related_to_type:"rep",related_to_id:k,amount:de,treasuryId:I.treasuryId||null,direction:it,details:{notes:Ze,subtype:"rep_settlement",insurance_amount:rt}},mt=await(await fetch(`${G}/api.php?module=transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ft)})).json();if(!mt.success)return T.fire(" ",mt.message||"  ","error")}if(rt>0){const de={type:"rep_payment_in",related_to_type:"rep",related_to_id:k,amount:rt,treasuryId:null,direction:"in",details:{notes:"    ",subtype:"rep_insurance_apply"}},ft=await(await fetch(`${G}/api.php?module=transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)})).json();if(!ft.success)return T.fire(" ",ft.message||"    ","error");const mt=await(await fetch(`${G}/api.php?module=users&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:k,insurance_paid:0,insurance_amount:0})})).text();let we=null;try{we=JSON.parse(mt)}catch{we={success:!1,message:mt}}if(!we.success)return T.fire(" ",we.message||"     ","error");b(Be=>Be.map(gt=>Number(gt.id)===Number(k)?{...gt,insurance_paid:0,insurance_amount:0}:gt))}T.fire(" ","    .","success"),await Xe(),L(de=>({...de,amount:"",note:"",type:"payment"}))}catch(de){console.error("Settle rep error",de),T.fire("  ","  .","error")}},je=x.find(ne=>ne.id===k),lt=k?(j||[]).filter(ne=>Number(ne.rep_id)===Number(k)):[],pt=S.reduce((ne,Ee)=>ne+(Number(Ee.amount||0)>0?Number(Ee.amount||0):0),0),ae=S.reduce((ne,Ee)=>ne+(Number(Ee.amount||0)<0?Math.abs(Number(Ee.amount||0)):0),0),tt=S.reduce((ne,Ee)=>ne+Number(Ee.amount||0),0);return g.useEffect(()=>{if(I.type!=="settlement")return;if(!k){I.amount!==""&&L(st=>({...st,amount:""}));return}const ne=je&&je.insurance_paid?Number(je.insurance_amount||0):0,rt=Number(tt||0)+(ne>0?ne:0),Je=String(Math.abs(rt||0));I.amount!==Je&&L(st=>({...st,amount:Je}))},[I.type,k,tt,je,I.amount]),g.useEffect(()=>{if(!k)return;(async()=>{try{const rt=await(await fetch(`${G}/api.php?module=orders&action=getByRep&rep_id=${k}&status=with_rep`)).json();rt.success&&_(rt.data||[])}catch(Ee){console.error("Failed to fetch rep assigned orders",Ee)}})(),Xe()},[k]),g.useEffect(()=>{t==="rep-performance"&&$()},[t,le,Z,P,se,x.length]),r.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-sm text-muted font-medium",children:"    "})]}),r.jsxs("div",{className:"flex gap-1 p-1.5 rounded-2xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("button",{onClick:()=>ce(null),className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black bg-green-600 text-white hover:opacity-90",children:[r.jsx(tu,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("list"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="list"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Sc,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("custody"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="custody"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(au,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("rep-cycle"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="rep-cycle"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Ap,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("transactions"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all ${t==="transactions"?"bg-accent text-white shadow-md":"text-muted hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(On,{size:16}),"  "]})]})]}),t==="list"&&r.jsxs("div",{className:"rounded-3xl shadow-sm border border-card overflow-hidden animate-in fade-in card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-4 border-b dark:border-slate-700 flex items-center justify-between gap-4 bg-slate-50/50 dark:bg-slate-900/30",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"    ...",className:"w-full pr-10 pl-4 py-2.5 bg-white dark:bg-slate-900 border-none rounded-2xl text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white text-right",value:n,onChange:ne=>i(ne.target.value)})]}),r.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"  "})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:be.map(ne=>{const Ee=Number(ne.balance??0),rt=Number(ne.insurance_amount??0),Je=!!ne.insurance_paid&&rt>0||rt>0,st=Number.isFinite(Ee)&&Math.abs(Ee)>1e-6,Ze=!Je&&!st,ct=Je?`  :   ${rt.toLocaleString()} ${C}`:st?`  :  ${Ee.toLocaleString()} ${C}`:"";return r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:ne.name}),r.jsx("td",{className:"px-6 py-4 text-xs",children:ne.phone}),r.jsxs("td",{className:"px-6 py-4 text-sm font-black",children:[ne.insurance_amount?Number(ne.insurance_amount).toLocaleString():""," ",C]}),r.jsxs("td",{className:"px-6 py-4 text-sm font-black",children:[Math.abs(Number(ne.balance||0)).toLocaleString()," ",C," ",r.jsx("span",{className:"text-sm font-bold",style:{color:ne.balance>0?"green":ne.balance<0?"red":"#666"},children:ne.balance>0?"":ne.balance<0?"":""})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black ${ne.status===""?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:ne.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("button",{onClick:()=>oe(ne.id),disabled:!Ze,className:`p-2 rounded-xl transition-all ${Ze?"text-muted hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30":"opacity-50 cursor-not-allowed text-muted"}`,title:ct,children:r.jsx(Gr,{size:16})}),r.jsx("button",{onClick:()=>ce(ne),className:"p-2 text-muted hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl transition-all",title:"",children:r.jsx(ma,{size:16})}),r.jsx("button",{onClick:()=>$e(ne.id),className:"p-2 text-muted hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-all",title:" ",children:r.jsx(ha,{size:16})})]})})]},ne.id)})})]})})]}),t==="custody"&&r.jsxs("div",{className:"p-8 rounded-3xl border border-card shadow-sm animate-in zoom-in duration-300 card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"flex items-center gap-4 mb-6",children:r.jsxs("div",{className:"flex-1 max-w-sm",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"   "}),r.jsxs("select",{value:k||"",onChange:ne=>E(Number(ne.target.value)),className:"w-full mt-1 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-800 dark:text-slate-200 focus:ring-2 ring-blue-500/20",children:[r.jsx("option",{value:"",children:"--   --"}),x.map(ne=>r.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})}),k&&je?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-in fade-in",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:" "}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-4 border dark:border-slate-700",children:j.length>0?r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold mb-2",children:"   :"}),r.jsx("ul",{className:"space-y-2",children:j.map(ne=>{var Ee;return r.jsxs("li",{className:"flex justify-between items-center p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-medium text-sm",children:["#",ne.orderNumber," - ",ne.customerName]}),r.jsx("div",{className:"text-xs text-muted",children:ne.phone1})]}),r.jsxs("div",{className:"font-bold text-sm",children:[(Ee=ne.products)==null?void 0:Ee.reduce((rt,Je)=>rt+Number(Je.quantity||0),0)," "]})]},ne.id)})})]}):r.jsx("p",{className:"text-center text-xs text-muted p-4",children:"       ."})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:" "}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-4 border dark:border-slate-700",children:S.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs",children:[r.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-xl border dark:border-slate-700",children:[r.jsx("div",{className:"text-muted",children:"  "}),r.jsxs("div",{className:"font-black text-emerald-600",children:[pt.toLocaleString()," ",C]})]}),r.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-xl border dark:border-slate-700",children:[r.jsx("div",{className:"text-muted",children:" "}),r.jsxs("div",{className:"font-black text-rose-600",children:[ae.toLocaleString()," ",C]})]}),r.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-xl border dark:border-slate-700",children:[r.jsx("div",{className:"text-muted",children:" "}),r.jsxs("div",{className:"font-black",children:[tt.toLocaleString()," ",C]})]})]}),r.jsxs("div",{className:"border-t dark:border-slate-700 pt-3",children:[r.jsx("div",{className:"text-xs font-bold mb-2",children:" "}),r.jsx("div",{className:"space-y-2",children:S.slice(0,5).map(ne=>{const Ee=F(ne.details),rt=ye(ne.type||ne.tx_type||"",Ee),Je=Ee.note||Ee.notes||ne.note||"-";return r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:rt}),r.jsx("div",{className:"text-muted",children:Je})]}),r.jsxs("div",{className:"font-black",style:{color:Number(ne.amount||0)>=0?"green":"red"},children:[Number(ne.amount||0).toLocaleString()," ",C]})]},ne.id)})})]})]}):r.jsx("p",{className:"text-xs text-muted",children:"     ."})})]})]}):r.jsxs("div",{className:"text-center p-10 text-muted",children:[r.jsx(au,{size:48,className:"mx-auto opacity-20 mb-4"}),r.jsx("p",{className:"font-bold",children:"      ."})]})]}),t==="transactions"&&(je?r.jsxs("div",{className:"p-8 rounded-3xl border border-card shadow-sm animate-in zoom-in duration-300 card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:["  : ",je.name]}),r.jsx("p",{className:"text-sm text-muted mb-6",children:"               ."}),S.length===0?r.jsx("div",{className:"p-10 border-2 border-dashed rounded-2xl text-center text-muted",children:"     ."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:S.map(ne=>{const Ee=F(ne.details),rt=ye(ne.type||ne.tx_type||"",Ee),Je=Ee.note||Ee.notes||ne.note||"-",st=ne.transaction_date||ne.created_at||ne.createdAt||ne.date||ne.ts||Date.now();return r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-xs",children:new Date(st).toLocaleString()}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:rt}),r.jsxs("td",{className:"px-6 py-4 text-sm font-black",style:{color:Number(ne.amount||0)>=0?"green":"red"},children:[Number(ne.amount||0).toLocaleString()," ",C]}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Je})]},ne.id)})})]})})]}):r.jsxs("div",{className:"p-12 rounded-3xl border text-center animate-in zoom-in duration-300 card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx(Ry,{className:"w-16 h-16 mx-auto mb-4 opacity-20 text-blue-500"}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"  "}),r.jsxs("p",{className:"text-sm max-w-md mx-auto",children:["    ",r.jsx("button",{onClick:()=>a("list"),className:"text-blue-600 font-bold hover:underline",children:" "}),"   ."]})]})),t==="rep-performance"&&r.jsxs("div",{className:"p-8 rounded-3xl border border-card shadow-sm animate-in zoom-in duration-300 card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),r.jsxs("button",{type:"button",onClick:$,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black bg-accent text-white hover:opacity-90",disabled:re,children:[r.jsx(gO,{size:16})," "]})]}),r.jsx("p",{className:"text-sm text-muted mb-6",children:" //      10 ."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{value:le,onChange:ne=>J(ne.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"date",children:" "}),r.jsx("option",{value:"day",children:""}),r.jsx("option",{value:"week",children:""}),r.jsx("option",{value:"month",children:""}),r.jsx("option",{value:"year",children:""})]})]}),(le==="date"||le==="day"||le==="week")&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"date",value:Z,onChange:ne=>M(ne.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),le==="month"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"month",value:P,onChange:ne=>W(ne.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),le==="year"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsx("input",{type:"number",value:se,onChange:ne=>ue(ne.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{value:D,onChange:ne=>U(ne.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"all",children:""}),x.map(ne=>r.jsx("option",{value:String(ne.id),children:ne.name},ne.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx("div",{className:"overflow-x-auto bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-4 border dark:border-slate-700",children:re?r.jsx("div",{className:"text-xs text-muted",children:"  ..."}):r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-2 font-bold",children:""}),r.jsx("th",{className:"py-2 font-bold",children:""}),r.jsx("th",{className:"py-2 font-bold",children:""}),r.jsx("th",{className:"py-2 font-bold",children:""}),r.jsx("th",{className:"py-2 font-bold",children:" "}),r.jsx("th",{className:"py-2 font-bold",children:" "})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:(D==="all"?Ne:Ne.filter(ne=>String(ne.repId)===String(D))).map(ne=>r.jsxs("tr",{className:"hover:bg-white/60 dark:hover:bg-slate-800/40 transition-colors",children:[r.jsx("td",{className:"py-2 font-bold",children:ne.repName}),r.jsx("td",{className:"py-2",children:ne.total}),r.jsxs("td",{className:"py-2",children:[ne.delivered," ",r.jsxs("span",{className:"text-[10px] text-muted",children:["(",ne.deliveredPct,"%)"]})]}),r.jsxs("td",{className:"py-2",children:[ne.returned," ",r.jsxs("span",{className:"text-[10px] text-muted",children:["(",ne.returnedPct,"%)"]})]}),r.jsxs("td",{className:"py-2",children:[ne.withRep," ",r.jsxs("span",{className:"text-[10px] text-muted",children:["(",ne.withRepPct,"%)"]})]}),r.jsxs("td",{className:"py-2 font-black",children:[ne.returnRate,"%"]})]},ne.repId))})]})})}),r.jsx("div",{className:"md:col-span-1",children:r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-4 border dark:border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-black",children:" 10 "}),r.jsx("span",{className:"text-[10px] text-muted",children:"  "})]}),me.length===0?r.jsx("div",{className:"text-xs text-muted",children:"  ."}):r.jsx("div",{className:"space-y-2",children:me.map((ne,Ee)=>r.jsxs("div",{className:"flex justify-between items-center text-xs p-2 bg-white dark:bg-slate-800 rounded-xl border dark:border-slate-700",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-bold",children:["#",Ee+1," ",ne.repName]}),r.jsxs("div",{className:"text-muted",children:[" : ",ne.returnRate,"%"]})]}),r.jsxs("div",{className:"font-black text-emerald-600",children:[ne.delivered," "]})]},ne.repId))})]})})]})]}),t==="rep-cycle"&&r.jsxs("div",{className:"p-8 rounded-3xl border border-card shadow-sm animate-in zoom-in duration-300 card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-1 space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsxs("select",{value:k||"",onChange:ne=>E(Number(ne.target.value)||null),className:"w-full mt-1 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm",children:[r.jsx("option",{value:"",children:"--   --"}),x.map(ne=>r.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-2xl border dark:border-slate-700 space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-muted",children:" :"}),r.jsx("span",{className:"font-bold text-rose-500",children:je?Math.abs(Number(je.balance||0)).toLocaleString()+" "+C+" "+(je.balance>0?"":je.balance<0?"":""):""})]}),r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsx("span",{className:"text-muted",children:"   :"}),r.jsxs("span",{className:"font-bold",children:[lt.reduce((ne,Ee)=>ne+(Number(Ee.total||0)||0),0).toLocaleString()," ",C]})]})]}),r.jsxs("form",{onSubmit:et,className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-2xl border dark:border-slate-700 space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsxs("select",{value:I.type,onChange:ne=>L(Ee=>({...Ee,type:ne.target.value})),className:"w-full border-none rounded-lg py-2 px-3 text-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("option",{value:"payment",children:""}),r.jsx("option",{value:"fine",children:""}),r.jsx("option",{value:"settlement",children:""})]})]}),I.type==="payment"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsxs("select",{value:I.direction,onChange:ne=>L(Ee=>({...Ee,direction:ne.target.value})),className:"w-full border-none rounded-lg py-2 px-3 text-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("option",{value:"in",children:"   ( )"}),r.jsx("option",{value:"out",children:"   ( )"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:I.type==="fine"?" ":I.type==="settlement"?" ":""}),r.jsx("input",{readOnly:I.type==="settlement",value:I.amount,onChange:ne=>L(Ee=>({...Ee,amount:ne.target.value})),type:"number",placeholder:I.type==="fine"?" ":I.type==="settlement"?" ":"",className:"w-full border-none rounded-lg py-2 px-3 text-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"}})]}),I.type==="settlement"&&r.jsxs("div",{className:"p-3 rounded-xl border dark:border-slate-700 bg-white/60 dark:bg-slate-800/30 space-y-2 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted",children:"  "}),r.jsx("span",{className:"font-black",children:je?`${Math.abs(Number(tt||0)).toLocaleString()} ${C} ${Number(tt||0)>0?"":Number(tt||0)<0?"":""}`:""})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted",children:" "}),r.jsx("span",{className:"font-black",children:je&&je.insurance_paid?`${Number(je.insurance_amount||0).toLocaleString()} ${C}`:`0 ${C}`})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted",children:"   "}),r.jsx("span",{className:"font-black",children:(()=>{const ne=Number(tt||0),Ee=je&&je.insurance_paid?Number(je.insurance_amount||0):0,rt=ne<0?ne+Ee:ne;return je?rt===0?`0 ${C}`:`${Math.abs(rt).toLocaleString()} ${C} ${rt>0?"":""}`:""})()})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:""}),r.jsxs("select",{disabled:B&&B.default_treasury_id&&!B.can_change_treasury,value:I.treasuryId,onChange:ne=>L(Ee=>({...Ee,treasuryId:ne.target.value})),className:"w-full border-none rounded-lg py-2 px-3 text-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("option",{value:"",children:"--   --"}),te.map(ne=>r.jsx("option",{value:ne.id,children:ne.name||ne.title||` ${ne.id}`},ne.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{value:I.note,onChange:ne=>L(Ee=>({...Ee,note:ne.target.value})),type:"text",placeholder:"   ",className:"w-full border-none rounded-lg py-2 px-3 text-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"}})]}),I.type!=="settlement"?r.jsx("button",{type:"submit",className:"w-full bg-accent text-white py-3 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:I.type==="fine"?" ":" "}):r.jsx("button",{type:"button",onClick:nt,className:"w-full bg-accent text-white py-3 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all",children:" "})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2",children:[r.jsx(kc,{size:18}),"   "]}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-4 border dark:border-slate-700 max-h-96 overflow-y-auto",children:r.jsx("ul",{className:"space-y-2",children:v.map(ne=>{var st;const Ee=ne.customerName||ne.customer_name||((st=ne.customer)==null?void 0:st.name)||"",rt=ne.orderNumber||ne.order_number||ne.order_no||"",Je=ne.total||ne.total_amount||ne.grand_total||0;return r.jsxs("li",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900"}),r.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:Ee}),r.jsx("p",{className:"text-xs text-muted",children:rt})]}),r.jsxs("p",{className:"font-bold text-sm",children:[Number(Je).toLocaleString()," ",C]})]})]},ne.id)})})})]})]})]}),o&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:h?"  ":"  "}),r.jsx("button",{onClick:()=>d(!1),className:"text-muted hover:text-rose-500 transition-colors",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ie,className:"p-8 space-y-6 text-right",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",required:!0,value:u.name,onChange:ne=>f({...u,name:ne.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:" "}),r.jsx("input",{type:"text",value:u.phone,onChange:ne=>f({...u,phone:ne.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("div",{className:"space-y-1 flex items-center",children:[r.jsx("input",{id:"insurance_paid",type:"checkbox",disabled:!!h,checked:u.insurance_paid,onChange:ne=>f({...u,insurance_paid:ne.target.checked}),className:"mr-2"}),r.jsx("label",{htmlFor:"insurance_paid",className:"text-xs font-bold text-muted",children:" "})]}),u.insurance_paid&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-muted mr-2",children:"  "}),r.jsx("input",{type:"number",min:"0",disabled:!!h,required:!h,value:u.insurance_amount,onChange:ne=>f({...u,insurance_amount:ne.target.value}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm"})]}),r.jsxs("button",{type:"submit",className:"w-full bg-accent text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",h?" ":" "]})]})]})})]})};async function Vae(e,t){try{const n=await(await fetch(`${G}/api.php?module=treasuries&action=getAll`)).text();let i=null;try{i=JSON.parse(n)}catch{return console.error("treasuries getAll raw response:",n),await T.fire("  ",n.substring(0,1e3),"error"),!1}if(!(i!=null&&i.success)||!Array.isArray(i.data))return await T.fire("  ",(i==null?void 0:i.message)||"   .","error"),!1;const o=i.data.find(u=>((u==null?void 0:u.name)||(u==null?void 0:u.title))===" ");if(!(o!=null&&o.id))return await T.fire("   ",'     " "  .',"error"),!1;const h=await(await fetch(`${G}/api.php?module=transactions&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"payment_in",related_to_type:"none",related_to_id:null,amount:t,treasuryId:o.id,direction:"in",details:{notes:`   (  ${e})`,subtype:"rep_insurance_deposit",rep_id:e}})})).text();let m=null;try{m=JSON.parse(h)}catch{return console.error("insurance tx raw response:",h),await T.fire("  ",h.substring(0,1e3),"error"),!1}return m!=null&&m.success?!0:(await T.fire("  ",(m==null?void 0:m.message)||"    .","error"),!1)}catch(a){return console.error("insurance transaction error",a),await T.fire("  ","     .","error"),!1}}const Gae=()=>{const[e,t]=g.useState(!1),[a,n]=g.useState(!1),[i,o]=g.useState(!1),[d,h]=g.useState(null),[m,u]=g.useState(!1),[f,x]=g.useState({}),[b,v]=g.useState(localStorage.getItem("Dragon_company_logo")),N=g.useRef(null),j=g.useRef(null),[_,k]=g.useState({name:localStorage.getItem("Dragon_company_name")||"",phone:localStorage.getItem("Dragon_company_phone")||"",address:localStorage.getItem("Dragon_company_address")||"",terms:localStorage.getItem("Dragon_company_terms")||"",taxRate:localStorage.getItem("Dragon_tax_rate")||"14",salesCalcOrder:localStorage.getItem("Dragon_sales_calc_order")||"discount_then_tax",salesDisplayMethod:localStorage.getItem("Dragon_sales_display_method")||"company",productSource:localStorage.getItem("Dragon_product_source")||"both",deliveryMethod:(localStorage.getItem("Dragon_delivery_method")||"reps").toString(),currency:localStorage.getItem("Dragon_currency")||"EGP",autoBackup:localStorage.getItem("Dragon_auto_backup")==="true",backupFrequency:localStorage.getItem("Dragon_backup_freq")||"daily",backupEmail:localStorage.getItem("Dragon_backup_email")||"",backupEmailVerified:localStorage.getItem("Dragon_backup_email_verified")==="true",reportEmail:localStorage.getItem("dragon_report_email")||"",reportEmailVerified:localStorage.getItem("dragon_report_email_verified")==="true",reportDailySales:localStorage.getItem("dragon_report_daily_sales")==="true",reportDailyTreasury:localStorage.getItem("dragon_report_daily_treasury")==="true",reportDailyAudit:localStorage.getItem("dragon_report_daily_audit")==="true",reportAuto:localStorage.getItem("dragon_report_auto")==="true"}),[E,C]=g.useState(""),[S,O]=g.useState(!1),[I,L]=g.useState(!1),[te,H]=g.useState(""),[B,X]=g.useState(!1),[V,le]=g.useState(!1),J=f.status===""?"text-emerald-400":f.status===""?"text-amber-400":"text-rose-400",Z=ve=>ve===!0||ve==="true"||ve==="1",M="https://rustdesk.com/download",P=async(ve,$)=>{var ce;try{if((ce=navigator==null?void 0:navigator.clipboard)!=null&&ce.writeText)await navigator.clipboard.writeText(ve);else{const ie=document.createElement("textarea");ie.value=ve,ie.style.position="fixed",ie.style.opacity="0",document.body.appendChild(ie),ie.select(),document.execCommand("copy"),document.body.removeChild(ie)}T.fire("",`  ${$}.`,"success")}catch(ie){console.error(ie),T.fire(""," .   .","error")}},W=()=>{try{window.location.href="rustdesk://"}catch(ve){console.error(ve)}T.fire("","    RustDesk           .","info")},se=(ve,$,ce)=>ce?"":($||"").toLowerCase()==="blocked"?"":(ve||"").toLowerCase()==="trial"?"":ve?"":" ";g.useEffect(()=>{const ve=JSON.parse(localStorage.getItem("Dragon_activation")||"{}");x(ve),(async()=>{try{const ie=await(await fetch(`${G}/get_settings.php`)).json();if(ie.success&&ie.data){const oe=ie.data;if(k({name:oe.company_name||"",phone:oe.company_phone||"",address:oe.company_address||"",terms:oe.company_terms||"",taxRate:oe.tax_rate||"14",salesCalcOrder:oe.sales_calc_order||"discount_then_tax",currency:oe.currency||"EGP",salesDisplayMethod:oe.sales_display_method||"company",productSource:oe.product_source||"both",deliveryMethod:oe.delivery_method||"reps",autoBackup:oe.auto_backup==="true",backupFrequency:oe.backup_frequency||"daily",backupEmail:oe.backup_email||"",backupEmailVerified:oe.backup_email_verified==="true",reportEmail:oe.report_email||"",reportEmailVerified:oe.report_email_verified==="true",reportDailySales:oe.report_daily_sales==="true"||oe.report_daily_sales==="1",reportDailyTreasury:oe.report_daily_treasury==="true"||oe.report_daily_treasury==="1",reportDailyAudit:oe.report_daily_audit==="true"||oe.report_daily_audit==="1",reportAuto:oe.report_auto==="true"||oe.report_auto==="1"}),oe.activation_type||oe.activation_expiry||oe.activation_account_status){const $e=Z(oe.activation_is_expired);x({status:se(oe.activation_type||"",oe.activation_account_status||"",$e),expiry:oe.activation_expiry||" ",account_status:oe.activation_account_status||"Active",is_expired:$e?"true":"false",last_check:oe.activation_last_check||""})}oe.company_logo&&v(oe.company_logo)}}catch(ce){console.error("Failed to fetch settings:",ce)}})()},[]);const ue=async ve=>await(await fetch(`${G}/save_settings.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_name:_.name,company_phone:_.phone,company_address:_.address,company_terms:_.terms,company_logo:b||"",tax_rate:_.taxRate,sales_calc_order:_.salesCalcOrder,currency:_.currency,auto_backup:_.autoBackup.toString(),backup_frequency:_.backupFrequency,backup_email:_.backupEmail,report_email:_.reportEmail,report_daily_sales:_.reportDailySales.toString(),report_daily_treasury:_.reportDailyTreasury.toString(),report_daily_audit:_.reportDailyAudit.toString(),report_auto:_.reportAuto.toString(),sales_display_method:_.salesDisplayMethod,product_source:_.productSource,delivery_method:_.deliveryMethod})})).json(),D=async()=>{try{const ve=await ue(!0);ve.success?(localStorage.setItem("Dragon_company_name",_.name),localStorage.setItem("Dragon_company_phone",_.phone),localStorage.setItem("Dragon_company_address",_.address),localStorage.setItem("Dragon_company_terms",_.terms),localStorage.setItem("Dragon_tax_rate",_.taxRate),localStorage.setItem("Dragon_sales_calc_order",_.salesCalcOrder),localStorage.setItem("Dragon_currency",_.currency),localStorage.setItem("Dragon_sales_display_method",_.salesDisplayMethod),localStorage.setItem("Dragon_product_source",_.productSource),localStorage.setItem("Dragon_delivery_method",_.deliveryMethod),localStorage.setItem("Dragon_auto_backup",_.autoBackup.toString()),localStorage.setItem("Dragon_backup_freq",_.backupFrequency),localStorage.setItem("Dragon_backup_email",_.backupEmail),localStorage.setItem("Dragon_backup_email_verified",_.backupEmailVerified?"true":"false"),localStorage.setItem("Dragon_company_logo",b||""),localStorage.setItem("dragon_report_email",_.reportEmail),localStorage.setItem("dragon_report_email_verified",_.reportEmailVerified?"true":"false"),localStorage.setItem("dragon_report_daily_sales",_.reportDailySales?"true":"false"),localStorage.setItem("dragon_report_daily_treasury",_.reportDailyTreasury?"true":"false"),localStorage.setItem("dragon_report_daily_audit",_.reportDailyAudit?"true":"false"),localStorage.setItem("dragon_report_auto",_.reportAuto?"true":"false"),t(!0),setTimeout(()=>t(!1),3e3),setTimeout(()=>window.location.reload(),800)):T.fire({icon:"error",title:" ",text:ve.message||"    ",confirmButtonText:""})}catch{T.fire({icon:"error",title:"  ",text:"  .     .",confirmButtonText:""})}},U=async()=>{u(!0);try{const $=await(await fetch(`${G}/update_check.php`)).json();if($.success){h($.data||null);const ce=$.data||{};if(ce.configured===!1){T.fire("",ce.message||"    .","warning");return}ce.update_available?T.fire(" ",` : ${ce.current_version}   : ${ce.latest_version}`,"info"):T.fire("",`   .  : ${ce.current_version}`,"success")}else T.fire("",$.message||"  .","error")}catch{T.fire("","    .","error")}finally{u(!1)}},re=async()=>{const ve=d==null?void 0:d.asset_url;if(!ve){T.fire("","    .    update-config.json  Release   zip.","warning");return}if((await T.fire({icon:"warning",title:" ",text:"      .   Backup .",showCancelButton:!0,confirmButtonText:" ",cancelButtonText:""})).isConfirmed){u(!0);try{const ie=await(await fetch(`${G}/update_apply.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({asset_url:ve})})).json();ie.success?(T.fire("",ie.message||"  .   .","success"),setTimeout(()=>U(),800)):T.fire("",ie.message||"  .","error")}catch{T.fire("","    .","error")}finally{u(!1)}}},he=async()=>{if(!_.backupEmail){T.fire("","   .","warning");return}L(!0);try{const $=await(await fetch(`${G}/backup_email_send_otp.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.backupEmail})})).json();$.success?(O(!0),T.fire(" ","     .","success")):T.fire("",$.message||"   .","error")}catch{T.fire("","  .","error")}finally{L(!1)}},Ne=async()=>{if(!E.trim()){T.fire("","   .","warning");return}L(!0);try{const $=await(await fetch(`${G}/backup_email_verify_otp.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.backupEmail,code:E.trim()})})).json();$.success?(k(ce=>({...ce,backupEmailVerified:!0})),localStorage.setItem("Dragon_backup_email_verified","true"),T.fire(" ","   .","success")):T.fire("",$.message||"  .","error")}catch{T.fire("","  .","error")}finally{L(!1)}},Y=async()=>{if(!_.backupEmailVerified){T.fire("","   .","warning");return}n(!0);try{const $=await(await fetch(`${G}/backup_send_email.php`,{method:"POST"})).json();$.success?T.fire("","     .","success"):T.fire("",$.message||"  .","error")}catch{T.fire("","  .","error")}finally{n(!1)}},me=async()=>{if(!_.reportEmail){T.fire("","   .","warning");return}le(!0);try{const $=await(await fetch(`${G}/report_email_send_otp.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.reportEmail})})).json();$.success?(X(!0),T.fire(" ","     .","success")):T.fire("",$.message||"   .","error")}catch{T.fire("","  .","error")}finally{le(!1)}},z=async()=>{if(!te.trim()){T.fire("","   .","warning");return}le(!0);try{const $=await(await fetch(`${G}/report_email_verify_otp.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.reportEmail,code:te.trim()})})).json();$.success?(k(ce=>({...ce,reportEmailVerified:!0})),localStorage.setItem("dragon_report_email_verified","true"),T.fire(" ","   .","success")):T.fire("",$.message||"  .","error")}catch{T.fire("","  .","error")}finally{le(!1)}},F=async()=>{if(!_.reportEmailVerified){T.fire("","   .","warning");return}n(!0);try{const ve=await ue(!1);if(!ve.success){T.fire("",ve.message||"   .","error"),n(!1);return}const ce=await(await fetch(`${G}/daily_report_send.php`,{method:"POST"})).json();ce.success?T.fire("","     .","success"):T.fire("",ce.message||"  .","error")}catch{T.fire("","  .","error")}finally{n(!1)}},ye=ve=>{var ce;const $=(ce=ve.target.files)==null?void 0:ce[0];if($){const ie=new FileReader;ie.onloadend=()=>v(ie.result),ie.readAsDataURL($)}},Ae=()=>{n(!0);try{window.location.href=`${G}/backup_export.php`,T.fire({icon:"success",title:"  ",text:"     .",timer:2e3,showConfirmButton:!1})}catch{T.fire({icon:"error",title:"  ",text:"    ."})}finally{n(!1)}},be=async ve=>{var ie;const $=(ie=ve.target.files)==null?void 0:ie[0];if(!$)return;if(!(await T.fire({title:" ",text:"      .   ",icon:"warning",showCancelButton:!0,confirmButtonText:" ",cancelButtonText:""})).isConfirmed){j.current&&(j.current.value="");return}o(!0);try{const oe=new FormData;oe.append("backup",$);const Xe=await(await fetch(`${G}/backup_restore.php`,{method:"POST",body:oe})).json();Xe.success?(T.fire(" ","   .    .","success"),setTimeout(()=>window.location.reload(),1200)):T.fire(" ",Xe.message||"  .","error")}catch{T.fire("","    .","error")}finally{o(!1),j.current&&(j.current.value="")}},Me=()=>{var ve;(ve=j.current)==null||ve.click()},Oe=async()=>{if((await T.fire({title:"  ",text:"              !",icon:"error",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"  ",cancelButtonText:""})).isConfirmed)try{const ce=await(await fetch(`${G}/reset.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).json();ce.success?(localStorage.clear(),T.fire({title:"  !",text:"    .",icon:"success",showConfirmButton:!1,timer:2e3}).then(()=>{window.location.reload()})):T.fire({title:" ",text:ce.message||"     ",icon:"error",confirmButtonText:""})}catch{T.fire({title:"  ",text:"  .     .",icon:"error",confirmButtonText:""})}};return r.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto pb-12 transition-colors duration-300 animate-in fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:" "}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"      "})]}),r.jsxs("button",{onClick:D,className:"bg-blue-600 text-white px-6 py-2.5 rounded-2xl font-bold flex items-center gap-2 shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-all active:scale-95",children:[r.jsx(yr,{size:18}),"  "]})]}),e&&r.jsxs("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 p-4 rounded-2xl border border-emerald-200 dark:border-emerald-800/50 flex items-center gap-3",children:[r.jsx(ML,{size:18}),"       ."]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(bm,{className:"text-blue-500",size:18}),"   "]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-32 h-32 rounded-[2rem] bg-slate-50 dark:bg-slate-900 border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center overflow-hidden transition-all group-hover:border-blue-500",children:b?r.jsx("img",{src:b,className:"w-full h-full object-cover",alt:"Company Logo"}):r.jsx(oR,{className:"text-slate-300 dark:text-slate-600 w-10 h-10"})}),r.jsx("button",{onClick:()=>{var ve;return(ve=N.current)==null?void 0:ve.click()},className:"absolute -bottom-2 -left-2 bg-blue-600 text-white p-2.5 rounded-2xl shadow-lg shadow-blue-500/30 hover:bg-blue-700 transition-all",children:r.jsx(Tv,{size:16})}),r.jsx("input",{type:"file",ref:N,className:"hidden",accept:"image/*",onChange:ye})]}),r.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsx("input",{type:"text",value:_.name,onChange:ve=>k({..._,name:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsx("input",{type:"text",value:_.phone,onChange:ve=>k({..._,phone:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2",children:" "}),r.jsx("input",{type:"text",value:_.address,onChange:ve=>k({..._,address:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white focus:ring-2 ring-blue-500/20"})]}),r.jsxs("div",{className:"md:col-span-2 space-y-1 mt-2",children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mr-2 flex items-center gap-2",children:[r.jsx(On,{size:14,className:"text-blue-500"}),"   /  "]}),r.jsx("textarea",{rows:4,value:_.terms,onChange:ve=>k({..._,terms:ve.target.value}),placeholder:"      ...",className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white focus:ring-2 ring-blue-500/20 resize-none"})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsx("h3",{className:"font-bold flex items-center gap-2 mb-4 text-slate-800 dark:text-slate-100",children:" "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"    "}),r.jsxs("select",{value:_.salesDisplayMethod,onChange:ve=>k({..._,salesDisplayMethod:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"company",children:"   "}),r.jsx("option",{value:"sales_offices",children:"   "})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsx("h3",{className:"font-bold flex items-center gap-2 mb-4 text-slate-800 dark:text-slate-100",children:"   "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"  /"}),r.jsxs("select",{value:_.deliveryMethod,onChange:ve=>k({..._,deliveryMethod:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"reps",children:"   "}),r.jsx("option",{value:"direct",children:"  "}),r.jsx("option",{value:"shipping",children:"    "})]}),r.jsx("p",{className:"text-[11px] text-muted",children:"           ."})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsx("h3",{className:"font-bold flex items-center gap-2 mb-4 text-slate-800 dark:text-slate-100",children:"   "}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"  "}),r.jsxs("select",{value:_.productSource,onChange:ve=>k({..._,productSource:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"factory",children:"  "}),r.jsx("option",{value:"suppliers",children:"  "}),r.jsx("option",{value:"both",children:" "})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(Av,{className:"text-indigo-500",size:18}),"    "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:Ae,disabled:a,className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/40 p-2.5 rounded-xl text-indigo-600 dark:text-indigo-400",children:a?r.jsx(ul,{className:"animate-spin",size:20}):r.jsx(vm,{size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:"  (Backup)"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"  SQL "})]})]})}),r.jsx("input",{type:"file",ref:j,className:"hidden",accept:".sql",onChange:be}),r.jsx("button",{onClick:Me,disabled:i,className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-all",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/40 p-2.5 rounded-xl text-amber-600 dark:text-amber-400",children:i?r.jsx(ul,{className:"animate-spin",size:20}):r.jsx(wm,{size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:"  (Restore)"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"  SQL "})]})]})})]}),r.jsxs("div",{className:"space-y-4 md:border-r md:pr-6 border-slate-100 dark:border-slate-700",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"   "}),r.jsx("input",{type:"email",placeholder:"example@email.com",value:_.backupEmail,onChange:ve=>k({..._,backupEmail:ve.target.value,backupEmailVerified:!1}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"}),r.jsx("p",{className:"text-[11px] text-muted",children:"           ."}),!_.backupEmailVerified&&r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:he,disabled:I||!_.backupEmail,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"  "}),S&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",placeholder:"  ",value:E,onChange:ve=>C(ve.target.value),className:"flex-1 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"}),r.jsx("button",{onClick:Ne,disabled:I,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:""})]})]}),_.backupEmailVerified&&r.jsx("button",{onClick:Y,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:"  "})]}),r.jsxs("div",{className:"flex items-center justify-between p-2",children:[r.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"  "}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:_.autoBackup,onChange:ve=>k({..._,autoBackup:ve.target.checked})}),r.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:bg-indigo-600 after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:-translate-x-full"})]})]}),r.jsxs("div",{className:`space-y-1 ${_.autoBackup?"":"opacity-40"}`,children:[r.jsx("label",{className:"text-[10px] font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{disabled:!_.autoBackup,value:_.backupFrequency,onChange:ve=>k({..._,backupFrequency:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"hourly",children:"  "}),r.jsx("option",{value:"daily",children:" ( )"}),r.jsx("option",{value:"weekly",children:" ( )"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(ul,{className:"text-slate-500",size:18}),"  "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("button",{onClick:U,disabled:m,className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-700/40 transition-all",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-2.5 rounded-xl text-slate-700 dark:text-slate-200",children:r.jsx(ul,{className:m?"animate-spin":"",size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:" "}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"GitHub Releases"})]})]})}),r.jsx("button",{onClick:re,disabled:m||!(d!=null&&d.update_available),className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all disabled:opacity-40",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/40 p-2.5 rounded-xl text-emerald-700 dark:text-emerald-300",children:r.jsx(wm,{size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:" "}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"  config  "})]})]})})]}),r.jsxs("div",{className:"mt-4 text-xs text-muted",children:[(d==null?void 0:d.current_version)&&r.jsxs("div",{children:[" : ",r.jsx("span",{className:"font-bold",children:d.current_version})]}),(d==null?void 0:d.latest_version)&&r.jsxs("div",{children:[" : ",r.jsx("span",{className:"font-bold",children:d.latest_version})]}),(d==null?void 0:d.asset_name)&&r.jsxs("div",{children:[" : ",r.jsx("span",{className:"font-mono",children:d.asset_name})]}),!d&&r.jsx("div",{children:"     ."})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(q_,{className:"text-slate-500",size:18}),"   (RustDesk)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("button",{onClick:W,className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-700/40 transition-all",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-2.5 rounded-xl text-slate-700 dark:text-slate-200",children:r.jsx(q_,{size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:" RustDesk"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"     "})]})]})}),r.jsx("button",{onClick:()=>window.open(M,"_blank","noopener,noreferrer"),className:"w-full flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-900 rounded-2xl hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-all",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/40 p-2.5 rounded-xl text-indigo-700 dark:text-indigo-300",children:r.jsx(vm,{size:20})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-slate-200",children:" RustDesk"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"     "})]})]})})]}),r.jsxs("div",{className:"mt-4 text-xs text-muted space-y-1",children:[r.jsx("div",{children:"1)  RustDesk  ."}),r.jsx("div",{children:"2)    ID     RustDesk."}),r.jsx("div",{children:"3)    ."}),r.jsxs("div",{className:"pt-2 flex items-center gap-2",children:[r.jsx("span",{className:"font-mono text-[11px] break-all",children:M}),r.jsxs("button",{onClick:()=>P(M," "),className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-100",type:"button",children:[r.jsx(KL,{size:14}),""]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(io,{className:"text-emerald-500",size:18}),"    "]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"   "}),r.jsx("input",{type:"email",placeholder:"example@email.com",value:_.reportEmail,onChange:ve=>k({..._,reportEmail:ve.target.value,reportEmailVerified:!1}),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"}),r.jsx("p",{className:"text-[11px] text-muted",children:"      ."}),!_.reportEmailVerified&&r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:me,disabled:V||!_.reportEmail,className:"px-3 py-2 bg-blue-600 text-white rounded",children:"  "}),B&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",placeholder:"  ",value:te,onChange:ve=>H(ve.target.value),className:"flex-1 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"}),r.jsx("button",{onClick:z,disabled:V,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:""})]})]}),_.reportEmailVerified&&r.jsx("button",{onClick:F,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:"   "})]})}),r.jsxs("div",{className:"space-y-4 md:border-r md:pr-6 border-slate-100 dark:border-slate-700",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:_.reportDailySales,onChange:ve=>k({..._,reportDailySales:ve.target.checked})}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:_.reportDailyTreasury,onChange:ve=>k({..._,reportDailyTreasury:ve.target.checked})}),"  "]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:_.reportDailyAudit,onChange:ve=>k({..._,reportDailyAudit:ve.target.checked})}),"   "]})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-2",children:[r.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"  "}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:_.reportAuto,onChange:ve=>k({..._,reportAuto:ve.target.checked})}),r.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-slate-700 rounded-full peer peer-checked:bg-emerald-600 after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:-translate-x-full"})]})]}),r.jsx("button",{onClick:async()=>{try{const ve=await ue(!1);ve.success?T.fire("","   .","success"):T.fire("",ve.message||"   .","error")}catch{T.fire("","  .","error")}},className:"px-3 py-2 bg-slate-200 rounded text-sm",children:"  "}),r.jsx("p",{className:"text-[11px] text-muted",children:"       report_run.php."})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-950 p-6 rounded-3xl text-white shadow-xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute -top-4 -right-4 opacity-10 rotate-12",children:r.jsx(Is,{size:120})}),r.jsxs("h3",{className:"font-bold mb-8 flex items-center gap-2",children:[r.jsx(Is,{className:"text-blue-400"})," "]}),r.jsxs("div",{className:"space-y-4 relative z-10",children:[r.jsxs("div",{className:"bg-white/5 p-3 rounded-2xl flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-400",children:":"}),r.jsx("span",{className:`text-sm font-bold ${J}`,children:f.status})]}),r.jsxs("div",{className:"bg-white/5 p-3 rounded-2xl flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-400",children:" :"}),r.jsx("span",{className:"text-sm font-bold",children:f.expiry||" "})]}),r.jsxs("div",{className:"bg-white/5 p-3 rounded-2xl flex justify-between items-center",children:[r.jsx("span",{className:"text-xs text-slate-400",children:" :"}),r.jsx("span",{className:"text-sm font-bold",children:f.last_check||" "})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 shadow-sm transition-colors",children:[r.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-6 text-slate-800 dark:text-slate-100",children:[r.jsx(Cv,{className:"text-amber-500",size:18}),"  "]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:" "}),r.jsxs("select",{value:_.currency,onChange:ve=>k({..._,currency:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"EGP",children:"  (EGP)"}),r.jsx("option",{value:"SAR",children:"  (SAR)"}),r.jsx("option",{value:"USD",children:"  (USD)"}),r.jsx("option",{value:"AED",children:"  (AED)"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"  (%)"}),r.jsx("input",{type:"number",value:_.taxRate,onChange:ve=>k({..._,taxRate:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"  /"}),r.jsxs("select",{value:_.salesCalcOrder,onChange:ve=>k({..._,salesCalcOrder:ve.target.value}),className:"w-full py-3 px-4 bg-slate-50 dark:bg-slate-900 border-none rounded-2xl text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"discount_then_tax",children:"  "}),r.jsx("option",{value:"tax_then_discount",children:"  "})]})]})]})]}),r.jsxs("div",{className:"bg-rose-50 dark:bg-rose-950/20 p-6 rounded-3xl border border-rose-100 dark:border-rose-900/50 shadow-sm",children:[r.jsxs("h4",{className:"font-bold text-rose-700 dark:text-rose-400 flex items-center gap-2 mb-2",children:[r.jsx(AL,{size:16}),"  "]}),r.jsx("p",{className:"text-[10px] text-rose-600 dark:text-rose-500 mb-4",children:"            ."}),r.jsx("button",{onClick:Oe,className:"w-full py-2.5 bg-rose-600 text-white rounded-xl text-xs font-bold hover:bg-rose-700 transition-all shadow-lg shadow-rose-500/20 active:scale-95",children:"   "})]})]})]})]})},Xae=e=>e.toISOString().slice(0,10),Wae=()=>{const e=new Date,[t,a]=g.useState(Xae(e)),[n,i]=g.useState(!1),[o,d]=g.useState([]),[h,m]=g.useState(null),[u,f]=g.useState([]),[x,b]=g.useState({}),[v,N]=g.useState([]),[j,_]=g.useState(!1);g.useEffect(()=>{k()},[t]),g.useEffect(()=>{E()},[t]);const k=async()=>{i(!0);try{try{const le=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json();if(le&&le.success){const J={};(le.data||[]).forEach(Z=>{J[Z.id]=Z}),b(J)}}catch(V){console.debug("Failed to load orders for daily report",V)}const H=`${G}/api.php?module=reports&action=finance&start_date=${t}&end_date=${t}`,X=await(await fetch(H)).json();X&&X.success?(m(typeof X.data.starting_balance<"u"?Number(X.data.starting_balance):null),d(X.data.treasuryBalanceHistory||[]),f(X.data.revenueAndExpenseRecords||[])):(d([]),f([]),T.fire("","    .","info"))}catch(H){console.error("Failed to load daily report",H),T.fire("","   .  .","error")}finally{i(!1)}},E=async()=>{_(!0);try{const H=`${G}/api.php?module=reports&action=archives&start_date=${t}&end_date=${t}&include_html=1`,X=await(await fetch(H)).json();X&&X.success?N(X.data||[]):N([])}catch{N([])}finally{_(!1)}},C=H=>{if(!H)return;const B=window.open("","_blank","width=1000,height=800");B&&(B.document.write(H),B.document.close())},S=_c.useMemo(()=>{const H=h!==null?h:o.length?o[0].balance-u.reduce((Z,M)=>Z+Number(M.amount||0),0):0,B=o.length?o[o.length-1].balance:H+u.reduce((Z,M)=>Z+Number(M.amount||0),0);let X=0,V=0,le=0,J=0;return u.forEach(Z=>{const M=Number(Z.amount||0),P=(Z.txn_type||"").toString().toLowerCase(),W=(Z.desc||"").toString();M>=0?X+=M:V+=Math.abs(M),M>0&&(P.includes("payment_in")||P.includes("deposit")||W.includes("")||W.toLowerCase().includes("deposit"))&&(J+=M),M<0&&(P.includes("payment")||P.includes("payment_out")||W.toLowerCase().includes("")||W.toLowerCase().includes(""))&&(le+=Math.abs(M))}),{startBalance:H,endBalance:B,totalRevenue:X,totalExpense:V,totalPayments:le,totalDeposits:J}},[o,u]),O=(H,B,X)=>{const V=(H||X||B||"").toString().toLowerCase(),le={expense:"",revenue:"",payment_in:"",payment_out:"",sale:"",deposit:"",supplier_payment:" ",transfer_in:" ",transfer_out:" ",rep_payment_in:"   ",rep_payment_out:" ",rep_settlement:" ",payment:"/",paymentin:"",paymentout:""};if(le[V])return le[V];for(const Z of Object.keys(le))if(V.includes(Z))return le[Z];const J=(B||"").toString();return/[\u0600-\u06FF]/.test(J)?J:J||(H||X||"").toString()},I=_c.useMemo(()=>{const H=new Set,B=new Set;let X=0,V=0,le=0,J=0,Z=0,M=0,P=0;const W=se=>{if(!se)return{};if(typeof se=="object")return se;try{return JSON.parse(se)}catch{return{}}};return u.forEach(se=>{const ue=Number(se.amount||0),D=(se.txn_type||"").toString().toLowerCase(),U=W(se.raw_details||se.raw_details||se.raw_details);if(U){if(U.action&&(U.action==="delivered"||U.action==="partial_delivered")){const re=Number(U.order_id||U.orderId||0);re&&H.add(re)}if(U.action&&(U.action==="returned"||U.action==="partial_returned")){const re=Number(U.order_id||U.orderId||0);re&&B.add(re)}Array.isArray(U.orders)&&U.orders.length>0&&U.orders.forEach(re=>H.add(Number(re)))}ue>0?D.includes("payment_in")||U&&U.subtype==="deposit"||(se.desc||"").toString().includes("")?P+=ue:le+=ue:ue<0&&(U&&U.subtype==="supplier_payment"||D.includes("supplier_payment")?M+=Math.abs(ue):U&&U.subtype==="expense"||D.includes("payment_out")||(se.type||"").toString()==="expense"?Z+=Math.abs(ue):J+=Math.abs(ue))}),H.forEach(se=>{const ue=x[se];ue&&(X+=(ue.products||[]).reduce((D,U)=>D+Number(U.quantity||U.qty||0),0),le+=Number(ue.total||ue.subTotal||0))}),B.forEach(se=>{const ue=x[se];ue&&(V+=(ue.products||[]).reduce((D,U)=>D+Number(U.quantity||U.qty||0),0),J+=Number(ue.total||ue.subTotal||0))}),{deliveredOrders:H.size,returnedOrders:B.size,deliveredPieces:X,returnedPieces:V,salesAmount:le,returnsAmount:J,expenses:Z,supplierPayments:M,deposits:P}},[u,x]);function L(){if(!u||u.length===0){T.fire("","   ","info");return}const H=["","","","",""],B=u.map(Z=>[Z.date||"",Z.type||Z.type,Z.desc||"",Number(Z.amount||0).toString(),Z.treasury||""]),X=[H.join(","),...B.map(Z=>Z.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),V=new Blob([X],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(V),J=document.createElement("a");J.href=le,J.download=`daily_report_${t}.csv`,document.body.appendChild(J),J.click(),J.remove(),URL.revokeObjectURL(le)}function te(){const H=u.map(le=>`<tr><td>${le.date||""}</td><td>${O(le.type,le.desc,le.txn_type)}</td><td>${le.desc&&/[\u0600-\u06FF]/.test(le.desc)?le.desc:O(le.desc,le.desc,le.txn_type)}</td><td style="text-align:left">${Number(le.amount||0).toLocaleString()}</td><td>${le.treasury||""}</td></tr>`).join(""),B=`<div style="margin-top:8px;">  : ${I.deliveredOrders}    : ${I.returnedOrders}    : ${I.deliveredPieces.toLocaleString()}    : ${I.returnedPieces.toLocaleString()}   : ${Number(I.salesAmount||0).toLocaleString()}   : ${Number(I.returnsAmount||0).toLocaleString()}   : ${Number(I.expenses||0).toLocaleString()}    : ${Number(I.supplierPayments||0).toLocaleString()}   : ${Number(I.deposits||0).toLocaleString()}</div>`,X=`<!doctype html><html><head><meta charset="utf-8"><title>  ${t}</title><style>body{font-family: Arial, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:20px;} table{width:100%; border-collapse:collapse; font-size:12px;} th,td{border:1px solid #333; padding:6px; text-align:right;} th{background:#f3f4f6;} .summary{display:block; margin-bottom:12px;}</style></head><body><h1 style="text-align:center"> </h1><div>: ${t}</div><div class="summary"><div> : ${S.startBalance.toLocaleString()}</div><div> : ${S.endBalance.toLocaleString()}</div><div> : ${S.totalRevenue.toLocaleString()}</div><div> : ${S.totalExpense.toLocaleString()}</div>${B}</div><table><thead><tr><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>${H}</tbody></table></body></html>`,V=window.open("","_blank","width=900,height=700");V&&(V.document.write(X),V.document.close(),setTimeout(()=>V.print(),500))}return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("label",{className:"text-sm",children:" "}),r.jsx("input",{type:"date",value:t,onChange:H=>a(H.target.value),className:"border rounded p-2"}),r.jsx("button",{onClick:k,className:"px-3 py-2 bg-blue-600 text-white rounded",children:""}),r.jsx("button",{onClick:L,className:"px-3 py-2 bg-sky-600 text-white rounded",children:" Excel"}),r.jsx("button",{onClick:te,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:""})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-3",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.startBalance.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.totalRevenue.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.totalExpense.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.totalDeposits.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.totalPayments.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:S.endBalance.toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-3 mt-2",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:I.deliveredOrders})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:I.returnedOrders})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:I.deliveredPieces})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:I.returnedPieces})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ()",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:Number(I.salesAmount||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ()",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:Number(I.returnsAmount||0).toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-3 gap-3 mt-2",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:Number(I.expenses||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:Number(I.supplierPayments||0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:Number(I.deposits||0).toLocaleString()})]})]}),r.jsx("div",{className:"overflow-x-auto rounded border",children:r.jsxs("table",{className:"w-full text-sm text-right",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""})]})}),r.jsx("tbody",{children:u.map((H,B)=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"px-3 py-2",children:H.date}),r.jsx("td",{className:"px-3 py-2",children:O(H.type,H.desc,H.txn_type)}),r.jsx("td",{className:"px-3 py-2 text-xs",children:H.desc&&/[\u0600-\u06FF]/.test(H.desc)?H.desc:O(H.desc,H.desc,H.txn_type)}),r.jsx("td",{className:"px-3 py-2",children:Number(H.amount).toLocaleString()}),r.jsx("td",{className:"px-3 py-2 text-xs",children:H.treasury})]},B))})]})}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-bold",children:"  "}),r.jsx("button",{onClick:E,className:"px-3 py-2 bg-slate-700 text-white rounded text-sm",children:" "})]}),j?r.jsx("div",{className:"text-sm text-muted",children:"  ..."}):v.length===0?r.jsx("div",{className:"text-sm text-muted",children:"     ."}):r.jsx("div",{className:"overflow-x-auto rounded border",children:r.jsxs("table",{className:"w-full text-sm text-right",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:""})]})}),r.jsx("tbody",{children:v.map(H=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"px-3 py-2",children:H.report_date}),r.jsx("td",{className:"px-3 py-2",children:H.report_type}),r.jsx("td",{className:"px-3 py-2 text-xs",children:(()=>{try{return(JSON.parse(H.sections||"[]")||[]).join(", ")}catch{return H.sections||""}})()}),r.jsx("td",{className:"px-3 py-2",children:Number(H.sent)===1?" ":" "}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("button",{onClick:()=>C(H.html),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:""})})]},H.id))})]})})]})]})},rA=e=>e.toISOString().slice(0,10),Jae=()=>{const e=new Date,t=new Date;t.setDate(t.getDate()-7);const[a,n]=g.useState(rA(t)),[i,o]=g.useState(rA(e)),[d,h]=g.useState(!1),[m,u]=g.useState(0),[f,x]=g.useState(0),[b,v]=g.useState([]),[N,j]=g.useState({});g.useEffect(()=>{_()},[]);const _=async()=>{h(!0);try{try{const H=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json();if(H&&H.success){const B={};(H.data||[]).forEach(X=>{B[X.id]=X}),j(B)}}catch(te){console.debug("Failed to load orders for totals report",te)}const O=`${G}/api.php?module=reports&action=finance&start_date=${a}&end_date=${i}`,L=await(await fetch(O)).json();if(L&&L.success){u(Number(L.data.starting_balance||0));const te=L.data.treasuryBalanceHistory||[];x(te.length?Number(te[te.length-1].balance):Number(L.data.starting_balance||0)),v(L.data.revenueAndExpenseRecords||[])}else u(0),x(0),v([]),T.fire("","    .","info")}catch(O){console.error("Failed to load totals report",O),T.fire("","  .  .","error")}finally{h(!1)}},k=_c.useMemo(()=>{let O=0,I=0,L=0,te=0;return b.forEach(H=>{const B=Number(H.amount||0),X=(H.txn_type||"").toString().toLowerCase(),V=(H.desc||"").toString();B>=0?O+=B:I+=Math.abs(B),B>0&&(X.includes("payment_in")||X.includes("deposit")||V.includes(""))&&(te+=B),B<0&&(X.includes("payment")||X.includes("payment_out")||V.includes("")||V.includes(""))&&(L+=Math.abs(B))}),{totalRevenue:O,totalExpense:I,totalDeposits:te,totalPayments:L}},[b]),E=_c.useMemo(()=>{const O={},I=new Date(a),L=new Date(i);for(let H=new Date(I);H<=L;H.setDate(H.getDate()+1)){const B=H.toISOString().slice(0,10);O[B]={date:B,deliveredOrders:new Set,returnedOrders:new Set,deliveredPieces:0,returnedPieces:0,salesAmount:0,returnsAmount:0,expenses:0,supplierPayments:0,deposits:0}}const te=H=>{if(!H)return{};if(typeof H=="object")return H;try{return JSON.parse(H)}catch{return{}}};return b.forEach(H=>{const B=(H.date||"").toString().slice(0,10);if(!O[B])return;const X=O[B],V=Number(H.amount||0),le=(H.txn_type||"").toString().toLowerCase(),J=te(H.raw_details||H.raw_details||H.raw_details);if(J){if(J.action&&(J.action==="delivered"||J.action==="partial_delivered")){const Z=Number(J.order_id||J.orderId||0);Z&&X.deliveredOrders.add(Z)}if(J.action&&(J.action==="returned"||J.action==="partial_returned")){const Z=Number(J.order_id||J.orderId||0);Z&&X.returnedOrders.add(Z)}Array.isArray(J.orders)&&J.orders.length>0&&J.orders.forEach(Z=>{X.deliveredOrders.add(Number(Z))})}V>0?le.includes("payment_in")||J&&J.subtype==="deposit"||(H.desc||"").toString().includes("")?X.deposits+=V:X.salesAmount+=V:V<0&&(J&&J.subtype==="supplier_payment"||le.includes("supplier_payment")?X.supplierPayments+=Math.abs(V):J&&J.subtype==="expense"||le.includes("payment_out")||(H.type||"").toString()==="expense"?X.expenses+=Math.abs(V):X.returnsAmount+=Math.abs(V))}),Object.keys(O).forEach(H=>{const B=O[H];B.deliveredPieces=0,B.returnedPieces=0,B.deliveredOrders.forEach(X=>{const V=N[X];V&&(B.deliveredPieces+=(V.products||[]).reduce((le,J)=>le+Number(J.quantity||J.qty||0),0),B.salesAmount+=Number(V.total||V.subTotal||0))}),B.returnedOrders.forEach(X=>{const V=N[X];V&&(B.returnedPieces+=(V.products||[]).reduce((le,J)=>le+Number(J.quantity||J.qty||0),0),B.returnsAmount+=Number(V.total||V.subTotal||0))}),B.deliveredOrders=B.deliveredOrders.size,B.returnedOrders=B.returnedOrders.size}),Object.values(O).sort((H,B)=>H.date.localeCompare(B.date))},[b,N,a,i]);function C(){if(!b||b.length===0){T.fire("","   ","info");return}const O=["","","","",""],I=b.map(X=>[X.date||"",X.type||"",X.desc||"",Number(X.amount||0).toString(),X.treasury||""]),L=[O.join(","),...I.map(X=>X.map(V=>`"${String(V).replace(/"/g,'""')}"`).join(","))].join(`
`),te=new Blob([L],{type:"text/csv;charset=utf-8;"}),H=URL.createObjectURL(te),B=document.createElement("a");B.href=H,B.download=`totals_${a}_to_${i}.csv`,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(H)}function S(){const O=E.map(te=>`
      <tr>
        <td>${te.date}</td>
        <td style="text-align:center">${te.deliveredOrders}</td>
        <td style="text-align:center">${te.returnedOrders}</td>
        <td style="text-align:center">${Number(te.deliveredPieces||0).toLocaleString()}</td>
        <td style="text-align:center">${Number(te.returnedPieces||0).toLocaleString()}</td>
        <td style="text-align:left">${Number(te.salesAmount||0).toLocaleString()}</td>
        <td style="text-align:left">${Number(te.returnsAmount||0).toLocaleString()}</td>
        <td style="text-align:left">${Number(te.expenses||0).toLocaleString()}</td>
        <td style="text-align:left">${Number(te.supplierPayments||0).toLocaleString()}</td>
        <td style="text-align:left">${Number(te.deposits||0).toLocaleString()}</td>
      </tr>
    `).join(""),I=`<!doctype html><html><head><meta charset="utf-8"><title>  ${a} - ${i}</title><style>body{font-family: Arial, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:20px;} table{width:100%; border-collapse:collapse; font-size:12px;} th,td{border:1px solid #333; padding:6px; text-align:right;} th{background:#f3f4f6;} .summary{margin-bottom:12px; display:block;} .summary div{margin:4px 0;}</style></head><body><h1 style="text-align:center"> </h1><div>: ${a} - ${i}</div><div class="summary"><div> : ${m.toLocaleString()}</div><div> : ${f.toLocaleString()}</div><div> : ${k.totalRevenue.toLocaleString()}</div><div> : ${k.totalExpense.toLocaleString()}</div><div> : ${k.totalDeposits.toLocaleString()}</div><div> : ${k.totalPayments.toLocaleString()}</div></div><table><thead><tr><th></th><th>  </th><th>  </th><th>  </th><th>  </th><th>  ()</th><th>  ()</th><th> </th><th>  </th><th> </th></tr></thead><tbody>${O}</tbody></table></body></html>`,L=window.open("","_blank");L&&(L.document.write(I),L.document.close(),setTimeout(()=>L.print(),500))}return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("label",{className:"text-sm",children:""}),r.jsx("input",{type:"date",value:a,onChange:O=>n(O.target.value),className:"border rounded p-2"}),r.jsx("label",{className:"text-sm",children:""}),r.jsx("input",{type:"date",value:i,onChange:O=>o(O.target.value),className:"border rounded p-2"}),r.jsx("button",{onClick:_,className:"px-3 py-2 bg-blue-600 text-white rounded",children:""}),r.jsx("button",{onClick:C,className:"px-3 py-2 bg-sky-600 text-white rounded",children:" Excel"}),r.jsx("button",{onClick:S,className:"px-3 py-2 bg-emerald-600 text-white rounded",children:""})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-3",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:m.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:k.totalRevenue.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:k.totalExpense.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:k.totalDeposits.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:k.totalPayments.toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:f.toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-3 mt-2",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.deliveredOrders||0),0)})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.returnedOrders||0),0)})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.deliveredPieces||0),0)})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.returnedPieces||0),0)})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ()",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.salesAmount||0),0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ()",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.returnsAmount||0),0).toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-3 gap-3 mt-2",children:[r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.expenses||0),0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:["  ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.supplierPayments||0),0).toLocaleString()})]}),r.jsxs("div",{className:"p-4 rounded shadow card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[" ",r.jsx("br",{}),r.jsx("div",{className:"font-black",children:E.reduce((O,I)=>O+Number(I.deposits||0),0).toLocaleString()})]})]}),r.jsx("div",{className:"overflow-x-auto rounded border",children:r.jsxs("table",{className:"w-full text-sm text-right",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:""}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  ()"}),r.jsx("th",{className:"px-3 py-2",children:"  ()"}),r.jsx("th",{className:"px-3 py-2",children:" "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:" "})]})}),r.jsx("tbody",{children:E.map(O=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"px-3 py-2",children:O.date}),r.jsx("td",{className:"px-3 py-2",children:O.deliveredOrders}),r.jsx("td",{className:"px-3 py-2",children:O.returnedOrders}),r.jsx("td",{className:"px-3 py-2",children:O.deliveredPieces}),r.jsx("td",{className:"px-3 py-2",children:O.returnedPieces}),r.jsx("td",{className:"px-3 py-2",children:Number(O.salesAmount||0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:Number(O.returnsAmount||0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:Number(O.expenses||0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:Number(O.supplierPayments||0).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:Number(O.deposits||0).toLocaleString()})]},O.date))})]})})]})},Zae=({initialView:e})=>{var rt,Je,st,Ze,ct,ht;const[t,a]=g.useState(e||"sales"),n=new Date,i=new Date(n.getFullYear(),n.getMonth(),1),[o,d]=g.useState(i.toISOString().split("T")[0]),[h,m]=g.useState(n.toISOString().split("T")[0]),u=".",{isDark:f}=$y(),[x,b]=g.useState([]),[v,N]=g.useState([]),[j,_]=g.useState([]),[k,E]=g.useState(""),[C,S]=g.useState(""),[O,I]=g.useState(""),[L,te]=g.useState([]),[H,B]=g.useState([]),[X,V]=g.useState([]),[le,J]=g.useState([]),[Z,M]=g.useState(""),[P,W]=g.useState(""),[se,ue]=g.useState([]),[D,U]=g.useState([]),[re,he]=g.useState([]),[Ne,Y]=g.useState(""),[me,z]=g.useState(""),[F,ye]=g.useState([]),[Ae,be]=g.useState([]),[Me,Oe]=g.useState([]),[ve,$]=g.useState([]),[ce,ie]=g.useState(n.getFullYear()),[oe,$e]=g.useState(null);g.useEffect(()=>{e&&a(e)},[e]),g.useEffect(()=>{(async()=>{try{const[xe,de,it,ft]=await Promise.all([fetch(`${G}/api.php?module=customers&action=getAll`).then(jt=>jt.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=users&action=getAll`).then(jt=>jt.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=warehouses&action=getAll`).then(jt=>jt.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=treasuries&action=getAll`).then(jt=>jt.json()).catch(()=>({success:!1,data:[]}))]);if(xe&&xe.success&&ye(xe.data||[]),de&&de.success){const jt=(de.data||[]).filter(mt=>(mt.role||"").toString().toLowerCase()==="representative");be(jt)}it&&it.success&&Oe(it.data||[]),ft&&ft.success&&$(ft.data||[])}catch{}})()},[]),g.useEffect(()=>{const Re=`&start_date=${o}&end_date=${h}`;if(t==="sales"){const xe=`${Re}${k?`&status=${encodeURIComponent(k)}`:""}${C?`&customer_id=${encodeURIComponent(C)}`:""}${O?`&rep_id=${encodeURIComponent(O)}`:""}`;fetch(`${G}/api.php?module=reports&action=sales${xe}`).then(de=>de.json()).then(de=>{de&&de.success?(b(de.data.salesByProduct||[]),N(de.data.dailySales||[]),_(de.data.invoiceRecords||[])):(b([]),N([]),_([]),T.fire("","        .","info"))}).catch(de=>{console.error("Failed to fetch sales reports",de),T.fire("","   .  .","error")})}else if(t==="inventory"){const xe=`${Re}${Z?`&warehouse_id=${encodeURIComponent(Z)}`:""}${P?`&movement_type=${encodeURIComponent(P)}`:""}`;fetch(`${G}/api.php?module=reports&action=inventory${xe}`).then(de=>de.json()).then(de=>{de&&de.success?(te(de.data.inventoryStockByWarehouse||[]),B(de.data.inventoryMovement||[]),V(de.data.inventoryStock||[]),J(de.data.inventoryMovementHistory||[])):(te([]),B([]),V([]),J([]),T.fire("","        .","info"))}).catch(de=>{console.error("Failed to fetch inventory reports",de),T.fire("","   .  .","error")})}else if(t==="finance"){const xe=`${Re}${Ne?`&treasury_id=${encodeURIComponent(Ne)}`:""}${me?`&txn_type=${encodeURIComponent(me)}`:""}`;fetch(`${G}/api.php?module=reports&action=finance${xe}`).then(de=>de.json()).then(de=>{de&&de.success?(ue(de.data.treasuryBalanceHistory||[]),U(de.data.expenseCategories||[]),he(de.data.revenueAndExpenseRecords||[])):(ue([]),U([]),he([]),T.fire("","        .","info"))}).catch(de=>{console.error("Failed to fetch finance reports",de),T.fire("","   .  .","error")})}},[t,o,h,k,C,O,Z,P,Ne,me]),g.useEffect(()=>{if(t!=="compare")return;(async()=>{try{const de=await(await fetch(`${G}/api.php?module=reports&action=compare&year=${ce}`)).json();de&&de.success&&$e(de.data)}catch{$e(null)}})()},[t,ce]);const Xe=Re=>{T.fire(" ",`   ${Re}  ${o}  ${h}.`,"info")},et=(Re,xe)=>{const de=xe.map(mt=>mt.map(we=>`"${String(we??"").replace(/"/g,'""')}"`).join(",")).join(`
`),it=new Blob([de],{type:"text/csv;charset=utf-8;"}),ft=URL.createObjectURL(it),jt=document.createElement("a");jt.href=ft,jt.download=Re,document.body.appendChild(jt),jt.click(),jt.remove(),URL.revokeObjectURL(ft)},nt=Re=>{if(Re==="PDF"){window.print();return}if(t==="sales"){const xe=[["section","field1","field2","field3","field4"],["salesByProduct","name","sales","",""],...x.map(de=>["salesByProduct",de.name,de.sales,"",""]),["dailySales","date","total","",""],...v.map(de=>["dailySales",de.date,de.total,"",""]),["invoiceRecords","order_number","date","customer","total"],...j.map(de=>["invoiceRecords",de.order_number,de.date,de.customer,de.total])];et(`sales_${o}_to_${h}.csv`,xe);return}if(t==="inventory"){const xe=[["section","field1","field2","field3","field4","field5"],["inventoryStockByWarehouse","warehouse","quantity","","",""],...L.map(de=>["inventoryStockByWarehouse",de.name,de.quantity,"","",""]),["inventoryMovement","date","quantity","","",""],...H.map(de=>["inventoryMovement",de.date,de.quantity,"","",""]),["inventoryStock","product","barcode","warehouse","quantity","purchasePrice"],...X.map(de=>["inventoryStock",de.product,de.barcode,de.warehouse,de.quantity,de.purchasePrice]),["inventoryMovementHistory","id","date","product","type","quantity"],...le.map(de=>["inventoryMovementHistory",de.id,de.date,de.product,de.type,de.quantity])];et(`inventory_${o}_to_${h}.csv`,xe);return}if(t==="finance"){const xe=[["section","field1","field2","field3","field4"],["treasuryBalanceHistory","date","balance","",""],...se.map(de=>["treasuryBalanceHistory",de.date,de.balance,"",""]),["expenseCategories","name","value","",""],...D.map(de=>["expenseCategories",de.name,de.value,"",""]),["revenueAndExpenseRecords","date","type","desc","amount"],...re.map(de=>["revenueAndExpenseRecords",de.date,de.type,de.desc,de.amount])];et(`finance_${o}_to_${h}.csv`,xe);return}T.fire("","      .","info")},je=({title:Re,description:xe,icon:de,children:it,filters:ft,onGenerate:jt})=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex flex-col md:flex-row items-center justify-between gap-4 bg-slate-50 dark:bg-slate-900/30",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(de,{className:"text-blue-500 w-6 h-6"}),r.jsxs("div",{className:"text-right",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:Re}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:xe})]})]}),r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[ft,jt&&r.jsxs("button",{onClick:jt,className:"w-full md:w-auto bg-blue-600 text-white px-5 py-2.5 rounded-2xl text-sm font-black shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-all active:scale-95",children:[r.jsx(nR,{size:16,className:"ml-2"})," "]}),r.jsxs("button",{onClick:()=>nt("PDF"),className:"w-full md:w-auto bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200 px-4 py-2.5 rounded-2xl text-sm font-bold shadow-sm hover:bg-slate-200 dark:hover:bg-slate-600 transition-all active:scale-95 flex items-center justify-center",children:[r.jsx(vm,{size:16,className:"ml-2"})," PDF"]}),r.jsxs("button",{onClick:()=>nt("Excel"),className:"w-full md:w-auto bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 px-4 py-2.5 rounded-2xl text-sm font-bold shadow-sm hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-all active:scale-95 flex items-center justify-center",children:[r.jsx(vm,{size:16,className:"ml-2"})," Excel"]})]})]}),r.jsx("div",{className:"p-6 space-y-6",children:it})]}),lt=r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"date",value:o,onChange:Re=>d(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white"}),r.jsx("input",{type:"date",value:h,onChange:Re=>m(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white"})]}),pt=r.jsxs("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:[lt,r.jsxs("select",{value:k,onChange:Re=>E(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"pending",children:" "}),r.jsx("option",{value:"with_rep",children:" "}),r.jsx("option",{value:"delivered",children:" "}),r.jsx("option",{value:"returned",children:""}),r.jsx("option",{value:"partial",children:""}),r.jsx("option",{value:"postponed",children:""})]}),r.jsxs("select",{value:C,onChange:Re=>S(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),F.map(Re=>r.jsx("option",{value:Re.id,children:Re.name},Re.id))]}),r.jsxs("select",{value:O,onChange:Re=>I(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),Ae.map(Re=>r.jsx("option",{value:Re.id,children:Re.name},Re.id))]})]}),ae=r.jsxs("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:[lt,r.jsxs("select",{value:Z,onChange:Re=>M(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),Me.map(Re=>r.jsx("option",{value:Re.id,children:Re.name},Re.id))]}),r.jsxs("select",{value:P,onChange:Re=>W(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"purchase",children:""}),r.jsx("option",{value:"sale",children:""}),r.jsx("option",{value:"return_in",children:" "}),r.jsx("option",{value:"return_out",children:" "}),r.jsx("option",{value:"transfer_in",children:" "}),r.jsx("option",{value:"transfer_out",children:" "}),r.jsx("option",{value:"adjustment",children:""}),r.jsx("option",{value:"initial_balance",children:" "})]})]}),tt=r.jsxs("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:[lt,r.jsxs("select",{value:Ne,onChange:Re=>Y(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),ve.map(Re=>r.jsx("option",{value:Re.id,children:Re.name},Re.id))]}),r.jsxs("select",{value:me,onChange:Re=>z(Re.target.value),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),r.jsx("option",{value:"sale",children:""}),r.jsx("option",{value:"purchase",children:""}),r.jsx("option",{value:"payment_in",children:""}),r.jsx("option",{value:"payment_out",children:""}),r.jsx("option",{value:"expense",children:""}),r.jsx("option",{value:"transfer",children:""})]})]}),ne=r.jsx("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:r.jsx("select",{value:ce,onChange:Re=>ie(Number(Re.target.value)),className:"bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm text-slate-900 dark:text-white",children:Array.from({length:5}).map((Re,xe)=>{const de=n.getFullYear()-xe;return r.jsx("option",{value:de,children:de},de)})})}),Ee=((oe==null?void 0:oe.months)||[]).map((Re,xe)=>{var de,it,ft,jt,mt,we;return{month:Re,sales:((de=oe==null?void 0:oe.sales)==null?void 0:de[xe])||0,sales_prev:((it=oe==null?void 0:oe.sales_prev)==null?void 0:it[xe])||0,profit:((ft=oe==null?void 0:oe.profit)==null?void 0:ft[xe])||0,profit_prev:((jt=oe==null?void 0:oe.profit_prev)==null?void 0:jt[xe])||0,expense:((mt=oe==null?void 0:oe.expense)==null?void 0:mt[xe])||0,expense_prev:((we=oe==null?void 0:oe.expense_prev)==null?void 0:we[xe])||0}});return r.jsxs("div",{className:"space-y-6 transition-colors duration-300",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 text-right",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:"  "}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"   "})]}),r.jsxs("div",{className:"flex bg-white dark:bg-slate-800 p-1.5 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-x-auto max-w-full",children:[r.jsxs("button",{onClick:()=>a("sales"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="sales"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(kc,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("inventory"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="inventory"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(nu,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("finance"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="finance"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Ap,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("daily"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="daily"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(io,{size:16})," "]}),r.jsxs("button",{onClick:()=>a("totals"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="totals"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(On,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("crm-srm"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="crm-srm"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Sc,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("hrm"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="hrm"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(dl,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("admin-audit"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="admin-audit"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(Is,{size:16}),"  "]}),r.jsxs("button",{onClick:()=>a("compare"),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-black transition-all shrink-0 ${t==="compare"?"bg-blue-600 text-white shadow-md":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[r.jsx(gm,{size:16})," "]})]})]}),t==="sales"&&r.jsxs(je,{title:"  ",description:"     .",icon:kc,filters:pt,onGenerate:()=>Xe("Sales"),children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4",children:"  "}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(pm,{data:x,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"name",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(ro,{dataKey:"sales",name:" ",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4",children:"  "}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(eu,{data:v,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"date",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(Wi,{type:"monotone",dataKey:"total",name:"",stroke:"#8884d8",strokeWidth:2,activeDot:{r:6}})]})})})]})]}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(zb,{size:18,className:"text-slate-400"}),"  "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:[" (",u,")"]}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:j.map((Re,xe)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:Re.order_number}),r.jsx("td",{className:"px-6 py-4",children:Re.date}),r.jsx("td",{className:"px-6 py-4",children:Re.customer}),r.jsx("td",{className:"px-6 py-4 font-black text-blue-600 dark:text-blue-400",children:Re.total.toLocaleString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black ${Re.status==="Completed"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"}`,children:Re.status==="Completed"?"":""})})]},Re.order_number||Re.id||xe))})]})})]}),t==="daily"&&r.jsx("div",{children:r.jsx(Wae,{})}),t==="totals"&&r.jsx("div",{children:r.jsx(Jae,{})}),t==="inventory"&&r.jsxs(je,{title:"   ",description:"      .",icon:nu,filters:ae,onGenerate:()=>Xe("Inventory"),children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(y$,{size:16,className:"text-slate-400"}),"    "]}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(pm,{data:L,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"name",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(ro,{dataKey:"quantity",name:"",fill:"#60a5fa",radius:[4,4,0,0]})]})})})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(vc,{size:16,className:"text-slate-400"}),"  "]}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(eu,{data:H,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"date",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(Wi,{type:"monotone",dataKey:"quantity",name:" ",stroke:"#fbbf24",strokeWidth:2,activeDot:{r:6}})]})})})]})]}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(zb,{size:18,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:["  (",u,")"]})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:X.map((Re,xe)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:Re.product}),r.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:Re.barcode}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Re.warehouse}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 px-3 py-1 rounded-lg text-[10px] font-black",children:Re.quantity})}),r.jsx("td",{className:"px-6 py-4 font-black",children:Re.purchasePrice.toLocaleString()})]},xe))})]})}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(io,{size:18,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:"/"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:le.map(Re=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:Re.id}),r.jsx("td",{className:"px-6 py-4",children:Re.date}),r.jsx("td",{className:"px-6 py-4",children:Re.product}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black ${Re.type==="in"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:Re.type==="in"?"":""})}),r.jsx("td",{className:"px-6 py-4",children:Re.quantity}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Re.sourceDest})]},Re.id))})]})})]}),t==="finance"&&r.jsxs(je,{title:"   ",description:"    .",icon:Cv,filters:tt,onGenerate:()=>Xe("Finance"),children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(Cv,{size:16,className:"text-slate-400"}),"   ()"]}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(eu,{data:se,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"date",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(Wi,{type:"monotone",dataKey:"balance",name:"",stroke:"#10b981",strokeWidth:2,activeDot:{r:6}})]})})})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(HR,{size:16,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"h-64 flex items-center justify-center",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(gae,{children:[r.jsx(P6,{data:D,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",label:({name:Re,percent:xe})=>`${Re} ${(xe*100).toFixed(0)}%`}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}})]})})})]})]}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(zb,{size:18,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:[" (",u,")"]}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:re.map((Re,xe)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold",children:Re.date}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black ${Re.type==="revenue"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:Re.type==="revenue"?"":""})}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Re.desc}),r.jsx("td",{className:`px-6 py-4 font-black ${Re.amount>=0?"text-emerald-600":"text-rose-600"}`,children:Re.amount.toLocaleString()}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Re.treasury})]},xe))})]})})]}),t==="crm-srm"&&r.jsxs(je,{title:"  ",description:"      .",icon:Sc,filters:r.jsx("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:lt}),onGenerate:()=>Xe("CRM/SRM"),children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(On,{size:18,className:"text-slate-400"}),"    (:  )"]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700 mb-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:[" (",u,")"]}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:[" (",u,")"]}),r.jsxs("th",{className:"px-6 py-3 font-bold",children:[" (",u,")"]})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300"})]})}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(xm,{size:18,className:"text-slate-400"}),"    (Aging Report)"]}),r.jsx("div",{className:"p-10 text-center text-slate-400 font-bold bg-slate-50 dark:bg-slate-900/50 rounded-2xl border dark:border-slate-700",children:"    ."})]}),t==="hrm"&&r.jsxs(je,{title:"  ",description:"      .",icon:dl,filters:r.jsx("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:lt}),onGenerate:()=>Xe("HRM"),children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(Ry,{size:18,className:"text-slate-400"}),"    "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700 mb-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:"2024-07-22"}),r.jsx("th",{className:"px-6 py-3 font-bold",children:"2024-07-23"}),r.jsx("th",{className:"px-6 py-3 font-bold",children:"2024-07-24"})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300"})]})}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(bO,{size:18,className:"text-slate-400"}),"  "]}),r.jsx("div",{className:"p-10 text-center text-slate-400 font-bold bg-slate-50 dark:bg-slate-900/50 rounded-2xl border dark:border-slate-700",children:"    ."})]}),t==="admin-audit"&&r.jsxs(je,{title:"  ",description:"     .",icon:Is,filters:r.jsx("div",{className:"flex gap-2 w-full md:w-auto flex-wrap",children:lt}),onGenerate:()=>Xe("Admin & Audit"),children:[r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(mO,{size:18,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border dark:border-slate-700",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-slate-500 dark:text-slate-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""}),r.jsx("th",{className:"px-6 py-3 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300"})]})}),r.jsxs("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(Is,{size:18,className:"text-slate-400"}),"   "]}),r.jsx("div",{className:"p-10 text-center text-slate-400 font-bold bg-slate-50 dark:bg-slate-900/50 rounded-2xl border dark:border-slate-700",children:"     ."})]}),t==="compare"&&r.jsxs(je,{title:"  ",description:"       .",icon:gm,filters:ne,children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-2xl border dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"text-xs text-muted",children:" "}),r.jsxs("div",{className:"text-2xl font-black",children:[Number(((rt=oe==null?void 0:oe.year_totals)==null?void 0:rt.sales)||0).toLocaleString()," ",u]}),r.jsxs("div",{className:"text-[11px] text-muted mt-1",children:[" : ",Number(((Je=oe==null?void 0:oe.prev_year_totals)==null?void 0:Je.sales)||0).toLocaleString()," ",u]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"text-xs text-muted",children:" "}),r.jsxs("div",{className:"text-2xl font-black",children:[Number(((st=oe==null?void 0:oe.year_totals)==null?void 0:st.profit)||0).toLocaleString()," ",u]}),r.jsxs("div",{className:"text-[11px] text-muted mt-1",children:[" : ",Number(((Ze=oe==null?void 0:oe.prev_year_totals)==null?void 0:Ze.profit)||0).toLocaleString()," ",u]})]}),r.jsxs("div",{className:"p-4 rounded-2xl border dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"text-xs text-muted",children:" "}),r.jsxs("div",{className:"text-2xl font-black",children:[Number(((ct=oe==null?void 0:oe.year_totals)==null?void 0:ct.expense)||0).toLocaleString()," ",u]}),r.jsxs("div",{className:"text-[11px] text-muted mt-1",children:[" : ",Number(((ht=oe==null?void 0:oe.prev_year_totals)==null?void 0:ht.expense)||0).toLocaleString()," ",u]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4",children:" "}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(eu,{data:Ee,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"month",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(Wi,{type:"monotone",dataKey:"sales",name:String((oe==null?void 0:oe.year)||""),stroke:"#2563eb",strokeWidth:2}),r.jsx(Wi,{type:"monotone",dataKey:"sales_prev",name:String((oe==null?void 0:oe.prev_year)||""),stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"4 4"})]})})})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-2xl border dark:border-slate-700",children:[r.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4",children:"  "}),r.jsx("div",{className:"h-64",children:r.jsx(_s,{width:"100%",height:"100%",children:r.jsxs(pm,{data:Ee,children:[r.jsx(Es,{strokeDasharray:"3 3",vertical:!1,stroke:f?"#334155":"#e2e8f0"}),r.jsx(Ts,{dataKey:"month",tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(Cs,{tick:{fill:f?"#94a3b8":"#64748b"}}),r.jsx(ks,{contentStyle:{borderRadius:"12px",background:f?"#1e293b":"white",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},itemStyle:{color:f?"#f1f5f9":"#1e293b"}}),r.jsx(ro,{dataKey:"profit",name:"",fill:"#10b981",radius:[4,4,0,0]}),r.jsx(ro,{dataKey:"expense",name:"",fill:"#ef4444",radius:[4,4,0,0]})]})})})]})]})]})]})},aA=()=>{const t=(localStorage.getItem("Dragon_delivery_method")||"reps").toString()==="shipping",[a,n]=g.useState([]),[i,o]=g.useState([]),[d,h]=g.useState([]),[m,u]=g.useState([]),[f,x]=g.useState(""),[b,v]=g.useState(""),[N,j]=g.useState(0),[_,k]=g.useState([]),[E,C]=g.useState(0),[S,O]=g.useState([]),[I,L]=g.useState(""),[te,H]=g.useState(0),[B,X]=g.useState(0),[V,le]=g.useState(0),[J,Z]=g.useState("pay"),[M,P]=g.useState([]),[W,se]=g.useState(""),[ue,D]=g.useState([]),[U,re]=g.useState(""),[he,Ne]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(t){const ce=await(await fetch(`${G}/api.php?module=shipping_companies&action=getAll`)).json();ce&&ce.success&&o(ce.data||[])}else{const ce=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json();ce&&ce.success&&n((ce.data||[]).filter(ie=>ie.role==="representative"))}}catch($){console.debug("Failed to load reps",$)}try{const[$,ce]=await Promise.all([fetch(`${G}/api.php?module=treasuries&action=getAll`).then($e=>$e.json()),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then($e=>$e.json()).catch(()=>({success:!1}))]),ie=$&&$.success?$.data||[]:[],oe=ce&&ce.success&&ce.data||null;oe&&oe.default_treasury_id&&!oe.can_change_treasury?P(ie.filter($e=>Number($e.id)===Number(oe.default_treasury_id))):P(ie),oe&&oe.default_treasury_id&&!W&&se(Number(oe.default_treasury_id)),oe&&oe.default_warehouse_id&&!U&&re(Number(oe.default_warehouse_id)),oe&&Ne(oe)}catch($){console.debug("Failed to load treasuries",$)}try{const ce=await(await fetch(`${G}/api.php?module=warehouses&action=getAll`)).json();ce&&ce.success&&D(ce.data||[])}catch($){console.debug("Failed to load warehouses",$)}try{const ce=await(await fetch(`${G}/api.php?module=permissions&action=getUserDefaults`)).json();ce&&ce.success&&(Ne(ce.data||null),ce.data&&(ce.data.default_treasury_id&&!W&&se(Number(ce.data.default_treasury_id)),ce.data.default_warehouse_id&&!U&&re(Number(ce.data.default_warehouse_id))))}catch($){console.debug("Failed to load user defaults",$)}})(),(async()=>{try{const ce=await(await fetch(`${G}/api.php?module=orders&action=getAll&status=pending`)).json();ce&&ce.success&&h(ce.data||[])}catch($){console.debug("Failed to load pending orders",$)}})()},[]),g.useEffect(()=>{const $=[..._,...S].filter((oe,$e,Xe)=>Xe.findIndex(et=>et.id===oe.id)===$e),ce=$.reduce((oe,$e)=>{const Xe=Number($e.subTotal||$e.total||0),et=Number($e.shipping||$e.shippingCost||0);return oe+Xe+et},0),ie=$.reduce((oe,$e)=>{var Xe;return oe+(((Xe=$e.products)==null?void 0:Xe.reduce((et,nt)=>et+Number(nt.quantity||nt.qty||0),0))||0)},0);X(ce),H(ie)},[S,_]);const Y=async $=>{if(x($),O([]),le(0),Z("pay"),!$){j(0),k([]);return}try{const ie=await(await fetch(`${G}/api.php?module=orders&action=getAll&status=with_rep`)).json();if(ie&&ie.success){const oe=(ie.data||[]).filter(nt=>Number(nt.rep_id)===Number($));k(oe);const $e=(oe||[]).flatMap(nt=>nt.products||[]),Xe=new Set($e.map(nt=>nt.productId??nt.id??nt.name+"")),et=$e.reduce((nt,je)=>nt+Number(je.quantity||je.qty||0),0);C(Xe.size)}try{const $e=await(await fetch(`${G}/api.php?module=transactions&action=getByRelated&related_to_type=rep&related_to_id=${$}`)).json();if($e&&$e.success){const Xe=($e.data||[]).reduce((et,nt)=>et+Number(nt.amount||0),0);j(Number(Xe))}}catch(oe){console.debug("Failed to load rep transactions",oe)}}catch(ce){console.debug("Failed to load rep detail",ce)}},me=async $=>{if(v($),O([]),j(0),le(0),Z("pay"),!$){k([]),C(0);return}try{const ie=await(await fetch(`${G}/api.php?module=orders&action=getAll&status=in_delivery`)).json();if(ie&&ie.success){const oe=(ie.data||[]).filter(et=>Number(et.shipping_company_id||et.shippingCompanyId)===Number($));k(oe);const $e=(oe||[]).flatMap(et=>et.products||[]),Xe=new Set($e.map(et=>et.productId??et.id??et.name+""));C(Xe.size)}}catch(ce){console.debug("Failed to load shipping company orders",ce)}},z=async()=>{const $=I.trim();if($){if(!U){T.fire(" ","      .","warning");return}try{const ie=await(await fetch(`${G}/api.php?module=orders&action=getByNumber&orderNumber=${encodeURIComponent($)}`)).json();if(!ie.success||!ie.data){T.fire(" ","      ","warning");return}const oe=ie.data;if(oe.status!=="pending"){let nt="";switch(oe.status){case"with_rep":nt="     .";break;case"in_delivery":nt="    .";break;case"delivered":nt="    .";break;case"returned":nt="  .";break;default:nt=`     "${oe.status}"`}T.fire("   ",nt,"error");return}if(S.some(nt=>nt.id===oe.id)||_.some(nt=>nt.id===oe.id)){T.fire("","   .","info"),L("");return}if(!oe.products||oe.products.length===0){O(nt=>[...nt,oe]),L("");return}const $e={warehouse_id:U,items:oe.products.map(nt=>({product_id:nt.productId,quantity:nt.quantity}))},et=await(await fetch(`${G}/api.php?module=stock&action=checkAvailability`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)})).json();if(!et.success){const nt=et.unavailable_items||[];let je=`        :
`;je+=nt.map(lt=>`- ${lt.name} (: ${lt.required}, : ${lt.available})`).join(`
`),T.fire({title:"  ",html:`<div style="text-align: right; white-space: pre-wrap;">${je}</div>`,icon:"warning"});return}O(nt=>[...nt,oe]),L("")}catch(ce){console.error("Failed to fetch order by barcode",ce),T.fire("","   .  .","error")}}},F=$=>{u(ce=>ce.includes($)?ce.filter(ie=>ie!==$):[...ce,$])},ye=async()=>{if(!U){T.fire(" ","      .","warning");return}const ce=d.filter(oe=>m.includes(oe.id)).filter(oe=>!S.some($e=>$e.id===oe.id)&&!_.some($e=>$e.id===oe.id));if(ce.length===0){T.fire("   ","     .","info");return}const ie=ce.flatMap(oe=>oe.products||[]);if(ie.length>0){const oe=ie.reduce((Xe,et)=>{const nt=et.productId;return Xe[nt]||(Xe[nt]={product_id:nt,name:et.name,quantity:0}),Xe[nt].quantity+=Number(et.quantity||0),Xe},{}),$e=Object.values(oe);if($e.length>0){const Xe={warehouse_id:U,items:$e.map(et=>({product_id:et.product_id,quantity:et.quantity}))};try{const nt=await(await fetch(`${G}/api.php?module=stock&action=checkAvailability`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)})).json();if(!nt.success){const je=nt.unavailable_items||[];let lt=`            :
`;lt+=je.map(pt=>`- ${pt.name} (: ${pt.required}, : ${pt.available})`).join(`
`),T.fire({title:"  ",html:`<div style="text-align: right; white-space: pre-wrap;">${lt}</div>`,icon:"warning"});return}}catch(et){console.error("Failed to check stock",et),T.fire("","   .  .","error");return}}}O(oe=>[...oe,...ce]),u([]),T.fire(" ",`${ce.length}   .`,"success")},Ae=$=>{O(ce=>ce.filter(ie=>ie.id!==$))},be=async $=>{try{const ie=await(await fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:$,repId:null,shippingCompanyId:null,status:"pending"})})).json();if(ie&&ie.success){const oe=_.find($e=>$e.id===$)||null;k($e=>$e.filter(Xe=>Xe.id!==$)),O($e=>$e.filter(Xe=>Xe.id!==$)),oe&&h($e=>[oe,...$e.filter(Xe=>Xe.id!==oe.id)]),T.fire("","    / .","success")}else T.fire("",ie.message||"     ","error")}catch(ce){console.error("Failed to unassign order",ce),T.fire("","  .","error")}},Me=async()=>{var $e,Xe;const $=t?b:f;if(!$){T.fire(t?"  ":" ",t?"      ":"     ","error");return}const ce=[..._,...S].filter((et,nt,je)=>je.findIndex(lt=>lt.id===et.id)===nt);if(ce.length===0){T.fire(" ",t?"     ":"    ","error");return}if(t)try{await Promise.all(ce.map(nt=>fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:nt.id,shippingCompanyId:$,repId:null,status:"in_delivery"})})));const et=(($e=i.find(nt=>Number(nt.id)===Number($)))==null?void 0:$e.name)||"";T.fire("","    .","success"),Oe(ce,{assigneeLabel:" ",assigneeName:et}),ve(ce,{assigneeLabel:" ",assigneeName:et,reportTitle:"  ",prevBalance:0}),O([]),u([]);return}catch(et){console.error("Shipping daily assignment failed",et),T.fire("","    .","error");return}if(!W&&!(await T.fire({title:"",text:"      ",icon:"question",showCancelButton:!0})).isConfirmed)return;if(V>0&&!W){T.fire(" ","        .","warning");return}let ie="";if(U){const et=await T.fire({title:" ",input:"text",inputPlaceholder:"  /  ()",showCancelButton:!0,inputValidator:nt=>!nt||!nt.trim()?"   .":null});if(!et.isConfirmed)return;ie=String(et.value||"").trim()}const oe={repId:f,orders:ce.map(et=>et.id),totalAmount:B,productsCount:te,paymentAdjustment:V,paymentDirection:J,treasuryId:W||null,warehouseId:U||null,reason:ie||null};try{const nt=await(await fetch(`${G}/api.php?module=sales&action=completeDaily`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)})).json();if(nt&&nt.success){T.fire("","     .","success"),Oe(ce,nt.printData||{});const je=((Xe=a.find(lt=>lt.id===f))==null?void 0:Xe.name)||"";ve(ce,{...nt.reportData||{},repName:je}),O([]),le(0)}else console.warn("Server did not confirm daily completion",nt),T.fire("  ","        .","warning")}catch(et){console.error("Complete daily failed",et),T.fire("","  :  .","error")}},Oe=($,ce)=>{const ie=window.open("","_blank","width=400,height=800");if(!ie)return;const oe={};$.forEach(ae=>{(ae.products||[]).forEach(tt=>{const ne=`${tt.name||""}||${tt.color||""}||${tt.size||""}`;oe[ne]||(oe[ne]={name:tt.name||"",color:tt.color||"",size:tt.size||"",qty:0}),oe[ne].qty+=Number(tt.quantity||tt.qty||0)})});const $e=Object.values(oe),Xe=new Date().toLocaleString(),et=$e.length,nt=$e.reduce((ae,tt)=>ae+(tt.qty||0),0),je=(ce==null?void 0:ce.assigneeLabel)||"",lt=(ce==null?void 0:ce.assigneeName)||(ce==null?void 0:ce.repName)||"",pt=`<!doctype html><html><head><meta charset="utf-8"><title> </title><style>body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; width:340px; padding:6px;} h2{text-align:center;} table{width:100%; border-collapse:collapse;} th,td{font-size:12px; padding:4px; border-bottom:1px solid #ddd;} th{font-weight:700; text-align:right;} .totals{margin-top:8px; font-weight:700;} </style></head><body><h2> </h2><div>: ${Xe}</div><div>: ${ce.employee||""}</div><div>${je}: ${lt}</div><br/><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>`+$e.map(ae=>`<tr><td>${ae.name}</td><td>${ae.color}</td><td>${ae.size}</td><td style="text-align:left">${ae.qty}</td></tr>`).join("")+`</tbody></table><div class="totals"> : ${et}</div><div class="totals"> : ${nt}</div></body></html>`;ie.document.write(pt),ie.document.close(),setTimeout(()=>{ie.print()},500)},ve=($,ce)=>{const ie=window.open("","_blank");if(!ie)return;const oe=new Date().toLocaleDateString(),$e=(ce==null?void 0:ce.reportTitle)||" ",Xe=(ce==null?void 0:ce.assigneeLabel)||"",et=(ce==null?void 0:ce.assigneeName)||(ce==null?void 0:ce.repName)||"",nt=!t,je=`<!doctype html><html><head><meta charset="utf-8"><title>${$e}</title><style>body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:20px;} h1{text-align:center;} .header{display:flex; justify-content:space-between; align-items:center;} table{width:100%; border-collapse:collapse; margin-top:12px;} th,td{border:1px solid #333; padding:6px; font-size:12px; text-align:right;} th{background:#eee;} </style></head><body><div class="header"><div>${ce.employee||""}</div><div><h1>${$e}</h1></div><div>${et}</div></div><div style="margin-top:8px">: ${oe}</div><div style="margin-top:8px">${Xe}: ${et}</div><div style="margin-top:8px"> : ${B}</div>`+(nt?`<div style="margin-top:8px"> : ${ce.prevBalance||0}</div><div style="margin-top:8px"> ${J==="pay"?"":""}: ${V}</div><div style="margin-top:8px"> : ${Number(ce.prevBalance||0)+(J==="pay"?-V:V)-B}</div>`:"")+"<table><thead><tr><th> </th><th> </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th> </th><th></th></tr></thead><tbody>"+$.map(lt=>`<tr><td>${lt.orderNumber}</td><td>${lt.customerName}</td><td>${lt.phone||lt.phone1}</td><td>${lt.governorate||""}</td><td>${lt.address||""}</td><td>${lt.employee||""}</td><td>${lt.page||""}</td><td>${lt.subTotal||0}</td><td>${lt.shipping||lt.shippingCost||0}</td><td>${lt.total||0}</td><td>${lt.notes||""}</td></tr>`).join("")+"</tbody></table></body></html>";ie.document.write(je),ie.document.close(),setTimeout(()=>ie.print(),500)};return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-5 shadow-md border",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(fi,{className:"text-blue-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-500",children:t?"  ":" "}),r.jsxs("select",{className:"mt-1 w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-sm",value:(t?b:f)||"",onChange:$=>{const ce=$.target.value?Number($.target.value):"";t?me(ce):Y(ce)},children:[r.jsx("option",{value:"",children:t?"  ":" "}),(t?i:a).map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),t?r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:"  "}),r.jsxs("div",{className:"font-black text-lg mt-1",children:[": ",_.length]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["  : ",r.jsx("span",{className:"font-bold",children:E})]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[" : ",r.jsx("span",{className:"font-bold",children:_.reduce(($,ce)=>{var ie;return $+(((ie=ce.products)==null?void 0:ie.reduce((oe,$e)=>oe+Number($e.quantity||$e.qty||0),0))||0)},0)})]})]})}):r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsxs("div",{className:"font-black text-lg mt-1",children:[Math.abs(N).toLocaleString()," . ",r.jsx("span",{className:"text-sm font-bold",style:{color:N>0?"green":N<0?"red":"#666"},children:N>0?"":N<0?"":""})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsxs("div",{className:"font-black text-lg mt-1",children:[": ",_.length]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["  : ",r.jsx("span",{className:"font-bold",children:E})]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[" : ",r.jsx("span",{className:"font-bold",children:_.reduce(($,ce)=>{var ie;return $+(((ie=ce.products)==null?void 0:ie.reduce((oe,$e)=>oe+Number($e.quantity||$e.qty||0),0))||0)},0)})]})]})]}),!t&&r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-slate-400 mb-2",children:""}),r.jsxs("select",{disabled:he&&he.default_treasury_id&&!he.can_change_treasury,className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-sm",value:W||"",onChange:$=>se($.target.value?Number($.target.value):""),children:[r.jsx("option",{value:"",children:""}),M.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-slate-400 mb-2",children:" "}),r.jsxs("select",{disabled:he&&he.default_warehouse_id&&!he.can_change_warehouse,className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-sm",value:U||"",onChange:$=>re($.target.value?Number($.target.value):""),children:[r.jsx("option",{value:"",children:"  "}),ue.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),!t&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-xl cursor-pointer ${J==="pay"?"bg-blue-50 dark:bg-blue-900/30":""}`,children:[r.jsx("input",{type:"radio",name:"dir",checked:J==="pay",onChange:()=>Z("pay")}),r.jsx("span",{className:"text-sm",children:" "})]}),r.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-xl cursor-pointer ${J==="collect"?"bg-blue-50 dark:bg-blue-900/30":""}`,children:[r.jsx("input",{type:"radio",name:"dir",checked:J==="collect",onChange:()=>Z("collect")}),r.jsx("span",{className:"text-sm",children:"  "})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs text-slate-400 mb-2",children:""}),r.jsx("input",{type:"number",className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-sm",value:V,onChange:$=>le(Number($.target.value||0))})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsx("div",{className:"mt-2 bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm text-center font-black text-lg",children:(Number(N)+(J==="pay"?-V:V)-B).toLocaleString()})]})]}),r.jsxs("div",{className:"flex gap-2 mt-5",children:[r.jsxs("button",{onClick:Me,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-2 rounded-xl flex items-center justify-center gap-2",children:[r.jsx(iL,{}),"  "]}),r.jsxs("button",{onClick:()=>{var ce,ie;const $=[..._,...S].filter((oe,$e,Xe)=>Xe.findIndex(et=>et.id===oe.id)===$e);if(t){const oe=((ce=i.find($e=>Number($e.id)===Number(b)))==null?void 0:ce.name)||"";ve($,{assigneeLabel:" ",assigneeName:oe,reportTitle:"  ",prevBalance:0})}else ve($,{repName:(ie=a.find(oe=>oe.id===f))==null?void 0:ie.name,prevBalance:N})},className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-4 py-2 rounded-xl flex items-center gap-2",children:[r.jsx(fn,{})," "]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 shadow-sm border flex items-center gap-3",children:[r.jsx(kc,{className:"w-6 h-6 text-blue-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-xs text-slate-500",children:"  /  "}),r.jsxs("div",{className:"flex gap-3 mt-2",children:[r.jsx("input",{className:"flex-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-sm",value:I,onChange:$=>L($.target.value),onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),z())}}),r.jsx("button",{type:"button",onClick:z,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-xl",children:""})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 shadow-sm border mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-black",children:"  (  )"}),r.jsx("div",{children:r.jsx("button",{onClick:ye,className:"bg-blue-600 text-white px-3 py-2 rounded-xl",children:" "})})]}),r.jsxs("div",{className:"max-h-40 overflow-auto divide-y",children:[d.length===0&&r.jsx("div",{className:"p-3 text-sm text-slate-400",children:"   "}),d.map($=>r.jsxs("div",{className:"flex items-center justify-between p-2",children:[r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:m.includes($.id),onChange:()=>F($.id)}),r.jsxs("div",{children:[r.jsxs("div",{className:"font-bold",children:["#",$.orderNumber||$.order_number,"  ",$.customerName||$.customer_name]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[$.governorate||"","  ",$.shipping||$.shippingCost||0," "]})]})]}),r.jsx("div",{className:"font-bold",children:($.total||$.subTotal||0).toLocaleString()})]},$.id))]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-4 shadow-sm border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(au,{className:"text-slate-500"}),r.jsxs("h3",{className:"font-black",children:["  (",[..._,...S].filter(($,ce,ie)=>ie.findIndex(oe=>oe.id===$.id)===ce).length,")"]})]}),r.jsxs("div",{className:"text-sm text-slate-500",children:[": ",r.jsx("span",{className:"font-black",children:B.toLocaleString()})]})]}),r.jsxs("div",{className:"divide-y max-h-[420px] overflow-auto",children:[_.length===0&&S.length===0&&r.jsx("div",{className:"p-6 text-center text-slate-400",children:"    "}),[..._.map($=>({...$,isAssigned:!0})),...S.filter($=>!_.find(ce=>ce.id===$.id)).map($=>({...$,isAssigned:!1}))].map($=>{const ce=Number($.subTotal||$.total||0),ie=Number($.shipping||$.shippingCost||0),oe=ce+ie;return r.jsxs("div",{className:`flex items-center justify-between py-3 ${$.isAssigned?"bg-slate-50 dark:bg-slate-900/30 px-3 rounded-sm mb-2":""}`,children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-bold",children:["#",$.orderNumber," - ",$.customerName," ",$.isAssigned&&r.jsx("span",{className:"text-xs text-emerald-600 mr-2",children:"( )"})]}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[$.governorate||"","  ",$.phone||$.phone1||""]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[($.products||[]).reduce(($e,Xe)=>$e+Number(Xe.quantity||Xe.qty||0),0)," "]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right text-xs",children:[r.jsxs("div",{children:[": ",r.jsx("span",{className:"font-black",children:ce.toLocaleString()})]}),r.jsxs("div",{children:[": ",r.jsx("span",{className:"font-black",children:ie.toLocaleString()})]}),r.jsxs("div",{className:"font-black text-lg",children:[": ",oe.toLocaleString()]})]}),$.isAssigned?r.jsx("button",{onClick:()=>be($.id),className:"text-rose-600 p-2 rounded-xl hover:bg-rose-50",children:""}):r.jsx("button",{onClick:()=>Ae($.id),className:"text-rose-600 p-2 rounded-xl hover:bg-rose-50",children:r.jsx(Gr,{})})]})]},$.id)})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsx("div",{className:"font-black text-lg mt-1",children:[..._,...S].filter(($,ce,ie)=>ie.findIndex(oe=>oe.id===$.id)===ce).length})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsx("div",{className:"font-black text-lg mt-1",children:te})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm text-center",children:[r.jsx("div",{className:"text-xs text-slate-400",children:" "}),r.jsx("div",{className:"font-black text-lg mt-1",children:B.toLocaleString()})]})]})]})]})})},Qae=({order:e,companyName:t,companyPhone:a,terms:n})=>{const i=e.orderNumber||e.order_number||"",o=e.customerName||e.customer_name||"",d=e.phone||e.phone1||"",h=e.address||"",m=e.governorate||"",u=e.products||[],x=(u.length>0?u:[{name:"",quantity:"",price:"",total:""}]).map(k=>{const E=Number(k.price||0),C=Number(k.quantity||k.qty||0),S=k.total!==void 0&&Number(k.total)!==0?Number(k.total):E*C;return{...k,price:E,quantity:C,lineTotal:S}}),b=x.reduce((k,E)=>k+(E.lineTotal||0),0),v=Number(e.shipping||e.shippingCost||e.shipping_fees||0),N=e.total&&Number(e.total)>0?Number(e.total):b+v,j=Math.max(0,3-x.length),_=new Date().toISOString().split("T")[0];return r.jsxs("div",{className:"flex flex-col h-full bg-white text-black font-sans box-border relative p-1",style:{direction:"rtl"},children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("h1",{className:"font-black text-xl mb-1",children:t}),r.jsx("p",{className:"text-sm font-bold dir-ltr",children:a})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("img",{src:`https://barcode.tec-it.com/barcode.ashx?data=${i}&code=Code128&dpi=96&thickness=2`,alt:"barcode",className:"h-10 mb-1"}),r.jsx("p",{className:"font-black text-sm",children:i})]})]}),r.jsx("div",{className:"text-right mb-1",children:r.jsxs("p",{className:"text-xs font-bold",children:[": ",_]})}),r.jsx("div",{className:"w-full border-b-2 border-black border-dashed my-1"}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("div",{className:"text-right flex-1",children:r.jsx("span",{className:"font-bold text-base",children:o})}),r.jsx("div",{className:"border-2 border-black p-1 px-3",children:r.jsx("span",{className:"font-black text-sm",children:m||" "})})]}),r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"font-bold text-sm font-mono",children:d})}),r.jsx("div",{className:"text-left",children:r.jsx("span",{className:"font-bold text-sm font-mono",children:e.phone2||""})})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"font-bold text-xs leading-tight",children:h})})]}),r.jsx("div",{className:"border-2 border-black mb-1 flex-grow",children:r.jsxs("table",{className:"w-full text-center text-xs border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-200 border-b-2 border-black",children:[r.jsx("th",{className:"border-l border-black p-1",children:""}),r.jsx("th",{className:"border-l border-black p-1 w-16",children:""}),r.jsx("th",{className:"border-l border-black p-1 w-12",children:""}),r.jsx("th",{className:"p-1 w-16",children:""})]})}),r.jsxs("tbody",{children:[x.map((k,E)=>r.jsxs("tr",{className:"border-b border-black",children:[r.jsxs("td",{className:"border-l border-black p-1 text-right font-medium",children:[k.name," ",k.color&&k.color!=="-"?`- ${k.color}`:""]}),r.jsx("td",{className:"border-l border-black p-1 font-bold",children:k.price.toLocaleString()}),r.jsx("td",{className:"border-l border-black p-1 font-bold",children:k.quantity}),r.jsx("td",{className:"p-1 font-bold",children:(k.lineTotal||0).toLocaleString()})]},E)),Array.from({length:j}).map((k,E)=>r.jsxs("tr",{className:"border-b border-black",children:[r.jsx("td",{className:"border-l border-black p-1 h-6"}),r.jsx("td",{className:"border-l border-black p-1"}),r.jsx("td",{className:"border-l border-black p-1"}),r.jsx("td",{className:"p-1"})]},`empty-${E}`))]})]})}),r.jsxs("div",{className:"flex justify-between text-xs mb-2 px-1",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-bold",children:":"})," ",e.employee||e.rep_name||"Admin"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-bold",children:":"})," ",e.page||"-"]})]}),r.jsxs("div",{className:"border-2 border-black p-2 mb-2 text-center bg-slate-50",children:[r.jsx("p",{className:"font-black text-sm mb-1",children:" "}),r.jsxs("div",{className:"text-2xl font-black mb-1",children:[N.toLocaleString()," ."]}),r.jsxs("p",{className:"text-[10px] font-bold",children:["(  ",v,")"]})]}),r.jsxs("div",{className:"border-2 border-black p-1 text-center mt-auto",children:[r.jsx("p",{className:"font-bold text-[10px] mb-0.5",children:" "}),r.jsx("p",{className:"text-[9px] font-medium leading-tight",children:n})]})]})},ene=({orders:e})=>{const t=localStorage.getItem("Dragon_company_name")||" ",a=localStorage.getItem("Dragon_company_phone")||"01000000000",n=localStorage.getItem("Dragon_company_terms")||"    .",i=[];for(let o=0;o<e.length;o+=4)i.push(e.slice(o,o+4));return r.jsxs("div",{id:"print-container",className:"hidden",children:[r.jsx("style",{children:`
                @media print {
                body { visibility: hidden; margin: 0; padding: 0; }
                #print-container { display: block !important; visibility: visible !important; position: absolute; top: 0; left: 0; width: 100%; }
                    @page { size: A4; margin: 0.5cm; }
                    .print-page { page-break-after: always; height: 28.7cm; }
                    .print-page:last-child { page-break-after: auto; }
                    * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                }
                `}),i.map((o,d)=>r.jsx("div",{className:"print-page",style:{padding:"0.3cm"},children:r.jsx("div",{className:"grid grid-cols-2 gap-4",style:{height:"100%",gridTemplateRows:"1fr 1fr"},children:o.map(h=>r.jsx("div",{className:"break-inside-avoid border border-slate-300",style:{height:"100%",overflow:"hidden"},children:r.jsx(Qae,{order:h,companyName:t,companyPhone:a,terms:n})},h.id))})},d))]})},tne=()=>{const t=(localStorage.getItem("Dragon_delivery_method")||"reps").toString()==="shipping",[a,n]=g.useState(null),[i,o]=g.useState([]),[d,h]=g.useState([]),[m,u]=g.useState(!0),[f,x]=g.useState(null),[b,v]=g.useState([]),[N,j]=g.useState([]),[_,k]=g.useState(null),[E,C]=g.useState([]),[S,O]=g.useState(void 0),[I,L]=g.useState(!1),[te,H]=g.useState(""),[B,X]=g.useState([]),[V,le]=g.useState(null);g.useEffect(()=>{(async()=>{try{const z=await(await fetch(`${G}/verify.php`,{method:"POST"})).json();n(z.user??null);let F=new Map;if(t){const $=await(await fetch(`${G}/api.php?module=shipping_companies&action=getAll`)).json(),ce=$.success?$.data||[]:[];F=new Map(ce.map(ie=>[Number(ie.id),String(ie.name||"")]))}else{const $=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json(),ce=($.success?$.data||[]:[]).filter(ie=>ie.role==="representative");F=new Map(ce.map(ie=>[Number(ie.id),String(ie.name||"")]))}const Ae=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json(),be=Ae.success?Ae.data||[]:[];o(be);const Me={};be.forEach(ve=>{const $=t?ve.shipping_company_id||ve.shippingCompanyId||"":ve.rep_id||ve.repId||"";if(!$)return;Me[$]||(Me[$]={repId:$,name:F.get(Number($))||(t?`  #${$}`:` #${$}`),orders:[],productsCount:0}),Me[$].orders.push(ve);const ce=(ve.products||[]).reduce((ie,oe)=>ie+Number(oe.quantity||oe.qty||0),0);Me[$].productsCount+=ce});const Oe=Object.values(Me);for(const ve of Oe){if(t)ve.balance=0;else try{const ce=await(await fetch(`${G}/api.php?module=transactions&action=getByRelated&related_to_type=rep&related_to_id=${encodeURIComponent(ve.repId)}`)).json(),ie=ce.success?(ce.data||[]).reduce((oe,$e)=>oe+Number($e.amount||0),0):0;ve.balance=ie}catch{ve.balance=0}ve.ordersCount=(ve.orders||[]).length}h(Oe);try{const $=await(await fetch(`${G}/api.php?module=warehouses&action=getAll`)).json();j($.success?$.data||[]:[])}catch{j([])}}catch(me){console.error("Failed to load update-status data",me),T.fire("","  .","error")}finally{u(!1)}})()},[]);const J=async()=>{u(!0);try{let Y=new Map;if(t){const Me=await(await fetch(`${G}/api.php?module=shipping_companies&action=getAll`)).json(),Oe=Me.success?Me.data||[]:[];Y=new Map(Oe.map(ve=>[Number(ve.id),String(ve.name||"")]))}else{const Me=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json(),Oe=(Me.success?Me.data||[]:[]).filter(ve=>ve.role==="representative");Y=new Map(Oe.map(ve=>[Number(ve.id),String(ve.name||"")]))}const z=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json(),F=z.success?z.data||[]:[];o(F);const ye={};F.forEach(be=>{const Me=t?be.shipping_company_id||be.shippingCompanyId||"":be.rep_id||be.repId||"";if(!Me)return;ye[Me]||(ye[Me]={repId:Me,name:Y.get(Number(Me))||(t?`  #${Me}`:` #${Me}`),orders:[],productsCount:0}),ye[Me].orders.push(be);const Oe=(be.products||[]).reduce((ve,$)=>ve+Number($.quantity||$.qty||0),0);ye[Me].productsCount+=Oe});const Ae=Object.values(ye);for(const be of Ae){if(t)be.balance=0;else try{const Oe=await(await fetch(`${G}/api.php?module=transactions&action=getByRelated&related_to_type=rep&related_to_id=${encodeURIComponent(be.repId)}`)).json(),ve=Oe.success?(Oe.data||[]).reduce(($,ce)=>$+Number(ce.amount||0),0):0;be.balance=ve}catch{be.balance=0}be.ordersCount=(be.orders||[]).length}h(Ae);try{const Me=await(await fetch(`${G}/api.php?module=warehouses&action=getAll`)).json();j(Me.success?Me.data||[]:[])}catch{j([])}}catch(Y){console.error("Failed to refresh data",Y)}finally{u(!1)}},Z=Y=>{if(!Y&&Y!==0)return"";const me=String(Y).toLowerCase();return{with_rep:" ",delivered:" ",returned:"",pending:"",in_delivery:" ",cancelled:"",new:""}[me]||Y},M=async()=>{const Y={"":""};(N||[]).forEach(z=>{Y[String(z.id)]=z.name||` ${z.id}`});const me=await T.fire({title:"   ()",input:"select",inputOptions:Y,inputPlaceholder:"    ",showCancelButton:!0});if(me.value!==null)return me.value===""?null:Number(me.value)},P=async()=>{const Y=b.slice();if(Y.length===0){T.fire("","  ","warning");return}const me=await M();if(me!==void 0)try{await Promise.all(Y.map(F=>fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:F,status:"returned"},me?{warehouseId:me}:{}))})));const z=((f==null?void 0:f.orders)||[]).filter(F=>Y.includes(F.id));x(F=>({...F,orders:(F.orders||[]).filter(ye=>!Y.includes(ye.id))}));try{await J()}catch(F){console.error(F)}v([]),L(!1),H(""),T.fire("","   .","success")}catch(z){console.error(z),T.fire("","  .","error")}};g.useEffect(()=>{V&&setTimeout(()=>{window.print(),le(null)},500)},[V]);const W=Y=>{v(me=>me.includes(Y)?me.filter(z=>z!==Y):[...me,Y])},se=Y=>{x(Y),v((Y.orders||[]).map(me=>me.id))},ue=Y=>{k(Y);const me=(Y.products||[]).map(z=>({productId:z.productId||z.product_id||z.id||0,name:z.name||"",qtyOriginal:Number(z.quantity||z.qty||0),deliveredQty:Number(z.quantity||z.qty||0),price:Number(z.price||z.sale_price||0)}));C(me)},D=(Y,me)=>{C(z=>z.map((F,ye)=>ye===Y?{...F,deliveredQty:Math.max(0,Math.min(F.qtyOriginal,me))}:F))},U=async Y=>{if(!_)return;const me=E.reduce((F,ye)=>F+Number(ye.deliveredQty||0)*Number(ye.price||0),0),z=E.filter(F=>F.qtyOriginal-(F.deliveredQty||0)>0).map(F=>({productId:F.productId,quantity:F.qtyOriginal-(F.deliveredQty||0)}));try{const F={id:_.id,status:"in_delivery",deliveredAmount:me};z.length>0&&(F.returnedItems=z),Y&&(F.warehouseId=Y);const Ae=await(await fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})).json();if(Ae.success){x(be=>({...be,orders:(be.orders||[]).filter(Me=>Me.id!==_.id)}));try{await J()}catch(be){console.error(be)}k(null),C([]),T.fire("","    .","success")}else console.error("Partial save failed",Ae),T.fire("",Ae.message||"   .","error")}catch(F){console.error(F),T.fire("","   .","error")}},re=Y=>{if(!Y||Y.length===0){T.fire("","   ","warning");return}le(Y)},he=Y=>{const me=new Date().toLocaleDateString(),z=Y&&Y.length>0?(f==null?void 0:f.name)||Y[0].rep_name||Y[0].repName||"":(f==null?void 0:f.name)||"",F=Y.reduce((Oe,ve)=>Oe+Number(ve.subTotal||ve.total_amount||ve.total||0)+Number(ve.shipping||ve.shipping_fees||ve.shippingCost||0),0),ye=t?" ":" ",Ae=t?" ":"",be=`<!doctype html><html><head><meta charset="utf-8"><title>${ye}</title><style>body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:20px;} h1{text-align:center;} .header{display:flex; justify-content:space-between; align-items:center;} table{width:100%; border-collapse:collapse; margin-top:12px;} th,td{border:1px solid #333; padding:6px; font-size:12px; text-align:right;} th{background:#eee;} </style></head><body><div class="header"><div>${(a==null?void 0:a.name)||""}</div><div><h1>${ye}</h1></div><div>${z||""}</div></div><div style="margin-top:8px">: ${me}</div>${t?"":`<div style="margin-top:8px"> : ${F}</div>`}<div style="margin-top:8px">${Ae}: ${z||""}</div><table><thead><tr><th> </th><th> </th><th></th><th></th><th></th><th></th><th></th><th></th><th></th><th> </th><th></th></tr></thead><tbody>`+Y.map(Oe=>`<tr><td>${Oe.orderNumber||Oe.order_number||""}</td><td>${Oe.customerName||Oe.customer_name||""}</td><td>${Oe.phone||Oe.phone1||""}</td><td>${Oe.governorate||""}</td><td>${Oe.address||""}</td><td>${Oe.employee||""}</td><td>${Oe.page||""}</td><td>${Oe.subTotal||Oe.total||0}</td><td>${Oe.shipping||Oe.shipping_fees||Oe.shippingCost||0}</td><td>${Oe.total||0}</td><td>${Oe.notes||""}</td></tr>`).join("")+"</tbody></table></body></html>",Me=window.open("","_blank","toolbar=0,location=0,menubar=0,scrollbars=1,resizable=1,width=900,height=700");Me&&(Me.document.write(be),Me.document.close(),Me.focus(),setTimeout(()=>Me.print(),400))},Ne=Y=>{const me={};(Y||[]).forEach(Oe=>(Oe.products||[]).forEach(ve=>{const $=`${ve.name||""}||${ve.color||""}||${ve.size||""}`;me[$]||(me[$]={name:ve.name||"",color:ve.color||"",size:ve.size||"",qty:0}),me[$].qty+=Number(ve.quantity||ve.qty||0)}));const z=Object.values(me),F=new Date().toLocaleString(),ye=Y&&Y.length>0?(f==null?void 0:f.name)||Y[0].rep_name||Y[0].repName||"":(f==null?void 0:f.name)||"",be=`<!doctype html><html><head><meta charset="utf-8"><title> </title><style>@page{size:80mm auto; margin:4mm;} body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:6px; width:80mm; box-sizing:border-box; font-size:12px;} h2{text-align:center; font-size:14px;} table{width:100%; border-collapse:collapse;} th,td{font-size:12px; padding:4px; border-bottom:1px solid #ddd;} th{font-weight:700; text-align:right;} .footer{margin-top:8px; font-size:12px;} </style></head><body><h2> </h2><div>: ${F}</div><div>${t?" ":""}: ${ye}</div><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>`+z.map(Oe=>`<tr><td>${Oe.name}</td><td>${Oe.color}</td><td>${Oe.size}</td><td style="text-align:left">${Oe.qty}</td></tr>`).join("")+`</tbody></table><div class="footer"> : ${z.length}<br/> : ${z.reduce((Oe,ve)=>Oe+ve.qty,0)}</div></body></html>`,Me=window.open("","_blank","toolbar=0,location=0,menubar=0,scrollbars=1,resizable=1,width=900,height=700");Me&&(Me.document.write(be),Me.document.close(),Me.focus(),setTimeout(()=>Me.print(),400))};return r.jsxs("div",{className:"p-4 rounded-2xl border border-card dir-rtl card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[V&&r.jsx(ene,{orders:V}),r.jsx("h2",{className:"font-black mb-3",children:"  "}),m?r.jsx("div",{className:"text-sm text-slate-500",children:" ..."}):r.jsx("div",{children:d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:t?"     .":"    ."}):r.jsx("div",{className:"space-y-3",children:d.map(Y=>r.jsxs("div",{className:"p-3 border rounded-lg flex justify-between items-center bg-slate-50",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:Y.name||(t?"  #":" #")+Y.repId}),r.jsxs("div",{className:"text-sm text-slate-500",children:[" : ",r.jsx("span",{className:"font-black",children:Y.ordersCount}),"   : ",r.jsx("span",{className:"font-black",children:Y.productsCount})]})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[!t&&r.jsxs("div",{className:"px-3 py-2 rounded-lg font-bold border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("span",{style:{color:Y.balance>0?"green":Y.balance<0?"red":"#000"},children:[Math.abs(Number(Y.balance||0)).toLocaleString()," ."]}),r.jsx("span",{className:"mx-2 font-bold",style:{color:Y.balance>0?"green":Y.balance<0?"red":"#666"},children:Y.balance>0?"":Y.balance<0?"":""})]}),r.jsx("button",{onClick:()=>se(Y),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-blue-700",children:" "}),r.jsx("button",{onClick:()=>{he(Y.orders)},className:"bg-amber-500 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-amber-600",children:" "}),r.jsx("button",{onClick:()=>{Ne(Y.orders)},className:"bg-emerald-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-emerald-700",children:" "}),r.jsx("button",{onClick:()=>re(Y.orders),className:"bg-sky-600 text-white px-3 py-2 rounded-lg text-xs font-bold hover:bg-sky-700",children:"   "})]})]},Y.repId))})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"rounded-2xl w-full max-w-4xl p-6 shadow-2xl flex flex-col max-h-[90vh] card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[r.jsxs("h3",{className:"font-black text-lg",children:[t?"  ":" ",": ",f.name]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white text-xs font-bold hover:bg-purple-700",children:" "}),r.jsx("button",{onClick:()=>{const Y=(f.orders||[]).map(me=>me.id);v(Y)},className:"px-3 py-1.5 rounded-lg bg-slate-100 text-xs font-bold hover:bg-slate-200",children:" "}),r.jsx("button",{onClick:()=>{v([])},className:"px-3 py-1.5 rounded-lg bg-slate-100 text-xs font-bold hover:bg-slate-200",children:" "}),r.jsx("button",{onClick:()=>x(null),className:"px-3 py-1.5 rounded-lg bg-red-100 text-red-600 text-xs font-bold hover:bg-red-200",children:""})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2 pr-2",children:(f.orders||[]).map(Y=>r.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-xl hover:bg-slate-50 transition-colors ${b.includes(Y.id)?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:[r.jsxs("label",{className:"flex items-center gap-3 flex-1 cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500",checked:b.includes(Y.id),onChange:()=>W(Y.id)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"font-bold text-slate-800",children:["#",Y.orderNumber||Y.order_number,"  ",Y.customerName||Y.customer_name]}),r.jsxs("div",{className:"font-bold text-blue-600",children:[(Number(Y.total_amount||Y.total)+Number(Y.shipping_fees||Y.shipping)).toLocaleString()," ."]})]}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex gap-4",children:[r.jsxs("span",{children:[" : ",(Y.products||[]).reduce((me,z)=>me+Number(z.quantity||z.qty||0),0)]}),r.jsxs("span",{children:[": ",Y.governorate]}),r.jsxs("span",{children:[": ",Z(Y.status)]})]})]})]}),r.jsx("div",{className:"flex items-center gap-2 ml-3",children:r.jsx("button",{onClick:me=>{me.stopPropagation(),ue(Y)},className:"px-3 py-1.5 rounded-lg bg-indigo-600 text-white text-xs font-bold hover:bg-indigo-700",children:" "})})]},Y.id))}),r.jsxs("div",{className:"pt-4 border-t flex flex-wrap gap-2 justify-end",children:[I&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"rounded-2xl w-full max-w-xl p-6 shadow-2xl card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"font-bold",children:"        "}),r.jsx("button",{onClick:()=>{L(!1),H("")},className:"text-red-600",children:""})]}),r.jsx("div",{className:"mb-3",children:r.jsx("p",{className:"text-sm text-slate-500",children:"           (  Enter   )."})}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{autoFocus:!0,value:te,onChange:Y=>H(Y.target.value),onKeyDown:async Y=>{if(Y.key==="Enter"){const me=(te||"").trim();if(!me)return;const z=((f==null?void 0:f.orders)||[]).filter(F=>[F.orderNumber||F.order_number||F.id||""].map(Ae=>String(Ae)).includes(me)?!0:(F.products||[]).some(Ae=>String(Ae.barcode||Ae.barcode_value||Ae.code||Ae.sku||Ae.product_barcode||"")===me));if(z.length>0){const F=z.map(ye=>ye.id);v(ye=>Array.from(new Set([...ye,...F]))),X(ye=>[{code:me,orderId:F[0]},...ye]),T.fire({icon:"success",title:" ",text:`  ${F.length} /    `,timer:1200,showConfirmButton:!1})}else X(F=>[{code:me,orderId:void 0},...F]),T.fire({icon:"warning",title:"  ",text:`      ${me}`,timer:1400,showConfirmButton:!1});H("")}},className:"w-full border rounded p-2",placeholder:"    "}),r.jsx("button",{onClick:()=>{const Y=(te||"").trim();if(!Y)return;const me=((f==null?void 0:f.orders)||[]).filter(z=>[z.orderNumber||z.order_number||z.id||""].map(ye=>String(ye)).includes(Y)?!0:(z.products||[]).some(ye=>String(ye.barcode||ye.barcode_value||ye.code||ye.sku||ye.product_barcode||"")===Y));if(me.length>0){const z=me.map(F=>F.id);v(F=>Array.from(new Set([...F,...z]))),X(F=>[{code:Y,orderId:z[0]},...F]),T.fire({icon:"success",title:" ",text:`  ${z.length} /    `,timer:1200,showConfirmButton:!1})}else X(z=>[{code:Y,orderId:void 0},...z]),T.fire({icon:"warning",title:"  ",text:`      ${Y}`,timer:1400,showConfirmButton:!1});H("")},className:"px-3 py-2 bg-blue-600 text-white rounded",children:""})]}),r.jsxs("div",{className:"max-h-48 overflow-y-auto border rounded p-2",children:[r.jsx("h5",{className:"font-bold text-sm mb-2",children:"  "}),B.length===0?r.jsx("div",{className:"text-sm text-slate-500",children:"    ."}):r.jsx("div",{className:"space-y-2",children:B.map((Y,me)=>r.jsxs("div",{className:"flex items-center justify-between border-b py-1",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"font-bold",children:Y.code}),r.jsx("div",{className:"text-xs text-slate-500",children:Y.orderId?`  #${Y.orderId}`:"    "})]}),r.jsxs("div",{className:"flex gap-2",children:[Y.orderId&&r.jsx("button",{onClick:()=>{v(z=>z.includes(Y.orderId)?z.filter(F=>F!==Y.orderId):[...z,Y.orderId])},className:"px-2 py-1 text-xs bg-slate-100 rounded",children:" "}),r.jsx("button",{onClick:()=>X(z=>z.filter((F,ye)=>ye!==me)),className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded",children:""})]})]},me))})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[r.jsx("button",{onClick:P,className:"px-4 py-2 bg-rose-600 text-white rounded",children:""}),r.jsx("button",{onClick:()=>{L(!1),H("")},className:"px-4 py-2 bg-slate-100 rounded",children:""})]})]})}),r.jsx("button",{onClick:()=>re(f.orders.filter(Y=>b.includes(Y.id))),className:"px-5 py-2.5 bg-slate-800 text-white rounded-xl font-bold shadow-lg hover:bg-slate-700",children:"   "}),r.jsx("div",{className:"w-px bg-slate-300 mx-2"}),r.jsx("button",{onClick:async()=>{const Y=b.slice();if(Y.length===0){T.fire("","  ","warning");return}try{await Promise.all(Y.map(z=>fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z,status:"delivered"})})));const me=((f==null?void 0:f.orders)||[]).filter(z=>Y.includes(z.id));x(z=>({...z,orders:(z.orders||[]).filter(F=>!Y.includes(F.id))}));try{await J()}catch(z){console.error(z)}v([]),T.fire("","   .","success")}catch(me){console.error(me),T.fire("","  .","error")}},className:"px-5 py-2.5 bg-emerald-600 text-white rounded-xl font-bold shadow-lg hover:bg-emerald-700",children:" "}),r.jsx("button",{onClick:async()=>{const Y=b.slice();if(Y.length===0){T.fire("","  ","warning");return}const me=await M();if(me!==void 0)try{await Promise.all(Y.map(F=>fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({id:F,status:"returned"},me?{warehouseId:me}:{}))})));const z=((f==null?void 0:f.orders)||[]).filter(F=>Y.includes(F.id));x(F=>({...F,orders:(F.orders||[]).filter(ye=>!Y.includes(ye.id))}));try{await J()}catch(F){console.error(F)}v([]),T.fire("","   .","success")}catch(z){console.error(z),T.fire("","  .","error")}},className:"px-5 py-2.5 bg-rose-600 text-white rounded-xl font-bold shadow-lg hover:bg-rose-700",children:" "}),r.jsx("button",{onClick:async()=>{const Y=b.slice();if(Y.length===0){T.fire("","  ","warning");return}try{await Promise.all(Y.map(me=>fetch(`${G}/api.php?module=orders&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:me,status:"pending"})}))),x(me=>({...me,orders:(me.orders||[]).map(z=>Y.includes(z.id)?{...z,status:"pending"}:z)})),v([]),T.fire("",t?"      .":"     .","success")}catch(me){console.error(me),T.fire("","  .","error")}},className:"px-5 py-2.5 bg-yellow-500 text-white rounded-xl font-bold shadow-lg hover:bg-yellow-600",children:" ( )"})]}),_&&r.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60",children:r.jsxs("div",{className:"rounded-xl w-full max-w-2xl p-4 shadow-xl card border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs("h4",{className:"font-bold",children:["  : #",_.orderNumber||_.order_number]}),r.jsx("button",{onClick:()=>{k(null),C([]),O(void 0)},className:"text-red-600",children:""})]}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:E.map((Y,me)=>r.jsxs("div",{className:"flex items-center justify-between gap-3 border-b py-2",children:[r.jsxs("div",{className:"flex-1 text-right",children:[r.jsx("div",{className:"font-bold",children:Y.name}),r.jsxs("div",{className:"text-xs text-slate-500",children:[" : ",Y.qtyOriginal,"  : ",Y.price]})]}),r.jsx("div",{className:"w-36",children:r.jsx("input",{type:"number",min:0,max:Y.qtyOriginal,value:Y.deliveredQty,onChange:z=>D(me,Number(z.target.value)),className:"w-full border rounded p-1 text-center"})})]},Y.productId+"-"+me))}),N&&N.length>0&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:"   ()"}),r.jsxs("select",{value:S??"",onChange:Y=>O(Y.target.value?Number(Y.target.value):void 0),className:"w-full border rounded p-2",children:[r.jsx("option",{value:"",children:""}),N.map(Y=>r.jsx("option",{value:Y.id,children:Y.name||Y.title||" "+Y.id},Y.id))]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[r.jsx("button",{onClick:()=>{k(null),C([]),O(void 0)},className:"px-4 py-2 bg-slate-100 rounded",children:""}),r.jsx("button",{onClick:()=>U(S),className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"  "})]})]})})]})})]})},ti=e=>e.toISOString().slice(0,10),nA=()=>{const e=new Date;return e.setHours(0,0,0,0),e},kh=()=>{const e=new Date;return e.setHours(23,59,59,999),e},rne=()=>{const[e,t]=g.useState(ti(nA())),[a,n]=g.useState(ti(kh())),[i,o]=g.useState(!1),[d,h]=g.useState([]),[m,u]=g.useState([]),[f,x]=g.useState([]);g.useEffect(()=>{b()},[]);const b=async()=>{try{const C=await(await fetch(`${G}/api.php?module=users&action=getAll`)).json(),S=(C.success?C.data||[]:[]).filter(L=>L.role==="representative");h(S);const I=await(await fetch(`${G}/api.php?module=orders&action=getAll`)).json();u(I.success?I.data||[]:[])}catch(E){console.error("Failed to load initial data",E),T.fire("","   .","error")}},v=E=>{const C=new Date;if(E==="today")t(ti(nA())),n(ti(kh()));else if(E==="week"){const S=new Date;S.setDate(C.getDate()-7),S.setHours(0,0,0,0),t(ti(S)),n(ti(kh()))}else if(E==="month"){const S=new Date;S.setMonth(C.getMonth()-1),S.setHours(0,0,0,0),t(ti(S)),n(ti(kh()))}},N=E=>{if(!E)return{};try{return typeof E=="string"?JSON.parse(E):E}catch{return{}}},j=async()=>{o(!0);try{const E=new Date(e+"T00:00:00"),C=new Date(a+"T23:59:59"),S=new Map;m.forEach(I=>S.set(I.id,I));const O=await Promise.all(d.map(async I=>{let L=[];try{const he=await(await fetch(`${G}/api.php?module=transactions&action=getByRelated&related_to_type=rep&related_to_id=${I.id}`)).json();L=he.success?he.data||[]:[]}catch{L=[]}const te=L.filter(re=>new Date(re.transaction_date)<E).reduce((re,he)=>re+Number(he.amount||0),0),H=L.filter(re=>new Date(re.transaction_date)<=C).reduce((re,he)=>re+Number(he.amount||0),0),B=m.filter(re=>Number(re.rep_id)===Number(I.id)&&new Date(re.created_at)<E),X=B.length,V=B.reduce((re,he)=>re+(he.products||[]).reduce((Ne,Y)=>Ne+Number(Y.quantity||Y.qty||0),0),0),le=L.filter(re=>{const he=new Date(re.transaction_date);return he>=E&&he<=C});let J=0,Z=0;le.forEach(re=>{const he=N(re.details);he&&Array.isArray(he.orders)&&he.orders.length>0&&(J+=he.orders.length,he.orders.forEach(Ne=>{const Y=S.get(Number(Ne));Y&&(Z+=(Y.products||[]).reduce((me,z)=>me+Number(z.quantity||z.qty||0),0))}))});const M=new Set,P=new Set;le.forEach(re=>{const he=N(re.details);if(he&&he.action&&he.order_id){const Ne=Number(he.order_id);(he.action==="delivered"||he.action==="partial_delivered")&&M.add(Ne),(he.action==="returned"||he.action==="partial_returned")&&P.add(Ne)}});const W=M.size,se=P.size,ue=Array.from(M).reduce((re,he)=>{const Ne=S.get(Number(he));return re+(Ne?(Ne.products||[]).reduce((Y,me)=>Y+Number(me.quantity||me.qty||0),0):0)},0),D=Array.from(P).reduce((re,he)=>{const Ne=S.get(Number(he));return re+(Ne?(Ne.products||[]).reduce((Y,me)=>Y+Number(me.quantity||me.qty||0),0):0)},0),U=le.reduce((re,he)=>{const Ne=N(he.details),Y=(he.type||"").toLowerCase();return Ne&&Ne.direction||Y.includes("payment")?re+Number(he.amount||0):re},0);return{repId:I.id,repName:I.name,prevBalance:te,ordersBeforeCount:X,piecesBefore:V,ordersReceivedCount:J,piecesReceivedCount:Z,deliveredOrdersCount:W,deliveredPieces:ue,returnedOrdersCount:se,returnedPieces:D,currentBalance:H,paymentsInPeriod:U}}));x(O)}catch(E){console.error("Failed to generate report",E),T.fire("","  .","error")}finally{o(!1)}};function _(){if(!f||f.length===0){T.fire("","   ","info");return}const E=[" ","_","_","_","_","_","_","_","_","_","_","_",""],C=f.map(te=>[`"${te.repName||""}"`,Math.abs(Number(te.prevBalance||0)).toString(),(te.ordersBeforeCount||0).toString(),(te.piecesBefore||0).toString(),(te.ordersReceivedCount||0).toString(),(te.piecesReceivedCount||0).toString(),(te.deliveredOrdersCount||0).toString(),(te.deliveredPieces||0).toString(),(te.returnedOrdersCount||0).toString(),(te.returnedPieces||0).toString(),Math.abs(Number(te.currentBalance||0)).toString(),Number(te.paymentsInPeriod||0).toString(),`${Number(te.currentBalance||0).toString()} ${te.currentBalance>0?"":te.currentBalance<0?"":""}`]),S=[E.join(","),...C.map(te=>te.join(","))].join(`
`),O=new Blob([S],{type:"text/csv;charset=utf-8;"}),I=URL.createObjectURL(O),L=document.createElement("a");L.href=I,L.download=`sales_report_${e}_${a}.csv`,document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(I)}function k(){if(!f||f.length===0){T.fire("","   ","info");return}const E=`${e} - ${a}`,C=f.map(I=>`
      <tr>
        <td>${I.repName}</td>
        <td style="text-align:right">${Math.abs(Number(I.prevBalance)).toLocaleString()}</td>
        <td style="text-align:center">${I.ordersBeforeCount}</td>
        <td style="text-align:center">${I.piecesBefore}</td>
        <td style="text-align:center">${I.ordersReceivedCount}</td>
        <td style="text-align:center">${I.piecesReceivedCount}</td>
        <td style="text-align:center">${I.deliveredOrdersCount}</td>
        <td style="text-align:center">${I.deliveredPieces}</td>
        <td style="text-align:center">${I.returnedOrdersCount}</td>
        <td style="text-align:center">${I.returnedPieces}</td>
        <td style="text-align:right">${Math.abs(Number(I.currentBalance)).toLocaleString()}</td>
        <td style="text-align:right">${Number(I.paymentsInPeriod).toLocaleString()}</td>
        <td style="text-align:right">${Number(I.currentBalance).toLocaleString()} ${I.currentBalance>0?"":I.currentBalance<0?"":""}</td>
      </tr>
    `).join(""),S=`<!doctype html><html><head><meta charset="utf-8"><title> </title><style>@page{size:A4;margin:20mm;} body{font-family: Arial, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:10px;} table{width:100%; border-collapse:collapse;} th,td{border:1px solid #333; padding:6px; font-size:12px; text-align:right;} th{background:#f3f4f6;} h1{text-align:center;}</style></head><body><h1> </h1><div>: ${E}</div><table><thead><tr><th> </th><th>  </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th> </th><th></th></tr></thead><tbody>${C}</tbody></table></body></html>`,O=window.open("","_blank","width=900,height=700");O&&(O.document.write(S),O.document.close(),setTimeout(()=>O.print(),500))}return r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"font-black text-lg mb-4",children:" / "}),r.jsxs("div",{className:"flex gap-3 items-center mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs",children:""}),r.jsx("input",{type:"date",value:e,onChange:E=>t(E.target.value),className:"border p-2 rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs",children:""}),r.jsx("input",{type:"date",value:a,onChange:E=>n(E.target.value),className:"border p-2 rounded"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>v("today"),className:"px-3 py-2 bg-slate-100 rounded",children:""}),r.jsx("button",{onClick:()=>v("week"),className:"px-3 py-2 bg-slate-100 rounded",children:""}),r.jsx("button",{onClick:()=>v("month"),className:"px-3 py-2 bg-slate-100 rounded",children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded",children:" "}),r.jsx("button",{onClick:()=>_(),className:"px-4 py-2 bg-sky-600 text-white rounded",children:" CSV"}),r.jsx("button",{onClick:()=>k(),className:"px-4 py-2 bg-emerald-600 text-white rounded",children:" A4"})]})]}),r.jsx("div",{className:"overflow-auto border rounded",children:r.jsxs("table",{className:"w-full text-sm text-right",children:[r.jsx("thead",{className:"bg-slate-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2",children:" "}),r.jsx("th",{className:"px-3 py-2",children:"   "}),r.jsx("th",{className:"px-3 py-2",children:"   "}),r.jsx("th",{className:"px-3 py-2",children:"   "}),r.jsx("th",{className:"px-3 py-2",children:"    "}),r.jsx("th",{className:"px-3 py-2",children:"    "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:"  "}),r.jsx("th",{className:"px-3 py-2",children:" "}),r.jsx("th",{className:"px-3 py-2",children:" "}),r.jsx("th",{className:"px-3 py-2",children:" (/)"})]})}),r.jsx("tbody",{children:f.map(E=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"px-3 py-2 font-bold",children:E.repName}),r.jsx("td",{className:"px-3 py-2",children:Math.abs(Number(E.prevBalance)).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:E.ordersBeforeCount}),r.jsx("td",{className:"px-3 py-2",children:E.piecesBefore}),r.jsx("td",{className:"px-3 py-2",children:E.ordersReceivedCount}),r.jsx("td",{className:"px-3 py-2",children:E.piecesReceivedCount}),r.jsx("td",{className:"px-3 py-2",children:E.deliveredOrdersCount}),r.jsx("td",{className:"px-3 py-2",children:E.deliveredPieces}),r.jsx("td",{className:"px-3 py-2",children:E.returnedOrdersCount}),r.jsx("td",{className:"px-3 py-2",children:E.returnedPieces}),r.jsx("td",{className:"px-3 py-2",children:Math.abs(Number(E.currentBalance)).toLocaleString()}),r.jsx("td",{className:"px-3 py-2",children:Number(E.paymentsInPeriod).toLocaleString()}),r.jsxs("td",{className:"px-3 py-2",children:[Number(E.currentBalance).toLocaleString()," ",r.jsx("span",{className:"mx-2 font-bold",style:{color:E.currentBalance>0?"green":E.currentBalance<0?"red":"#666"},children:E.currentBalance>0?"":E.currentBalance<0?"":""})]})]},E.repId))})]})})]})},ane=()=>{const[e,t]=g.useState(()=>{try{return JSON.parse(localStorage.getItem("Dragon_user")||"{}")}catch{return{}}}),a=(()=>{try{return JSON.parse(localStorage.getItem("Dragon_activation")||"{}")}catch{return{}}})(),n=localStorage.getItem("Dragon_company_name")||"",i=localStorage.getItem("Dragon_company_logo")||ia("Dragon.png"),[o,d]=g.useState(null),[h,m]=g.useState(""),[u,f]=g.useState(!1),[x,b]=g.useState(!1),[v,N]=g.useState(!1),[j,_]=g.useState({name:e.name||e.full_name||"",phone:e.phone||""}),[k,E]=g.useState({current:"",next:"",confirm:""}),C=B=>B&&String(B).trim()!==""?B:"",S=()=>{const B=(a.status||"").toString();return B.includes("")||B.includes("")?"text-rose-600 bg-rose-50 border-rose-200":B.includes("")?"text-amber-700 bg-amber-50 border-amber-200":B.includes("")?"text-emerald-700 bg-emerald-50 border-emerald-200":"text-slate-700 bg-slate-50 border-slate-200"};g.useEffect(()=>{(async()=>{try{const V=await(await fetch(`${G}/api.php?module=profile&action=get`)).json();V.success&&V.data&&(t(V.data),_({name:V.data.name||"",phone:V.data.phone||""}),localStorage.setItem("Dragon_user",JSON.stringify({...JSON.parse(localStorage.getItem("Dragon_user")||"{}"),...V.data})))}catch{}})()},[]),g.useEffect(()=>{const B=e.avatar||i||ia("Dragon.png");m(B)},[e.avatar,i]);const O=g.useMemo(()=>h||e.avatar||i||ia("Dragon.png"),[h,e.avatar,i]),I=async()=>{if(!j.name.trim()){T.fire("","  .","error");return}f(!0);try{const X=await(await fetch(`${G}/api.php?module=profile&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.name,phone:j.phone})})).json();if(!X.success)throw new Error(X.message||"  ");t(X.data||e),localStorage.setItem("Dragon_user",JSON.stringify({...JSON.parse(localStorage.getItem("Dragon_user")||"{}"),...X.data||{}})),T.fire("","    .","success")}catch(B){T.fire("",B.message||"  ","error")}finally{f(!1)}},L=async()=>{if(!k.current||!k.next||!k.confirm){T.fire("","   .","error");return}if(k.next!==k.confirm){T.fire("","   .","error");return}if(k.next.length<6){T.fire("","      6 .","error");return}b(!0);try{const X=await(await fetch(`${G}/api.php?module=profile&action=changePassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:k.current,new_password:k.next})})).json();if(!X.success)throw new Error(X.message||"   ");E({current:"",next:"",confirm:""}),T.fire("","    .","success")}catch(B){T.fire("",B.message||"   ","error")}finally{b(!1)}},te=B=>{if(d(B),B){const X=URL.createObjectURL(B);m(X)}},H=async()=>{if(!o){T.fire("","   .","info");return}N(!0);try{const B=new FormData;B.append("avatar",o);const V=await(await fetch(`${G}/api.php?module=profile&action=uploadAvatar`,{method:"POST",body:B})).json();if(!V.success)throw new Error(V.message||"  ");t(le=>({...le,avatar:V.avatar})),localStorage.setItem("Dragon_user",JSON.stringify({...JSON.parse(localStorage.getItem("Dragon_user")||"{}"),avatar:V.avatar})),d(null),m(V.avatar),T.fire("","   .","success")}catch(B){T.fire("",B.message||"  ","error")}finally{N(!1)}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",dir:"rtl",children:[r.jsx("div",{className:"card p-6 rounded-3xl border border-card shadow-md",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-5",children:[r.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden border border-card shadow-sm",children:r.jsx("img",{src:O,alt:"avatar",className:"w-full h-full object-cover",onError:B=>{B.target.src=ia("Dragon.png")}})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-black",children:C(e.name||e.full_name)}),r.jsxs("p",{className:"text-sm text-muted mt-1",children:[C(e.username||e.user_name),"  ",C(e.role||e.role_name||"User")]}),r.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 text-xs font-bold px-3 py-1.5 rounded-full border border-card bg-slate-50 dark:bg-slate-900/40",children:[r.jsx(fL,{size:14,className:"text-emerald-500"}),r.jsx("span",{children:" "})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-muted",children:""}),r.jsx("div",{className:"text-lg font-black",children:n})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:" "}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(fi,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:C(e.name||e.full_name)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(vO,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:C(e.role||e.role_name)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(Ly,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:C(e.phone)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(TR,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:C(e.email)})]})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:" "}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(bm,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:n})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(fi,{size:14}),""]}),r.jsx("span",{className:"font-bold",children:C(e.username||e.user_name)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2 text-muted",children:[r.jsx(pO,{size:14})," "]}),r.jsx("span",{className:"font-bold",children:C(e.last_login||e.lastLogin)})]})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:" "}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted",children:""}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border ${S()}`,children:C(a.status)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted",children:" "}),r.jsx("span",{className:"font-bold",children:C(a.expiry)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted",children:" "}),r.jsx("span",{className:"font-bold",children:C(a.account_status)})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:" "}),r.jsxs("div",{className:"space-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted",children:""}),r.jsx("input",{value:j.name,onChange:B=>_({...j,name:B.target.value}),className:"mt-2 w-full px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900",placeholder:" "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted",children:""}),r.jsx("input",{value:j.phone,onChange:B=>_({...j,phone:B.target.value}),className:"mt-2 w-full px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900",placeholder:" "})]}),r.jsxs("button",{onClick:I,disabled:u,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 disabled:opacity-60",children:[r.jsx(yr,{size:16}),"  "]})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:"  "}),r.jsxs("div",{className:"space-y-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden border border-card",children:r.jsx("img",{src:O,alt:"avatar",className:"w-full h-full object-cover",onError:B=>{B.target.src="/Dragon.png"}})}),r.jsxs("label",{className:"flex-1",children:[r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:B=>te(B.target.files&&B.target.files[0]?B.target.files[0]:null)}),r.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900 cursor-pointer",children:[r.jsx(Tv,{size:16}),"  "]})]})]}),r.jsxs("button",{onClick:H,disabled:v,className:"w-full flex items-center justify-center gap-2 bg-emerald-600 text-white py-3 rounded-xl font-bold hover:bg-emerald-700 disabled:opacity-60",children:[r.jsx(Tv,{size:16}),"  "]})]})]})]}),r.jsxs("div",{className:"card p-6 rounded-2xl border border-card shadow-md",children:[r.jsx("h2",{className:"text-sm font-black mb-4",children:"  "}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted",children:"  "}),r.jsx("input",{type:"password",value:k.current,onChange:B=>E({...k,current:B.target.value}),className:"mt-2 w-full px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted",children:"  "}),r.jsx("input",{type:"password",value:k.next,onChange:B=>E({...k,next:B.target.value}),className:"mt-2 w-full px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-muted",children:"  "}),r.jsx("input",{type:"password",value:k.confirm,onChange:B=>E({...k,confirm:B.target.value}),className:"mt-2 w-full px-4 py-3 rounded-xl border border-card bg-white dark:bg-slate-900"})]})]}),r.jsxs("button",{onClick:L,disabled:x,className:"mt-4 flex items-center justify-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-slate-800 disabled:opacity-60",children:[r.jsx(fR,{size:16}),"   "]})]})]})};var Sh={},Yd={},Eh={},sA;function $n(){if(sA)return Eh;sA=1,Object.defineProperty(Eh,"__esModule",{value:!0});function e(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function a(n,i){e(this,a),this.data=n,this.text=i.text||n,this.options=i};return Eh.default=t,Eh}var lA;function nne(){if(lA)return Yd;lA=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.CODE39=void 0;var e=(function(){function j(_,k){for(var E=0;E<k.length;E++){var C=k[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(_,C.key,C)}}return function(_,k,E){return k&&j(_.prototype,k),E&&j(_,E),_}})(),t=$n(),a=n(t);function n(j){return j&&j.__esModule?j:{default:j}}function i(j,_){if(!(j instanceof _))throw new TypeError("Cannot call a class as a function")}function o(j,_){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:j}function d(j,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);j.prototype=Object.create(_&&_.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(j,_):j.__proto__=_)}var h=(function(j){d(_,j);function _(k,E){return i(this,_),k=k.toUpperCase(),E.mod43&&(k+=b(N(k))),o(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,k,E))}return e(_,[{key:"encode",value:function(){for(var E=f("*"),C=0;C<this.data.length;C++)E+=f(this.data[C])+"0";return E+=f("*"),{data:E,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),_})(a.default),m=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],u=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function f(j){return x(v(j))}function x(j){return u[j].toString(2)}function b(j){return m[j]}function v(j){return m.indexOf(j)}function N(j){for(var _=0,k=0;k<j.length;k++)_+=v(j[k]);return _=_%43,_}return Yd.CODE39=h,Yd}var is={},Th={},Ch={},Hr={},iA;function Vu(){if(iA)return Hr;iA=1,Object.defineProperty(Hr,"__esModule",{value:!0});var e;function t(m,u,f){return u in m?Object.defineProperty(m,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):m[u]=f,m}var a=Hr.SET_A=0,n=Hr.SET_B=1,i=Hr.SET_C=2;Hr.SHIFT=98;var o=Hr.START_A=103,d=Hr.START_B=104,h=Hr.START_C=105;return Hr.MODULO=103,Hr.STOP=106,Hr.FNC1=207,Hr.SET_BY_CODE=(e={},t(e,o,a),t(e,d,n),t(e,h,i),e),Hr.SWAP={101:a,100:n,99:i},Hr.A_START_CHAR="",Hr.B_START_CHAR="",Hr.C_START_CHAR="",Hr.A_CHARS="[\0-_-]",Hr.B_CHARS="[ --]",Hr.C_CHARS="(*[0-9]{2}*)",Hr.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Hr}var oA;function Ax(){if(oA)return Ch;oA=1,Object.defineProperty(Ch,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=$n(),a=i(t),n=Vu();function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){o(this,f);var v=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,x.substring(1),b));return v.bytes=x.split("").map(function(N){return N.charCodeAt(0)}),v}return e(f,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var b=this.bytes,v=b.shift()-105,N=n.SET_BY_CODE[v];if(N===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&b.unshift(n.FNC1);var j=f.next(b,1,N);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:f.getBar(v)+j.result+f.getBar((j.checksum+v)%n.MODULO)+f.getBar(n.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var b=this.options.ean128||!1;return typeof b=="string"&&(b=b.toLowerCase()==="true"),b}}],[{key:"getBar",value:function(b){return n.BARS[b]?n.BARS[b].toString():""}},{key:"correctIndex",value:function(b,v){if(v===n.SET_A){var N=b.shift();return N<32?N+64:N-32}else return v===n.SET_B?b.shift()-32:(b.shift()-48)*10+b.shift()-48}},{key:"next",value:function(b,v,N){if(!b.length)return{result:"",checksum:0};var j=void 0,_=void 0;if(b[0]>=200){_=b.shift()-105;var k=n.SWAP[_];k!==void 0?j=f.next(b,v+1,k):((N===n.SET_A||N===n.SET_B)&&_===n.SHIFT&&(b[0]=N===n.SET_A?b[0]>95?b[0]-96:b[0]:b[0]<32?b[0]+96:b[0]),j=f.next(b,v+1,N))}else _=f.correctIndex(b,N),j=f.next(b,v+1,N);var E=f.getBar(_),C=_*v;return{result:E+j.result,checksum:C+j.checksum}}}]),f})(a.default);return Ch.default=m,Ch}var Ah={},cA;function sne(){if(cA)return Ah;cA=1,Object.defineProperty(Ah,"__esModule",{value:!0});var e=Vu(),t=function(h){return h.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},a=function(h){return h.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(h){return h.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function i(d,h){var m=h?e.A_CHARS:e.B_CHARS,u=d.match(new RegExp("^("+m+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(u)return u[1]+""+o(d.substring(u[1].length));var f=d.match(new RegExp("^"+m+"+"))[0];return f.length===d.length?d:f+String.fromCharCode(h?205:206)+i(d.substring(f.length),!h)}function o(d){var h=n(d),m=h.length;if(m===d.length)return d;d=d.substring(m);var u=t(d)>=a(d);return h+String.fromCharCode(u?206:205)+i(d,u)}return Ah.default=function(d){var h=void 0,m=n(d).length;if(m>=2)h=e.C_START_CHAR+o(d);else{var u=t(d)>a(d);h=(u?e.A_START_CHAR:e.B_START_CHAR)+i(d,u)}return h.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(f,x){return""+x})},Ah}var dA;function lne(){if(dA)return Th;dA=1,Object.defineProperty(Th,"__esModule",{value:!0});var e=Ax(),t=i(e),a=sne(),n=i(a);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){if(o(this,f),/^[\x00-\x7F\xC8-\xD3]+$/.test(x))var v=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,(0,n.default)(x),b));else var v=d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,x,b));return d(v)}return f})(t.default);return Th.default=m,Th}var Oh={},uA;function ine(){if(uA)return Oh;uA=1,Object.defineProperty(Oh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=Ax(),a=i(t),n=Vu();function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){return o(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,n.A_START_CHAR+x,b))}return e(f,[{key:"valid",value:function(){return new RegExp("^"+n.A_CHARS+"+$").test(this.data)}}]),f})(a.default);return Oh.default=m,Oh}var Mh={},fA;function one(){if(fA)return Mh;fA=1,Object.defineProperty(Mh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=Ax(),a=i(t),n=Vu();function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){return o(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,n.B_START_CHAR+x,b))}return e(f,[{key:"valid",value:function(){return new RegExp("^"+n.B_CHARS+"+$").test(this.data)}}]),f})(a.default);return Mh.default=m,Mh}var Ih={},hA;function cne(){if(hA)return Ih;hA=1,Object.defineProperty(Ih,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=Ax(),a=i(t),n=Vu();function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){return o(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,n.C_START_CHAR+x,b))}return e(f,[{key:"valid",value:function(){return new RegExp("^"+n.C_CHARS+"+$").test(this.data)}}]),f})(a.default);return Ih.default=m,Ih}var mA;function dne(){if(mA)return is;mA=1,Object.defineProperty(is,"__esModule",{value:!0}),is.CODE128C=is.CODE128B=is.CODE128A=is.CODE128=void 0;var e=lne(),t=m(e),a=ine(),n=m(a),i=one(),o=m(i),d=cne(),h=m(d);function m(u){return u&&u.__esModule?u:{default:u}}return is.CODE128=t.default,is.CODE128A=n.default,is.CODE128B=o.default,is.CODE128C=h.default,is}var Ga={},Ph={},ll={},pA;function Gu(){return pA||(pA=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.SIDE_BIN="101",ll.MIDDLE_BIN="01010",ll.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},ll.EAN2_STRUCTURE=["LL","LG","GL","GG"],ll.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],ll.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),ll}var Dh={},Lh={},xA;function Xu(){if(xA)return Lh;xA=1,Object.defineProperty(Lh,"__esModule",{value:!0});var e=Gu(),t=function(n,i,o){var d=n.split("").map(function(m,u){return e.BINARIES[i[u]]}).map(function(m,u){return m?m[n[u]]:""});if(o){var h=n.length-1;d=d.map(function(m,u){return u<h?m+o:m})}return d.join("")};return Lh.default=t,Lh}var bA;function vI(){if(bA)return Dh;bA=1,Object.defineProperty(Dh,"__esModule",{value:!0});var e=(function(){function x(b,v){for(var N=0;N<v.length;N++){var j=v[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,v,N){return v&&x(b.prototype,v),N&&x(b,N),b}})(),t=Gu(),a=Xu(),n=d(a),i=$n(),o=d(i);function d(x){return x&&x.__esModule?x:{default:x}}function h(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function m(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=(function(x){u(b,x);function b(v,N){h(this,b);var j=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v,N));return j.fontSize=!N.flat&&N.fontSize>N.width*10?N.width*10:N.fontSize,j.guardHeight=N.height+j.fontSize/2+N.textMargin,j}return e(b,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(N,j){return this.text.substr(N,j)}},{key:"leftEncode",value:function(N,j){return(0,n.default)(N,j)}},{key:"rightText",value:function(N,j){return this.text.substr(N,j)}},{key:"rightEncode",value:function(N,j){return(0,n.default)(N,j)}},{key:"encodeGuarded",value:function(){var N={fontSize:this.fontSize},j={height:this.guardHeight};return[{data:t.SIDE_BIN,options:j},{data:this.leftEncode(),text:this.leftText(),options:N},{data:t.MIDDLE_BIN,options:j},{data:this.rightEncode(),text:this.rightText(),options:N},{data:t.SIDE_BIN,options:j}]}},{key:"encodeFlat",value:function(){var N=[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN];return{data:N.join(""),text:this.text}}}]),b})(o.default);return Dh.default=f,Dh}var gA;function une(){if(gA)return Ph;gA=1,Object.defineProperty(Ph,"__esModule",{value:!0});var e=(function(){function x(b,v){for(var N=0;N<v.length;N++){var j=v[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,v,N){return v&&x(b.prototype,v),N&&x(b,N),b}})(),t=function x(b,v,N){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,v);if(j===void 0){var _=Object.getPrototypeOf(b);return _===null?void 0:x(_,v,N)}else{if("value"in j)return j.value;var k=j.get;return k===void 0?void 0:k.call(N)}},a=Gu(),n=vI(),i=o(n);function o(x){return x&&x.__esModule?x:{default:x}}function d(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function h(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function m(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var u=function(b){var v=b.substr(0,12).split("").map(function(N){return+N}).reduce(function(N,j,_){return _%2?N+j*3:N+j},0);return(10-v%10)%10},f=(function(x){m(b,x);function b(v,N){d(this,b),v.search(/^[0-9]{12}$/)!==-1&&(v+=u(v));var j=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v,N));return j.lastChar=N.lastChar,j}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===u(this.data)}},{key:"leftText",value:function(){return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var N=this.data.substr(1,6),j=a.EAN13_STRUCTURE[this.data[0]];return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"leftEncode",this).call(this,N,j)}},{key:"rightText",value:function(){return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var N=this.data.substr(7,6);return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"rightEncode",this).call(this,N,"RRRRRR")}},{key:"encodeGuarded",value:function(){var N=t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(N.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(N.push({data:"00"}),N.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),N}}]),b})(i.default);return Ph.default=f,Ph}var Rh={},vA;function fne(){if(vA)return Rh;vA=1,Object.defineProperty(Rh,"__esModule",{value:!0});var e=(function(){function f(x,b){for(var v=0;v<b.length;v++){var N=b[v];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,v){return b&&f(x.prototype,b),v&&f(x,v),x}})(),t=function f(x,b,v){x===null&&(x=Function.prototype);var N=Object.getOwnPropertyDescriptor(x,b);if(N===void 0){var j=Object.getPrototypeOf(x);return j===null?void 0:f(j,b,v)}else{if("value"in N)return N.value;var _=N.get;return _===void 0?void 0:_.call(v)}},a=vI(),n=i(a);function i(f){return f&&f.__esModule?f:{default:f}}function o(f,x){if(!(f instanceof x))throw new TypeError("Cannot call a class as a function")}function d(f,x){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:f}function h(f,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);f.prototype=Object.create(x&&x.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(f,x):f.__proto__=x)}var m=function(x){var b=x.substr(0,7).split("").map(function(v){return+v}).reduce(function(v,N,j){return j%2?v+N:v+N*3},0);return(10-b%10)%10},u=(function(f){h(x,f);function x(b,v){return o(this,x),b.search(/^[0-9]{7}$/)!==-1&&(b+=m(b)),d(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b,v))}return e(x,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===m(this.data)}},{key:"leftText",value:function(){return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var v=this.data.substr(0,4);return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftEncode",this).call(this,v,"LLLL")}},{key:"rightText",value:function(){return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var v=this.data.substr(4,4);return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightEncode",this).call(this,v,"RRRR")}}]),x})(n.default);return Rh.default=u,Rh}var $h={},yA;function hne(){if(yA)return $h;yA=1,Object.defineProperty($h,"__esModule",{value:!0});var e=(function(){function b(v,N){for(var j=0;j<N.length;j++){var _=N[j];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(v,_.key,_)}}return function(v,N,j){return N&&b(v.prototype,N),j&&b(v,j),v}})(),t=Gu(),a=Xu(),n=d(a),i=$n(),o=d(i);function d(b){return b&&b.__esModule?b:{default:b}}function h(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function m(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function u(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var f=function(v){var N=v.split("").map(function(j){return+j}).reduce(function(j,_,k){return k%2?j+_*9:j+_*3},0);return N%10},x=(function(b){u(v,b);function v(N,j){return h(this,v),m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,N,j))}return e(v,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var j=t.EAN5_STRUCTURE[f(this.data)];return{data:"1011"+(0,n.default)(this.data,j,"01"),text:this.text}}}]),v})(o.default);return $h.default=x,$h}var zh={},jA;function mne(){if(jA)return zh;jA=1,Object.defineProperty(zh,"__esModule",{value:!0});var e=(function(){function x(b,v){for(var N=0;N<v.length;N++){var j=v[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,v,N){return v&&x(b.prototype,v),N&&x(b,N),b}})(),t=Gu(),a=Xu(),n=d(a),i=$n(),o=d(i);function d(x){return x&&x.__esModule?x:{default:x}}function h(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function m(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var f=(function(x){u(b,x);function b(v,N){return h(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v,N))}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var N=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n.default)(this.data,N,"01"),text:this.text}}}]),b})(o.default);return zh.default=f,zh}var Kd={},NA;function yI(){if(NA)return Kd;NA=1,Object.defineProperty(Kd,"__esModule",{value:!0});var e=(function(){function x(b,v){for(var N=0;N<v.length;N++){var j=v[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,v,N){return v&&x(b.prototype,v),N&&x(b,N),b}})();Kd.checksum=f;var t=Xu(),a=o(t),n=$n(),i=o(n);function o(x){return x&&x.__esModule?x:{default:x}}function d(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function h(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function m(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var u=(function(x){m(b,x);function b(v,N){d(this,b),v.search(/^[0-9]{11}$/)!==-1&&(v+=f(v));var j=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v,N));return j.displayValue=N.displayValue,N.fontSize>N.width*10?j.fontSize=N.width*10:j.fontSize=N.fontSize,j.guardHeight=N.height+j.fontSize/2+N.textMargin,j}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==f(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var N="";return N+="101",N+=(0,a.default)(this.data.substr(0,6),"LLLLLL"),N+="01010",N+=(0,a.default)(this.data.substr(6,6),"RRRRRR"),N+="101",{data:N,text:this.text}}},{key:"guardedEncoding",value:function(){var N=[];return this.displayValue&&N.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),N.push({data:"101"+(0,a.default)(this.data[0],"L"),options:{height:this.guardHeight}}),N.push({data:(0,a.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),N.push({data:"01010",options:{height:this.guardHeight}}),N.push({data:(0,a.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),N.push({data:(0,a.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&N.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),N}}]),b})(i.default);function f(x){var b=0,v;for(v=1;v<11;v+=2)b+=parseInt(x[v]);for(v=0;v<11;v+=2)b+=parseInt(x[v])*3;return(10-b%10)%10}return Kd.default=u,Kd}var Bh={},wA;function pne(){if(wA)return Bh;wA=1,Object.defineProperty(Bh,"__esModule",{value:!0});var e=(function(){function N(j,_){for(var k=0;k<_.length;k++){var E=_[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,_,k){return _&&N(j.prototype,_),k&&N(j,k),j}})(),t=Xu(),a=d(t),n=$n(),i=d(n),o=yI();function d(N){return N&&N.__esModule?N:{default:N}}function h(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function m(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function u(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var f=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],x=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],b=(function(N){u(j,N);function j(_,k){h(this,j);var E=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,_,k));if(E.isValid=!1,_.search(/^[0-9]{6}$/)!==-1)E.middleDigits=_,E.upcA=v(_,"0"),E.text=k.text||""+E.upcA[0]+_+E.upcA[E.upcA.length-1],E.isValid=!0;else if(_.search(/^[01][0-9]{7}$/)!==-1)if(E.middleDigits=_.substring(1,_.length-1),E.upcA=v(E.middleDigits,_[0]),E.upcA[E.upcA.length-1]===_[_.length-1])E.isValid=!0;else return m(E);else return m(E);return E.displayValue=k.displayValue,k.fontSize>k.width*10?E.fontSize=k.width*10:E.fontSize=k.fontSize,E.guardHeight=k.height+E.fontSize/2+k.textMargin,E}return e(j,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var k="";return k+="101",k+=this.encodeMiddleDigits(),k+="010101",{data:k,text:this.text}}},{key:"guardedEncoding",value:function(){var k=[];return this.displayValue&&k.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),k.push({data:"101",options:{height:this.guardHeight}}),k.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),k.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&k.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),k}},{key:"encodeMiddleDigits",value:function(){var k=this.upcA[0],E=this.upcA[this.upcA.length-1],C=x[parseInt(E)][parseInt(k)];return(0,a.default)(this.middleDigits,C)}}]),j})(i.default);function v(N,j){for(var _=parseInt(N[N.length-1]),k=f[_],E="",C=0,S=0;S<k.length;S++){var O=k[S];O==="X"?E+=N[C++]:E+=O}return E=""+j+E,""+E+(0,o.checksum)(E)}return Bh.default=b,Bh}var _A;function xne(){if(_A)return Ga;_A=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.UPCE=Ga.UPC=Ga.EAN2=Ga.EAN5=Ga.EAN8=Ga.EAN13=void 0;var e=une(),t=b(e),a=fne(),n=b(a),i=hne(),o=b(i),d=mne(),h=b(d),m=yI(),u=b(m),f=pne(),x=b(f);function b(v){return v&&v.__esModule?v:{default:v}}return Ga.EAN13=t.default,Ga.EAN8=n.default,Ga.EAN5=o.default,Ga.EAN2=h.default,Ga.UPC=u.default,Ga.UPCE=x.default,Ga}var Hi={},Uh={},hc={},kA;function bne(){return kA||(kA=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.START_BIN="1010",hc.END_BIN="11101",hc.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),hc}var SA;function jI(){if(SA)return Uh;SA=1,Object.defineProperty(Uh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=bne(),a=$n(),n=i(a);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(){return o(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return e(f,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var b=this,v=this.data.match(/.{2}/g).map(function(N){return b.encodePair(N)}).join("");return{data:t.START_BIN+v+t.END_BIN,text:this.text}}},{key:"encodePair",value:function(b){var v=t.BINARIES[b[1]];return t.BINARIES[b[0]].split("").map(function(N,j){return(N==="1"?"111":"1")+(v[j]==="1"?"000":"0")}).join("")}}]),f})(n.default);return Uh.default=m,Uh}var qh={},EA;function gne(){if(EA)return qh;EA=1,Object.defineProperty(qh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=jI(),a=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function o(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function d(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var h=function(f){var x=f.substr(0,13).split("").map(function(b){return parseInt(b,10)}).reduce(function(b,v,N){return b+v*(3-N%2*2)},0);return Math.ceil(x/10)*10-x},m=(function(u){d(f,u);function f(x,b){return i(this,f),x.search(/^[0-9]{13}$/)!==-1&&(x+=h(x)),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,x,b))}return e(f,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===h(this.data)}}]),f})(a.default);return qh.default=m,qh}var TA;function vne(){if(TA)return Hi;TA=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.ITF14=Hi.ITF=void 0;var e=jI(),t=i(e),a=gne(),n=i(a);function i(o){return o&&o.__esModule?o:{default:o}}return Hi.ITF=t.default,Hi.ITF14=n.default,Hi}var En={},Fh={},CA;function Wu(){if(CA)return Fh;CA=1,Object.defineProperty(Fh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=$n(),a=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function o(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function d(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var h=(function(u){d(f,u);function f(x,b){return i(this,f),o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,x,b))}return e(f,[{key:"encode",value:function(){for(var b="110",v=0;v<this.data.length;v++){var N=parseInt(this.data[v]),j=N.toString(2);j=m(j,4-j.length);for(var _=0;_<j.length;_++)b+=j[_]=="0"?"100":"110"}return b+="1001",{data:b,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),f})(a.default);function m(u,f){for(var x=0;x<f;x++)u="0"+u;return u}return Fh.default=h,Fh}var Hh={},Vd={},AA;function Ox(){if(AA)return Vd;AA=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.mod10=e,Vd.mod11=t;function e(a){for(var n=0,i=0;i<a.length;i++){var o=parseInt(a[i]);(i+a.length)%2===0?n+=o:n+=o*2%10+Math.floor(o*2/10)}return(10-n%10)%10}function t(a){for(var n=0,i=[2,3,4,5,6,7],o=0;o<a.length;o++){var d=parseInt(a[a.length-1-o]);n+=i[o%i.length]*d}return(11-n%11)%11}return Vd}var OA;function yne(){if(OA)return Hh;OA=1,Object.defineProperty(Hh,"__esModule",{value:!0});var e=Wu(),t=n(e),a=Ox();function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f+(0,a.mod10)(f),x))}return u})(t.default);return Hh.default=h,Hh}var Yh={},MA;function jne(){if(MA)return Yh;MA=1,Object.defineProperty(Yh,"__esModule",{value:!0});var e=Wu(),t=n(e),a=Ox();function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f+(0,a.mod11)(f),x))}return u})(t.default);return Yh.default=h,Yh}var Kh={},IA;function Nne(){if(IA)return Kh;IA=1,Object.defineProperty(Kh,"__esModule",{value:!0});var e=Wu(),t=n(e),a=Ox();function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),f+=(0,a.mod10)(f),f+=(0,a.mod10)(f),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,x))}return u})(t.default);return Kh.default=h,Kh}var Vh={},PA;function wne(){if(PA)return Vh;PA=1,Object.defineProperty(Vh,"__esModule",{value:!0});var e=Wu(),t=n(e),a=Ox();function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),f+=(0,a.mod11)(f),f+=(0,a.mod10)(f),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,x))}return u})(t.default);return Vh.default=h,Vh}var DA;function _ne(){if(DA)return En;DA=1,Object.defineProperty(En,"__esModule",{value:!0}),En.MSI1110=En.MSI1010=En.MSI11=En.MSI10=En.MSI=void 0;var e=Wu(),t=f(e),a=yne(),n=f(a),i=jne(),o=f(i),d=Nne(),h=f(d),m=wne(),u=f(m);function f(x){return x&&x.__esModule?x:{default:x}}return En.MSI=t.default,En.MSI10=n.default,En.MSI11=o.default,En.MSI1010=h.default,En.MSI1110=u.default,En}var Gd={},LA;function kne(){if(LA)return Gd;LA=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.pharmacode=void 0;var e=(function(){function m(u,f){for(var x=0;x<f.length;x++){var b=f[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,f,x){return f&&m(u.prototype,f),x&&m(u,x),u}})(),t=$n(),a=n(t);function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){i(this,u);var b=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,x));return b.number=parseInt(f,10),b}return e(u,[{key:"encode",value:function(){for(var x=this.number,b="";!isNaN(x)&&x!=0;)x%2===0?(b="11100"+b,x=(x-2)/2):(b="100"+b,x=(x-1)/2);return b=b.slice(0,-2),{data:b,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),u})(a.default);return Gd.pharmacode=h,Gd}var Xd={},RA;function Sne(){if(RA)return Xd;RA=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.codabar=void 0;var e=(function(){function m(u,f){for(var x=0;x<f.length;x++){var b=f[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,f,x){return f&&m(u.prototype,f),x&&m(u,x),u}})(),t=$n(),a=n(t);function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){i(this,u),f.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(f="A"+f+"A");var b=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f.toUpperCase(),x));return b.text=b.options.text||b.text.replace(/[A-D]/g,""),b}return e(u,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var x=[],b=this.getEncodings(),v=0;v<this.data.length;v++)x.push(b[this.data.charAt(v)]),v!==this.data.length-1&&x.push("0");return{text:this.text,data:x.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),u})(a.default);return Xd.codabar=h,Xd}var Yi={},Gh={},mc={},$A;function Ene(){return $A||($A=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],mc.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],mc.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),mc}var zA;function NI(){if(zA)return Gh;zA=1,Object.defineProperty(Gh,"__esModule",{value:!0});var e=(function(){function u(f,x){for(var b=0;b<x.length;b++){var v=x[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,x,b){return x&&u(f.prototype,x),b&&u(f,b),f}})(),t=Ene(),a=$n(),n=i(a);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function d(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function h(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var m=(function(u){h(f,u);function f(x,b){return o(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,x,b))}return e(f,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var b=this.data.split("").flatMap(function(_){return t.MULTI_SYMBOLS[_]||_}),v=b.map(function(_){return f.getEncoding(_)}).join(""),N=f.checksum(b,20),j=f.checksum(b.concat(N),15);return{text:this.text,data:f.getEncoding("")+v+f.getEncoding(N)+f.getEncoding(j)+f.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(b){return t.BINARIES[f.symbolValue(b)]}},{key:"getSymbol",value:function(b){return t.SYMBOLS[b]}},{key:"symbolValue",value:function(b){return t.SYMBOLS.indexOf(b)}},{key:"checksum",value:function(b,v){var N=b.slice().reverse().reduce(function(j,_,k){var E=k%v+1;return j+f.symbolValue(_)*E},0);return f.getSymbol(N%47)}}]),f})(n.default);return Gh.default=m,Gh}var Xh={},BA;function Tne(){if(BA)return Xh;BA=1,Object.defineProperty(Xh,"__esModule",{value:!0});var e=(function(){function m(u,f){for(var x=0;x<f.length;x++){var b=f[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,f,x){return f&&m(u.prototype,f),x&&m(u,x),u}})(),t=NI(),a=n(t);function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,x))}return e(u,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),u})(a.default);return Xh.default=h,Xh}var UA;function Cne(){if(UA)return Yi;UA=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.CODE93FullASCII=Yi.CODE93=void 0;var e=NI(),t=i(e),a=Tne(),n=i(a);function i(o){return o&&o.__esModule?o:{default:o}}return Yi.CODE93=t.default,Yi.CODE93FullASCII=n.default,Yi}var Wd={},qA;function Ane(){if(qA)return Wd;qA=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.GenericBarcode=void 0;var e=(function(){function m(u,f){for(var x=0;x<f.length;x++){var b=f[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,f,x){return f&&m(u.prototype,f),x&&m(u,x),u}})(),t=$n(),a=n(t);function n(m){return m&&m.__esModule?m:{default:m}}function i(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function o(m,u){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:m}function d(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(m,u):m.__proto__=u)}var h=(function(m){d(u,m);function u(f,x){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,f,x))}return e(u,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),u})(a.default);return Wd.GenericBarcode=h,Wd}var FA;function One(){if(FA)return Sh;FA=1,Object.defineProperty(Sh,"__esModule",{value:!0});var e=nne(),t=dne(),a=xne(),n=vne(),i=_ne(),o=kne(),d=Sne(),h=Cne(),m=Ane();return Sh.default={CODE39:e.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,UPCE:a.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:i.MSI,MSI10:i.MSI10,MSI11:i.MSI11,MSI1010:i.MSI1010,MSI1110:i.MSI1110,pharmacode:o.pharmacode,codabar:d.codabar,CODE93:h.CODE93,CODE93FullASCII:h.CODE93FullASCII,GenericBarcode:m.GenericBarcode},Sh}var Wh={},HA;function Mx(){if(HA)return Wh;HA=1,Object.defineProperty(Wh,"__esModule",{value:!0});var e=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};return Wh.default=function(t,a){return e({},t,a)},Wh}var Jh={},YA;function Mne(){if(YA)return Jh;YA=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.default=e;function e(t){var a=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",a.push(i)}return n(t),a}return Jh}var Zh={},KA;function Ine(){if(KA)return Zh;KA=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.default=e;function e(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}return Zh}var Qh={},em={},tm={},VA;function wI(){if(VA)return tm;VA=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.default=e;function e(t){var a=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in a)a.hasOwnProperty(n)&&(n=a[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}return tm}var rm={},GA;function _I(){if(GA)return rm;GA=1,Object.defineProperty(rm,"__esModule",{value:!0});var e={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return rm.default=e,rm}var XA;function Pne(){if(XA)return em;XA=1,Object.defineProperty(em,"__esModule",{value:!0});var e=wI(),t=i(e),a=_I(),n=i(a);function i(d){return d&&d.__esModule?d:{default:d}}function o(d){var h={};for(var m in n.default)n.default.hasOwnProperty(m)&&(d.hasAttribute("jsbarcode-"+m.toLowerCase())&&(h[m]=d.getAttribute("jsbarcode-"+m.toLowerCase())),d.hasAttribute("data-"+m.toLowerCase())&&(h[m]=d.getAttribute("data-"+m.toLowerCase())));return h.value=d.getAttribute("jsbarcode-value")||d.getAttribute("data-value"),h=(0,t.default)(h),h}return em.default=o,em}var am={},nm={},Tn={},WA;function kI(){if(WA)return Tn;WA=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.getTotalWidthOfEncodings=Tn.calculateEncodingAttributes=Tn.getBarcodePadding=Tn.getEncodingHeight=Tn.getMaximumHeightOfEncodings=void 0;var e=Mx(),t=a(e);function a(u){return u&&u.__esModule?u:{default:u}}function n(u,f){return f.height+(f.displayValue&&u.text.length>0?f.fontSize+f.textMargin:0)+f.marginTop+f.marginBottom}function i(u,f,x){if(x.displayValue&&f<u){if(x.textAlign=="center")return Math.floor((u-f)/2);if(x.textAlign=="left")return 0;if(x.textAlign=="right")return Math.floor(u-f)}return 0}function o(u,f,x){for(var b=0;b<u.length;b++){var v=u[b],N=(0,t.default)(f,v.options),j;N.displayValue?j=m(v.text,N,x):j=0;var _=v.data.length*N.width;v.width=Math.ceil(Math.max(j,_)),v.height=n(v,N),v.barcodePadding=i(j,_,N)}}function d(u){for(var f=0,x=0;x<u.length;x++)f+=u[x].width;return f}function h(u){for(var f=0,x=0;x<u.length;x++)u[x].height>f&&(f=u[x].height);return f}function m(u,f,x){var b;if(x)b=x;else if(typeof document<"u")b=document.createElement("canvas").getContext("2d");else return 0;b.font=f.fontOptions+" "+f.fontSize+"px "+f.font;var v=b.measureText(u);if(!v)return 0;var N=v.width;return N}return Tn.getMaximumHeightOfEncodings=h,Tn.getEncodingHeight=n,Tn.getBarcodePadding=i,Tn.calculateEncodingAttributes=o,Tn.getTotalWidthOfEncodings=d,Tn}var JA;function Dne(){if(JA)return nm;JA=1,Object.defineProperty(nm,"__esModule",{value:!0});var e=(function(){function h(m,u){for(var f=0;f<u.length;f++){var x=u[f];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}return function(m,u,f){return u&&h(m.prototype,u),f&&h(m,f),m}})(),t=Mx(),a=i(t),n=kI();function i(h){return h&&h.__esModule?h:{default:h}}function o(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}var d=(function(){function h(m,u,f){o(this,h),this.canvas=m,this.encodings=u,this.options=f}return e(h,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var u=0;u<this.encodings.length;u++){var f=(0,a.default)(this.options,this.encodings[u].options);this.drawCanvasBarcode(f,this.encodings[u]),this.drawCanvasText(f,this.encodings[u]),this.moveCanvasDrawing(this.encodings[u])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var u=this.canvas.getContext("2d");u.save(),(0,n.calculateEncodingAttributes)(this.encodings,this.options,u);var f=(0,n.getTotalWidthOfEncodings)(this.encodings),x=(0,n.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=f+this.options.marginLeft+this.options.marginRight,this.canvas.height=x,u.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(u.fillStyle=this.options.background,u.fillRect(0,0,this.canvas.width,this.canvas.height)),u.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(u,f){var x=this.canvas.getContext("2d"),b=f.data,v;u.textPosition=="top"?v=u.marginTop+u.fontSize+u.textMargin:v=u.marginTop,x.fillStyle=u.lineColor;for(var N=0;N<b.length;N++){var j=N*u.width+f.barcodePadding;b[N]==="1"?x.fillRect(j,v,u.width,u.height):b[N]&&x.fillRect(j,v,u.width,u.height*b[N])}}},{key:"drawCanvasText",value:function(u,f){var x=this.canvas.getContext("2d"),b=u.fontOptions+" "+u.fontSize+"px "+u.font;if(u.displayValue){var v,N;u.textPosition=="top"?N=u.marginTop+u.fontSize-u.textMargin:N=u.height+u.textMargin+u.marginTop+u.fontSize,x.font=b,u.textAlign=="left"||f.barcodePadding>0?(v=0,x.textAlign="left"):u.textAlign=="right"?(v=f.width-1,x.textAlign="right"):(v=f.width/2,x.textAlign="center"),x.fillText(f.text,v,N)}}},{key:"moveCanvasDrawing",value:function(u){var f=this.canvas.getContext("2d");f.translate(u.width,0)}},{key:"restoreCanvas",value:function(){var u=this.canvas.getContext("2d");u.restore()}}]),h})();return nm.default=d,nm}var sm={},ZA;function Lne(){if(ZA)return sm;ZA=1,Object.defineProperty(sm,"__esModule",{value:!0});var e=(function(){function m(u,f){for(var x=0;x<f.length;x++){var b=f[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}return function(u,f,x){return f&&m(u.prototype,f),x&&m(u,x),u}})(),t=Mx(),a=i(t),n=kI();function i(m){return m&&m.__esModule?m:{default:m}}function o(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}var d="http://www.w3.org/2000/svg",h=(function(){function m(u,f,x){o(this,m),this.svg=u,this.encodings=f,this.options=x,this.document=x.xmlDocument||document}return e(m,[{key:"render",value:function(){var f=this.options.marginLeft;this.prepareSVG();for(var x=0;x<this.encodings.length;x++){var b=this.encodings[x],v=(0,a.default)(this.options,b.options),N=this.createGroup(f,v.marginTop,this.svg);this.setGroupOptions(N,v),this.drawSvgBarcode(N,v,b),this.drawSVGText(N,v,b),f+=b.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,n.calculateEncodingAttributes)(this.encodings,this.options);var f=(0,n.getTotalWidthOfEncodings)(this.encodings),x=(0,n.getMaximumHeightOfEncodings)(this.encodings),b=f+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(b,x),this.options.background&&this.drawRect(0,0,b,x,this.svg).setAttribute("fill",this.options.background)}},{key:"drawSvgBarcode",value:function(f,x,b){var v=b.data,N;x.textPosition=="top"?N=x.fontSize+x.textMargin:N=0;for(var j=0,_=0,k=0;k<v.length;k++)_=k*x.width+b.barcodePadding,v[k]==="1"?j++:j>0&&(this.drawRect(_-x.width*j,N,x.width*j,x.height,f),j=0);j>0&&this.drawRect(_-x.width*(j-1),N,x.width*j,x.height,f)}},{key:"drawSVGText",value:function(f,x,b){var v=this.document.createElementNS(d,"text");if(x.displayValue){var N,j;v.setAttribute("font-family",x.font),v.setAttribute("font-size",x.fontSize),x.fontOptions.includes("bold")&&v.setAttribute("font-weight","bold"),x.fontOptions.includes("italic")&&v.setAttribute("font-style","italic"),x.textPosition=="top"?j=x.fontSize-x.textMargin:j=x.height+x.textMargin+x.fontSize,x.textAlign=="left"||b.barcodePadding>0?(N=0,v.setAttribute("text-anchor","start")):x.textAlign=="right"?(N=b.width-1,v.setAttribute("text-anchor","end")):(N=b.width/2,v.setAttribute("text-anchor","middle")),v.setAttribute("x",N),v.setAttribute("y",j),v.appendChild(this.document.createTextNode(b.text)),f.appendChild(v)}}},{key:"setSvgAttributes",value:function(f,x){var b=this.svg;b.setAttribute("width",f+"px"),b.setAttribute("height",x+"px"),b.setAttribute("x","0px"),b.setAttribute("y","0px"),b.setAttribute("viewBox","0 0 "+f+" "+x),b.setAttribute("xmlns",d),b.setAttribute("version","1.1")}},{key:"createGroup",value:function(f,x,b){var v=this.document.createElementNS(d,"g");return v.setAttribute("transform","translate("+f+", "+x+")"),b.appendChild(v),v}},{key:"setGroupOptions",value:function(f,x){f.setAttribute("fill",x.lineColor)}},{key:"drawRect",value:function(f,x,b,v,N){var j=this.document.createElementNS(d,"rect");return j.setAttribute("x",f),j.setAttribute("y",x),j.setAttribute("width",b),j.setAttribute("height",v),N.appendChild(j),j}}]),m})();return sm.default=h,sm}var lm={},QA;function Rne(){if(QA)return lm;QA=1,Object.defineProperty(lm,"__esModule",{value:!0});var e=(function(){function n(i,o){for(var d=0;d<o.length;d++){var h=o[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,o,d){return o&&n(i.prototype,o),d&&n(i,d),i}})();function t(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var a=(function(){function n(i,o,d){t(this,n),this.object=i,this.encodings=o,this.options=d}return e(n,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),n})();return lm.default=a,lm}var eO;function $ne(){if(eO)return am;eO=1,Object.defineProperty(am,"__esModule",{value:!0});var e=Dne(),t=d(e),a=Lne(),n=d(a),i=Rne(),o=d(i);function d(h){return h&&h.__esModule?h:{default:h}}return am.default={CanvasRenderer:t.default,SVGRenderer:n.default,ObjectRenderer:o.default},am}var pc={},tO;function SI(){if(tO)return pc;tO=1,Object.defineProperty(pc,"__esModule",{value:!0});function e(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function t(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:d}function a(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var n=(function(d){a(h,d);function h(m,u){e(this,h);var f=t(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return f.name="InvalidInputException",f.symbology=m,f.input=u,f.message='"'+f.input+'" is not a valid input for '+f.symbology,f}return h})(Error),i=(function(d){a(h,d);function h(){e(this,h);var m=t(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return m.name="InvalidElementException",m.message="Not supported type to render on",m}return h})(Error),o=(function(d){a(h,d);function h(){e(this,h);var m=t(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return m.name="NoElementException",m.message="No element to render on.",m}return h})(Error);return pc.InvalidInputException=n,pc.InvalidElementException=i,pc.NoElementException=o,pc}var rO;function zne(){if(rO)return Qh;rO=1,Object.defineProperty(Qh,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t=Pne(),a=d(t),n=$ne(),i=d(n),o=SI();function d(f){return f&&f.__esModule?f:{default:f}}function h(f){if(typeof f=="string")return m(f);if(Array.isArray(f)){for(var x=[],b=0;b<f.length;b++)x.push(h(f[b]));return x}else{if(typeof HTMLCanvasElement<"u"&&f instanceof HTMLImageElement)return u(f);if(f&&f.nodeName&&f.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&f instanceof SVGElement)return{element:f,options:(0,a.default)(f),renderer:i.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement)return{element:f,options:(0,a.default)(f),renderer:i.default.CanvasRenderer};if(f&&f.getContext)return{element:f,renderer:i.default.CanvasRenderer};if(f&&(typeof f>"u"?"undefined":e(f))==="object"&&!f.nodeName)return{element:f,renderer:i.default.ObjectRenderer};throw new o.InvalidElementException}}function m(f){var x=document.querySelectorAll(f);if(x.length!==0){for(var b=[],v=0;v<x.length;v++)b.push(h(x[v]));return b}}function u(f){var x=document.createElement("canvas");return{element:x,options:(0,a.default)(f),renderer:i.default.CanvasRenderer,afterRender:function(){f.setAttribute("src",x.toDataURL())}}}return Qh.default=h,Qh}var im={},aO;function Bne(){if(aO)return im;aO=1,Object.defineProperty(im,"__esModule",{value:!0});var e=(function(){function n(i,o){for(var d=0;d<o.length;d++){var h=o[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}return function(i,o,d){return o&&n(i.prototype,o),d&&n(i,d),i}})();function t(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var a=(function(){function n(i){t(this,n),this.api=i}return e(n,[{key:"handleCatch",value:function(o){if(o.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw o.message;else throw o;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(o){try{var d=o.apply(void 0,arguments);return this.api._options.valid(!0),d}catch(h){return this.handleCatch(h),this.api}}}]),n})();return im.default=a,im}var Ev,nO;function Une(){if(nO)return Ev;nO=1;var e=One(),t=k(e),a=Mx(),n=k(a),i=Mne(),o=k(i),d=Ine(),h=k(d),m=zne(),u=k(m),f=wI(),x=k(f),b=Bne(),v=k(b),N=SI(),j=_I(),_=k(j);function k(H){return H&&H.__esModule?H:{default:H}}var E=function(){},C=function(B,X,V){var le=new E;if(typeof B>"u")throw Error("No element to render on was provided.");return le._renderProperties=(0,u.default)(B),le._encodings=[],le._options=_.default,le._errorHandler=new v.default(le),typeof X<"u"&&(V=V||{},V.format||(V.format=L()),le.options(V)[V.format](X,V).render()),le};C.getModule=function(H){return t.default[H]};for(var S in t.default)t.default.hasOwnProperty(S)&&O(t.default,S);function O(H,B){E.prototype[B]=E.prototype[B.toUpperCase()]=E.prototype[B.toLowerCase()]=function(X,V){var le=this;return le._errorHandler.wrapBarcodeCall(function(){V.text=typeof V.text>"u"?void 0:""+V.text;var J=(0,n.default)(le._options,V);J=(0,x.default)(J);var Z=H[B],M=I(X,Z,J);return le._encodings.push(M),le})}}function I(H,B,X){H=""+H;var V=new B(H,X);if(!V.valid())throw new N.InvalidInputException(V.constructor.name,H);var le=V.encode();le=(0,o.default)(le);for(var J=0;J<le.length;J++)le[J].options=(0,n.default)(X,le[J].options);return le}function L(){return t.default.CODE128?"CODE128":Object.keys(t.default)[0]}E.prototype.options=function(H){return this._options=(0,n.default)(this._options,H),this},E.prototype.blank=function(H){var B=new Array(H+1).join("0");return this._encodings.push({data:B}),this},E.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var H;for(var B in this._renderProperties){H=this._renderProperties[B];var X=(0,n.default)(this._options,H.options);X.format=="auto"&&(X.format=L()),this._errorHandler.wrapBarcodeCall(function(){var V=X.value,le=t.default[X.format.toUpperCase()],J=I(V,le,X);te(H,J,X)})}}},E.prototype.render=function(){if(!this._renderProperties)throw new N.NoElementException;if(Array.isArray(this._renderProperties))for(var H=0;H<this._renderProperties.length;H++)te(this._renderProperties[H],this._encodings,this._options);else te(this._renderProperties,this._encodings,this._options);return this},E.prototype._defaults=_.default;function te(H,B,X){B=(0,o.default)(B);for(var V=0;V<B.length;V++)B[V].options=(0,n.default)(X,B[V].options),(0,h.default)(B[V].options);(0,h.default)(X);var le=H.renderer,J=new le(H.element,B,X);J.render(),H.afterRender&&H.afterRender()}return typeof window<"u"&&(window.JsBarcode=C),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(H,B){var X=[];return jQuery(this).each(function(){X.push(this)}),C(X,H,B)}),Ev=C,Ev}var qne=Une();const QN=ms(qne),Ju=(e,t,a)=>{const n=window.open("","_blank");if(!n)return;const i=(a==null?void 0:a.pageSize)||"A4",o=(a==null?void 0:a.margin)??"14mm",d=(a==null?void 0:a.direction)||"rtl",h=(a==null?void 0:a.bodyStyle)||"",m=(a==null?void 0:a.extraCss)||"",u=`<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>${e}</title>
	<style>
		@media print { @page { size: ${i}; margin: ${o}; } }
		body { font-family: Arial, Helvetica, sans-serif; color: #111; direction: ${d}; ${h} }
		table { width: 100%; border-collapse: collapse; margin-top: 10px; }
		th, td { border: 1px solid #e5e7eb; padding: 6px 8px; font-size: 12px; vertical-align: top; }
		thead th { background: #f3f4f6; }
		.small { font-size: 12px; color: #6b7280; }
		.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
		${m}
	</style>
</head>
<body>
${t}
</body>
</html>`;n.document.write(u),n.document.close(),n.focus(),setTimeout(()=>{try{n.print()}catch{}},400)},EI=(e,t=" ")=>{const a=String(e||"").trim();if(!a)return;const n=document.createElementNS("http://www.w3.org/2000/svg","svg");QN(n,a,{format:"CODE128",displayValue:!0,fontSize:14,height:70,margin:10}),Ju(t,`<div style="text-align:center">
			<h2 style="margin:0 0 8px 0">${t}</h2>
			<div class="mono" style="margin-bottom:10px">${a}</div>
			<div style="display:flex;justify-content:center">${n.outerHTML}</div>
		</div>`)},sO=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Fne=(e,t)=>{const a=String(e||"").trim();if(!a)return"";const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return QN(n,a,{format:"CODE128",displayValue:!0,fontSize:t.fontSize,height:t.height,margin:t.margin}),n.outerHTML},TI=(e,t)=>{const a=(e||[]).map(x=>({code:String(x.code||"").trim(),title:String(x.title||"").trim()})).filter(x=>!!x.code);if(a.length===0)return;const n=t.mode==="a4",i=t.mode==="thermal",o=n?{height:36,fontSize:9,margin:0}:{height:44,fontSize:9,margin:0},d=a.map(x=>{const b=x.title?`<div class="lbl-title">${sO(x.title)}</div>`:"",v=`<div class="lbl-code mono">${sO(x.code)}</div>`,N=Fne(x.code,o);return`<div class="lbl">${b}${v}<div class="lbl-bar">${N}</div></div>`}).join("");let h="",m,u,f="";if(n)m="A4",u="14mm",h=`
			.container { text-align: center; }
			.grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6mm; }
			.lbl { border: 1px dashed #e5e7eb; padding: 3mm; min-height: 32mm; display:flex; flex-direction:column; justify-content:center; align-items:center; }
			.lbl-title { font-size: 11px; margin-bottom: 2mm; }
			.lbl-code { font-size: 10px; margin-bottom: 2mm; }
			.lbl-bar svg { max-width: 100%; height: auto; }
		`;else if(i)if(u="0",f="padding:0;",t.thermalType==="sticker"){const x=Number(t.stickerWidthMm||80),b=Number(t.stickerHeightMm||40);m=`${x}mm ${b}mm`,h=`
				* { box-sizing: border-box; }
				.container { width: ${x}mm; }
				.grid { display:block; }
				.lbl { width: ${x}mm; height: ${b}mm; padding: 2mm; overflow:hidden; display:flex; flex-direction:column; justify-content:center; align-items:center; page-break-after: always; }
				.lbl-title { font-size: 10px; margin-bottom: 1mm; text-align:center; }
				.lbl-code { font-size: 10px; margin-bottom: 1mm; }
				.lbl-bar svg { max-width: 100%; height: auto; }
			`}else m="80mm 500mm",h=`
				* { box-sizing: border-box; }
				.container { width: 80mm; }
				.grid { display:block; }
				.lbl { width: 80mm; padding: 2mm; display:flex; flex-direction:column; justify-content:center; align-items:center; }
				.lbl + .lbl { border-top: 1px dashed #e5e7eb; }
				.lbl-title { font-size: 10px; margin-bottom: 1mm; text-align:center; }
				.lbl-code { font-size: 10px; margin-bottom: 1mm; }
				.lbl-bar svg { max-width: 100%; height: auto; }
			`;Ju(" ",`<div class="container"><div class="grid">${d}</div></div>`,{pageSize:m,margin:u,extraCss:h,bodyStyle:f,direction:"rtl"})},lO=()=>{const[e,t]=g.useState([]),[a,n]=g.useState([]),[i,o]=g.useState(!1),[d,h]=g.useState(!1),[m,u]=g.useState(null),[f,x]=g.useState([]),[b,v]=g.useState(!1),[N,j]=g.useState({name:"",code:"",color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),[_,k]=g.useState(null),E=()=>{const J=new Date,Z=W=>String(W).padStart(2,"0"),M=`${J.getFullYear()}${Z(J.getMonth()+1)}${Z(J.getDate())}${Z(J.getHours())}${Z(J.getMinutes())}${Z(J.getSeconds())}`,P=Math.floor(100+Math.random()*900);return`FAB-${M}-${P}`};g.useEffect(()=>{fetch(`${G}/api.php?module=fabrics&action=getAll`).then(J=>J.json()).then(J=>t(J.data||[])),fetch(`${G}/api.php?module=warehouses&action=getAll`).then(J=>J.json()).then(J=>n(J&&J.data?J.data:[])).catch(()=>n([]))},[]);const C=(J=null)=>{if(J){const Z=J.one_warehouse_id===null||J.one_warehouse_id===void 0||J.one_warehouse_id===""?"":Number(J.one_warehouse_id);j({name:J.name||"",code:J.code||"",color:J.color||"",quantity:Z?Number(J.quantity||0):0,cost_price:Number(J.cost_price||0),min_stock:Number(J.min_stock||0),warehouse_id:Z}),k(J.id)}else j({name:"",code:E(),color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),k(null);o(!0)},S=()=>{o(!1),j({name:"",code:"",color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),k(null)},O=J=>{const{name:Z,value:M}=J.target;if(Z==="warehouse_id"){const P=M===""?"":Number(M);j(W=>({...W,warehouse_id:P})),_&&P&&fetch(`${G}/api.php?module=fabrics&action=getStockQty&fabric_id=${_}&warehouse_id=${P}`).then(W=>W.json()).then(W=>{const se=W&&W.success&&W.data?Number(W.data.quantity||0):0;j(ue=>({...ue,quantity:se}))}).catch(()=>{j(W=>({...W,quantity:0}))});return}if(Z==="quantity"||Z==="cost_price"||Z==="min_stock"){j(P=>({...P,[Z]:M===""?0:Number(M)}));return}j(P=>({...P,[Z]:M}))},I=J=>{if(J.preventDefault(),!N.warehouse_id){T.fire("","  .","warning");return}fetch(`${G}/api.php?module=fabrics&action=${_?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_?{...N,id:_}:N)}).then(M=>M.json()).then(()=>{S(),fetch(`${G}/api.php?module=fabrics&action=getAll`).then(M=>M.json()).then(M=>t(M.data||[]))})},L=J=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(Z=>{Z.isConfirmed&&fetch(`${G}/api.php?module=fabrics&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:J})}).then(M=>M.json()).then(()=>{fetch(`${G}/api.php?module=fabrics&action=getAll`).then(M=>M.json()).then(M=>t(M.data||[]))})})},te=J=>{u(J),h(!0),x([]),v(!0),fetch(`${G}/api.php?module=fabrics&action=getMovements&fabric_id=${J.id}`).then(Z=>Z.json()).then(Z=>{x(Z&&Z.success&&Array.isArray(Z.data)?Z.data:[])}).catch(()=>x([])).finally(()=>v(!1))},H=()=>{h(!1),u(null),x([]),v(!1)},B=()=>{if(!m)return;const J="  ",Z=`${m.name||""}${m.code?` (${m.code})`:""}`,M=`
			<div style="text-align:center">
				<h2 style="margin:0">${J}</h2>
				<div class="small">${Z}</div>
			</div>
			<table>
				<thead>
					<tr>
						<th></th>
						<th></th>
						<th> </th>
						<th> </th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					${f.map(P=>{const W=X(String(P.movement_type||"")),se=Number(P.quantity_change||0),ue=P.previous_quantity==null?"-":String(P.previous_quantity),D=P.new_quantity==null?"-":String(P.new_quantity),U=P.warehouse_name||P.warehouse_id||"-",re=V(P.reference_type,P.reference_id),he=P.created_by_name||"-",Ne=le(P.notes),Y=P.created_at||"-",me=se>0?`+${se}`:String(se);return`<tr>
							<td class="mono">${Y}</td>
							<td>${U}</td>
							<td>${W.label}</td>
							<td>${re}</td>
							<td>${he}</td>
							<td class="mono">${me}</td>
							<td class="mono">${ue}</td>
							<td class="mono">${D}</td>
							<td>${Ne}</td>
						</tr>`}).join("")}
				</tbody>
			</table>
		`;Ju(J,M)},X=J=>J==="purchase"?{label:"/",cls:"bg-emerald-100 text-emerald-700"}:J==="cutting_order"?{label:" ",cls:"bg-rose-100 text-rose-700"}:J==="manufacturing"?{label:"",cls:"bg-rose-100 text-rose-700"}:J==="initial_balance"?{label:" ",cls:"bg-blue-100 text-blue-700"}:J==="adjustment"?{label:"",cls:"bg-amber-100 text-amber-700"}:{label:" ",cls:"bg-slate-100 text-slate-700"},V=(J,Z)=>{if(!Z)return"-";const M=String(J||"").trim();let P="";return M==="cutting_order"&&(P=" "),M==="manufacturing_stage"&&(P=" "),M==="purchase"&&(P="/"),`${P}  ${Z}`},le=J=>{if(!J)return"-";if(typeof J!="string")return String(J);const Z=J.trim();if(!Z)return"-";try{const M=JSON.parse(Z);if(M&&typeof M=="object"){const P=M;if(P.cutting_order_code){const W=[` : ${P.cutting_order_code}`];return P.cut_quantity!=null&&W.push(` : ${P.cut_quantity}`),P.consumption_per_piece!=null&&W.push(`/: ${P.consumption_per_piece}`),P.total_consumption!=null&&W.push(` : ${P.total_consumption}`),P.factory_product_id!=null&&W.push(` : ${P.factory_product_id}`),W.join(" | ")}if(P.name)return P.name}return"-"}catch{return Z}};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:"   ."})}):e.map(J=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:J.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:J.code||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:(()=>{const Z=Number(J.warehouse_count||0),M=(J.warehouse_names||"").toString().trim();if(!Z)return"-";if(M)return M;const P=J.one_warehouse_id;if(Z===1&&P){const W=a.find(se=>Number(se.id)===Number(P));return W?W.name:String(P)}return""})()}),r.jsx("td",{className:"px-6 py-4 text-xs",children:J.color||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(J.quantity||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:Number(J.cost_price||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(J.min_stock||0)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>te(J),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"  ",children:r.jsx(ha,{size:14})}),r.jsx("button",{onClick:()=>C(J),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>L(J.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},J.id))})]})}),d&&m&&r.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700 h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(io,{className:"text-blue-500"}),"   "]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[m.name," (",m.code||"-",")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",title:"",children:[r.jsx(fn,{size:16})," "]}),r.jsx("button",{onClick:H,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/20 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:b?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:" ..."})}):f.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:"   ."})}):f.map(J=>{const Z=X(String(J.movement_type||"")),M=Number(J.quantity_change||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-500 dark:text-slate-400",children:J.created_at||"-"}),r.jsx("td",{className:"px-4 py-3 text-xs",children:J.warehouse_name||J.warehouse_id||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${Z.cls}`,children:Z.label})}),r.jsx("td",{className:"px-4 py-3 text-xs font-mono text-slate-500",children:V(J.reference_type,J.reference_id)}),r.jsx("td",{className:"px-4 py-3 text-xs",children:J.created_by_name||"-"}),r.jsx("td",{className:"px-4 py-3 text-center font-bold dir-ltr",children:M>0?`+${M}`:M}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:J.previous_quantity==null?"-":Number(J.previous_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:J.new_quantity==null?"-":Number(J.new_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-xs max-w-[360px] truncate",title:le(J.notes),children:le(J.notes)})]},J.id)})})]})})]})}),i&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:_?" ":"  "}),r.jsx("button",{onClick:S,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:I,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:N.name,onChange:O,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ()"}),r.jsx("input",{name:"code",value:N.code,readOnly:!0,placeholder:"FAB-...",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm font-mono focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{name:"warehouse_id",value:N.warehouse_id===""?"":String(N.warehouse_id),onChange:O,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:"",children:" "}),a.map(J=>r.jsx("option",{value:String(J.id),children:J.name},J.id))]}),a.length===0&&r.jsx("p",{className:"text-[11px] text-rose-600 mt-1",children:"  .     /."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{name:"color",value:N.color,onChange:O,placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"quantity",type:"number",min:"0",value:N.quantity,onChange:O,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{name:"min_stock",type:"number",min:"0",value:N.min_stock,onChange:O,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"cost_price",type:"number",min:"0",value:N.cost_price,onChange:O,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",_?" ":""]})]})]})})]})},Hne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState([]),[i,o]=g.useState(!1),[d,h]=g.useState(!1),[m,u]=g.useState(null),[f,x]=g.useState([]),[b,v]=g.useState(!1),[N,j]=g.useState({name:"",code:"",color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),[_,k]=g.useState(null),E=()=>{const Z=new Date,M=se=>String(se).padStart(2,"0"),P=`${Z.getFullYear()}${M(Z.getMonth()+1)}${M(Z.getDate())}${M(Z.getHours())}${M(Z.getMinutes())}${M(Z.getSeconds())}`,W=Math.floor(100+Math.random()*900);return`ACC-${P}-${W}`},C=()=>{fetch(`${G}/api.php?module=accessories&action=getAll`).then(Z=>Z.json()).then(Z=>t(Z.data||[])).catch(()=>t([]))};g.useEffect(()=>{C(),fetch(`${G}/api.php?module=warehouses&action=getAll`).then(Z=>Z.json()).then(Z=>n(Z&&Z.data?Z.data:[])).catch(()=>n([]))},[]);const S=(Z=null)=>{if(Z){const M=Z.one_warehouse_id===null||Z.one_warehouse_id===void 0||Z.one_warehouse_id===0?"":Number(Z.one_warehouse_id);j({name:Z.name||"",code:Z.code||"",color:Z.color||"",quantity:M?Number(Z.quantity||0):0,cost_price:Number(Z.cost_price||0),min_stock:Number(Z.min_stock||0),warehouse_id:M}),k(Z.id)}else j({name:"",code:E(),color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),k(null);o(!0)},O=()=>{o(!1),j({name:"",code:"",color:"",quantity:0,cost_price:0,min_stock:0,warehouse_id:""}),k(null)},I=Z=>{const{name:M,value:P}=Z.target;if(M==="warehouse_id"){const W=P===""?"":Number(P);j(se=>({...se,warehouse_id:W})),_&&W&&fetch(`${G}/api.php?module=accessories&action=getStockQty&accessory_id=${_}&warehouse_id=${W}`).then(se=>se.json()).then(se=>{const ue=se&&se.success&&se.data?Number(se.data.quantity||0):0;j(D=>({...D,quantity:ue}))}).catch(()=>{j(se=>({...se,quantity:0}))});return}if(M==="quantity"||M==="cost_price"||M==="min_stock"){j(W=>({...W,[M]:P===""?0:Number(P)}));return}j(W=>({...W,[M]:P}))},L=Z=>{if(Z.preventDefault(),!N.warehouse_id){T.fire("","  .","warning");return}fetch(`${G}/api.php?module=accessories&action=${_?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_?{...N,id:_}:N)}).then(P=>P.json()).then(()=>{O(),C()})},te=Z=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(M=>{M.isConfirmed&&fetch(`${G}/api.php?module=accessories&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Z})}).then(P=>P.json()).then(()=>C())})},H=Z=>{u(Z),h(!0),x([]),v(!0),fetch(`${G}/api.php?module=accessories&action=getMovements&accessory_id=${Z.id}`).then(M=>M.json()).then(M=>{x(M&&M.success&&Array.isArray(M.data)?M.data:[])}).catch(()=>x([])).finally(()=>v(!1))},B=()=>{h(!1),u(null),x([]),v(!1)},X=()=>{if(!m)return;const Z="  ",M=`${m.name||""}${m.code?` (${m.code})`:""}`,P=`
			<div style="text-align:center">
				<h2 style="margin:0">${Z}</h2>
				<div class="small">${M}</div>
			</div>
			<table>
				<thead>
					<tr>
						<th></th>
						<th></th>
						<th> </th>
						<th> </th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					${f.map(W=>{const se=V(String(W.movement_type||"")),ue=Number(W.quantity_change||0),D=W.previous_quantity==null?"-":String(W.previous_quantity),U=W.new_quantity==null?"-":String(W.new_quantity),re=W.warehouse_name||W.warehouse_id||"-",he=le(W.reference_type,W.reference_id),Ne=W.created_by_name||"-",Y=J(W.notes),me=W.created_at||"-",z=ue>0?`+${ue}`:String(ue);return`<tr>
							<td class="mono">${me}</td>
							<td>${re}</td>
							<td>${se.label}</td>
							<td>${he}</td>
							<td>${Ne}</td>
							<td class="mono">${z}</td>
							<td class="mono">${D}</td>
							<td class="mono">${U}</td>
							<td>${Y}</td>
						</tr>`}).join("")}
				</tbody>
			</table>
		`;Ju(Z,P)},V=Z=>Z==="purchase"?{label:"/",cls:"bg-emerald-100 text-emerald-700"}:Z==="initial_balance"?{label:" ",cls:"bg-blue-100 text-blue-700"}:Z==="adjustment"?{label:"",cls:"bg-amber-100 text-amber-700"}:Z==="manufacturing"?{label:"",cls:"bg-rose-100 text-rose-700"}:{label:" ",cls:"bg-slate-100 text-slate-700"},le=(Z,M)=>{if(!M)return"-";const P=String(Z||"").trim();let W="";return P==="manufacturing_stage"&&(W=" "),P==="cutting_order"&&(W=" "),P==="purchase"&&(W="/"),`${W}  ${M}`},J=Z=>{if(!Z)return"-";if(typeof Z!="string")return String(Z);const M=Z.trim();if(!M)return"-";try{const P=JSON.parse(M);if(P&&typeof P=="object"){const W=P,se=String(W.action||"");let ue="";se==="assign"&&(ue=""),se==="transfer"&&(ue=""),se==="finish"&&(ue="");const D=[];if(W.accessory_name&&D.push(`: ${W.accessory_name}`),W.accessory_code&&D.push(`: ${W.accessory_code}`),W.factory_product_id!=null&&D.push(` : ${W.factory_product_id}`),W.stage_id!=null&&D.push(` : ${W.stage_id}`),W.per_piece!=null&&D.push(` : ${W.per_piece}`),W.qty!=null&&D.push(`: ${W.qty}`),W.cutting_order_id!=null&&D.push(` : ${W.cutting_order_id}`),W.worker_id!=null&&D.push(`: ${W.worker_id}`),W.from_stage_id!=null&&D.push(` : ${W.from_stage_id}`),W.to_stage_id!=null&&D.push(` : ${W.to_stage_id}`),W.from_worker_id!=null&&D.push(` : ${W.from_worker_id}`),W.to_worker_id!=null&&D.push(` : ${W.to_worker_id}`),ue&&D.push(`: ${ue}`),D.length)return D.join(" | ");if(W.name)return W.name}return"-"}catch{return M}};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>S(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:"   ."})}):e.map(Z=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:Z.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:Z.code||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:(()=>{const M=Number(Z.warehouse_count||0),P=(Z.warehouse_names||"").toString().trim();if(!M)return"-";if(P)return P;const W=Z.one_warehouse_id;if(M===1&&W){const se=a.find(ue=>Number(ue.id)===Number(W));return se?se.name:String(W)}return""})()}),r.jsx("td",{className:"px-6 py-4 text-xs",children:Z.color||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:Number(Z.cost_price||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(Z.min_stock||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:Number(Z.quantity||0)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>H(Z),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"  ",children:r.jsx(ha,{size:14})}),r.jsx("button",{onClick:()=>S(Z),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>te(Z.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},Z.id))})]})}),d&&m&&r.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700 h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(io,{className:"text-blue-500"}),"   "]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[m.name," (",m.code||"-",")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:X,className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",title:"",children:[r.jsx(fn,{size:16})," "]}),r.jsx("button",{onClick:B,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/20 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:b?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:" ..."})}):f.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:"   ."})}):f.map(Z=>{const M=V(String(Z.movement_type||"")),P=Number(Z.quantity_change||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-500 dark:text-slate-400",children:Z.created_at||"-"}),r.jsx("td",{className:"px-4 py-3 text-xs",children:Z.warehouse_name||Z.warehouse_id||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${M.cls}`,children:M.label})}),r.jsx("td",{className:"px-4 py-3 text-xs font-mono text-slate-500",children:le(Z.reference_type,Z.reference_id)}),r.jsx("td",{className:"px-4 py-3 text-xs",children:Z.created_by_name||"-"}),r.jsx("td",{className:"px-4 py-3 text-center font-bold dir-ltr",children:P>0?`+${P}`:P}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:Z.previous_quantity==null?"-":Number(Z.previous_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:Z.new_quantity==null?"-":Number(Z.new_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-xs max-w-[360px] truncate",title:J(Z.notes),children:J(Z.notes)})]},Z.id)})})]})})]})}),i&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:_?" ":"  "}),r.jsx("button",{onClick:O,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:L,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:N.name,onChange:I,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ()"}),r.jsx("input",{name:"code",value:N.code,readOnly:!0,placeholder:"ACC-...",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm font-mono focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{name:"warehouse_id",value:N.warehouse_id===""?"":String(N.warehouse_id),onChange:I,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:"",children:" "}),a.map(Z=>r.jsx("option",{value:String(Z.id),children:Z.name},Z.id))]}),a.length===0&&r.jsx("p",{className:"text-[11px] text-rose-600 mt-1",children:"  .     ."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{name:"color",value:N.color,onChange:I,placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"quantity",type:"number",min:"0",value:N.quantity,onChange:I,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{name:"min_stock",type:"number",min:"0",value:N.min_stock,onChange:I,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"cost_price",type:"number",min:"0",value:N.cost_price,onChange:I,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",_?" ":""]})]})]})})]})},Yne=()=>{var ut;const[e,t]=g.useState([]),[a,n]=g.useState([]),[i,o]=g.useState([]),[d,h]=g.useState(0),[m,u]=g.useState([]),[f,x]=g.useState([]),[b,v]=g.useState([]),[N,j]=g.useState([]),[_,k]=g.useState([]),[E,C]=g.useState(!1),[S,O]=g.useState({name:"",code:"",type:"individual",description:"",sale_price:0,min_stock:0,quantity:0,warehouse_id:""}),[I,L]=g.useState([]),[te,H]=g.useState([]),[B,X]=g.useState({}),[V,le]=g.useState([{product_id:"",quantity:1}]),[J,Z]=g.useState(null),[M,P]=g.useState(!1),[W,se]=g.useState(null),[ue,D]=g.useState([]),[U,re]=g.useState(!1),[he,Ne]=g.useState(!1),[Y,me]=g.useState(null),[z,F]=g.useState(0),[ye,Ae]=g.useState(0),[be,Me]=g.useState(null),[Oe,ve]=g.useState(!1),[$,ce]=g.useState(0),[ie,oe]=g.useState(0),[$e,Xe]=g.useState(0),[et,nt]=g.useState(1),[je,lt]=g.useState(null),[pt,ae]=g.useState(!1),tt=()=>{const ee=new Date,ke=Ge=>String(Ge).padStart(2,"0"),Ce=`${ee.getFullYear()}${ke(ee.getMonth()+1)}${ke(ee.getDate())}${ke(ee.getHours())}${ke(ee.getMinutes())}${ke(ee.getSeconds())}`,He=Math.floor(100+Math.random()*900);return`PRD-${Ce}-${He}`},ne=async()=>{try{const ke=await(await fetch(`${G}/api.php?module=factory_products&action=getAll`)).json(),Ce=ke&&ke.success!==!1&&Array.isArray(ke.data)?ke.data:[];return t(Ce),Ce}catch{return t([]),[]}},Ee=async(ee,ke)=>{var at;const Ce=Number(ee||0);if(!Ce){n(ke??e);return}const He=ke??e,Ge=new Map;He.forEach(Mt=>Ge.set(Number(Mt.id),Mt));const ot=((at=i.find(Mt=>Number(Mt.id)===Ce))==null?void 0:at.name)||String(Ce);try{const qt=await(await fetch(`${G}/api.php?module=factory_products&action=getByWarehouse&warehouse_id=${encodeURIComponent(String(Ce))}`)).json(),sr=(qt&&qt.success&&Array.isArray(qt.data)?qt.data:[]).map(jr=>{const xr=Number(jr.product_id||jr.id||0),Ft=Ge.get(xr),cr=Number(jr.quantity||0);return{...Ft||{id:xr,name:String(jr.name||""),code:jr.code||null,type:"individual"},quantity:cr,warehouse_count:1,one_warehouse_id:Ce,warehouse_names:ot}});n(sr)}catch{n([])}},rt=()=>{fetch(`${G}/api.php?module=factory_products&action=getMeta`).then(ee=>ee.json()).then(ee=>{const ke=ee&&ee.success?ee.data||{}:{};u(ke.sizes||[]),x(ke.colors||[]),v(ke.stages||[]),j(ke.accessories||[]),o(ke.warehouses||[]),k(ke.individual_products||[])}).catch(()=>{u([]),x([]),v([]),j([]),o([]),k([])})};g.useEffect(()=>{ne().then(ee=>{n(ee)}),rt()},[]),g.useEffect(()=>{Ee(d).catch(()=>null)},[d]);const Je=()=>{var He,Ge;const ee=Number(d||0)||Number(((He=i==null?void 0:i[0])==null?void 0:He.id)||0),ke=(e||[]).filter(ot=>ot.type==="composite"),Ce=Number(((Ge=ke==null?void 0:ke[0])==null?void 0:Ge.id)||0);ce(ee),oe(Ce),Xe(0),nt(1),lt(null),ve(!0)},st=()=>{ve(!1),ce(0),oe(0),Xe(0),nt(1),lt(null),ae(!1)},Ze=async ee=>{var Ce;if(Math.max(0,Math.floor(Number(ee.quantity||0)))<=0){T.fire({icon:"info",title:"  ",text:"       "});return}me(ee),Me(null),F(0),Ae(0),Ne(!0);try{const Ge=await(await fetch(`${G}/api.php?module=factory_products&action=getDetails&id=${encodeURIComponent(String(ee.id))}`)).json(),ot=Array.isArray((Ce=Ge==null?void 0:Ge.data)==null?void 0:Ce.size_ids)?Ge.data.size_ids.map(at=>Number(at)).filter(at=>Number(at)>0):[];Me(ot.length>0?ot:null)}catch{Me(null)}},ct=()=>{Ne(!1),me(null),F(0),Ae(0),Me(null)};g.useEffect(()=>{if(!he||!Y)return;const ee=be&&be.length>0?m.filter(ke=>be.includes(Number(ke.id))):m;!z&&ee.length>0&&F(Number(ee[0].id)),!ye&&f.length>0&&Ae(Number(f[0].id))},[he,Y,be,m,f]);const ht=()=>{if(!Y)return"";const ee=Number(Y.id||0),ke=Number(z||0),Ce=Number(ye||0);return!ee||!ke||!Ce?"":`FPV2-${ee}-${ke}-${Ce}`},Re=(ee,ke,Ce)=>{try{localStorage.setItem("Nexus_barcode_print_prefill_v1",JSON.stringify({items:[{code:ee,title:ke,qty:Ce}]}))}catch{}window.dispatchEvent(new CustomEvent("nexus:navigate",{detail:{slug:"barcode-print"}}))},xe=async(ee,ke,Ce)=>{if(!ee||!ke){lt(null);return}ae(!0);try{const He=Ce?`&size_id=${encodeURIComponent(String(Ce))}`:"",ot=await(await fetch(`${G}/api.php?module=factory_products&action=getAssemblyInfo&composite_id=${encodeURIComponent(String(ee))}&warehouse_id=${encodeURIComponent(String(ke))}${He}`)).json();if(!(ot!=null&&ot.success))throw new Error((ot==null?void 0:ot.message)||"   ");lt(ot.data)}catch(He){lt(null),T.fire({icon:"error",title:"",text:(He==null?void 0:He.message)||"     "})}finally{ae(!1)}};g.useEffect(()=>{Oe&&xe(ie,$,$e||void 0).catch(()=>null)},[Oe,ie,$,$e]),g.useEffect(()=>{if(!Oe)return;const ee=(je==null?void 0:je.allowed_sizes)||[];if(!ee||ee.length===0)return;const ke=Number($e||0);ke&&ee.some(He=>Number(He.id)===ke)||Xe(Number(ee[0].id))},[je,Oe]);const de=async()=>{var at,Mt,qt,ta,sr,jr,xr,Ft;if(!ie||!$){T.fire({icon:"warning",title:"",text:"    "});return}if(!$e){T.fire({icon:"warning",title:"",text:"   (     )"});return}const ee=Number((je==null?void 0:je.max_quantity)??0),ke=Math.floor(Number(et||0));if(!ke||ke<=0){T.fire({icon:"warning",title:"",text:"  "});return}if(ee>0&&ke>ee){T.fire({icon:"warning",title:"",text:`    : ${ee}`});return}const Ce=String(((at=e.find(cr=>Number(cr.id)===Number(ie)))==null?void 0:at.name)||((Mt=je==null?void 0:je.composite)==null?void 0:Mt.name)||""),He=String(((qt=i.find(cr=>Number(cr.id)===Number($)))==null?void 0:qt.name)||""),Ge=String(((ta=m.find(cr=>Number(cr.id)===Number($e)))==null?void 0:ta.name)||$e);if((await T.fire({icon:"question",title:" ",html:`<div style="text-align:right; direction:rtl; font-size:13px">
				<div><b>:</b> ${Ce||ie}</div>
				<div><b>:</b> ${He||$}</div>
				<div><b>:</b> ${Ge}</div>
				<div><b>:</b> ${ke}</div>
			</div>`,showCancelButton:!0,confirmButtonText:" ",cancelButtonText:""})).isConfirmed){ae(!0);try{const br=await(await fetch(`${G}/api.php?module=factory_products&action=assembleComposite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({composite_id:ie,warehouse_id:$,size_id:$e,quantity:ke})})).json();if(!(br!=null&&br.success))throw new Error((br==null?void 0:br.message)||"  ");const Ta=String(((sr=br==null?void 0:br.data)==null?void 0:sr.code)||((jr=je==null?void 0:je.composite)==null?void 0:jr.code)||""),Sr=Number(((xr=br==null?void 0:br.data)==null?void 0:xr.unit_cost)||0),Xt=Number(((Ft=br==null?void 0:br.data)==null?void 0:Ft.total_cost)||0),zn=await ne();n(zn),await Ee(d,zn),await xe(ie,$,$e),(await T.fire({icon:"success",title:"  ",html:`<div style="text-align:right; direction:rtl; font-size:13px">
					<div><b>  :</b> ${Ta||"-"}</div>
					<div><b>  ():</b> ${Sr.toFixed(2)}</div>
					<div><b> :</b> ${Xt.toFixed(2)}</div>
				</div>`,showCancelButton:!0,confirmButtonText:" ",cancelButtonText:""})).isConfirmed&&Ta&&Re(Ta,`${Ce||Ta} - ${Ge}`,ke)}catch(cr){T.fire({icon:"error",title:"",text:(cr==null?void 0:cr.message)||"  "})}finally{ae(!1)}}},it=(ee=null)=>{ee?(Z(ee.id),fetch(`${G}/api.php?module=factory_products&action=getDetails&id=${ee.id}`).then(ke=>ke.json()).then(ke=>{var Mt,qt,ta,sr,jr;if(!ke||!ke.success)return;const Ce=((Mt=ke.data)==null?void 0:Mt.product)||{},He=ee.one_warehouse_id===null||ee.one_warehouse_id===void 0||ee.one_warehouse_id===0?"":Number(ee.one_warehouse_id);O({name:Ce.name||"",code:Ce.code||"",type:Ce.type==="composite"?"composite":"individual",description:Ce.description||"",sale_price:Number(Ce.sale_price||0),min_stock:Number(Ce.min_stock||0),warehouse_id:He,quantity:He?Number(ee.quantity||0):0}),L((((qt=ke.data)==null?void 0:qt.size_ids)||[]).map(xr=>Number(xr))),H((((ta=ke.data)==null?void 0:ta.stage_ids)||[]).map(xr=>Number(xr)));const Ge={},ot=((sr=ke.data)==null?void 0:sr.stage_accessories)||{};Object.keys(ot).forEach(xr=>{Ge[Number(xr)]=(ot[xr]||[]).map(Ft=>typeof Ft=="number"||typeof Ft=="string"?{accessory_id:Number(Ft),quantity:1}:{accessory_id:Ft&&Ft.accessory_id!==void 0?Number(Ft.accessory_id):"",quantity:Ft&&Ft.quantity!==void 0?Number(Ft.quantity):1})}),X(Ge);const at=(((jr=ke.data)==null?void 0:jr.components)||[]).map(xr=>({product_id:xr.product_id?Number(xr.product_id):"",quantity:Number(xr.quantity||1)}));le(at.length>0?at:[{product_id:"",quantity:1}])}).catch(()=>{O({name:ee.name||"",code:ee.code||"",type:ee.type,description:ee.description||"",sale_price:Number(ee.sale_price||0),min_stock:Number(ee.min_stock||0),quantity:0,warehouse_id:""})})):(Z(null),O({name:"",code:tt(),type:"individual",description:"",sale_price:0,min_stock:0,quantity:0,warehouse_id:""}),L([]),H([]),X({}),le([{product_id:"",quantity:1}])),C(!0)},ft=()=>{C(!1),O({name:"",code:"",type:"individual",description:"",sale_price:0,min_stock:0,quantity:0,warehouse_id:""}),L([]),H([]),X({}),le([{product_id:"",quantity:1}]),Z(null)},jt=(ee,ke)=>ee.includes(ke)?ee.filter(Ce=>Ce!==ke):[...ee,ke],mt=ee=>{const{name:ke,value:Ce}=ee.target;if(ke==="type"){const He=Ce==="composite"?"composite":"individual";O(Ge=>({...Ge,type:He})),He==="individual"?le([{product_id:"",quantity:1}]):(L([]),H([]),X({}));return}if(ke==="warehouse_id"){const He=Ce===""?"":Number(Ce);O(Ge=>({...Ge,warehouse_id:He})),J&&He&&fetch(`${G}/api.php?module=factory_products&action=getStockQty&factory_product_id=${J}&warehouse_id=${He}`).then(Ge=>Ge.json()).then(Ge=>{const ot=Ge&&Ge.success&&Ge.data?Number(Ge.data.quantity||0):0;O(at=>({...at,quantity:ot}))}).catch(()=>O(Ge=>({...Ge,quantity:0})));return}if(ke==="quantity"||ke==="sale_price"||ke==="min_stock"){O(He=>({...He,[ke]:Ce===""?0:Number(Ce)}));return}O(He=>({...He,[ke]:Ce}))},we=()=>{if(!S.name.trim())return T.fire("","  .","warning"),!1;if(!S.warehouse_id)return T.fire("","    .","warning"),!1;if(S.type==="individual"){if(I.length===0)return T.fire("","    .","warning"),!1;if(te.length===0)return T.fire("","   .","warning"),!1}else if(V.filter(ke=>ke.product_id!==""&&Number(ke.quantity)>0).length===0)return T.fire("","       .","warning"),!1;return!0},Be=ee=>{if(ee.preventDefault(),!we())return;const ke=J?"update":"add",Ce={name:S.name,code:S.code,type:S.type,description:S.description,sale_price:Number(S.sale_price||0),min_stock:Number(S.min_stock||0),warehouse_id:Number(S.warehouse_id),quantity:Number(S.quantity||0)};if(S.type==="individual"){Ce.size_ids=I,Ce.stage_ids=te;const He={};Object.keys(B).forEach(Ge=>{const ot=Number(Ge),at=(B[ot]||[]).filter(Mt=>Mt.accessory_id!==""&&Number(Mt.accessory_id)>0&&Number(Mt.quantity)>0).map(Mt=>({accessory_id:Number(Mt.accessory_id),quantity:Number(Mt.quantity)}));at.length>0&&(He[ot]=at)}),Ce.stage_accessories=He}else Ce.components=V.filter(He=>He.product_id!==""&&Number(He.quantity)>0).map(He=>({product_id:Number(He.product_id),quantity:Number(He.quantity)}));J&&(Ce.id=J),fetch(`${G}/api.php?module=factory_products&action=${ke}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ce)}).then(He=>He.json()).then(He=>{if(!He||He.success===!1){T.fire("",(He==null?void 0:He.message)||"   .","error");return}ft(),ne().then(Ge=>{d?Ee(d,Ge).catch(()=>null):n(Ge)}),rt()})},gt=ee=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(ke=>{ke.isConfirmed&&fetch(`${G}/api.php?module=factory_products&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ee})}).then(Ce=>Ce.json()).then(()=>{ne().then(Ce=>{d?Ee(d,Ce).catch(()=>null):n(Ce)})})})},wt=ee=>{se(ee),P(!0),D([]),re(!0),fetch(`${G}/api.php?module=factory_products&action=getMovements&factory_product_id=${ee.id}`).then(ke=>ke.json()).then(ke=>{D(ke&&ke.success&&Array.isArray(ke.data)?ke.data:[])}).catch(()=>D([])).finally(()=>re(!1))},xt=()=>{P(!1),se(null),D([]),re(!1)},St=()=>{if(!W)return;const ee="  ",ke=`${W.name||""}${W.code?` (${W.code})`:""}`,Ce=`
			<div style="text-align:center">
				<h2 style="margin:0">${ee}</h2>
				<div class="small">${ke}</div>
			</div>
			<table>
				<thead>
					<tr>
						<th></th>
						<th></th>
						<th> </th>
						<th> </th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					${ue.map(He=>{const Ge=$t(String(He.movement_type||"")),ot=Number(He.quantity_change||0),at=He.previous_quantity==null?"-":String(He.previous_quantity),Mt=He.new_quantity==null?"-":String(He.new_quantity),qt=He.warehouse_name||He.warehouse_id||"-",ta=Rr(He.reference_type,He.reference_id),sr=He.created_by_name||"-",jr=pe(He.notes),xr=He.created_at||"-",Ft=ot>0?`+${ot}`:String(ot);return`<tr>
							<td class="mono">${xr}</td>
							<td>${qt}</td>
							<td>${Ge.label}</td>
							<td>${ta}</td>
							<td>${sr}</td>
							<td class="mono">${Ft}</td>
							<td class="mono">${at}</td>
							<td class="mono">${Mt}</td>
							<td>${jr}</td>
						</tr>`}).join("")}
				</tbody>
			</table>
		`;Ju(ee,Ce)},$t=ee=>{const ke=(ee||"").trim();return ke==="purchase"?{label:"/",cls:"bg-emerald-100 text-emerald-700"}:ke==="initial_balance"?{label:" ",cls:"bg-blue-100 text-blue-700"}:ke==="adjustment"?{label:"",cls:"bg-amber-100 text-amber-700"}:ke==="manufacturing"?{label:"",cls:"bg-emerald-100 text-emerald-700"}:ke==="manufacturing_finish"?{label:" ",cls:"bg-emerald-100 text-emerald-700"}:ke==="manufacturing_consume"?{label:" ",cls:"bg-amber-100 text-amber-700"}:ke==="transfer"?{label:"",cls:"bg-indigo-100 text-indigo-700"}:ke==="return"?{label:"",cls:"bg-blue-100 text-blue-700"}:ke==="send_to_sales"?{label:" ",cls:"bg-rose-100 text-rose-700"}:ke==="receive_from_factory"?{label:"  ",cls:"bg-emerald-100 text-emerald-700"}:ke==="send_to_sales_return"?{label:"  ",cls:"bg-blue-100 text-blue-700"}:{label:ke?" ":"-",cls:"bg-slate-100 text-slate-700"}},Rr=(ee,ke)=>{const Ce=ke==null||ke===""?null:String(ke);if(!Ce)return"-";const He=String(ee||"").trim();return He?He==="cutting_order"?`   ${Ce}`:He==="manufacturing_stage"?`   ${Ce}`:He==="dispatch"?`  ${Ce}`:He==="dispatch_order"?`   ${Ce}`:He==="invoice"?`  ${Ce}`:` ${Ce}`:` ${Ce}`},kr=ee=>{if(!ee||typeof ee!="object")return"-";if(ee.notes)return String(ee.notes);if(ee.name)return String(ee.name);const ke=[],Ce=(Ge,ot)=>{if(ot==null||ot==="")return;const at=Number(ot);ke.push(Number.isFinite(at)?`${Ge}: ${at}`:`${Ge}: ${String(ot)}`)},He=(Ge,ot)=>{ot==null||ot===""||ke.push(`${Ge}: ${String(ot)}`)};return Ce(" ",ee.cutting_order_id),Ce("",ee.stage_id),Ce("",ee.qty??ee.quantity),Ce(" ",ee.unit_cost),Ce(" ",ee.fabric_unit_cost),Ce(" ",ee.accessories_unit_cost),Ce("",ee.wage_unit_cost),Ce(" ",ee.from_warehouse_id),Ce(" ",ee.to_warehouse_id),He("",ee.reason),ke.length?ke.join(" | "):""},pe=ee=>{if(!ee)return"-";if(typeof ee!="string")return kr(ee);const ke=ee.trim();if(!ke)return"-";try{const Ce=JSON.parse(ke);return kr(Ce)}catch{return ke}};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{value:d||0,onChange:ee=>h(Number(ee.target.value)||0),className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl py-2 px-3 text-xs font-bold",title:" ",children:[r.jsx("option",{value:0,children:" "}),i.map(ee=>r.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),r.jsxs("button",{onClick:()=>it(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]}),(e||[]).some(ee=>ee.type==="composite")&&r.jsxs("button",{onClick:Je,className:"flex items-center gap-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-800/60 transition-all",title:"    ",children:[r.jsx(U_,{size:16}),"  "]})]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:a.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-10 text-muted",children:"   ."})}):a.map(ee=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:ee.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:ee.code||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:ee.type==="individual"?"":""}),r.jsx("td",{className:"px-6 py-4 text-xs",children:(()=>{const ke=Number(ee.warehouse_count||0),Ce=(ee.warehouse_names||"").toString().trim();return ke?Ce||(ke===1?String(ee.one_warehouse_id||"-"):""):"-"})()}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(ee.quantity||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(ee.sale_price||0)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:Number(ee.min_stock||0)}),r.jsx("td",{className:"px-6 py-4 text-xs",children:ee.description||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>Ze(ee),className:"p-2 bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 transition-colors",title:"  (  )",children:r.jsx(Nm,{size:14})}),r.jsx("button",{onClick:()=>wt(ee),className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"  ",children:r.jsx(ha,{size:14})}),r.jsx("button",{onClick:()=>it(ee),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>gt(ee.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},ee.id))})]})}),he&&Y&&r.jsx("div",{className:"fixed inset-0 z-[128] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700 h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(Nm,{className:"text-emerald-600"}),"  "]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[Y.name,"   : ",Math.max(0,Math.floor(Number(Y.quantity||0)))]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>{var Ge,ot;const ee=Math.max(0,Math.floor(Number(Y.quantity||0))),ke=ht();if(!ke||ee<=0)return;const Ce=String(((Ge=m.find(at=>Number(at.id)===Number(z)))==null?void 0:Ge.name)||z),He=String(((ot=f.find(at=>Number(at.id)===Number(ye)))==null?void 0:ot.name)||ye);Re(ke,`${String(Y.name||"")} - ${Ce} - ${He}`,ee)},className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",title:"   ",children:[r.jsx(fn,{size:16})," "]}),r.jsx("button",{onClick:ct,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:z?String(z):"",onChange:ee=>F(Number(ee.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),(be&&be.length>0?m.filter(ee=>be.includes(Number(ee.id))):m).map(ee=>r.jsxs("option",{value:String(ee.id),children:[ee.name,ee.code?` (${ee.code})`:""]},ee.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:ye?String(ye):"",onChange:ee=>Ae(Number(ee.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),f.map(ee=>r.jsxs("option",{value:String(ee.id),children:[ee.name,ee.code?` (${ee.code})`:""]},ee.id))]})]}),r.jsxs("div",{className:"rounded-3xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold",children:"  ( )"}),r.jsx("div",{className:"mt-1 text-sm font-mono font-black dir-ltr break-all",children:ht()||""})]})]}),r.jsx("div",{className:"rounded-3xl border border-card shadow-sm card overflow-hidden",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:"#"}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:(()=>{var Mt,qt,ta;const ee=Math.max(0,Math.floor(Number(Y.quantity||0))),ke=ht(),Ce=String(((Mt=m.find(sr=>Number(sr.id)===Number(z)))==null?void 0:Mt.name)||""),He=String(((qt=f.find(sr=>Number(sr.id)===Number(ye)))==null?void 0:qt.name)||""),Ge=d?((ta=i.find(sr=>Number(sr.id)===Number(d)))==null?void 0:ta.name)||String(d):" ";if(!ke||!Ce||!He||ee<=0)return r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10 text-muted",children:"    ."})});const ot=Math.min(ee,500),at=Array.from({length:ot},(sr,jr)=>jr+1);return r.jsxs(r.Fragment,{children:[at.map(sr=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-3 font-mono text-xs text-slate-500 dark:text-slate-400",children:sr}),r.jsx("td",{className:"px-6 py-3 font-mono text-xs",children:ke}),r.jsx("td",{className:"px-6 py-3 text-xs",children:Ce}),r.jsx("td",{className:"px-6 py-3 text-xs",children:He}),r.jsx("td",{className:"px-6 py-3 text-xs",children:Ge})]},sr)),ee>500&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-4 text-xs text-muted",children:"   500 .    ()    ."})})]})})()})]})})]})]})}),M&&W&&r.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border dark:border-slate-700 h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(io,{className:"text-blue-500"}),"   "]}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[W.name," (",W.code||"-",")"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:St,className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",title:"",children:[r.jsx(fn,{size:16})," "]}),r.jsx("button",{onClick:xt,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-slate-500 dark:text-slate-400 border-b dark:border-slate-700 bg-slate-50 dark:bg-slate-900/20 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:" "}),r.jsx("th",{className:"px-4 py-2",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2 text-center",children:""}),r.jsx("th",{className:"px-4 py-2",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:U?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:" ..."})}):ue.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-8 text-slate-400",children:"   ."})}):ue.map(ee=>{const ke=$t(String(ee.movement_type||"")),Ce=Number(ee.quantity_change||0);return r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-500 dark:text-slate-400",children:ee.created_at||"-"}),r.jsx("td",{className:"px-4 py-3 text-xs",children:ee.warehouse_name||ee.warehouse_id||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${ke.cls}`,children:ke.label})}),r.jsx("td",{className:"px-4 py-3 text-xs text-slate-700 dark:text-slate-300",children:Rr(ee.reference_type,ee.reference_id)}),r.jsx("td",{className:"px-4 py-3 text-xs",children:ee.created_by_name||"-"}),r.jsx("td",{className:"px-4 py-3 text-center font-bold dir-ltr",children:Ce>0?`+${Ce}`:Ce}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:ee.previous_quantity==null?"-":Number(ee.previous_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-center font-mono text-xs",children:ee.new_quantity==null?"-":Number(ee.new_quantity||0)}),r.jsx("td",{className:"px-4 py-3 text-xs max-w-[360px] truncate",title:pe(ee.notes),children:pe(ee.notes)})]},ee.id)})})]})})]})}),E&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-5xl max-h-[85vh] rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card flex flex-col",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:J?" ":"  "}),r.jsx("button",{onClick:ft,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:Be,className:"p-8 text-right overflow-y-auto flex-1 min-h-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:S.name,onChange:mt,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ()"}),r.jsx("input",{name:"code",value:S.code,readOnly:!0,placeholder:"PRD-...",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm font-mono focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{name:"type",value:S.type,onChange:mt,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"individual",children:""}),r.jsx("option",{value:"composite",children:""})]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ( )"}),r.jsxs("select",{name:"warehouse_id",value:S.warehouse_id===""?"":String(S.warehouse_id),onChange:mt,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:"",children:" "}),i.map(ee=>r.jsx("option",{value:String(ee.id),children:ee.name},ee.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"sale_price",type:"number",min:"0",value:S.sale_price,onChange:mt,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"quantity",type:"number",min:"0",value:S.quantity,onChange:mt,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"   ()"}),r.jsx("input",{name:"min_stock",type:"number",min:"0",value:S.min_stock,onChange:mt,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),S.type==="individual"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  ( )"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:m.map(ee=>r.jsxs("label",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-900 rounded-2xl px-3 py-2 text-sm",children:[r.jsx("input",{type:"checkbox",checked:I.includes(ee.id),onChange:()=>L(ke=>jt(ke,ee.id))}),r.jsx("span",{children:ee.name})]},ee.id))})]}),r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  ( )"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(ee=>{const ke=te.includes(ee.id);return r.jsxs("div",{className:`text-right rounded-3xl border p-4 transition-colors ${ke?"bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-700/40":"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700/40"}`,children:[r.jsx("button",{type:"button",onClick:()=>{H(Ce=>{const He=jt(Ce,ee.id);return X(Ge=>{const ot={...Ge};return He.includes(ee.id)?ot[ee.id]||(ot[ee.id]=[]):delete ot[ee.id],ot}),He})},className:"w-full",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"font-black text-slate-900 dark:text-white",children:ee.name}),r.jsxs("div",{className:`text-xs font-black px-3 py-1 rounded-full ${ke?"bg-emerald-600 text-white":"bg-blue-600 text-white"}`,children:[" ",ke?" ":""," "]})]})}),ke&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx("div",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"     ()"}),r.jsxs("div",{className:"space-y-2",children:[(B[ee.id]||[]).map((Ce,He)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-2 bg-white/70 dark:bg-slate-900/40 rounded-2xl p-3",children:[r.jsx("div",{className:"md:col-span-7",children:r.jsxs("select",{value:Ce.accessory_id===""?"":String(Ce.accessory_id),onChange:Ge=>{const ot=Ge.target.value===""?"":Number(Ge.target.value);X(at=>({...at,[ee.id]:(at[ee.id]||[]).map((Mt,qt)=>qt===He?{...Mt,accessory_id:ot}:Mt)}))},className:"w-full bg-transparent border-none rounded-2xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),N.map(Ge=>r.jsx("option",{value:String(Ge.id),children:Ge.name},Ge.id))]})}),r.jsx("div",{className:"md:col-span-3",children:r.jsx("input",{type:"number",min:1,value:Ce.quantity,onChange:Ge=>{const ot=Ge.target.value===""?1:Number(Ge.target.value);X(at=>({...at,[ee.id]:(at[ee.id]||[]).map((Mt,qt)=>qt===He?{...Mt,quantity:ot}:Mt)}))},className:"w-full bg-transparent border-none rounded-2xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",placeholder:""})}),r.jsx("div",{className:"md:col-span-2 flex items-center",children:r.jsx("button",{type:"button",onClick:Ge=>{Ge.preventDefault(),X(ot=>({...ot,[ee.id]:(ot[ee.id]||[]).filter((at,Mt)=>Mt!==He)}))},className:"w-full bg-rose-50 text-rose-600 rounded-2xl px-3 py-2 text-sm font-black",children:""})})]},He)),r.jsx("button",{type:"button",onClick:Ce=>{Ce.preventDefault(),X(He=>({...He,[ee.id]:[...He[ee.id]||[],{accessory_id:"",quantity:1}]}))},className:"w-full bg-slate-100 dark:bg-slate-800 rounded-2xl py-3 text-sm font-black",children:" "})]})]})]},ee.id)})})]})]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"space-y-2 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsxs("div",{className:"space-y-2",children:[V.map((ee,ke)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsxs("select",{value:ee.product_id===""?"":String(ee.product_id),onChange:Ce=>{const He=Ce.target.value===""?"":Number(Ce.target.value);le(Ge=>Ge.map((ot,at)=>at===ke?{...ot,product_id:He}:ot))},className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),_.map(Ce=>r.jsx("option",{value:String(Ce.id),children:Ce.name},Ce.id))]}),r.jsx("input",{type:"number",min:"1",value:ee.quantity,onChange:Ce=>{const He=Ce.target.value===""?1:Number(Ce.target.value);le(Ge=>Ge.map((ot,at)=>at===ke?{...ot,quantity:He}:ot))},className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",placeholder:""}),r.jsx("button",{type:"button",onClick:()=>le(Ce=>Ce.filter((He,Ge)=>Ge!==ke)),className:"bg-rose-50 text-rose-600 rounded-2xl px-4 py-3 text-sm font-black",disabled:V.length===1,children:""})]},ke)),r.jsx("button",{type:"button",onClick:()=>le(ee=>[...ee,{product_id:"",quantity:1}]),className:"w-full bg-slate-100 dark:bg-slate-800 rounded-2xl py-3 text-sm font-black",children:" "})]})]})}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("textarea",{name:"description",value:S.description,onChange:mt,placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",J?" ":""]})]})]})}),Oe&&r.jsx("div",{className:"fixed inset-0 z-[125] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-4xl max-h-[85vh] rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card flex flex-col",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(U_,{className:"text-blue-500"}),"  "]}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"      "})]}),r.jsx("button",{onClick:st,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:$?String($):"",onChange:ee=>ce(Number(ee.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),i.map(ee=>r.jsx("option",{value:String(ee.id),children:ee.name},ee.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ()"}),r.jsxs("select",{value:$e?String($e):"",onChange:ee=>Xe(Number(ee.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",title:"     ",children:[r.jsx("option",{value:"",children:" "}),(ut=je!=null&&je.allowed_sizes&&je.allowed_sizes.length>0?je.allowed_sizes:m)==null?void 0:ut.map(ee=>r.jsx("option",{value:String(ee.id),children:String(ee.name||ee.code||ee.id)},String(ee.id)))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:ie?String(ie):"",onChange:ee=>oe(Number(ee.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:"  "}),(e||[]).filter(ee=>ee.type==="composite").map(ee=>r.jsxs("option",{value:String(ee.id),children:[ee.name," ",ee.code?`(${ee.code})`:""]},ee.id))]})]})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"rounded-3xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold",children:" "}),r.jsx("div",{className:"mt-1 text-2xl font-black dir-ltr",children:je?Number(je.current_quantity||0):""})]}),r.jsxs("div",{className:"rounded-3xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold",children:"   "}),r.jsx("div",{className:"mt-1 text-2xl font-black dir-ltr",children:je?Number(je.max_quantity||0):""})]}),r.jsxs("div",{className:"rounded-3xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold",children:"  ()"}),r.jsx("div",{className:"mt-1 text-2xl font-black dir-ltr",children:je?Number(je.unit_cost||0).toFixed(2):""})]})]}),r.jsx("div",{className:"mt-4 rounded-3xl border border-card card p-5",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"number",min:1,max:Math.max(1,Number((je==null?void 0:je.max_quantity)||1)),value:et,onChange:ee=>nt(Number(ee.target.value)||1),className:"w-full md:w-[220px] bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm font-black focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white dir-ltr"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>xe(ie,$),disabled:pt,className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white px-4 py-3 rounded-2xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-800/60 transition-all disabled:opacity-60",children:" "}),r.jsx("button",{onClick:de,disabled:pt||!je||Number(je.max_quantity||0)<=0,className:"bg-accent text-white px-5 py-3 rounded-2xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-60",title:je&&Number(je.max_quantity||0)<=0?"    ":"",children:pt?" ...":" "})]})]})}),r.jsx("div",{className:"mt-4 overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:"  "})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:pt&&!je?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-10 text-muted",children:" ..."})}):!je||(je.components||[]).length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-10 text-muted",children:"    ."})}):(je.components||[]).map(ee=>{const ke=Number(ee.per_unit||0),Ce=Number(ee.available_quantity||0),He=ke*Math.max(1,Math.floor(Number(et||1))),Ge=Ce-He,ot=Ge<0;return r.jsxs("tr",{className:ot?"bg-rose-50/50 dark:bg-rose-900/10":"",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:ee.name||ee.product_id}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:ee.code||"-"}),r.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs",children:ke}),r.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs",children:Ce}),r.jsx("td",{className:"px-6 py-4 text-center font-mono text-xs",children:He}),r.jsx("td",{className:`px-6 py-4 text-center font-mono text-xs font-black ${ot?"text-rose-600 dark:text-rose-400":""}`,children:Ge})]},ee.product_id)})})]})})]})]})})]})},iO=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(!1),[i,o]=g.useState({name:"",order_num:1,description:""}),[d,h]=g.useState(null);g.useEffect(()=>{fetch(`${G}/api.php?module=production_stages&action=getAll`).then(v=>v.json()).then(v=>t(v.data||[]))},[]);const m=(v=null)=>{v?(o(v),h(v.id)):(o({name:"",order_num:1,description:""}),h(null)),n(!0)},u=()=>{n(!1),o({name:"",order_num:1,description:""}),h(null)},f=v=>{const{name:N,value:j}=v.target;o(_=>({..._,[N]:j}))},x=v=>{v.preventDefault(),fetch(`${G}/api.php?module=production_stages&action=${d?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d?{...i,id:d}:i)}).then(j=>j.json()).then(()=>{u(),fetch(`${G}/api.php?module=production_stages&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})},b=v=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(N=>{N.isConfirmed&&fetch(`${G}/api.php?module=production_stages&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v})}).then(j=>j.json()).then(()=>{fetch(`${G}/api.php?module=production_stages&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})})};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"text-center py-10 text-muted",children:"   ."})}):e.map(v=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:v.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:v.order_num||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:v.description||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>m(v),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>b(v.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},v.id))})]})}),a&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:d?" ":"  "}),r.jsx("button",{onClick:u,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:x,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:i.name,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"order_num",type:"number",value:i.order_num,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{name:"description",value:i.description,onChange:f,placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",d?" ":""]})]})]})})]})},Kne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(!1),[i,o]=g.useState({name:"",code:""}),[d,h]=g.useState(null);g.useEffect(()=>{fetch(`${G}/api.php?module=colors&action=getAll`).then(v=>v.json()).then(v=>t(v.data||[]))},[]);const m=(v=null)=>{v?(o(v),h(v.id)):(o({name:"",code:""}),h(null)),n(!0)},u=()=>{n(!1),o({name:"",code:""}),h(null)},f=v=>{const{name:N,value:j}=v.target;o(_=>({..._,[N]:j}))},x=v=>{v.preventDefault(),fetch(`${G}/api.php?module=colors&action=${d?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d?{...i,id:d}:i)}).then(j=>j.json()).then(()=>{u(),fetch(`${G}/api.php?module=colors&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})},b=v=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(N=>{N.isConfirmed&&fetch(`${G}/api.php?module=colors&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v})}).then(j=>j.json()).then(()=>{fetch(`${G}/api.php?module=colors&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})})};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center py-10 text-muted",children:"   ."})}):e.map(v=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:v.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:v.code||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>m(v),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>b(v.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},v.id))})]})}),a&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:d?" ":"  "}),r.jsx("button",{onClick:u,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:x,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:i.name,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"code",value:i.code,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",d?" ":""]})]})]})})]})},Vne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(!1),[i,o]=g.useState({name:"",code:""}),[d,h]=g.useState(null);g.useEffect(()=>{fetch(`${G}/api.php?module=sizes&action=getAll`).then(v=>v.json()).then(v=>t(v.data||[]))},[]);const m=(v=null)=>{v?(o(v),h(v.id)):(o({name:"",code:""}),h(null)),n(!0)},u=()=>{n(!1),o({name:"",code:""}),h(null)},f=v=>{const{name:N,value:j}=v.target;o(_=>({..._,[N]:j}))},x=v=>{v.preventDefault(),fetch(`${G}/api.php?module=sizes&action=${d?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d?{...i,id:d}:i)}).then(j=>j.json()).then(()=>{u(),fetch(`${G}/api.php?module=sizes&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})},b=v=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(N=>{N.isConfirmed&&fetch(`${G}/api.php?module=sizes&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v})}).then(j=>j.json()).then(()=>{fetch(`${G}/api.php?module=sizes&action=getAll`).then(j=>j.json()).then(j=>t(j.data||[]))})})};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center py-10 text-muted",children:"   ."})}):e.map(v=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:v.name}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:v.code||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>m(v),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>b(v.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},v.id))})]})}),a&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:d?" ":"  "}),r.jsx("button",{onClick:u,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:x,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:i.name,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"code",value:i.code,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",d?" ":""]})]})]})})]})},oO=()=>{const[e,t]=g.useState([]),[a,n]=g.useState([]),[i,o]=g.useState([]),[d,h]=g.useState([]),[m,u]=g.useState(!1),[f,x]=g.useState({warehouse_id:0,fabric_id:0,factory_product_id:0,cut_quantity:1,consumption_per_piece:0}),b=g.useMemo(()=>{const M=Number.isFinite(f.cut_quantity)?Number(f.cut_quantity):0,P=Number.isFinite(f.consumption_per_piece)?Number(f.consumption_per_piece):0;return Math.round(M*Math.max(0,P)*1e4)/1e4},[f.cut_quantity,f.consumption_per_piece]),[v,N]=g.useState(!1),[j,_]=g.useState(null),[k,E]=g.useState([]),[C,S]=g.useState(!1),O=(M,P="")=>`${G}/api.php?module=cutting_stage&action=${M}${P}`,I=async(M=0)=>{var P,W,se;try{const ue=M>0?`&warehouse_id=${M}`:"",U=await(await fetch(O("getMeta",ue))).json();o(((P=U==null?void 0:U.data)==null?void 0:P.warehouses)||[]),t(((W=U==null?void 0:U.data)==null?void 0:W.fabrics)||[]),n((((se=U==null?void 0:U.data)==null?void 0:se.products)||[]).filter(re=>(re.type||"individual")==="individual"))}catch(ue){console.error(ue)}},L=async()=>{u(!0);try{const P=await(await fetch(O("getAll"))).json();h((P==null?void 0:P.data)||[])}catch(M){console.error(M),T.fire({icon:"error",title:"",text:"   "})}finally{u(!1)}};g.useEffect(()=>{I(),L()},[]),g.useEffect(()=>{f.warehouse_id>0&&(I(f.warehouse_id),x(M=>({...M,fabric_id:0})))},[f.warehouse_id]);const te=async M=>{var P;if(M.preventDefault(),!f.warehouse_id||!f.fabric_id||!f.factory_product_id||!f.cut_quantity){T.fire({icon:"warning",title:" ",text:"    "});return}try{const se=await(await fetch(O("add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({warehouse_id:f.warehouse_id,fabric_id:f.fabric_id,factory_product_id:f.factory_product_id,cut_quantity:f.cut_quantity,consumption_per_piece:f.consumption_per_piece})})).json();if(!(se!=null&&se.success))throw new Error((se==null?void 0:se.message)||"Failed");V(),T.fire({icon:"success",title:"",text:`   : ${((P=se==null?void 0:se.data)==null?void 0:P.code)||""}`}),x({warehouse_id:0,fabric_id:0,factory_product_id:0,cut_quantity:1,consumption_per_piece:0}),await L()}catch(W){T.fire({icon:"error",title:"",text:(W==null?void 0:W.message)||"   "})}},[H,B]=g.useState(!1),X=()=>B(!0),V=()=>B(!1),le=async M=>{var P;_(M),N(!0),E([]),S(!0);try{const se=await(await fetch(O("getProduction",`&id=${M.id}`))).json();E(((P=se==null?void 0:se.data)==null?void 0:P.rows)||[])}catch(W){console.error(W),T.fire({icon:"error",title:"",text:"    "})}finally{S(!1)}},J=()=>{N(!1),_(null),E([]),S(!1)},Z=M=>{const P=Math.max(0,Number(M.available_qty||0)),W=Math.max(0,Number(M.in_production_qty||0)),se=Math.max(0,Number(M.ready_qty||0)),ue=P>0,D=W>0,U=se>0;switch(`${ue?1:0}${D?1:0}${U?1:0}`){case"100":return"bg-sky-50/60 dark:bg-sky-900/10";case"110":return"bg-indigo-50/60 dark:bg-indigo-900/10";case"111":return"bg-amber-50/60 dark:bg-amber-900/10";case"101":return"bg-teal-50/60 dark:bg-teal-900/10";case"011":return"bg-rose-50/60 dark:bg-rose-900/10";case"010":return"bg-violet-50/60 dark:bg-violet-900/10";case"001":return"bg-emerald-50/60 dark:bg-emerald-900/10";default:return""}};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:X,className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"   "]})]}),H&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"  "}),r.jsx("button",{onClick:V,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:te,className:"p-6 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:f.warehouse_id,onChange:M=>x(P=>({...P,warehouse_id:Number(M.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),i.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:f.fabric_id,onChange:M=>x(P=>({...P,fabric_id:Number(M.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,disabled:!f.warehouse_id,children:[r.jsx("option",{value:0,children:f.warehouse_id?" ":"  "}),e.map(M=>r.jsxs("option",{value:M.id,children:[M.name,M.code?` (${M.code})`:""]},M.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:f.factory_product_id,onChange:M=>x(P=>({...P,factory_product_id:Number(M.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),a.map(M=>r.jsxs("option",{value:M.id,children:[M.name,M.code?` (${M.code})`:""]},M.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"number",min:1,value:f.cut_quantity,onChange:M=>x(P=>({...P,cut_quantity:Math.max(1,Number(M.target.value||1))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"number",min:0,step:"0.0001",value:f.consumption_per_piece,onChange:M=>x(P=>({...P,consumption_per_piece:Math.max(0,Number(M.target.value||0))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:b,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18}),"   "]})]})]})}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:"/"}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:m?r.jsx("tr",{children:r.jsx("td",{colSpan:10,className:"text-center py-10 text-muted",children:" ..."})}):d.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:10,className:"text-center py-10 text-muted",children:"   ."})}):d.map(M=>r.jsxs("tr",{className:Z(M)+" hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:M.code}),r.jsx("td",{className:"px-6 py-4 text-xs",children:M.fabric_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:M.product_name||"-"}),r.jsx("td",{className:"px-6 py-4 font-bold",children:M.cut_quantity}),r.jsx("td",{className:"px-6 py-4",children:Number(M.consumption_per_piece||0).toFixed(4)}),r.jsx("td",{className:"px-6 py-4 font-bold",children:Number(M.total_consumption||0).toFixed(4)}),r.jsx("td",{className:"px-6 py-4 font-bold",children:M.available_qty}),r.jsx("td",{className:"px-6 py-4 font-bold",children:M.in_production_qty}),r.jsx("td",{className:"px-6 py-4 font-bold",children:M.ready_qty}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("button",{onClick:()=>le(M),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-3 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",title:"  ",children:[r.jsx(ha,{size:16})," "]}),r.jsxs("button",{onClick:()=>EI(M.code,"  "),className:"inline-flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 px-3 py-2 rounded-xl text-xs font-black hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",title:" ",children:[r.jsx(fn,{size:16}),"  "]})]})})]},M.id))})]})}),v&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:["  ",j!=null&&j.code?`- ${j.code}`:""]}),r.jsx("button",{onClick:J,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsx("div",{className:"p-6",children:C?r.jsx("div",{className:"text-center py-10 text-muted",children:" ..."}):k.length===0?r.jsx("div",{className:"text-center py-10 text-muted",children:"       ."}):r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:k.map((M,P)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:M.worker_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:M.stage_name||"-"}),r.jsx("td",{className:"px-6 py-4 font-bold",children:Number(M.qty||0)})]},`${M.stage_id}-${M.worker_id}-${P}`))})]})})})]})})]})},Gne="Nexus_barcode_print_prefill_v1",Xne=()=>{const e=(xe,de="")=>`${G}/api.php?module=manufacturing_work&action=${xe}${de}`,[t,a]=g.useState([]),[n,i]=g.useState(!1),[o,d]=g.useState(""),[h,m]=g.useState("in_progress"),[u,f]=g.useState([]),[x,b]=g.useState(!1),[v,N]=g.useState(!1),[j,_]=g.useState(null),[k,E]=g.useState([]),[C,S]=g.useState(!1),[O,I]=g.useState([]),[L,te]=g.useState([]),[H,B]=g.useState([]),X=async()=>{i(!0);try{const xe=o.trim(),it=await(await fetch(e("getAll",xe?`&q=${encodeURIComponent(xe)}`:""))).json();a((it==null?void 0:it.data)||[])}catch(xe){console.error(xe),T.fire({icon:"error",title:"",text:"   "})}finally{i(!1)}},V=async()=>{b(!0);try{const xe=o.trim(),it=await(await fetch(e("getCompleted",xe?`&q=${encodeURIComponent(xe)}`:""))).json();f((it==null?void 0:it.data)||[])}catch(xe){console.error(xe),T.fire({icon:"error",title:"",text:"   "})}finally{b(!1)}},le=async()=>{var xe,de,it;try{const jt=await(await fetch(e("getMeta"))).json();I(((xe=jt==null?void 0:jt.data)==null?void 0:xe.workers)||[]),te(((de=jt==null?void 0:jt.data)==null?void 0:de.cutting_orders)||[]),B(((it=jt==null?void 0:jt.data)==null?void 0:it.warehouses)||[])}catch(ft){console.error(ft)}};g.useEffect(()=>{le(),X()},[]),g.useEffect(()=>{const xe=setTimeout(()=>{h==="completed"?V():X()},300);return()=>clearTimeout(xe)},[o,h]),g.useEffect(()=>{h==="completed"&&V()},[h]);const J=xe=>{const de=String(xe||"").trim();if(!de)return"-";const it=new Date(de);if(Number.isNaN(it.getTime()))return de;try{return it.toLocaleString("ar-EG")}catch{return de}},Z=xe=>{const de=Math.max(0,Math.floor(Number(xe||0))),it=Math.floor(de/3600),ft=Math.floor(de%3600/60),jt=de%60;return{h:it,m:ft,s:jt}},M=xe=>{const de=Number(xe||0);if(!Number.isFinite(de)||de<=0)return"-";const{h:it,m:ft,s:jt}=Z(de),mt=String(ft).padStart(2,"0"),we=String(jt).padStart(2,"0");return`${it}:${mt}:${we}`},P=async xe=>{var de;_(xe),N(!0),E([]),S(!0);try{const ft=await(await fetch(e("getCompletedPieces",`&cutting_order_id=${xe.cutting_order_id}&stage_id=${xe.stage_id}&worker_id=${xe.worker_id}`))).json();E(((de=ft==null?void 0:ft.data)==null?void 0:de.rows)||[])}catch(it){console.error(it),T.fire({icon:"error",title:"",text:"   "})}finally{S(!1)}},W=()=>{N(!1),_(null),E([]),S(!1)},se=()=>{if(!j)return;if(!k||k.length===0){T.fire({icon:"info",title:"  ",text:"    ."});return}const xe=k.map(de=>{const it=String(de.piece_uid||"").trim();if(!it)return null;const ft=[j.product_name,de.size_name||de.size_code||"",de.fabric_color||""].filter(Boolean);return{code:it,title:ft.join(" - "),qty:1}}).filter(Boolean);try{localStorage.setItem(Gne,JSON.stringify({items:xe}))}catch{}try{window.dispatchEvent(new CustomEvent("nexus:navigate",{detail:{slug:"barcode-print",subSlug:""}}))}catch{}W()},ue=({value:xe})=>{const de=g.useRef(null);return g.useEffect(()=>{if(de.current)try{QN(de.current,xe,{format:"CODE128",displayValue:!0,fontSize:10,height:44,margin:0})}catch{}},[xe]),r.jsx("svg",{ref:de})},[D,U]=g.useState(!1),[re,he]=g.useState([]),[Ne,Y]=g.useState([]),[me,z]=g.useState(null),[F,ye]=g.useState({cutting_order_id:0,quantity:1,worker_id:0,stage_id:0,size_id:0,is_paid:!1,piece_rate:0}),Ae=g.useMemo(()=>{const xe=Number((me==null?void 0:me.available_qty)||0),de=Number(F.quantity||0);return Math.max(0,xe-Math.max(0,de))},[F.quantity,me==null?void 0:me.available_qty]),be=async()=>{ye({cutting_order_id:0,quantity:1,worker_id:0,stage_id:0,size_id:0,is_paid:!1,piece_rate:0}),he([]),Y([]),z(null),U(!0)},Me=()=>U(!1),Oe=async xe=>{var de,it,ft;if(!xe){he([]),Y([]),z(null);return}try{const mt=await(await fetch(e("getAssignMeta",`&cutting_order_id=${xe}`))).json();he(((de=mt==null?void 0:mt.data)==null?void 0:de.stages)||[]),Y(((it=mt==null?void 0:mt.data)==null?void 0:it.sizes)||[]),z({available_qty:Number(((ft=mt==null?void 0:mt.data)==null?void 0:ft.available_qty)||0)}),ye(we=>{var Be,gt,wt,xt,St,$t;return{...we,stage_id:Number(((wt=(gt=(Be=mt==null?void 0:mt.data)==null?void 0:Be.stages)==null?void 0:gt[0])==null?void 0:wt.id)||0),size_id:Number((($t=(St=(xt=mt==null?void 0:mt.data)==null?void 0:xt.sizes)==null?void 0:St[0])==null?void 0:$t.id)||0)}})}catch(jt){console.error(jt),T.fire({icon:"error",title:"",text:"    "})}},ve=async xe=>{if(xe.preventDefault(),!F.cutting_order_id||!F.worker_id||!F.stage_id||!F.size_id||!F.quantity){T.fire({icon:"warning",title:" ",text:"       "});return}try{const it=await(await fetch(e("assign"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cutting_order_id:F.cutting_order_id,quantity:F.quantity,worker_id:F.worker_id,stage_id:F.stage_id,size_id:F.size_id,is_paid:F.is_paid?1:0,piece_rate:F.is_paid?F.piece_rate:0})})).json();if(!(it!=null&&it.success))throw new Error((it==null?void 0:it.message)||"Failed");T.fire({icon:"success",title:"",text:"    "}),Me(),await le(),await X()}catch(de){T.fire({icon:"error",title:"",text:(de==null?void 0:de.message)||"  "})}},[$,ce]=g.useState(!1),[ie,oe]=g.useState(null),[$e,Xe]=g.useState([]),[et,nt]=g.useState({to_worker_id:0,to_stage_id:0,quantity:1,is_paid:!1,piece_rate:0}),je=g.useMemo(()=>{const xe=Number((ie==null?void 0:ie.qty_in_production)||0),de=Number(et.quantity||0);return Math.max(0,xe-Math.max(0,de))},[et.quantity,ie==null?void 0:ie.qty_in_production]),lt=async xe=>{var de;oe(xe),nt({to_worker_id:0,to_stage_id:0,quantity:1,is_paid:!1,piece_rate:0}),Xe([]),ce(!0);try{const ft=await(await fetch(e("getTransferMeta",`&cutting_order_id=${xe.cutting_order_id}&from_stage_id=${xe.stage_id}`))).json();Xe(((de=ft==null?void 0:ft.data)==null?void 0:de.stages)||[]),nt(jt=>{var mt,we,Be;return{...jt,to_stage_id:Number(((Be=(we=(mt=ft==null?void 0:ft.data)==null?void 0:mt.stages)==null?void 0:we[0])==null?void 0:Be.id)||0)}})}catch(it){console.error(it),T.fire({icon:"error",title:"",text:"   "})}},pt=()=>{ce(!1),oe(null),Xe([])},ae=async xe=>{if(xe.preventDefault(),!!ie){if(!et.to_worker_id||!et.to_stage_id||!et.quantity){T.fire({icon:"warning",title:" ",text:"     "});return}try{const it=await(await fetch(e("transfer"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cutting_order_id:ie.cutting_order_id,from_stage_id:ie.stage_id,from_worker_id:ie.worker_id,to_stage_id:et.to_stage_id,to_worker_id:et.to_worker_id,quantity:et.quantity,is_paid:et.is_paid?1:0,piece_rate:et.is_paid?et.piece_rate:0})})).json();if(!(it!=null&&it.success))throw new Error((it==null?void 0:it.message)||"Failed");T.fire({icon:"success",title:"",text:"    "}),pt(),await X()}catch(de){T.fire({icon:"error",title:"",text:(de==null?void 0:de.message)||"  "})}}},[tt,ne]=g.useState(!1),[Ee,rt]=g.useState(null),[Je,st]=g.useState({quantity:1,warehouse_id:0}),Ze=g.useMemo(()=>{const xe=Number((Ee==null?void 0:Ee.qty_in_production)||0),de=Number(Je.quantity||0);return Math.max(0,xe-Math.max(0,de))},[Je.quantity,Ee==null?void 0:Ee.qty_in_production]),ct=xe=>{var de;rt(xe),st({quantity:1,warehouse_id:((de=H==null?void 0:H[0])==null?void 0:de.id)||0}),ne(!0)},ht=()=>{ne(!1),rt(null)},Re=async xe=>{var de;if(xe.preventDefault(),!!Ee){if(!Je.warehouse_id||!Je.quantity){T.fire({icon:"warning",title:" ",text:"   "});return}try{const ft=await(await fetch(e("finish"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cutting_order_id:Ee.cutting_order_id,from_stage_id:Ee.stage_id,from_worker_id:Ee.worker_id,quantity:Je.quantity,warehouse_id:Je.warehouse_id})})).json();if(!(ft!=null&&ft.success))throw new Error((ft==null?void 0:ft.message)||"Failed");const jt=Array.isArray((de=ft==null?void 0:ft.data)==null?void 0:de.finished_pieces)?ft.data.finished_pieces:[];if((await T.fire({icon:"success",title:"",text:"     ",confirmButtonText:"",showDenyButton:jt.length>0,denyButtonText:"  "})).isDenied&&jt.length>0){const we=jt.map(Be=>{const gt=String(Be.piece_uid||"").trim();if(!gt)return null;const wt=[Ee.product_name,Be.size_name||"",Be.color||""].filter(Boolean);return{code:gt,title:wt.join(" - ")}}).filter(Boolean);TI(we,{mode:"thermal",thermalType:"paper"})}ht(),await le(),await X()}catch(it){T.fire({icon:"error",title:"",text:(it==null?void 0:it.message)||"  "})}}};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 gap-4 dir-ltr",children:[r.jsxs("button",{onClick:be,className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"    "]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>m("in_progress"),className:(h==="in_progress"?"bg-blue-600 text-white ":"bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-200 ")+"px-4 py-2 rounded-xl text-xs font-black transition-all",children:" "}),r.jsx("button",{onClick:()=>m("completed"),className:(h==="completed"?"bg-blue-600 text-white ":"bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-200 ")+"px-4 py-2 rounded-xl text-xs font-black transition-all",children:" "})]}),r.jsx("div",{className:"flex-1 flex justify-end",children:r.jsx("input",{dir:"rtl",value:o,onChange:xe=>d(xe.target.value),placeholder:"       ",className:"w-full max-w-md bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white text-right"})})]}),h==="in_progress"?r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:"  "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:n?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-10 text-muted",children:" ..."})}):t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:9,className:"text-center py-10 text-muted",children:"     ."})}):t.map((xe,de)=>r.jsxs("tr",{className:(xe.is_last_stage?"bg-amber-50/60 dark:bg-amber-900/10 ":"")+"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:xe.code}),r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:xe.worker_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:xe.stage_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:xe.fabric_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:xe.product_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:xe.qty_received}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:xe.qty_in_production}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:xe.qty_remaining}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>EI(xe.code," "),className:"p-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",title:" ",children:r.jsx(fn,{size:14})}),r.jsx("button",{onClick:()=>lt(xe),className:"p-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 transition-colors",title:"   ",disabled:xe.qty_in_production<=0||!!xe.is_last_stage,children:r.jsx(vc,{size:14})}),r.jsx("button",{onClick:()=>ct(xe),className:"p-2 bg-emerald-50 text-emerald-700 rounded-lg hover:bg-emerald-100 transition-colors disabled:opacity-40",title:" ",disabled:!xe.is_last_stage||xe.qty_in_production<=0,children:r.jsx(yc,{size:14})})]})})]},`${xe.cutting_order_id}-${xe.stage_id}-${xe.worker_id}-${de}`))})]})}):r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:"  "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:x?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:" ..."})}):u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:"   ."})}):u.map((xe,de)=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:xe.code}),r.jsx("td",{className:"px-6 py-4 text-xs",children:xe.fabric_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:xe.product_name||"-"}),r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:xe.worker_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:J(xe.started_at)}),r.jsx("td",{className:"px-6 py-4 text-xs",children:J(xe.finished_at)}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:M(xe.total_seconds??null)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("button",{onClick:()=>P(xe),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-3 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",title:"  ",children:""})})})]},`c-${xe.cutting_order_id}-${xe.stage_id}-${xe.worker_id}-${de}`))})]})}),v&&j&&r.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:["  - ",j.code]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:se,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl text-xs font-black hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-500/20",title:"    ",children:[r.jsx(fn,{size:16})," "]}),r.jsx("button",{onClick:W,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]})]}),r.jsx("div",{className:"p-6 text-right",children:C?r.jsx("div",{className:"text-center py-10 text-muted",children:" ..."}):k.length===0?r.jsx("div",{className:"text-center py-10 text-muted",children:"  ."}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[k.slice(0,200).map((xe,de)=>{const it=String(xe.piece_uid||"").trim(),ft=[j.product_name,xe.size_name||xe.size_code||"",xe.fabric_color||""].filter(Boolean);return r.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-700 bg-white/60 dark:bg-slate-900/30 p-3",children:[r.jsx("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-300 text-center mb-2",children:it}),ft.length>0&&r.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-300 text-center mb-2",children:ft.join(" - ")}),r.jsx("div",{className:"flex justify-center",children:r.jsx(ue,{value:it})})]},`${it}-${de}`)}),k.length>200&&r.jsx("div",{className:"sm:col-span-2 lg:col-span-3 text-center text-xs text-slate-500 dark:text-slate-400",children:"   200  ."})]})})]})}),D&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"   "}),r.jsx("button",{onClick:Me,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ve,className:"p-6 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:F.cutting_order_id,onChange:xe=>{const de=Number(xe.target.value);ye(it=>({...it,cutting_order_id:de})),Oe(de)},className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:"  "}),L.map(xe=>r.jsxs("option",{value:xe.id,children:[xe.code," - ",xe.product_name," - ",xe.fabric_name]},xe.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:(me==null?void 0:me.available_qty)??"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"number",min:1,value:F.quantity,onChange:xe=>ye(de=>({...de,quantity:Math.max(1,Number(xe.target.value||1))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{disabled:!0,value:Ae,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:F.worker_id,onChange:xe=>ye(de=>({...de,worker_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),O.map(xe=>r.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:F.stage_id,onChange:xe=>ye(de=>({...de,stage_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,disabled:!F.cutting_order_id,children:[r.jsx("option",{value:0,children:F.cutting_order_id?" ":"   "}),re.map(xe=>r.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:F.size_id,onChange:xe=>ye(de=>({...de,size_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,disabled:!F.cutting_order_id,children:[r.jsx("option",{value:0,children:F.cutting_order_id?" ":"   "}),Ne.map(xe=>r.jsxs("option",{value:xe.id,children:[xe.name,xe.code?` (${xe.code})`:""]},xe.id))]})]}),r.jsxs("div",{className:"md:col-span-6 flex items-center justify-between gap-4 mt-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-600 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:F.is_paid,onChange:xe=>ye(de=>({...de,is_paid:xe.target.checked}))}),"   "]}),r.jsx("div",{className:"flex-1"})]}),F.is_paid&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"number",min:0,step:"0.01",value:F.piece_rate,onChange:xe=>ye(de=>({...de,piece_rate:Math.max(0,Number(xe.target.value||0))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:(Number(F.quantity||0)*Number(F.piece_rate||0)).toFixed(2),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," "]})]})]})}),$&&ie&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"   "}),r.jsx("button",{onClick:pt,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:ae,className:"p-6 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:ie.product_name,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:ie.qty_in_production,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"number",min:1,max:ie.qty_in_production,value:et.quantity,onChange:xe=>nt(de=>({...de,quantity:Math.max(1,Number(xe.target.value||1))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{disabled:!0,value:je,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" ( )"}),r.jsxs("select",{value:et.to_worker_id,onChange:xe=>nt(de=>({...de,to_worker_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),O.map(xe=>r.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),r.jsxs("div",{className:"space-y-1 md:col-span-3",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:et.to_stage_id,onChange:xe=>nt(de=>({...de,to_stage_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),$e.map(xe=>r.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),r.jsxs("div",{className:"md:col-span-6 flex items-center justify-between gap-4 mt-2",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-600 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:et.is_paid,onChange:xe=>nt(de=>({...de,is_paid:xe.target.checked}))}),"   "]}),r.jsx("div",{className:"flex-1"})]}),et.is_paid&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsx("input",{type:"number",min:0,step:"0.01",value:et.piece_rate,onChange:xe=>nt(de=>({...de,piece_rate:Math.max(0,Number(xe.target.value||0))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:(Number(et.quantity||0)*Number(et.piece_rate||0)).toFixed(2),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," "]})]})]})}),tt&&Ee&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:" "}),r.jsx("button",{onClick:ht,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:Re,className:"p-6 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-4",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:Ee.product_name,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{disabled:!0,value:Ee.qty_in_production,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{type:"number",min:1,max:Ee.qty_in_production,value:Je.quantity,onChange:xe=>st(de=>({...de,quantity:Math.max(1,Number(xe.target.value||1))})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{disabled:!0,value:Ze,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm text-slate-600 dark:text-slate-300"})]}),r.jsxs("div",{className:"space-y-1 md:col-span-4",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsxs("select",{value:Je.warehouse_id,onChange:xe=>st(de=>({...de,warehouse_id:Number(xe.target.value)})),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0,children:[r.jsx("option",{value:0,children:" "}),H.map(xe=>r.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," "]})]})]})})]})},Wne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(!1),[i,o]=g.useState({name:"",notes:""}),[d,h]=g.useState(null);g.useEffect(()=>{fetch("/api.php?module=assembly&action=getAll").then(v=>v.json()).then(v=>t(v.data||[]))},[]);const m=(v=null)=>{v?(o(v),h(v.id)):(o({name:"",notes:""}),h(null)),n(!0)},u=()=>{n(!1),o({name:"",notes:""}),h(null)},f=v=>{const{name:N,value:j}=v.target;o(_=>({..._,[N]:j}))},x=v=>{v.preventDefault(),fetch(`/api.php?module=assembly&action=${d?"update":"add"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d?{...i,id:d}:i)}).then(j=>j.json()).then(()=>{u(),fetch("/api.php?module=assembly&action=getAll").then(j=>j.json()).then(j=>t(j.data||[]))})},b=v=>{T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""}).then(N=>{N.isConfirmed&&fetch("/api.php?module=assembly&action=delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v})}).then(j=>j.json()).then(()=>{fetch("/api.php?module=assembly&action=getAll").then(j=>j.json()).then(j=>t(j.data||[]))})})};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:" "}),r.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"  "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:e.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"text-center py-10 text-muted",children:"    ."})}):e.map(v=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:v.name}),r.jsx("td",{className:"px-6 py-4 text-xs",children:v.notes||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>m(v),className:"p-2 bg-amber-50 text-amber-600 rounded-lg hover:bg-amber-100 transition-colors",title:"",children:r.jsx(ma,{size:14})}),r.jsx("button",{onClick:()=>b(v.id),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},v.id))})]})}),a&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:d?" ":"  "}),r.jsx("button",{onClick:u,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("form",{onSubmit:x,className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{name:"name",value:i.name,onChange:f,placeholder:" ",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",required:!0})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{name:"notes",value:i.notes,onChange:f,placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18})," ",d?" ":""]})]})]})})]})},Jne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(0),[i,o]=g.useState(0),[d,h]=g.useState(!0),[m,u]=g.useState([]),[f,x]=g.useState([]),[b,v]=g.useState([]),[N,j]=g.useState([]),[_,k]=g.useState(!1),[E,C]=g.useState(""),[S,O]=g.useState(""),[I,L]=g.useState(0),[te,H]=g.useState(0),[B,X]=g.useState(""),[V,le]=g.useState(1),[J,Z]=g.useState([]),[M,P]=g.useState(!1),[W,se]=g.useState({order:null,items:[]}),ue=$=>{const ce=($||"").trim();return ce==="pending"?{label:"",cls:"bg-amber-100 text-amber-700"}:ce==="confirmed"?{label:"",cls:"bg-emerald-100 text-emerald-700"}:ce==="mismatch"?{label:"",cls:"bg-rose-100 text-rose-700"}:{label:ce||"-",cls:"bg-slate-100 text-slate-700"}},D=async $=>{const ce=$?`&from_warehouse_id=${encodeURIComponent(String($))}`:"",oe=await(await fetch(`${G}/api.php?module=dispatch&action=getMetaV2${ce}`)).json(),$e=(oe==null?void 0:oe.data)||{};t(Array.isArray($e.warehouses)?$e.warehouses:[]),h(!!$e.can_change_from_warehouse);const Xe=Number($e.from_warehouse_id||0);Xe&&!a&&n(Xe),u(Array.isArray($e.products)?$e.products:[]),x(Array.isArray($e.colors)?$e.colors:[]),v(Array.isArray($e.sizes)?$e.sizes:[])},U=async()=>{const ce=await(await fetch(`${G}/api.php?module=dispatch&action=listOrdersV2`)).json();j((ce==null?void 0:ce.data)||[])};g.useEffect(()=>{D().catch(()=>{t([]),u([])}),U().catch(()=>j([]))},[]),g.useEffect(()=>{a&&D(a).catch(()=>u([]))},[a]);const re=g.useMemo(()=>{const $=new Map;return m.forEach(ce=>$.set(Number(ce.id),ce)),$},[m]),he=$=>J.filter(ce=>ce.factory_product_id===$).reduce((ce,ie)=>ce+(Number(ie.qty_sent)||0),0),Ne=$=>($||"").trim(),Y=($,ce,ie)=>`${$}|${ce}|${Ne(ie).toLowerCase()}`,me=()=>{const $=Number(I||0),ce=Number(te||0),ie=Ne(B),oe=Number(V||0);if(!$||!ce||!ie||oe<=0){T.fire({title:"  ",text:"       .",icon:"warning"});return}const $e=re.get($),Xe=Number(($e==null?void 0:$e.available_quantity)||0),et=he($);if(oe+et>Xe){T.fire({title:"   ",text:`: ${Xe}   : ${et}`,icon:"warning"});return}Z(nt=>{const je=Y($,ce,ie),lt=nt.findIndex(pt=>Y(pt.factory_product_id,pt.size_id,pt.color)===je);if(lt>=0){const pt=[...nt];return pt[lt]={...pt[lt],qty_sent:Number(pt[lt].qty_sent||0)+oe},pt}return[...nt,{factory_product_id:$,size_id:ce,color:ie,qty_sent:oe}]}),le(1)},z=async()=>{const $=(S||"").trim();if($){if(!a){T.fire({title:" ",text:"       .",icon:"warning"});return}try{const ie=await(await fetch(`${G}/api.php?module=dispatch&action=resolveBarcodeV2&from_warehouse_id=${encodeURIComponent(String(a))}&barcode=${encodeURIComponent($)}`)).json();if(!(ie!=null&&ie.success)){T.fire({title:"  ",text:(ie==null?void 0:ie.message)||"  .",icon:"error"});return}const oe=ie.data||{},$e=Number(oe.factory_product_id||0);let Xe=Number(oe.size_id||0),et=Ne(String(oe.color||""));const nt=!!oe.needs_variant||!Xe||!et;if(!$e){T.fire({title:" ",text:"    .",icon:"warning"});return}if(nt){const ae=b.map(Ee=>`<option value="${Ee.id}">${String(Ee.name||"")}${Ee.code?` (${String(Ee.code)})`:""}</option>`).join(""),tt=f.map(Ee=>`<option value="${String(Ee.name||"")}">${String(Ee.name||"")}${Ee.code?` (${String(Ee.code)})`:""}</option>`).join(""),ne=await T.fire({title:"  ",html:`
						<div style="text-align:right">
							<div style="font-weight:700;margin-bottom:6px">${oe.product_name?String(oe.product_name):""}</div>
							<div style="font-size:12px;color:#6b7280;margin-bottom:12px">: <span style="font-family:monospace">${String(oe.product_code||$)}</span></div>
							<label style="display:block;font-size:12px;font-weight:700;margin:6px 0"></label>
							<select id="swal-size" class="swal2-input" style="width:100%">
								<option value=""> </option>
								${ae}
							</select>
							<label style="display:block;font-size:12px;font-weight:700;margin:6px 0"></label>
							<select id="swal-color" class="swal2-input" style="width:100%">
								<option value=""> </option>
								${tt}
							</select>
						</div>
					`,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",didOpen:()=>{const Ee=T.getPopup(),rt=Ee==null?void 0:Ee.querySelector("#swal-size"),Je=Ee==null?void 0:Ee.querySelector("#swal-color");rt&&te&&(rt.value=String(te)),Je&&B&&(Je.value=String(B))},preConfirm:()=>{const Ee=T.getPopup(),rt=Ee==null?void 0:Ee.querySelector("#swal-size"),Je=Ee==null?void 0:Ee.querySelector("#swal-color"),st=Number((rt==null?void 0:rt.value)||0),Ze=Ne(String((Je==null?void 0:Je.value)||""));return!st||!Ze?(T.showValidationMessage("  "),null):{sidVal:st,colorVal:Ze}}});if(!ne.isConfirmed||!ne.value)return;Xe=Number(ne.value.sidVal||0),et=Ne(String(ne.value.colorVal||"")),Xe&&H(Xe),et&&X(et)}if(!$e||!Xe||!et){T.fire({title:" ",text:"  /  .",icon:"warning"});return}const je=re.get($e),lt=Number((je==null?void 0:je.available_quantity)||oe.available_quantity||0),pt=he($e);if(pt+1>lt){T.fire({title:"   ",text:`: ${lt}   : ${pt}`,icon:"warning"});return}Z(ae=>{const tt=Y($e,Xe,et),ne=ae.findIndex(Ee=>Y(Ee.factory_product_id,Ee.size_id,Ee.color)===tt);if(ne>=0){const Ee=[...ae];return Ee[ne]={...Ee[ne],qty_sent:Number(Ee[ne].qty_sent||0)+1},Ee}return[...ae,{factory_product_id:$e,size_id:Xe,color:et,qty_sent:1}]}),O("")}catch{T.fire({title:"",text:"  .",icon:"error"})}}},F=$=>{Z(ce=>ce.filter((ie,oe)=>oe!==$))},ye=()=>{C(""),O(""),o(0),L(0),H(0),X(""),le(1),Z([]),k(!0)},Ae=()=>k(!1),be=async()=>{var ie,oe;if(!a||!i){T.fire({title:" ",text:"      .",icon:"warning"});return}if(a===i){T.fire({title:" ",text:"     .",icon:"warning"});return}if(J.length===0){T.fire({title:"  ",text:"    .",icon:"warning"});return}const ce=await(await fetch(`${G}/api.php?module=dispatch&action=createOrderV2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from_warehouse_id:a,to_warehouse_id:i,notes:E,items:J})})).json();if(!(ce!=null&&ce.success)){T.fire({title:" ",text:(ce==null?void 0:ce.message)||"   .",icon:"error"});return}Ae(),await U(),T.fire({title:"  ",text:` : ${((ie=ce==null?void 0:ce.data)==null?void 0:ie.code)||((oe=ce==null?void 0:ce.data)==null?void 0:oe.order_id)||""}`,icon:"success"})},Me=async $=>{var oe,$e;const ie=await(await fetch(`${G}/api.php?module=dispatch&action=getOrderV2&order_id=${encodeURIComponent(String($))}`)).json();if(!(ie!=null&&ie.success)){T.fire({title:"  ",text:(ie==null?void 0:ie.message)||" .",icon:"error"});return}se({order:((oe=ie==null?void 0:ie.data)==null?void 0:oe.order)||null,items:(($e=ie==null?void 0:ie.data)==null?void 0:$e.items)||[]}),P(!0)},Oe=()=>{P(!1),se({order:null,items:[]})},ve=async $=>{if(!(await T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)return;const oe=await(await fetch(`${G}/api.php?module=dispatch&action=cancelOrderV2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:$.id})})).json();if(!(oe!=null&&oe.success)){T.fire({title:" ",text:(oe==null?void 0:oe.message)||" .",icon:"error"});return}await U(),T.fire({title:" ",icon:"success"})};return r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-black",children:"  "}),r.jsxs("button",{onClick:ye,className:"flex items-center gap-2 bg-accent text-white px-4 py-2 rounded-xl text-xs font-black hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20",children:[r.jsx(Or,{size:16}),"   "]})]}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" "}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" (/)"}),r.jsx("th",{className:"px-6 py-4 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:N.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:8,className:"text-center py-10 text-muted",children:"    ."})}):N.map($=>{const ce=ue($.status),ie=Number($.total_sent||0),oe=Number($.total_received||0);return r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:$.code||`#${$.id}`}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.from_warehouse_name||$.from_warehouse_id}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.to_warehouse_name||$.to_warehouse_id}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-bold ${ce.cls}`,children:ce.label})}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.created_by_name||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.confirmed_by_name||"-"}),r.jsxs("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:[ie," / ",oe]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx("button",{onClick:()=>Me($.id),className:"p-2 bg-slate-50 text-slate-700 rounded-lg hover:bg-slate-100 transition-colors",title:" ",children:r.jsx(ha,{size:14})}),$.status==="pending"&&r.jsx("button",{onClick:()=>ve($),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})]})})]},$.id)})})]})}),_&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-3xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:"   "}),r.jsx("button",{onClick:Ae,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 text-right",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"  "}),r.jsxs("select",{value:a||"",onChange:$=>n(Number($.target.value)||0),disabled:!d,className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),e.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:"   ()"}),r.jsxs("select",{value:i||"",onChange:$=>o(Number($.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),e.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{value:E,onChange:$=>C($.target.value),placeholder:"",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{value:S,onChange:$=>O($.target.value),onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),z().catch(()=>null))},placeholder:"   Enter",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})]}),r.jsxs("div",{className:"mt-6 rounded-3xl border border-card overflow-hidden",children:[r.jsx("div",{className:"p-4 bg-slate-50/50 dark:bg-slate-900/20 border-b dark:border-slate-700",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" (   )"}),r.jsxs("select",{value:I||"",onChange:$=>L(Number($.target.value)||0),className:"w-full bg-white dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),m.map($=>r.jsxs("option",{value:$.id,children:[$.name,$.code?` (${$.code})`:"","  : ",$.available_quantity]},$.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:te||"",onChange:$=>H(Number($.target.value)||0),className:"w-full bg-white dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),b.map($=>r.jsxs("option",{value:$.id,children:[$.name,$.code?` (${$.code})`:""]},$.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsxs("select",{value:B,onChange:$=>X($.target.value),className:"w-full bg-white dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:" "}),f.map($=>r.jsxs("option",{value:$.name,children:[$.name,$.code?` (${$.code})`:""]},$.id))]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:""}),r.jsx("input",{type:"number",value:V,min:1,onChange:$=>le(Number($.target.value)||0),className:"w-full bg-white dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]}),r.jsxs("button",{onClick:me,className:"md:col-span-4 w-full bg-blue-600 text-white py-3 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(Or,{size:16})," "]})]})}),r.jsx("div",{className:"p-4",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700",children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-2 px-2 font-bold",children:""}),r.jsx("th",{className:"py-2 px-2 font-bold",children:""}),r.jsx("th",{className:"py-2 px-2 font-bold",children:""}),r.jsx("th",{className:"py-2 px-2 font-bold",children:" "}),r.jsx("th",{className:"py-2 px-2 font-bold text-center",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:J.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"py-6 text-center text-muted",children:"    ."})}):J.map(($,ce)=>{var $e;const ie=re.get($.factory_product_id),oe=(($e=b.find(Xe=>Number(Xe.id)===Number($.size_id)))==null?void 0:$e.name)||String($.size_id);return r.jsxs("tr",{children:[r.jsx("td",{className:"py-3 px-2 text-xs font-bold text-slate-800 dark:text-white",children:ie?`${ie.name}${ie.code?` (${ie.code})`:""}`:$.factory_product_id}),r.jsx("td",{className:"py-3 px-2 text-xs",children:oe}),r.jsx("td",{className:"py-3 px-2 text-xs",children:$.color}),r.jsx("td",{className:"py-3 px-2 text-xs font-mono text-muted",children:$.qty_sent}),r.jsx("td",{className:"py-3 px-2 text-center",children:r.jsx("button",{onClick:()=>F(ce),className:"p-2 bg-rose-50 text-rose-600 rounded-lg hover:bg-rose-100 transition-colors",title:"",children:r.jsx(Gr,{size:14})})})]},`${$.factory_product_id}-${ce}`)})})]})})]}),r.jsxs("button",{onClick:()=>be().catch(()=>T.fire({title:"",text:"  .",icon:"error"})),className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18}),"  (  )"]})]})]})}),M&&W.order&&r.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"w-full max-w-4xl rounded-[2.5rem] shadow-2xl overflow-hidden border border-card card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white",children:[" : ",W.order.code||`#${W.order.id}`]}),r.jsxs("div",{className:"text-xs text-muted mt-1",children:[": ",W.order.from_warehouse_name||W.order.from_warehouse_id,"  : ",W.order.to_warehouse_name||W.order.to_warehouse_id]})]}),r.jsx("button",{onClick:Oe,className:"text-slate-400 hover:text-rose-500 transition-colors","aria-label":"",children:r.jsx(It,{size:24})})]}),r.jsxs("div",{className:"p-8 text-right",children:[r.jsx("div",{className:"mb-4",children:(()=>{const $=ue(W.order.status);return r.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${$.cls}`,children:$.label})})()}),r.jsx("div",{className:"overflow-x-auto rounded-3xl border border-card",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:W.items.map($=>{const ce=Number($.qty_sent||0),ie=$.qty_received===null||$.qty_received===void 0?null:Number($.qty_received),oe=ie===null?null:Number.isFinite(ie)?ie:null,$e=oe===null?null:ce-oe;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 text-xs font-bold text-slate-800 dark:text-white",children:[$.product_name||$.factory_product_id,$.product_code?` (${$.product_code})`:""]}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.size_name||$.size_id||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs",children:$.color||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:ce}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:oe===null?"-":oe}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:$e===null?"-":$e})]},$.id)})})]})})]})]})})]})},Zne=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(!1),[i,o]=g.useState(0),[d,h]=g.useState(null),[m,u]=g.useState([]),[f,x]=g.useState({}),[b,v]=g.useState(""),N=L=>(L||"").trim(),j=(L,te,H)=>`${L}|${te}|${N(H).toLowerCase()}`,_=L=>{const te=(L||"").trim();return te==="pending"?{label:"",cls:"bg-amber-100 text-amber-700"}:te==="confirmed"?{label:"",cls:"bg-emerald-100 text-emerald-700"}:te==="mismatch"?{label:"",cls:"bg-rose-100 text-rose-700"}:{label:te||"-",cls:"bg-slate-100 text-slate-700"}},k=async L=>{const H=!!(L!=null&&L.showCompleted)?`${G}/api.php?module=dispatch&action=listOrdersV2`:`${G}/api.php?module=dispatch&action=listOrdersV2&status=pending`,X=await(await fetch(H)).json();t((X==null?void 0:X.data)||[])},E=async L=>{var V,le;const H=await(await fetch(`${G}/api.php?module=dispatch&action=getOrderV2&order_id=${encodeURIComponent(String(L))}`)).json();if(!(H!=null&&H.success))throw new Error((H==null?void 0:H.message)||"Failed");h(((V=H==null?void 0:H.data)==null?void 0:V.order)||null);const B=((le=H==null?void 0:H.data)==null?void 0:le.items)||[];u(B);const X={};B.forEach(J=>{X[J.id]=Number(J.qty_sent||0)}),x(X),v("")};g.useEffect(()=>{k({showCompleted:a}).catch(()=>t([])),o(0)},[a]),g.useEffect(()=>{if(!i){h(null),u([]),x({}),v("");return}E(i).catch(()=>{h(null),u([]),x({}),v("")})},[i]);const C=g.useMemo(()=>{const L=m.reduce((H,B)=>H+(Number(B.qty_sent)||0),0),te=m.reduce((H,B)=>H+(Number(f[B.id])||0),0);return{sent:L,received:te}},[m,f]),S=(L,te)=>{x(H=>({...H,[L]:te}))},O=async()=>{const L=(b||"").trim();if(!(!L||!d))try{const H=await(await fetch(`${G}/api.php?module=dispatch&action=resolveBarcodeV2&from_warehouse_id=${encodeURIComponent(String(d.from_warehouse_id))}&barcode=${encodeURIComponent(L)}`)).json();if(!(H!=null&&H.success)){T.fire({title:"  ",text:(H==null?void 0:H.message)||"  .",icon:"error"});return}const B=H.data||{},X=Number(B.factory_product_id||0),V=Number(B.size_id||0),le=N(String(B.color||""));if(!X||!V||!le){T.fire({title:" ",text:"  /  .",icon:"warning"});return}const J=j(X,V,le),Z=m.find(se=>j(Number(se.factory_product_id),Number(se.size_id||0),String(se.color||""))===J);if(!Z){T.fire({title:"  ",text:"     .",icon:"warning"});return}const M=Number(Z.qty_sent||0),P=Number(f[Z.id]??0),W=Math.min(M,(Number.isFinite(P)?P:0)+1);S(Z.id,W),v("")}catch{T.fire({title:"",text:"  .",icon:"error"})}},I=async()=>{var X,V;if(!d)return;for(const le of m){const J=Number(f[le.id]??0);if(!Number.isFinite(J)||J<0){T.fire({title:"  ",text:"   .",icon:"warning"});return}if(J>Number(le.qty_sent||0)){T.fire({title:"  ",text:"        .",icon:"warning"});return}}if(!(await T.fire({title:" ",text:"       .",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)return;const te=m.map(le=>({item_id:le.id,factory_product_id:le.factory_product_id,qty_received:Number(f[le.id]??0)})),B=await(await fetch(`${G}/api.php?module=dispatch&action=confirmReceiptV2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_id:d.id,items:te})})).json();if(!(B!=null&&B.success)){T.fire({title:" ",text:(B==null?void 0:B.message)||" .",icon:"error"});return}await k({showCompleted:a}),o(0),T.fire({title:((X=B==null?void 0:B.data)==null?void 0:X.status)==="mismatch"?"   ":"  ",text:((V=B==null?void 0:B.data)==null?void 0:V.status)==="mismatch"?"     .":"  .",icon:"success"})};return r.jsxs("div",{className:"p-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h2",{className:"text-xl font-black",children:"  "})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"lg:col-span-1 rounded-3xl border border-card shadow-sm card p-5",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[r.jsx("div",{className:"text-sm font-black",children:a?"":" "}),r.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-slate-600 dark:text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:L=>n(L.target.checked)}),"  "]})]}),r.jsxs("select",{value:i||"",onChange:L=>o(Number(L.target.value)||0),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"",children:a?" ":"  "}),e.map(L=>r.jsxs("option",{value:L.id,children:[L.code||`#${L.id}`,"  ",L.from_warehouse_name||L.from_warehouse_id,"  ",L.to_warehouse_name||L.to_warehouse_id]},L.id))]}),r.jsxs("div",{className:"mt-3 text-xs text-muted",children:[" : ",e.length]})]}),r.jsx("div",{className:"lg:col-span-2 rounded-3xl border border-card shadow-sm card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:d?r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-black",children:d.code||`#${d.id}`}),r.jsxs("div",{className:"text-xs text-muted mt-1",children:[": ",d.from_warehouse_name||d.from_warehouse_id,"  : ",d.to_warehouse_name||d.to_warehouse_id]})]}),(()=>{const L=_(d.status);return r.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-bold ${L.cls}`,children:L.label})})()]}),r.jsx("div",{className:"mt-4 overflow-x-auto rounded-3xl border border-card",children:r.jsxs("table",{className:"w-full text-right text-sm",children:[r.jsx("thead",{className:"text-muted border-b dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/20",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""}),r.jsx("th",{className:"px-6 py-4 font-bold",children:" ( )"}),r.jsx("th",{className:"px-6 py-4 font-bold",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:m.map(L=>{const te=Number(L.qty_sent||0),H=Number(f[L.id]??0),B=te-H;return r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 text-xs font-bold text-slate-800 dark:text-white",children:[L.product_name||L.factory_product_id,L.product_code?` (${L.product_code})`:""]}),r.jsx("td",{className:"px-6 py-4 text-xs",children:L.size_name||L.size_code||(L.size_id?String(L.size_id):"-")}),r.jsx("td",{className:"px-6 py-4 text-xs",children:L.color||"-"}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:te}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"number",min:0,max:te,value:Number.isFinite(H)?H:0,onChange:X=>S(L.id,Number(X.target.value)||0),className:"w-28 bg-white dark:bg-slate-900 border-none rounded-2xl py-2 px-3 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})}),r.jsx("td",{className:"px-6 py-4 text-xs font-mono text-muted",children:B})]},L.id)})})]})}),r.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3 items-end",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 mr-2",children:" "}),r.jsx("input",{value:b,onChange:L=>v(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),O().catch(()=>null))},placeholder:"   Enter",className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-2xl py-3 px-4 text-sm focus:ring-2 ring-blue-500/20 text-slate-900 dark:text-white"})]})}),r.jsxs("div",{className:"mt-4 text-xs text-muted font-mono",children:[" (/): ",C.sent," / ",C.received]}),r.jsxs("button",{onClick:()=>I().catch(()=>T.fire({title:"",text:"  .",icon:"error"})),className:"mt-6 w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-xl shadow-blue-500/30 hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[r.jsx(yr,{size:18}),"  "]})]}):r.jsx("div",{className:"p-10 text-center text-muted",children:"      ."})})]})]})},cO="Nexus_barcode_print_prefill_v1",dO={fabrics:"",accessories:"",factory_products:" ",products:" ",manufacturing_work:"  ( )",cutting_stage:" "},il=(e,t,a)=>{const n=Math.floor(Number(e));return Number.isFinite(n)?Math.max(t,Math.min(a,n)):t},Qne=()=>{const[e,t]=g.useState("a4"),[a,n]=g.useState("paper"),[i,o]=g.useState(80),[d,h]=g.useState(40),[m,u]=g.useState("products"),[f,x]=g.useState(""),[b,v]=g.useState(!1),[N,j]=g.useState([]),[_,k]=g.useState({}),[E,C]=g.useState([]);g.useEffect(()=>{try{const B=localStorage.getItem(cO);if(!B)return;localStorage.removeItem(cO);const X=JSON.parse(B),V=Array.isArray(X==null?void 0:X.items)?X.items:[];if(V.length===0)return;const le=new Map;V.forEach((Z,M)=>{const P=String((Z==null?void 0:Z.code)||"").trim();if(!P)return;const W=String((Z==null?void 0:Z.title)||"").trim()||P,se=il((Z==null?void 0:Z.qty)??1,1,9999),ue=`prefill:${P}:${M}`,D=le.get(P);if(D){D.qty=il(D.qty+se,1,9999);return}le.set(P,{key:ue,sourceType:"manufacturing_work",name:W,code:P,qty:se})});const J=Array.from(le.values());J.length>0&&C(J)}catch{}},[]);const S=async B=>{v(!0);try{let X="";switch(B){case"fabrics":X=`${G}/api.php?module=fabrics&action=getAll`;break;case"accessories":X=`${G}/api.php?module=accessories&action=getAll`;break;case"factory_products":X=`${G}/api.php?module=factory_products&action=getAll`;break;case"products":X=`${G}/api.php?module=products&action=getAll`;break;case"cutting_stage":X=`${G}/api.php?module=cutting_stage&action=getAll`;break;case"manufacturing_work":X=`${G}/api.php?module=manufacturing_work&action=getAll`;break}const le=await(await fetch(X)).json();if(!(le!=null&&le.success))throw new Error((le==null?void 0:le.message)||"  ");const Z=((le==null?void 0:le.data)||[]).map(M=>{if(B==="products"){const ue=String((M==null?void 0:M.barcode)||"").trim(),D=String((M==null?void 0:M.name)||"").trim(),U=[M==null?void 0:M.color,M==null?void 0:M.size].filter(Boolean).join(" - ");return{id:String((M==null?void 0:M.id)??""),name:D,code:ue,meta:U}}if(B==="factory_products"){const ue=String((M==null?void 0:M.code)||"").trim(),D=String((M==null?void 0:M.name)||"").trim();return{id:String((M==null?void 0:M.id)??""),name:D,code:ue,meta:String((M==null?void 0:M.type)||"").trim()}}if(B==="fabrics"){const ue=String((M==null?void 0:M.code)||"").trim(),D=String((M==null?void 0:M.name)||"").trim();return{id:String((M==null?void 0:M.id)??""),name:D,code:ue,meta:String((M==null?void 0:M.color)||"").trim()}}if(B==="accessories"){const ue=String((M==null?void 0:M.code)||"").trim(),D=String((M==null?void 0:M.name)||"").trim();return{id:String((M==null?void 0:M.id)??""),name:D,code:ue,meta:String((M==null?void 0:M.color)||"").trim()}}if(B==="cutting_stage"){const ue=String((M==null?void 0:M.code)||"").trim(),D=String((M==null?void 0:M.code)||"").trim(),U=[M==null?void 0:M.product_name,M==null?void 0:M.fabric_name].filter(Boolean).join(" - ");return{id:String((M==null?void 0:M.id)??(M==null?void 0:M.code)??""),name:D,code:ue,meta:U}}const P=String((M==null?void 0:M.code)||"").trim(),W=String((M==null?void 0:M.code)||"").trim(),se=[M==null?void 0:M.product_name,M==null?void 0:M.stage_name,M==null?void 0:M.worker_name].filter(Boolean).join(" - ");return{id:`${(M==null?void 0:M.cutting_order_id)||""}_${(M==null?void 0:M.stage_id)||""}_${(M==null?void 0:M.worker_id)||""}`,name:W,code:P,meta:se}}).filter(M=>M.id&&M.name);j(Z),k({})}catch(X){console.error(X),j([]),T.fire({icon:"error",title:"",text:(X==null?void 0:X.message)||"  "})}finally{v(!1)}};g.useEffect(()=>{S(m)},[m]);const O=g.useMemo(()=>{const B=f.trim().toLowerCase();return B?N.filter(X=>(X.name||"").toLowerCase().includes(B)||(X.code||"").toLowerCase().includes(B)||(X.meta||"").toLowerCase().includes(B)):N},[N,f]),I=B=>{const X=String(B.code||"").trim();if(!X){T.fire({icon:"warning",title:"  ",text:"     / ."});return}const V=il(_[B.id]??1,1,9999),le=`${m}:${B.id}`;C(J=>{const Z=J.findIndex(M=>M.key===le);if(Z>=0){const M=[...J];return M[Z]={...M[Z],qty:il(M[Z].qty+V,1,9999)},M}return[...J,{key:le,sourceType:m,name:B.name,code:X,qty:V}]})},L=B=>C(X=>X.filter(V=>V.key!==B)),te=(B,X)=>{C(V=>V.map(le=>le.key===B?{...le,qty:il(X,1,9999)}:le))},H=()=>{if(E.length===0){T.fire({icon:"info",title:"  ",text:"     ."});return}const B=[];for(const V of E){const le=V.name;for(let J=0;J<il(V.qty,1,9999);J++)B.push({code:V.code,title:le})}let X;e==="a4"?X={mode:"a4"}:a==="sticker"?X={mode:"thermal",thermalType:"sticker",stickerWidthMm:il(i,10,120),stickerHeightMm:il(d,10,120)}:X={mode:"thermal",thermalType:"paper"};try{TI(B,X)}catch(V){console.error(V),T.fire({icon:"error",title:"",text:(V==null?void 0:V.message)||" "})}};return r.jsxs("div",{className:"p-6",dir:"rtl",children:[r.jsx("div",{className:"flex items-center justify-between gap-4 mb-6",children:r.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white",children:" "})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"card p-4 rounded-2xl border border-card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsx("h2",{className:"font-black mb-3",children:" "}),r.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),r.jsxs("select",{className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:e,onChange:B=>t(B.target.value),children:[r.jsx("option",{value:"a4",children:"A4"}),r.jsx("option",{value:"thermal",children:" 80mm"})]}),e==="thermal"&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsxs("select",{className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:a,onChange:B=>n(B.target.value),children:[r.jsx("option",{value:"paper",children:""}),r.jsx("option",{value:"sticker",children:""})]}),a==="sticker"&&r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold mb-1",children:"  (mm)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:i,onChange:B=>o(Number(B.target.value||0)),min:10,max:120})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold mb-1",children:"  (mm)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:d,onChange:B=>h(Number(B.target.value||0)),min:10,max:120})]})]})]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-card lg:col-span-2",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),r.jsxs("select",{className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:m,onChange:B=>u(B.target.value),children:[r.jsx("option",{value:"fabrics",children:""}),r.jsx("option",{value:"accessories",children:""}),r.jsx("option",{value:"factory_products",children:" "}),r.jsx("option",{value:"products",children:" "}),r.jsx("option",{value:"manufacturing_work",children:" "}),r.jsx("option",{value:"cutting_stage",children:" "})]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsx("input",{type:"text",className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",placeholder:" / ",value:f,onChange:B=>x(B.target.value)})]}),r.jsx("button",{onClick:()=>S(m),className:"px-4 py-3 rounded-xl bg-slate-900 text-white hover:bg-slate-800 transition-colors",disabled:b,children:""})]}),r.jsx("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:r.jsxs("tr",{className:"text-slate-700 dark:text-slate-200",children:[r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:dO[m]}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-center text-sm font-black",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:b?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-4 py-10 text-center text-slate-500",children:" ..."})}):O.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"px-4 py-10 text-center text-slate-500",children:"  "})}):O.slice(0,200).map(B=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/40 transition-colors",children:[r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:B.name}),B.meta?r.jsx("div",{className:"text-xs text-slate-500",children:B.meta}):null]}),r.jsx("td",{className:"px-4 py-3 font-mono text-xs text-slate-700 dark:text-slate-200",children:B.code||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",className:"w-28 p-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:_[B.id]??1,min:1,max:9999,onChange:X=>k(V=>({...V,[B.id]:il(X.target.value,1,9999)}))})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("button",{onClick:()=>I(B),className:"px-3 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:!B.code,children:""})})]},B.id))})]})}),r.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"   200    ."})]})]}),r.jsxs("div",{className:"card p-4 rounded-2xl border border-card mt-4",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[r.jsx("h2",{className:"font-black",children:" "}),r.jsx("button",{onClick:H,className:"px-5 py-3 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700 transition-colors",children:""})]}),r.jsx("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:r.jsxs("tr",{className:"text-slate-700 dark:text-slate-200",children:[r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-right text-sm font-black",children:""}),r.jsx("th",{className:"px-4 py-3 text-center text-sm font-black",children:""})]})}),r.jsx("tbody",{className:"divide-y dark:divide-slate-700",children:E.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-slate-500",children:"    ."})}):E.map(B=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/40 transition-colors",children:[r.jsx("td",{className:"px-4 py-3 text-xs",children:dO[B.sourceType]}),r.jsx("td",{className:"px-4 py-3 font-bold text-slate-900 dark:text-white",children:B.name}),r.jsx("td",{className:"px-4 py-3 font-mono text-xs",children:B.code}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",className:"w-28 p-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900",value:B.qty,min:1,max:9999,onChange:X=>te(B.key,Number(X.target.value||1))})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("button",{onClick:()=>L(B.key),className:"px-3 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 transition-colors",children:""})})]},B.key))})]})})]})]})},ese=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(""),[i,o]=g.useState("none"),[d,h]=g.useState(null),[m,u]=g.useState(""),[f,x]=g.useState(""),[b,v]=g.useState(!1);g.useEffect(()=>{N()},[]);const N=async()=>{try{v(!0);const S=await(await fetch(`${G}/api.php?module=sales_offices&action=getAll`)).json();S.success?t((S.data||[]).map(O=>({...O}))):t([])}catch(C){console.error(C),t([])}finally{v(!1)}},j=async()=>{if(!m.trim()){await T.fire({icon:"warning",title:"",text:"  "});return}try{v(!0);const C={name:m.trim(),phones:f.trim()},O=await(await fetch(`${G}/api.php?module=sales_offices&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(u(""),x(""),o("none"),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:"  ",showConfirmButton:!1,timer:1800})):await T.fire({icon:"error",title:"",text:O.message||"  "})}catch(C){console.error(C),alert(" ")}finally{v(!1)}},_=async()=>{if(!d||!d.id){await T.fire({icon:"warning",title:"",text:"  "});return}if(!m.trim()){await T.fire({icon:"warning",title:"",text:"  "});return}try{v(!0);const C={id:d.id,name:m.trim(),phones:f.trim()},O=await(await fetch(`${G}/api.php?module=sales_offices&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(h(null),o("none"),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:" ",showConfirmButton:!1,timer:1500})):await T.fire({icon:"error",title:"",text:O.message||" "})}catch(C){console.error(C),alert(" ")}finally{v(!1)}},k=async C=>{if(C)try{v(!0);const O=await(await fetch(`${G}/api.php?module=sales_offices&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:C})})).json();O.success?(d&&d.id===C&&h(null),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:" ",showConfirmButton:!1,timer:1500})):await T.fire({icon:"error",title:"",text:O.message||" "})}catch(S){console.error(S),alert(" ")}finally{v(!1)}},E=e.filter(C=>{const S=a.trim().toLowerCase();return S?(C.name||"").toString().toLowerCase().includes(S)||(C.phones||"").toString().toLowerCase().includes(S):!0});return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold",children:" "}),r.jsx("p",{className:"text-sm text-slate-500",children:"      ."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{value:a,onChange:C=>n(C.target.value),placeholder:"     ",className:"pl-10 pr-4 py-2 w-72 rounded-lg border focus:ring-2 focus:ring-blue-200"}),r.jsx(fs,{className:"w-5 h-5 absolute left-3 top-2.5 text-slate-400"})]}),r.jsxs("button",{onClick:()=>{o("add"),h(null),u(""),x("")},className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow",children:[r.jsx(Or,{className:"w-4 h-4"}),"   "]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[!b&&E.length===0&&r.jsx("div",{className:"col-span-full p-8 text-center text-slate-500 border rounded-lg",children:"    ."}),b?Array.from({length:6}).map((C,S)=>r.jsx("div",{className:"p-4 border rounded-lg animate-pulse bg-white"},S)):E.map(C=>r.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold",children:C.name}),r.jsx("div",{className:"text-sm text-slate-600 mt-2 whitespace-pre-wrap",children:C.phones||"-"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsx("div",{className:"text-xs text-slate-400",children:C.created_at?new Date(C.created_at).toLocaleString():"-"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{title:"",onClick:()=>{h(C),o("view")},className:"p-2 rounded hover:bg-slate-100",children:r.jsx(ha,{className:"w-4 h-4 text-slate-600"})}),r.jsx("button",{title:"",onClick:()=>{h(C),u(C.name||""),x(C.phones||""),o("edit")},className:"p-2 rounded hover:bg-amber-100",children:r.jsx(ma,{className:"w-4 h-4 text-amber-600"})}),r.jsx("button",{title:"",onClick:async()=>{(await T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed&&k(C.id)},className:"p-2 rounded hover:bg-rose-100",children:r.jsx(Gr,{className:"w-4 h-4 text-rose-600"})})]})]})]},C.id))]}),i!=="none"&&r.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[i==="add"&&r.jsx("h3",{className:"text-lg font-semibold",children:"   "}),i==="edit"&&r.jsx("h3",{className:"text-lg font-semibold",children:"  "}),i==="view"&&r.jsx("h3",{className:"text-lg font-semibold",children:" "}),r.jsx("button",{onClick:()=>{o("none"),h(null)},className:"p-1 rounded hover:bg-slate-100",children:r.jsx(It,{className:"w-4 h-4 text-slate-600"})})]}),r.jsx("div",{className:"mt-4",children:i==="view"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",(d==null?void 0:d.name)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",(d==null?void 0:d.phones)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",d!=null&&d.created_at?new Date(d.created_at).toLocaleString():"-"]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{value:m,onChange:C=>u(C.target.value),placeholder:" ",className:"w-full p-2 border rounded"}),r.jsx("input",{value:f,onChange:C=>x(C.target.value),placeholder:"   ",className:"w-full p-2 border rounded"})]})}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>{o("none"),h(null)},className:"px-3 py-1 bg-gray-200 rounded",children:""}),i==="add"&&r.jsx("button",{onClick:j,disabled:b,className:"px-4 py-1 bg-green-600 text-white rounded",children:""}),i==="edit"&&r.jsx("button",{onClick:_,disabled:b,className:"px-4 py-1 bg-amber-600 text-white rounded",children:""})]})]})})]})},tse=()=>r.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center p-6",dir:"rtl",children:r.jsx("div",{className:"w-full max-w-2xl rounded-3xl border border-card card overflow-hidden",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:r.jsx("div",{className:"p-8 md:p-10",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-24 h-24 md:w-28 md:h-28 rounded-3xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center shadow-sm",children:r.jsx("img",{src:ia("Dragon.png"),alt:"Dragon",className:"w-16 h-16 md:w-20 md:h-20 object-contain"})}),r.jsx("h1",{className:"mt-6 text-2xl md:text-3xl font-extrabold",children:" "}),r.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300 font-semibold",children:"      "}),r.jsxs("div",{className:"mt-6 w-full rounded-2xl bg-slate-50 dark:bg-slate-900/40 border border-slate-200 dark:border-slate-700 p-4 text-right",children:[r.jsx("div",{className:"text-sm font-bold",children:""}),r.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-300 mt-1",children:"     .       ."})]})]})})})});function Ba(e){return String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function ci(e){const t=Number(e);return Number.isFinite(t)?t:0}function Ki(e){return ci(e.sale_price??e.price??0)}function rse(e,t){const a=" ",n=`
    <div style="text-align:center; font-weight:800; font-size:${e==="thermal"?"14px":"18px"};">${a}</div>
    <div style="margin-top:6px; display:flex; justify-content:space-between; gap:8px; font-size:${e==="thermal"?"11px":"12px"};">
      <div>: ${Ba(t.dateTime)}</div>
      <div>: ${Ba(t.cashierName||"")}</div>
    </div>
    <div style="margin-top:6px; display:flex; justify-content:space-between; gap:8px; font-size:${e==="thermal"?"11px":"12px"};">
      <div>: ${Ba(t.customerName||"")}</div>
      <div></div>
    </div>
  `,i=t.lines.map(d=>{const h=Ba(d.name),m=Ba(d.qty),u=Ba(d.unitPrice.toLocaleString()),f=Ba(d.lineTotal.toLocaleString());return`<tr>
        <td style="padding:6px 4px;">${h}</td>
        <td style="padding:6px 4px; text-align:center;">${m}</td>
        <td style="padding:6px 4px; text-align:left; white-space:nowrap;">${u}</td>
        <td style="padding:6px 4px; text-align:left; white-space:nowrap; font-weight:800;">${f}</td>
      </tr>`}).join(""),o=`
    <div style="margin-top:10px; border-top:1px dashed #999; padding-top:8px; display:flex; justify-content:space-between; font-size:${e==="thermal"?"12px":"13px"};">
      <div> : <b>${Ba(t.itemsCount)}</b></div>
      <div>: <b>${Ba(t.total.toLocaleString())}</b> .</div>
    </div>
    <div style="margin-top:6px; display:flex; justify-content:space-between; gap:8px; font-size:${e==="thermal"?"12px":"13px"};">
      <div>: <b>${Ba(ci(t.paidAmount).toLocaleString())}</b> .</div>
      <div>: <b>${Ba(Math.max(0,ci(t.remainingAmount)).toLocaleString())}</b> .</div>
    </div>
  `;return e==="thermal"?`<!doctype html><html><head><meta charset="utf-8"><title>${a}</title>
      <style>
        @page{size:80mm auto; margin:4mm;}
        body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:6px; width:80mm; box-sizing:border-box; font-size:12px;}
        table{width:100%; border-collapse:collapse; margin-top:10px;}
        th,td{border-bottom:1px solid #ddd; font-size:12px;}
        th{padding:6px 4px; text-align:right; background:#f5f5f5;}
      </style>
    </head><body>
      ${n}
      <table>
        <thead><tr><th></th><th style="text-align:center"></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead>
        <tbody>${i}</tbody>
      </table>
      ${o}
    </body></html>`:`<!doctype html><html><head><meta charset="utf-8"><title>${a}</title>
    <style>
      @page{size:A4; margin:18mm;}
      body{font-family: Arial, Helvetica, "Noto Naskh Arabic", sans-serif; direction:rtl; padding:10px; color:#111;}
      table{width:100%; border-collapse:collapse; margin-top:12px;}
      th,td{border:1px solid #333; padding:8px; font-size:12px; text-align:right;}
      th{background:#f3f4f6;}
      .meta{margin-top:8px; display:flex; justify-content:space-between; gap:10px; font-size:12px;}
      .meta2{margin-top:6px; display:flex; justify-content:space-between; gap:10px; font-size:12px;}
    </style>
  </head><body>
    <h1 style="text-align:center; margin:0;">${a}</h1>
    <div class="meta"><div>: ${Ba(t.dateTime)}</div><div>: ${Ba(t.cashierName||"")}</div></div>
    <div class="meta2"><div>: ${Ba(t.customerName||"")}</div><div>: ${Ba(ci(t.paidAmount).toLocaleString())} .</div></div>
    <div class="meta2"><div>: ${Ba(Math.max(0,ci(t.remainingAmount)).toLocaleString())} .</div><div></div></div>
    <table>
      <thead><tr><th></th><th style="text-align:center"></th><th style="text-align:left"> </th><th style="text-align:left"></th></tr></thead>
      <tbody>${i}</tbody>
    </table>
    ${o}
  </body></html>`}function uO(e,t){const a=window.open("","_blank",t);a&&(a.document.write(e),a.document.close(),a.focus(),setTimeout(()=>{try{a.print()}catch{}},400))}const ase=()=>{const[e,t]=g.useState(!0),[a,n]=g.useState([]),[i,o]=g.useState(""),[d,h]=g.useState(""),[m,u]=g.useState([]),[f,x]=g.useState([]),[b,v]=g.useState("cash"),[N,j]=g.useState([]),[_,k]=g.useState(""),[E,C]=g.useState([]),[S,O]=g.useState(""),[I,L]=g.useState(null),[te,H]=g.useState(0),[B,X]=g.useState("  "),[V,le]=g.useState(()=>(localStorage.getItem("Dragon_pos_print_mode")||"thermal").toLowerCase()==="a4"?"a4":"thermal"),J=g.useRef(null);g.useEffect(()=>{(async()=>{t(!0);try{const[re,he,Ne,Y,me]=await Promise.all([fetch(`${G}/api.php?module=products&action=getAll`).then(Ae=>Ae.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=customers&action=getAll`).then(Ae=>Ae.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=treasuries&action=getAll`).then(Ae=>Ae.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=warehouses&action=getAll`).then(Ae=>Ae.json()).catch(()=>({success:!1,data:[]})),fetch(`${G}/api.php?module=permissions&action=getUserDefaults`).then(Ae=>Ae.json()).catch(()=>({success:!1}))]);n(re&&re.success?re.data||[]:[]),x(he&&he.success?he.data||[]:[]);const z=me&&me.success&&me.data||null;z&&L(z);const F=Ne&&Ne.success?Ne.data||[]:[],ye=Y&&Y.success?Y.data||[]:[];z!=null&&z.default_treasury_id&&(z==null?void 0:z.can_change_treasury)===!1?(j(F.filter(Ae=>Number(Ae.id)===Number(z.default_treasury_id))),_||k(Number(z.default_treasury_id))):(j(F),!_&&(z!=null&&z.default_treasury_id)&&k(Number(z.default_treasury_id))),z!=null&&z.default_warehouse_id&&(z==null?void 0:z.can_change_warehouse)===!1?(C(ye.filter(Ae=>Number(Ae.id)===Number(z.default_warehouse_id))),S||O(Number(z.default_warehouse_id))):(C(ye),!S&&(z!=null&&z.default_warehouse_id)&&O(Number(z.default_warehouse_id)))}catch(re){console.error(re),n([]),x([])}finally{t(!1),setTimeout(()=>{var re;return(re=J.current)==null?void 0:re.focus()},50)}})()},[]),g.useEffect(()=>{localStorage.setItem("Dragon_pos_print_mode",V)},[V]);const Z=g.useMemo(()=>{const U=(d||"").trim().toLowerCase();return U?a.filter(re=>{const he=String(re.name||"").toLowerCase(),Ne=String(re.barcode||"").toLowerCase();return he.includes(U)||Ne.includes(U)}).slice(0,50):a.slice(0,50)},[d,a]),M=g.useMemo(()=>{const U=m.reduce((he,Ne)=>he+Ne.qty,0),re=m.reduce((he,Ne)=>he+Ne.qty*Ki(Ne.product),0);return{itemsCount:U,total:re}},[m]);g.useEffect(()=>{b==="cash"&&H(Number(M.total||0))},[b,M.total]);const P=(U,re=1)=>{if(!U||!U.id)return;const he=Math.max(1,Number(re||1));u(Ne=>{const Y=[...Ne],me=Y.findIndex(z=>Number(z.product.id)===Number(U.id));return me>=0?Y[me]={...Y[me],qty:Math.max(1,Y[me].qty+he)}:Y.unshift({product:U,qty:he}),Y})},W=(U,re)=>{const he=Math.max(0,Math.floor(Number(re||0)));u(Ne=>he<=0?Ne.filter(Y=>Number(Y.product.id)!==Number(U)):Ne.map(Y=>Number(Y.product.id)===Number(U)?{...Y,qty:he}:Y))},se=U=>{const re=String(U||"").trim();if(!re)return;const he=a.find(Ne=>String(Ne.barcode||"").trim()===re);if(!he){T.fire({icon:"warning",title:" ",text:`    : ${re}`,timer:1500,showConfirmButton:!1});return}P(he,1)},ue=async()=>{var me;const re=(f||[]).find(z=>{const F=String(z.name||"").trim().toLowerCase();return F===" "||F===" "||F==="cash customer"||F==="walk-in"||F==="walk in"});if(re!=null&&re.id)return Number(re.id);const Ne=await(await fetch(`${G}/api.php?module=customers&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:" "})})).json();if(!Ne||!Ne.success)throw new Error((Ne==null?void 0:Ne.message)||"Failed to create cash customer");try{const F=await(await fetch(`${G}/api.php?module=customers&action=getAll`)).json();F&&F.success&&x(F.data||[])}catch{}const Y=(me=Ne==null?void 0:Ne.data)!=null&&me.id?Number(Ne.data.id):0;if(Y)return Y;throw new Error("Cash customer created but id missing")},D=async()=>{if(m.length===0){T.fire(""," .","warning");return}if(!S){T.fire("","  .","warning");return}if(!_){T.fire("","  .","warning");return}if(!b){T.fire("","  .","warning");return}const U=m.map(be=>({name:String(be.product.name||""),qty:Number(be.qty||0),unitPrice:Ki(be.product),lineTotal:Number(be.qty||0)*Ki(be.product)})),re=U.reduce((be,Me)=>be+Number(Me.lineTotal||0),0),he=U.reduce((be,Me)=>be+Number(Me.qty||0),0),Ne=(()=>{try{const be=JSON.parse(localStorage.getItem("Dragon_user")||"null");return be!=null&&be.name?String(be.name):""}catch{return""}})(),Y=new Date().toLocaleString(),me=Number(re||0),z=b==="cash"?me:Math.max(0,Math.min(me,Number(te||0))),F=Math.max(0,me-z),ye=(()=>{if(b==="cash")return" ";const be=Number(b),Me=f.find(Oe=>Number(Oe.id)===be);return Me!=null&&Me.name?String(Me.name):""})();if((await T.fire({icon:"question",title:" ",text:"     ",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed){try{const Me={customerId:b==="cash"?await ue():Number(b),warehouseId:Number(S),treasuryId:Number(_),paidAmount:z,reason:(B||"").trim()||"  ",items:m.map(ce=>({productId:Number(ce.product.id),qty:Number(ce.qty||0),price:Ki(ce.product)}))},ve=await(await fetch(`${G}/api.php?module=sales&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)})).json();if(!ve||!ve.success)throw new Error((ve==null?void 0:ve.message)||"  ");u([]),o(""),h(""),b!=="cash"&&H(0);const $=rse(V,{lines:U,total:re,itemsCount:he,cashierName:Ne,dateTime:Y,customerName:ye,paidAmount:z,remainingAmount:F});V==="thermal"?uO($,"toolbar=0,location=0,menubar=0,scrollbars=1,resizable=1,width=520,height=700"):uO($,"toolbar=0,location=0,menubar=0,scrollbars=1,resizable=1,width=900,height=700"),T.fire({icon:"success",title:"",text:"   .",timer:1200,showConfirmButton:!1})}catch(be){T.fire("",(be==null?void 0:be.message)||"    ","error")}setTimeout(()=>{var be;return(be=J.current)==null?void 0:be.focus()},50)}};return r.jsxs("div",{className:"p-4 rounded-2xl border border-card dir-rtl card",style:{backgroundColor:"var(--card-bg)",color:"var(--text)"},children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[r.jsx("h2",{className:"font-black text-lg",children:" "}),r.jsxs("div",{className:"text-sm text-slate-500",children:[" : ",r.jsx("span",{className:"font-black",children:M.itemsCount}),"  : ",r.jsxs("span",{className:"font-black",children:[M.total.toLocaleString()," ."]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3 mb-4",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsxs("select",{value:b==="cash"?"cash":b?String(b):"",onChange:U=>{const re=U.target.value;v(re==="cash"?"cash":re?Number(re):"")},className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"cash",children:" "}),r.jsx("option",{value:"",children:"--   --"}),f.map(U=>r.jsxs("option",{value:String(U.id),children:[U.name," ",typeof U.balance<"u"?`(: ${ci(U.balance).toLocaleString()})`:""]},U.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsxs("select",{value:S||"",onChange:U=>O(U.target.value?Number(U.target.value):""),disabled:!!(I!=null&&I.default_warehouse_id&&(I==null?void 0:I.can_change_warehouse)===!1),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"",children:"--  --"}),E.map(U=>r.jsx("option",{value:String(U.id),children:U.name},U.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsxs("select",{value:_||"",onChange:U=>k(U.target.value?Number(U.target.value):""),disabled:!!(I!=null&&I.default_treasury_id&&(I==null?void 0:I.can_change_treasury)===!1),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"",children:"--  --"}),N.map(U=>r.jsxs("option",{value:String(U.id),children:[U.name," ",typeof U.balance<"u"?`(: ${ci(U.balance).toLocaleString()})`:""]},U.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),r.jsx("input",{type:"number",min:0,value:te,disabled:b==="cash",onChange:U=>H(Number(U.target.value)),className:"w-full border rounded-xl p-2",placeholder:"0"}),b==="cash"&&r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:" :   ."})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:" /  "}),r.jsx("input",{value:B,onChange:U=>X(U.target.value),className:"w-full border rounded-xl p-2",placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),r.jsxs("select",{value:V,onChange:U=>le(U.target.value==="a4"?"a4":"thermal"),className:"w-full border rounded-xl p-2",children:[r.jsx("option",{value:"thermal",children:"80mm"}),r.jsx("option",{value:"a4",children:"A4"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("div",{className:"text-xs text-slate-500",children:[": ",r.jsx("span",{className:"font-black",children:Math.max(0,Number(M.total||0)-Number(b==="cash"?M.total:te||0)).toLocaleString()})," ."]})})]}),e?r.jsx("div",{className:"text-sm text-slate-500",children:"  ..."}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"rounded-2xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)"},children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),r.jsx("input",{ref:J,value:i,onChange:U=>o(U.target.value),onKeyDown:U=>{U.key==="Enter"&&(se(i),o(""))},className:"w-full border rounded-xl p-2",placeholder:"    Enter"}),r.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"       ."})]}),r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-sm font-bold mb-1",children:"  "}),r.jsx("input",{value:d,onChange:U=>h(U.target.value),className:"w-full border rounded-xl p-2",placeholder:"   "})]}),r.jsx("div",{className:"max-h-[55vh] overflow-y-auto space-y-2 pr-1",children:Z.length===0?r.jsx("div",{className:"text-sm text-slate-500",children:"   ."}):Z.map(U=>r.jsxs("button",{type:"button",onClick:()=>P(U,1),className:"w-full text-right p-3 rounded-xl border border-slate-200 hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsx("div",{className:"font-bold",children:U.name}),r.jsxs("div",{className:"font-black text-blue-700",children:[Ki(U).toLocaleString()," ."]})]}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex flex-wrap gap-3",children:[r.jsxs("span",{children:[": ",U.barcode||"-"]}),r.jsxs("span",{children:[": ",ci(U.stock).toLocaleString()]}),(U.color||U.size)&&r.jsx("span",{children:[U.color,U.size].filter(Boolean).join(" / ")})]})]},U.id))})]}),r.jsxs("div",{className:"rounded-2xl border border-card card p-4",style:{backgroundColor:"var(--card-bg)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"font-black",children:""}),r.jsx("button",{type:"button",onClick:()=>{u([]),setTimeout(()=>{var U;return(U=J.current)==null?void 0:U.focus()},50)},className:"px-3 py-2 rounded-xl bg-red-100 text-red-700 text-xs font-bold hover:bg-red-200",children:" "})]}),m.length===0?r.jsx("div",{className:"text-sm text-slate-500",children:"  ."}):r.jsx("div",{className:"space-y-2 max-h-[55vh] overflow-y-auto pr-1",children:m.map(U=>r.jsxs("div",{className:"p-3 rounded-xl border border-slate-200",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold",children:U.product.name}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[": ",U.product.barcode||"-"]})]}),r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"font-black",children:[(U.qty*Ki(U.product)).toLocaleString()," ."]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[Ki(U.product).toLocaleString(),"  ",U.qty]})]})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>W(U.product.id,U.qty-1),className:"px-3 py-1.5 rounded-lg bg-slate-100 font-black",children:"-"}),r.jsx("input",{type:"number",min:0,value:U.qty,onChange:re=>W(U.product.id,Number(re.target.value)),className:"w-24 border rounded-lg p-1 text-center"}),r.jsx("button",{type:"button",onClick:()=>W(U.product.id,U.qty+1),className:"px-3 py-1.5 rounded-lg bg-slate-100 font-black",children:"+"}),r.jsx("div",{className:"flex-1"}),r.jsx("button",{type:"button",onClick:()=>W(U.product.id,0),className:"px-3 py-1.5 rounded-lg bg-red-100 text-red-700 text-xs font-bold",children:""})]})]},U.product.id))}),r.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"font-black",children:[": ",M.total.toLocaleString()," ."]}),r.jsx("button",{type:"button",onClick:D,className:"px-5 py-3 rounded-2xl bg-emerald-600 text-white font-black hover:bg-emerald-700",children:" "})]})]})]})]})},nse=()=>{const[e,t]=g.useState([]),[a,n]=g.useState(""),[i,o]=g.useState("none"),[d,h]=g.useState(null),[m,u]=g.useState(""),[f,x]=g.useState(""),[b,v]=g.useState(!1);g.useEffect(()=>{N()},[]);const N=async()=>{try{v(!0);const S=await(await fetch(`${G}/api.php?module=shipping_companies&action=getAll`)).json();S.success?t((S.data||[]).map(O=>({...O}))):t([])}catch(C){console.error(C),t([])}finally{v(!1)}},j=async()=>{if(!m.trim()){await T.fire({icon:"warning",title:"",text:"   "});return}try{v(!0);const C={name:m.trim(),phones:f.trim()},O=await(await fetch(`${G}/api.php?module=shipping_companies&action=create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(u(""),x(""),o("none"),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:"   ",showConfirmButton:!1,timer:1800})):await T.fire({icon:"error",title:"",text:O.message||"   "})}catch(C){console.error(C),alert(" ")}finally{v(!1)}},_=async()=>{if(!d||!d.id){await T.fire({icon:"warning",title:"",text:"  "});return}if(!m.trim()){await T.fire({icon:"warning",title:"",text:"   "});return}try{v(!0);const C={id:d.id,name:m.trim(),phones:f.trim()},O=await(await fetch(`${G}/api.php?module=shipping_companies&action=update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).json();O.success?(h(null),o("none"),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:" ",showConfirmButton:!1,timer:1500})):await T.fire({icon:"error",title:"",text:O.message||" "})}catch(C){console.error(C),alert(" ")}finally{v(!1)}},k=async C=>{if(C)try{v(!0);const O=await(await fetch(`${G}/api.php?module=shipping_companies&action=delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:C})})).json();O.success?(d&&d.id===C&&h(null),N(),T.fire({toast:!0,position:"top-end",icon:"success",title:" ",showConfirmButton:!1,timer:1500})):await T.fire({icon:"error",title:"",text:O.message||" "})}catch(S){console.error(S),alert(" ")}finally{v(!1)}},E=e.filter(C=>{const S=a.trim().toLowerCase();return S?(C.name||"").toString().toLowerCase().includes(S)||(C.phones||"").toString().toLowerCase().includes(S):!0});return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold",children:" "}),r.jsx("p",{className:"text-sm text-slate-500",children:"      ."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{value:a,onChange:C=>n(C.target.value),placeholder:"     ",className:"pl-10 pr-4 py-2 w-72 rounded-lg border focus:ring-2 focus:ring-blue-200"}),r.jsx(fs,{className:"w-5 h-5 absolute left-3 top-2.5 text-slate-400"})]}),r.jsxs("button",{onClick:()=>{o("add"),h(null),u(""),x("")},className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow",children:[r.jsx(Or,{className:"w-4 h-4"}),"   "]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[!b&&E.length===0&&r.jsx("div",{className:"col-span-full p-8 text-center text-slate-500 border rounded-lg",children:"    ."}),b?Array.from({length:6}).map((C,S)=>r.jsx("div",{className:"p-4 border rounded-lg animate-pulse bg-white"},S)):E.map(C=>r.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-semibold",children:C.name}),r.jsx("div",{className:"text-sm text-slate-600 mt-2 whitespace-pre-wrap",children:C.phones||"-"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsx("div",{className:"text-xs text-slate-400",children:C.created_at?new Date(C.created_at).toLocaleString():"-"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{title:"",onClick:()=>{h(C),o("view")},className:"p-2 rounded hover:bg-slate-100",children:r.jsx(ha,{className:"w-4 h-4 text-slate-600"})}),r.jsx("button",{title:"",onClick:()=>{h(C),u(C.name||""),x(C.phones||""),o("edit")},className:"p-2 rounded hover:bg-amber-100",children:r.jsx(ma,{className:"w-4 h-4 text-amber-600"})}),r.jsx("button",{title:"",onClick:async()=>{(await T.fire({title:" ",text:"      ",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed&&k(C.id)},className:"p-2 rounded hover:bg-rose-100",children:r.jsx(Gr,{className:"w-4 h-4 text-rose-600"})})]})]})]},C.id))]}),i!=="none"&&r.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[i==="add"&&r.jsx("h3",{className:"text-lg font-semibold",children:"   "}),i==="edit"&&r.jsx("h3",{className:"text-lg font-semibold",children:"  "}),i==="view"&&r.jsx("h3",{className:"text-lg font-semibold",children:" "}),r.jsx("button",{onClick:()=>{o("none"),h(null)},className:"p-1 rounded hover:bg-slate-100",children:r.jsx(It,{className:"w-4 h-4 text-slate-600"})})]}),r.jsx("div",{className:"mt-4",children:i==="view"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",(d==null?void 0:d.name)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",(d==null?void 0:d.phones)||"-"]}),r.jsxs("div",{children:[r.jsx("strong",{children:" :"})," ",d!=null&&d.created_at?new Date(d.created_at).toLocaleString():"-"]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{value:m,onChange:C=>u(C.target.value),placeholder:" ",className:"w-full p-2 border rounded"}),r.jsx("input",{value:f,onChange:C=>x(C.target.value),placeholder:"   ",className:"w-full p-2 border rounded"})]})}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>{o("none"),h(null)},className:"px-3 py-1 bg-gray-200 rounded",children:""}),i==="add"&&r.jsx("button",{onClick:j,disabled:b,className:"px-4 py-1 bg-green-600 text-white rounded",children:""}),i==="edit"&&r.jsx("button",{onClick:_,disabled:b,className:"px-4 py-1 bg-amber-600 text-white rounded",children:""})]})]})})]})},sse=()=>{if(!(typeof window>"u"))try{Object.entries({nexus_installed:"Dragon_installed",nexus_company_name:"Dragon_company_name",nexus_company_phone:"Dragon_company_phone",nexus_company_address:"Dragon_company_address",nexus_company_terms:"Dragon_company_terms",nexus_company_logo:"Dragon_company_logo",nexus_tax_rate:"Dragon_tax_rate",nexus_currency:"Dragon_currency",nexus_auto_backup:"Dragon_auto_backup",nexus_backup_freq:"Dragon_backup_freq",nexus_backup_email:"Dragon_backup_email",nexus_backup_email_verified:"Dragon_backup_email_verified",nexus_activation:"Dragon_activation",nexus_user:"Dragon_user",nexus_theme:"Dragon_theme",nexus_notif_read_ids:"Dragon_notif_read_ids"}).forEach(([a,n])=>{const i=localStorage.getItem(a);i!==null&&localStorage.getItem(n)===null&&localStorage.setItem(n,i),i!==null&&localStorage.removeItem(a)}),Object.entries({nexus_user_permissions:"Dragon_user_permissions"}).forEach(([a,n])=>{const i=sessionStorage.getItem(a);i!==null&&sessionStorage.getItem(n)===null&&sessionStorage.setItem(n,i),i!==null&&sessionStorage.removeItem(a)})}catch{}},lse=()=>{const[e,t]=g.useState("loading"),[a,n]=g.useState(""),[i,o]=g.useState(!1),[d,h]=g.useState("dashboard"),[m,u]=g.useState(""),[f,x]=g.useState([]),b=(k,E,C)=>C===!0||C==="true"?"":(E||"").toLowerCase()==="blocked"?"":(k||"").toLowerCase()==="trial"?"":k?"":" ";g.useEffect(()=>{sse(),(async()=>{if(!await w$()){n("Cannot connect to the server. Please ensure XAMPP is running."),t("error");return}try{const S=await(await fetch(`${G}/verify.php`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();S.status==="not_installed"?t("not_installed"):S.status==="activation_blocked"||S.status==="activation_expired"?(n(S.message||"  ."),t("error")):S.status==="invalid_device"||S.status==="tampered"?(n(S.message||"   ."),t("error")):S.status==="ok"?(localStorage.setItem("Dragon_company_name",S.settings.company_name||""),localStorage.setItem("Dragon_company_logo",S.settings.company_logo||""),S.activation&&localStorage.setItem("Dragon_activation",JSON.stringify({status:b(S.activation.type,S.activation.account_status,S.activation.is_expired),expiry:S.activation.expiry||" ",account_status:S.activation.account_status||"Active",is_expired:S.activation.is_expired||"false",last_check:S.activation.last_check||""})),o(S.is_logged_in),S.is_logged_in&&localStorage.setItem("Dragon_user",JSON.stringify(S.user)),t("ready")):(n(S.message||"An unknown verification error occurred."),t("error"))}catch(C){console.error("Verification error:",C),n("Cannot connect to the server. Please ensure XAMPP is running."),t("error")}})();try{if(window.location.hash){const E=window.location.pathname+window.location.search;window.history.replaceState(null,"",E)}}catch{}},[]),g.useEffect(()=>{i&&(async()=>{try{const E=JSON.parse(localStorage.getItem("Dragon_user")||"null");if(!E||!E.id){x([]);return}const S=await(await fetch(`${G}/api.php?module=permissions&action=getUserPages&user_id=${E.id}`)).json();S&&S.success&&Array.isArray(S.data)?x(S.data):x([])}catch{x([])}})()},[i]);const v=k=>{const E=k.toString().toLowerCase(),C=f.find(S=>(S.page_slug||"").toString().toLowerCase()===E);return C?!!C.can_access:!0},N=(k,E="")=>{console.debug("App_new: setActiveView ->",k,E),h(k),u(E)},j=()=>{localStorage.removeItem("Dragon_user"),o(!1),h("dashboard")};if(g.useEffect(()=>{const k=E=>{try{const C=E,S=(C==null?void 0:C.detail)||{},O=String((S==null?void 0:S.slug)||"").trim(),I=String((S==null?void 0:S.subSlug)||"").trim();if(!O)return;N(O,I)}catch{}};return window.addEventListener("nexus:navigate",k),()=>window.removeEventListener("nexus:navigate",k)},[]),g.useEffect(()=>{if(!i)return;const k=(localStorage.getItem("Dragon_delivery_method")||"reps").toString(),E=["orders","sales","reps","shipping-companies"],C=["pos","reps"],S=["pos","shipping-companies"];if(k==="direct"&&E.includes(d)){N("pos","");return}if(k==="shipping"&&C.includes(d)){N("orders","new-order");return}if(k==="reps"&&S.includes(d)){N("orders","new-order");return}},[d,i]),e==="loading")return r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:r.jsx("div",{className:"w-16 h-16 border-8 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(e==="not_installed")return r.jsx(jae,{onComplete:()=>t("ready")});if(e==="error")return r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4 text-center",dir:"rtl",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 p-12 rounded-3xl shadow-lg max-w-lg",children:[r.jsx("h1",{className:"text-2xl font-bold text-rose-600 mb-4",children:"  "}),r.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:a}),r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 mb-4 text-right",children:[r.jsx("h2",{className:"text-sm font-bold text-amber-800 dark:text-amber-400 mb-2",children:"  :"}),r.jsxs("ul",{className:"text-xs text-amber-700 dark:text-amber-500 space-y-1",children:[r.jsx("li",{children:"    Apache  MySQL  XAMPP"}),r.jsx("li",{children:"        "}),r.jsx("li",{children:"     80 "})]})]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl transition-colors",children:" "}),r.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"         ."})]})});if(!i)return r.jsx(vae,{onLogin:()=>o(!0)});const _=()=>{switch(d){case"dashboard":return v("dashboard")?r.jsx(tA,{}):r.jsx(tse,{});case"crm":return r.jsx(kae,{initialView:m});case"srm":return r.jsx(Sae,{initialView:m});case"inventory":return r.jsx(Tae,{initialView:m});case"orders":return r.jsx(Oae,{initialView:m});case"pos":return r.jsx(ase,{});case"reps":return r.jsx(Kae,{initialView:m});case"shipping-companies":return r.jsx(nse,{});case"sales":switch(m){case"sales-daily":return r.jsx(aA,{});case"sales-update-status":return r.jsx(tne,{});case"sales-report":return r.jsx(rne,{});default:return r.jsx(aA,{})}case"sales-offices":return r.jsx(ese,{});case"hrm":return r.jsx(Hae,{initialView:m});case"workers":return r.jsx(Yae,{initialView:m});case"finance":return r.jsx(qae,{initialView:m});case"admin":return r.jsx(Uae,{initialView:m});case"settings":return r.jsx(Gae,{});case"reports":return r.jsx(Zae,{initialView:m});case"attendance":return r.jsx(gI,{initialTab:m});case"barcode-print":return r.jsx(Qne,{});case"profile":return r.jsx(ane,{});case"factory-stock":switch(m){case"fabrics":return r.jsx(lO,{});case"accessories":return r.jsx(Hne,{});case"products":return r.jsx(Yne,{});default:return r.jsx(lO,{})}case"factory-management":switch(m){case"production-stages":return r.jsx(iO,{});case"colors":return r.jsx(Kne,{});case"sizes":return r.jsx(Vne,{});default:return r.jsx(iO,{})}case"manufacturing-management":switch(m){case"cutting-stage":return r.jsx(oO,{});case"manufacturing-stages":return r.jsx(Xne,{});case"assembly":return r.jsx(Wne,{});default:return r.jsx(oO,{})}case"dispatch":return r.jsx(Jne,{});case"factory-receiving":return r.jsx(Zne,{});default:return r.jsx(tA,{})}};return r.jsx(_$,{children:r.jsx(p8,{activeSlug:d,activeSubSlug:m,setActiveView:N,onLogout:j,children:_()})})};if(typeof window<"u"&&window.fetch){const e=window.fetch.bind(window);window.fetch=async(t,a)=>{const n=Object.assign({},a||{},{credentials:a&&a.credentials||"include"}),i=await e(t,n);try{const o=i.headers.get&&i.headers.get("content-type");if(o&&o.indexOf("application/json")!==-1){const d=await i.clone().text();try{JSON.parse(d)}catch{console.error("[API JSON PARSE ERROR] URL:",t,"RAW RESPONSE:",d)}}}catch{}return i}}const CI=document.getElementById("root");if(!CI)throw new Error("Could not find root element to mount to");const ise=HD.createRoot(CI);ise.render(r.jsx(_c.StrictMode,{children:r.jsx(lse,{})}));
